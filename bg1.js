var Tn=Object.defineProperty,Cn=Object.defineProperties;var In=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Ke=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var Ve=(t,e,n)=>e in t?Tn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E=(t,e)=>{for(var n in e||(e={}))Ke.call(e,n)&&Ve(t,n,e[n]);if(de)for(var n of de(e))qe.call(e,n)&&Ve(t,n,e[n]);return t},O=(t,e)=>Cn(t,In(e));var W=(t,e)=>{var n={};for(var i in t)Ke.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&de)for(var i of de(t))e.indexOf(i)<0&&qe.call(t,i)&&(n[i]=t[i]);return n};var oe,g,Ot,te,$t,Ze,Mt,ge={},Bt=[],Rn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Y(t,e){for(var n in e)t[n]=e[n];return t}function Gt(t){var e=t.parentNode;e&&e.removeChild(t)}function s(t,e,n){var i,r,o,a={};for(o in e)o=="key"?i=e[o]:o=="ref"?r=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?oe.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)a[o]===void 0&&(a[o]=t.defaultProps[o]);return ne(t,a,i,r,null)}function ne(t,e,n,i,r){var o={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r==null?++Ot:r};return r==null&&g.vnode!=null&&g.vnode(o),o}function k(t){return t.children}function J(t,e){this.props=t,this.context=e}function X(t,e){if(e==null)return t.__?X(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?X(t):null}function Ut(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ut(t)}}function Re(t){(!t.__d&&(t.__d=!0)&&te.push(t)&&!ye.__r++||Ze!==g.debounceRendering)&&((Ze=g.debounceRendering)||$t)(ye)}function ye(){for(var t;ye.__r=te.length;)t=te.sort(function(e,n){return e.__v.__b-n.__v.__b}),te=[],t.some(function(e){var n,i,r,o,a,c;e.__d&&(a=(o=(n=e).__v).__e,(c=n.__P)&&(i=[],(r=Y({},o)).__v=o.__v+1,Le(c,o,r,n.__n,c.ownerSVGElement!==void 0,o.__h!=null?[a]:null,i,a==null?X(o):a,o.__h),jt(i,o),o.__e!=a&&Ut(o)))})}function Wt(t,e,n,i,r,o,a,c,d,u){var l,f,m,_,p,A,x,h=i&&i.__k||Bt,y=h.length;for(n.__k=[],l=0;l<e.length;l++)if((_=n.__k[l]=(_=e[l])==null||typeof _=="boolean"?null:typeof _=="string"||typeof _=="number"||typeof _=="bigint"?ne(null,_,null,null,_):Array.isArray(_)?ne(k,{children:_},null,null,null):_.__b>0?ne(_.type,_.props,_.key,null,_.__v):_)!=null){if(_.__=n,_.__b=n.__b+1,(m=h[l])===null||m&&_.key==m.key&&_.type===m.type)h[l]=void 0;else for(f=0;f<y;f++){if((m=h[f])&&_.key==m.key&&_.type===m.type){h[f]=void 0;break}m=null}Le(t,_,m=m||ge,r,o,a,c,d,u),p=_.__e,(f=_.ref)&&m.ref!=f&&(x||(x=[]),m.ref&&x.push(m.ref,null,_),x.push(f,_.__c||p,_)),p!=null?(A==null&&(A=p),typeof _.type=="function"&&_.__k===m.__k?_.__d=d=Ft(_,d,t):d=Ht(t,_,m,h,p,d),typeof n.type=="function"&&(n.__d=d)):d&&m.__e==d&&d.parentNode!=t&&(d=X(m))}for(n.__e=A,l=y;l--;)h[l]!=null&&(typeof n.type=="function"&&h[l].__e!=null&&h[l].__e==n.__d&&(n.__d=X(i,l+1)),Yt(h[l],h[l]));if(x)for(l=0;l<x.length;l++)zt(x[l],x[++l],x[++l])}function Ft(t,e,n){for(var i,r=t.__k,o=0;r&&o<r.length;o++)(i=r[o])&&(i.__=t,e=typeof i.type=="function"?Ft(i,e,n):Ht(n,i,i,r,i.__e,e));return e}function Q(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){Q(n,e)}):e.push(t)),e}function Ht(t,e,n,i,r,o){var a,c,d;if(e.__d!==void 0)a=e.__d,e.__d=void 0;else if(n==null||r!=o||r.parentNode==null)e:if(o==null||o.parentNode!==t)t.appendChild(r),a=null;else{for(c=o,d=0;(c=c.nextSibling)&&d<i.length;d+=2)if(c==r)break e;t.insertBefore(r,o),a=o}return a!==void 0?a:r.nextSibling}function Pn(t,e,n,i,r){var o;for(o in n)o==="children"||o==="key"||o in e||ve(t,o,null,n[o],i);for(o in e)r&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||n[o]===e[o]||ve(t,o,e[o],n[o],i)}function Xe(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=n==null?"":typeof n!="number"||Rn.test(e)?n:n+"px"}function ve(t,e,n,i,r){var o;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||Xe(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||Xe(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?i||t.addEventListener(e,o?tt:et,o):t.removeEventListener(e,o?tt:et,o);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n==null?"":n;break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,n):t.removeAttribute(e))}}function et(t){this.l[t.type+!1](g.event?g.event(t):t)}function tt(t){this.l[t.type+!0](g.event?g.event(t):t)}function Le(t,e,n,i,r,o,a,c,d){var u,l,f,m,_,p,A,x,h,y,I,R,S,b=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(d=n.__h,c=e.__e=n.__e,e.__h=null,o=[c]),(u=g.__b)&&u(e);try{e:if(typeof b=="function"){if(x=e.props,h=(u=b.contextType)&&i[u.__c],y=u?h?h.props.value:u.__:i,n.__c?A=(l=e.__c=n.__c).__=l.__E:("prototype"in b&&b.prototype.render?e.__c=l=new b(x,y):(e.__c=l=new J(x,y),l.constructor=b,l.render=Dn),h&&h.sub(l),l.props=x,l.state||(l.state={}),l.context=y,l.__n=i,f=l.__d=!0,l.__h=[]),l.__s==null&&(l.__s=l.state),b.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Y({},l.__s)),Y(l.__s,b.getDerivedStateFromProps(x,l.__s))),m=l.props,_=l.state,f)b.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(b.getDerivedStateFromProps==null&&x!==m&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(x,y),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(x,l.__s,y)===!1||e.__v===n.__v){l.props=x,l.state=l.__s,e.__v!==n.__v&&(l.__d=!1),l.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(C){C&&(C.__=e)}),l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(x,l.__s,y),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(m,_,p)})}if(l.context=y,l.props=x,l.__v=e,l.__P=t,I=g.__r,R=0,"prototype"in b&&b.prototype.render)l.state=l.__s,l.__d=!1,I&&I(e),u=l.render(l.props,l.state,l.context);else do l.__d=!1,I&&I(e),u=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++R<25);l.state=l.__s,l.getChildContext!=null&&(i=Y(Y({},i),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(p=l.getSnapshotBeforeUpdate(m,_)),S=u!=null&&u.type===k&&u.key==null?u.props.children:u,Wt(t,Array.isArray(S)?S:[S],e,n,i,r,o,a,c,d),l.base=e.__e,e.__h=null,l.__h.length&&a.push(l),A&&(l.__E=l.__=null),l.__e=!1}else o==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=An(n.__e,e,n,i,r,o,a,d);(u=g.diffed)&&u(e)}catch(C){e.__v=null,(d||o!=null)&&(e.__e=c,e.__h=!!d,o[o.indexOf(c)]=null),g.__e(C,e,n)}}function jt(t,e){g.__c&&g.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(i){i.call(n)})}catch(i){g.__e(i,n.__v)}})}function An(t,e,n,i,r,o,a,c){var d,u,l,f=n.props,m=e.props,_=e.type,p=0;if(_==="svg"&&(r=!0),o!=null){for(;p<o.length;p++)if((d=o[p])&&"setAttribute"in d==!!_&&(_?d.localName===_:d.nodeType===3)){t=d,o[p]=null;break}}if(t==null){if(_===null)return document.createTextNode(m);t=r?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,m.is&&m),o=null,c=!1}if(_===null)f===m||c&&t.data===m||(t.data=m);else{if(o=o&&oe.call(t.childNodes),u=(f=n.props||ge).dangerouslySetInnerHTML,l=m.dangerouslySetInnerHTML,!c){if(o!=null)for(f={},p=0;p<t.attributes.length;p++)f[t.attributes[p].name]=t.attributes[p].value;(l||u)&&(l&&(u&&l.__html==u.__html||l.__html===t.innerHTML)||(t.innerHTML=l&&l.__html||""))}if(Pn(t,m,f,r,c),l)e.__k=[];else if(p=e.props.children,Wt(t,Array.isArray(p)?p:[p],e,n,i,r&&_!=="foreignObject",o,a,o?o[0]:n.__k&&X(n,0),c),o!=null)for(p=o.length;p--;)o[p]!=null&&Gt(o[p]);c||("value"in m&&(p=m.value)!==void 0&&(p!==t.value||_==="progress"&&!p||_==="option"&&p!==f.value)&&ve(t,"value",p,f.value,!1),"checked"in m&&(p=m.checked)!==void 0&&p!==t.checked&&ve(t,"checked",p,f.checked,!1))}return t}function zt(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(i){g.__e(i,n)}}function Yt(t,e,n){var i,r;if(g.unmount&&g.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||zt(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){g.__e(o,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&Yt(i[r],e,typeof t.type!="function");n||t.__e==null||Gt(t.__e),t.__e=t.__d=void 0}function Dn(t,e,n){return this.constructor(t,n)}function Jt(t,e,n){var i,r,o;g.__&&g.__(t,e),r=(i=typeof n=="function")?null:n&&n.__k||e.__k,o=[],Le(e,t=(!i&&n||e).__k=s(k,null,[t]),r||ge,ge,e.ownerSVGElement!==void 0,!i&&n?[n]:r?null:e.firstChild?oe.call(e.childNodes):null,o,!i&&n?n:r?r.__e:e.firstChild,i),jt(o,t)}function Ln(t,e,n){var i,r,o,a=Y({},t.props);for(o in e)o=="key"?i=e[o]:o=="ref"?r=e[o]:a[o]=e[o];return arguments.length>2&&(a.children=arguments.length>3?oe.call(arguments,2):n),ne(t.type,a,i||t.key,r||t.ref,null)}function we(t,e){var n={__c:e="__cC"+Mt++,__:t,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,o;return this.getChildContext||(r=[],(o={})[e]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&r.some(Re)},this.sub=function(a){r.push(a);var c=a.componentWillUnmount;a.componentWillUnmount=function(){r.splice(r.indexOf(a),1),c&&c.call(a)}}),i.children}};return n.Provider.__=n.Consumer.contextType=n}oe=Bt.slice,g={__e:function(t,e,n,i){for(var r,o,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(t)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),a=r.__d),a)return r.__E=r}catch(c){t=c}throw t}},Ot=0,J.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Y({},this.state),typeof t=="function"&&(t=t(Y({},n),this.props)),t&&Y(n,t),t!=null&&this.__v&&(e&&this.__h.push(e),Re(this))},J.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Re(this))},J.prototype.render=k,te=[],$t=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ye.__r=0,Mt=0;var ee,$,Ee,nt,ie=0,Qt=[],it=g.__b,st=g.__r,ot=g.diffed,rt=g.__c,at=g.unmount;function re(t,e){g.__h&&g.__h($,t,ie||e),ie=0;var n=$.__H||($.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function w(t){return ie=1,On(Vt,t)}function On(t,e,n){var i=re(ee++,2);return i.t=t,i.__c||(i.__=[n?n(e):Vt(void 0,e),function(r){var o=i.t(i.__[0],r);i.__[0]!==o&&(i.__=[o,i.__[1]],i.__c.setState({}))}],i.__c=$),i.__}function L(t,e){var n=re(ee++,3);!g.__s&&$e(n.__H,e)&&(n.__=t,n.u=e,$.__H.__h.push(n))}function $n(t,e){var n=re(ee++,4);!g.__s&&$e(n.__H,e)&&(n.__=t,n.u=e,$.__h.push(n))}function se(t){return ie=5,Oe(function(){return{current:t}},[])}function Oe(t,e){var n=re(ee++,7);return $e(n.__H,e)?(n.o=t(),n.u=e,n.__h=t,n.o):n.__}function V(t,e){return ie=8,Oe(function(){return t},e)}function xe(t){var e=$.context[t.__c],n=re(ee++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub($)),e.props.value):t.__}function Mn(){for(var t;t=Qt.shift();)if(t.__P)try{t.__H.__h.forEach(me),t.__H.__h.forEach(Pe),t.__H.__h=[]}catch(e){t.__H.__h=[],g.__e(e,t.__v)}}g.__b=function(t){$=null,it&&it(t)},g.__r=function(t){st&&st(t),ee=0;var e=($=t.__c).__H;e&&(Ee===$?(e.__h=[],$.__h=[],e.__.forEach(function(n){n.o=n.u=void 0})):(e.__.forEach(function(n){n.u&&(n.__H=n.u),n.o&&(n.__=n.o),n.o=n.u=void 0}),e.__h.forEach(me),e.__h.forEach(Pe),e.__h=[])),Ee=$},g.diffed=function(t){ot&&ot(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(Qt.push(e)!==1&&nt===g.requestAnimationFrame||((nt=g.requestAnimationFrame)||function(n){var i,r=function(){clearTimeout(o),lt&&cancelAnimationFrame(i),setTimeout(n)},o=setTimeout(r,100);lt&&(i=requestAnimationFrame(r))})(Mn)),$=null,Ee=null},g.__c=function(t,e){e.some(function(n){try{n.__H&&n.__H.__.forEach(function(i){i.u&&(i.__H=i.u),i.o&&(i.__=i.o),i.o=i.u=void 0}),n.__h.forEach(me),n.__h=n.__h.filter(function(i){return!i.__||Pe(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],g.__e(i,n.__v)}}),rt&&rt(t,e)},g.unmount=function(t){at&&at(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{me(i)}catch(r){e=r}}),e&&g.__e(e,n.__v))};var lt=typeof requestAnimationFrame=="function";function me(t){var e=$,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),$=e}function Pe(t){var e=$;t.__c=t.__(),$=e}function $e(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}function Vt(t,e){return typeof e=="function"?e(t):e}function Bn(t,e){for(var n in e)t[n]=e[n];return t}function ct(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var i in e)if(i!=="__source"&&t[i]!==e[i])return!0;return!1}function ut(t){this.props=t}(ut.prototype=new J).isPureReactComponent=!0,ut.prototype.shouldComponentUpdate=function(t,e){return ct(this.props,t)||ct(this.state,e)};var dt=g.__b;g.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),dt&&dt(t)};var ft=function(t,e){return t==null?null:Q(Q(t).map(e))},Gn={map:ft,forEach:ft,count:function(t){return t?Q(t).length:0},only:function(t){var e=Q(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:Q},Un=g.__e;g.__e=function(t,e,n,i){if(t.then){for(var r,o=e;o=o.__;)if((r=o.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}Un(t,e,n,i)};var _t=g.unmount;function Se(){this.__u=0,this.t=null,this.__b=null}function Kt(t){var e=t.__.__c;return e&&e.__e&&e.__e(t)}function fe(){this.u=null,this.o=null}g.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),_t&&_t(t)},(Se.prototype=new J).__c=function(t,e){var n=e.__c,i=this;i.t==null&&(i.t=[]),i.t.push(n);var r=Kt(i.__v),o=!1,a=function(){o||(o=!0,n.__R=null,r?r(c):c())};n.__R=a;var c=function(){if(!--i.__u){if(i.state.__e){var u=i.state.__e;i.__v.__k[0]=function f(m,_,p){return m&&(m.__v=null,m.__k=m.__k&&m.__k.map(function(A){return f(A,_,p)}),m.__c&&m.__c.__P===_&&(m.__e&&p.insertBefore(m.__e,m.__d),m.__c.__e=!0,m.__c.__P=p)),m}(u,u.__c.__P,u.__c.__O)}var l;for(i.setState({__e:i.__b=null});l=i.t.pop();)l.forceUpdate()}},d=e.__h===!0;i.__u++||d||i.setState({__e:i.__b=i.__v.__k[0]}),t.then(a,a)},Se.prototype.componentWillUnmount=function(){this.t=[]},Se.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=function o(a,c,d){return a&&(a.__c&&a.__c.__H&&(a.__c.__H.__.forEach(function(u){typeof u.__c=="function"&&u.__c()}),a.__c.__H=null),(a=Bn({},a)).__c!=null&&(a.__c.__P===d&&(a.__c.__P=c),a.__c=null),a.__k=a.__k&&a.__k.map(function(u){return o(u,c,d)})),a}(this.__b,n,i.__O=i.__P)}this.__b=null}var r=e.__e&&s(k,null,t.fallback);return r&&(r.__h=null),[s(k,null,e.__e?null:t.children),r]};var mt=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};(fe.prototype=new J).__e=function(t){var e=this,n=Kt(e.__v),i=e.o.get(t);return i[0]++,function(r){var o=function(){e.props.revealOrder?(i.push(r),mt(e,t,i)):r()};n?n(o):o()}},fe.prototype.render=function(t){this.u=null,this.o=new Map;var e=Q(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},fe.prototype.componentDidUpdate=fe.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){mt(t,n,e)})};var qt=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,Wn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Fn=typeof document!="undefined",Hn=function(t){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};function jn(t,e,n){return e.__k==null&&(e.textContent=""),Jt(t,e),typeof n=="function"&&n(),t?t.__c:null}J.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(J.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var ht=g.event;function zn(){}function Yn(){return this.cancelBubble}function Jn(){return this.defaultPrevented}g.event=function(t){return ht&&(t=ht(t)),t.persist=zn,t.isPropagationStopped=Yn,t.isDefaultPrevented=Jn,t.nativeEvent=t};var pt={configurable:!0,get:function(){return this.class}},gt=g.vnode;g.vnode=function(t){var e=t.type,n=t.props,i=n;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var o in i={},n){var a=n[o];Fn&&o==="children"&&e==="noscript"||o==="value"&&"defaultValue"in n&&a==null||(o==="defaultValue"&&"value"in n&&n.value==null?o="value":o==="download"&&a===!0?a="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+e)&&!Hn(n.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():r&&Wn.test(o)?o=o.replace(/[A-Z0-9]/,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput/i.test(o)&&(o=o.toLowerCase(),i[o]&&(o="oninputCapture")),i[o]=a)}e=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Q(n.children).forEach(function(c){c.props.selected=i.value.indexOf(c.props.value)!=-1})),e=="select"&&i.defaultValue!=null&&(i.value=Q(n.children).forEach(function(c){c.props.selected=i.multiple?i.defaultValue.indexOf(c.props.value)!=-1:i.defaultValue==c.props.value})),t.props=i,n.class!=n.className&&(pt.enumerable="className"in n,n.className!=null&&(i.class=n.className),Object.defineProperty(i,"className",pt))}t.$$typeof=qt,gt&&gt(t)};var yt=g.__r;g.__r=function(t){yt&&yt(t),t.__c};function Zt(t){return!!t&&t.$$typeof===qt}function Qn(t){return Zt(t)?Ln.apply(null,arguments):t}function Vn(t){return!!t.__k&&(Jt(null,t),!0)}function Kn(t){return{render(e){jn(e,t)},unmount(){Vn(t)}}}let Xt="America/New_York";function qn(t){Xt=t}function U(t){t=new Date(t||Date.now());const e={},n="2-digit";return Intl.DateTimeFormat("en-US",{timeZone:Xt,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n}).formatToParts(t).forEach(i=>e[i.type]=i.value),{date:`${e.year}-${e.month}-${e.day}`,time:`${e.hour}:${e.minute}:${e.second}`}}function z(t){const e=t.split(":").slice(0,2).map(Number),n=e[0]>=12?"PM":"AM";return e[0]=e[0]%12||12,e.map(i=>String(i).padStart(2,"0")).join(":").replace(/^0/,"")+" "+n}function vt(t){const[e,n]=t.slice(0,19).split("T");return{date:e,time:n}}class Zn extends Error{constructor(e){super(`Auth data "${e}" missing or expired`),this.name="ReauthNeeded"}}class Xn{constructor(e,n=localStorage){this.storageKey=e,this.storage=n}getData(){try{const e=this.storage.getItem(this.storageKey);if(e){const{swid:n,accessToken:i,expires:r}=JSON.parse(e),o=U(new Date(r)),a=U();if(o.date>a.date||o.date===a.date&&o.time>a.time&&o.time>="17")return{swid:n,accessToken:i}}}catch(e){console.error(e)}throw new Zn(this.storageKey)}setData(e){this.storage.setItem(this.storageKey,JSON.stringify(e))}deleteData(){this.storage.removeItem(this.storageKey)}}const ei="modulepreload",bt={},ti="/bg1/",wt=function(e,n){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=`${ti}${i}`,i in bt)return;bt[i]=!0;const r=i.endsWith(".css"),o=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":ei,r||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),r)return new Promise((c,d)=>{a.addEventListener("load",c),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())},ni=8e3;async function be(t,e={}){const u=e,{params:n,data:i,timeout:r=ni}=u;e=W(u,["params","data","timeout"]),e.referrer||(e.referrer=""),e.credentials||(e.credentials="omit"),e.cache||(e.cache="no-store"),e.headers=E({"User-Agent":"Mozilla/5.0"},e.headers||{}),n&&Object.keys(n).length>0&&(t+="?"+Object.entries(n).filter(([,l])=>l!=="").map(l=>l.map(encodeURIComponent).join("=")).join("&")),i&&(e.method||(e.method="POST"),e.headers=O(E({},e.headers),{"Content-Type":"application/json"}),e.body=JSON.stringify(i));const a=new AbortController;e.signal=a.signal;const c=setTimeout(()=>a.abort(),r);let d;try{d=await fetch(t,e)}catch(l){return console.error(l),{status:0,data:null}}finally{clearTimeout(c)}return{status:d.status,data:(d.headers.get("Content-Type")||"").startsWith("application/json")?await d.json():{}}}const ii={48199:"Mr-Incredible",48200:"Mrs-Incredible",261227:"Nemo",339625:"Russell",339626:"Carl",364907:"Jack-Skellington",431014:"Princess-Tiana",431065:"Darth_Vader",15549505:"Rapunzel",15655408:"Default_SignedIn",15675686:"Crush",15831168:"Wall-E",16453979:"Merida",16726412:"Stormtrooper",16818199:"Violet",16869301:"Jack-Jack",17345357:"R2-D2",17345359:"C-3PO",17532220:"Bruce",17532224:"Green-Alien",17532227:"Kermit",17532228:"Sorcerer-Mickey",17577168:"Elsa",17577169:"Anna",17813977:"Olaf",17888784:"Yoda",18101167:"Captain-Mickey",18368743:"-Nick",18368747:"-Judy",18393706:"-Flash",18403761:"kion",18405224:"-Moana",18405236:"-Elena",19633995:"50th_Mickey",19633996:"50th_Minnie",90003819:"Alice",90003846:"Ariel",90003898:"Belle",90003967:"Buzz",90003976:"Captain-Hook",90004004:"Chesire-Cat",90004017:"Cinderella",90004068:"Daisy",90004076:"Dash",90004104:"Donald",90004228:"Goofy",90004260:"Hamm",90004328:"Princess-Jasmine",90004340:"Jiminy",90004395:"Lady",90004482:"Mickey-Mouse",90004486:"Minnie",90004537:"Mulan",90004605:"Peter-Pan",90004625:"Pluto",90004626:"Pocahontas",90004642:"Princess-Aurora",90004682:"Rex",90004772:"Snow-White",90004778:"Sparky",90004846:"TinkerBell",90004860:"Tramp",90004939:"Zero"},Me="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/90/90/75/dam/",si=Me+"wdpro-assets/avatars/180x180/RetAvatar_180x180_",oi=Me+"wdpro-assets/avatars/180x180/RetAvatar-180x180",ri=Me+"disney-world/50th-anniversary/avatars/RetAvatar_180x180_",ai={"-":oi,5:ri};function Te(t){const e=ii[t||""];if(!!e)return(ai[e[0]]||si)+e+".png"}function li(t){switch(t){case"./data/dlr.ts":return wt(()=>import("./dlr.js"),[]);case"./data/wdw.ts":return wt(()=>import("./wdw.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const Ae={"https://disneyworld.disney.go.com":"WDW","https://disneyland.disney.go.com":"DLR"},ci={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"};function ui(t){return t in Ae}class en extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}const _e=t=>t.split(";")[0];class Be{constructor(e){this.maxPartySize=12,this.onUnauthorized=()=>{},this.guestCache=new Map,this.listeners={bookingChange:new Set},this._primaryGuestId="",this.convertGuest=n=>{const l=n,{id:i,firstName:r,lastName:o,characterId:a}=l,c=W(l,["id","firstName","lastName","characterId"]),d=`${r} ${o}`.trim();if(!this.guestCache.has(i))switch(n.ineligibleReason){case"INVALID_PARK_ADMISSION":case"PARK_RESERVATION_NEEDED":case"GENIE_PLUS_NEEDED":n.primary&&this.cacheGuest(i,d,a);break;default:this.cacheGuest(i,d,a)}const u=Te(a);return O(E({},c),{id:i,name:d,avatarImageUrl:u})},this.origin=e.origin,this.authStore=e.authStore,this.data=e.data,this.bookingStack=new di}static async load(e){const n=Ae[e.origin].toLowerCase(),i=(await li(`./data/${n}.ts`)).default;return new Be(O(E({},e),{data:i}))}get resort(){return Ae[this.origin]}get parks(){return this.data.parks}async experiences(e){var c,d;await this.primaryGuestId();const n=await this.request({path:`/tipboard-vas/api/v1/parks/${encodeURIComponent(e.id)}/experiences`,params:{eligibilityGuestIds:[...this.guestCache.keys()].join(",")}}),i=(d=(((c=n.eligibility)==null?void 0:c.flexEligibilityWindows)||[]).sort((u,l)=>u.time.time.localeCompare(l.time.time))[0])==null?void 0:d.time.time,r=this.nextDropTime(e),o=(this.data.pdts[e.id]||[]).indexOf(r||""),a=1<<o;return{plus:n.availableExperiences.filter(u=>!!u.flex&&u.id in this.data.experiences).map(u=>{const _=this.data.experiences[u.id],{pdtMask:l=0}=_,f=W(_,["pdtMask"]);return O(E(E({},u),f),{drop:!!(a&l)})}),nextBookTime:i}}async guests(e){e||(e={experience:{id:"0"},park:{id:"0"}});const n=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:e.experience.id,parkId:e.park.id}});this._primaryGuestId=n.primaryGuestId;const i=n.ineligibleGuests.map(this.convertGuest),r=n.guests.map(this.convertGuest).filter(o=>!("ineligibleReason"in o)||i.push(o)&&!1);return i.sort((o,a)=>{const c=+!o.primary-+!a.primary||o.name.localeCompare(a.name);return o.eligibleAfter||a.eligibleAfter?(o.eligibleAfter||"99").localeCompare(a.eligibleAfter||"99")||c:o.ineligibleReason===a.ineligibleReason?c:o.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?-1:a.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?1:c}),{eligible:r,ineligible:i}}async primaryGuestId(e){return this._primaryGuestId||await this.guests(e),this._primaryGuestId}async offer({experience:e,park:n,guests:i}){const r=await this.request({path:"/ea-vas/api/v2/products/flex/offers",method:"POST",data:{guestIds:i.map(f=>f.id),ineligibleGuests:[],primaryGuestId:await this.primaryGuestId({experience:e,park:n}),parkId:n.id,experienceId:e.id,selectedTime:e.flex.nextAvailableTime},userId:!1}),{id:o,date:a,startTime:c,endTime:d,status:u,changeStatus:l}=r.offer;return{id:o,start:{date:a,time:c},end:{date:a,time:d},active:u==="ACTIVE",changed:l!=="NONE",guests:{eligible:(r.eligibleGuests||[]).map(this.convertGuest),ineligible:(r.ineligibleGuests||[]).map(this.convertGuest)}}}async cancelOffer(e){await this.request({path:`/ea-vas/api/v1/offers/${encodeURIComponent(e.id)}`,method:"DELETE",params:{productType:"FLEX"},userId:!1})}async book(e){const{singleExperienceDetails:{experienceId:n,parkId:i},entitlements:r,startDateTime:o,endDateTime:a}=await this.request({path:"/ea-vas/api/v1/products/flex/bookings",method:"POST",userId:!1,data:{offerId:e.id},key:"booking"});return this.bookings(),{experience:{id:n,name:this.data.experiences[n].name},park:this.data.parks.find(c=>c.id===i),start:vt(o),end:vt(a),cancellable:!0,guests:r.map(c=>{const d=this.guestCache.get(c.guestId);return{id:c.guestId,name:(d==null?void 0:d.name)||"",avatarImageUrl:Te(d==null?void 0:d.characterId),entitlementId:c.id}})}}async cancelBooking(e){const i=e.map(r=>r.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${i}`,method:"DELETE",userId:!1})}async bookings(){const{swid:e}=this.authStore.getData(),n=new Date(Date.now()),i=ci[this.resort],{items:r=[],assets:o={},profiles:a={}}=await this.request({path:`/plan/${i}/api/v1/itinerary-items/${e}`,params:{destination:this.resort,fields:"items,profiles,assets","item-types":"FASTPASS","guest-locators":e+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":U(n).date,"end-date":U(new Date(n.getTime()).setDate(n.getDate()+1)).date,"show-friends":"false"},userId:!1}),c=Object.fromEntries(this.parks.map(f=>[f.id,f])),d=U(new Date(n.getTime()).setMinutes(n.getMinutes()-15)),u=new Set(["FLEX","OTHER"]),l=r.filter(f=>f.type==="FASTPASS"&&u.has(f.kind)).filter(f=>(f.displayEndDate||"9999")>d.date||f.displayEndDate===d.date&&(f.displayEndTime||"24")>=d.time).map(f=>{const m=_e(f.facility),_=o[f.facility],{name:p}=this.data.experiences[m]||_,A=_e(_.location),x={experience:{id:m,name:p},park:c[A],start:{date:f.displayStartDate,time:f.displayStartTime},end:{date:f.displayEndDate,time:f.displayEndTime},cancellable:f.cancellable,guests:f.guests.map(h=>{const{name:y,avatarId:I}=a[h.id],R=_e(h.id);return E({id:R,entitlementId:h.entitlementId,name:`${y.firstName} ${y.lastName}`.trim(),avatarImageUrl:Te(I)},h.redemptionsRemaining!==void 0&&{redemptions:h.redemptionsRemaining})})};return f.multipleExperiences&&(x.experience={id:"",name:"Multiple Experiences"},x.choices=f.assets.filter(h=>!h.excluded&&!h.original).map(({content:h})=>{const y=_e(h),{name:I}=this.data.experiences[y]||o[h];return{id:y,name:I}}).sort((h,y)=>h.name.localeCompare(y.name))),x}).sort((f,m)=>((f.start.date||"0000-00-00")+(f.start.time||"")).localeCompare((m.start.date||"0000-00-00")+(m.start.time||"")));return this.bookingStack.update(l),l}isRebookable(e){return this.bookingStack.isRebookable(e)}nextDropTime(e){var i,r;const n=U().time.slice(0,5);return(r=(i=this.data.pdts)==null?void 0:i[e.id])==null?void 0:r.find(o=>o>=n)}logOut(){this.authStore.deleteData(),this.onUnauthorized()}cacheGuest(e,n,i){this.guestCache.set(e,{name:n,characterId:i})}async request(e){var d;const{swid:n,accessToken:i}=this.authStore.getData(),r=this.origin+e.path,o=E({},e.params);((d=e.userId)==null||d)&&(o.userId=n);const{status:a,data:c}=await be(r,{method:e.method||"GET",params:o,data:e.data,headers:{Authorization:`BEARER ${i}`,"x-user-id":n}});if(a===401)setTimeout(()=>this.logOut());else{const{key:u}=e;if(String(a)[0]==="2"&&(!u||c[u]))return u?c[u]:c}throw new en({status:a,data:c})}}const xt="bg1.genie.bookings";class di{constructor(e=!0){if(this.entitlementIds=[],this.mostRecent=new Map,!e)return;const{entitlementIds:n=[],mostRecent:i={}}=JSON.parse(localStorage.getItem(xt)||"{}");this.entitlementIds=n,this.mostRecent=new Map(Object.entries(i))}isRebookable(e){return e.guests.every(n=>this.mostRecent.get(n.id)===n.entitlementId)}update(e){const n=new Map,i=new Set(this.entitlementIds);this.entitlementIds=e.filter(({cancellable:r})=>r).map(r=>r.guests.map(({id:o,entitlementId:a})=>(this.entitlementIds.push(a),i.has(a)||n.set(o,n.has(o)?"":a),a))).flat(1),this.mostRecent=new Map([...this.mostRecent,...n]),n.size>0&&localStorage.setItem(xt,JSON.stringify({entitlementIds:this.entitlementIds,mostRecent:Object.fromEntries(this.mostRecent)}))}}const tn={"https://vqguest-svc-wdw.wdprapps.disney.com":"WDW","https://vqguest-svc.wdprapps.disney.com":"DLR"};function fi(t){return t in tn}const _i=t=>t.sort((e,n)=>+!e.isPrimaryGuest-+!n.isPrimaryGuest||+!e.isPreselected-+!n.isPreselected||e.name.localeCompare(n.name));class he extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}class mi{constructor(e){this.onUnauthorized=()=>{},this.origin=e.origin,this.authStore=e.authStore}get resort(){return tn[this.origin]}url(e){return`${this.origin}/application/v1/guest/${e}`}async getQueues(){return(await be(this.url("getQueues"))).data.queues.map(i=>{var r=i,{queueId:e}=r,n=W(r,["queueId"]);return O(E({},n),{id:e})})}async getQueue(e){const n=(await this.getQueues()).find(i=>i.id===e.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(e){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:e.id}});return _i(n.guests.map(c=>{var d=c,{guestId:i,firstName:r,lastName:o}=d,a=W(d,["guestId","firstName","lastName"]);return O(E({},a),{id:i,name:`${r} ${o}`.trim()})}))}async joinQueue(e,n){const i=n.map(a=>a.id),{status:r,data:o}=await this.post({resource:"joinQueue",data:{queueId:e.id,guestIds:i}});if(o.responseStatus==="OK"){const a=o.positions.find(c=>c.queueId===e.id&&c.guestIds.length>0&&i.some(d=>c.guestIds.includes(d)));if(!a)throw new he({status:r,data:o});return{boardingGroup:a.boardingGroup,conflicts:{},closed:!1}}else if(o.responseStatus==="INVALID_GUEST"||o.responseStatus==="CLOSED_QUEUE"){const a=o.responseStatus==="CLOSED_QUEUE",c=new Set,d={};for(const f of o.conflicts)for(const m of f.guestIds){const _=n.find(p=>p.id===m);!_||(d[_.id]=f.conflictType,c.add(m))}const u=n.filter(f=>!c.has(f.id));if(a||u.length===0)return{boardingGroup:null,conflicts:d,closed:a};const l=await this.joinQueue(e,u);return l.conflicts=E(E({},d),l.conflicts),l}else throw new he({status:r,data:o})}logOut(){this.authStore.deleteData(),this.onUnauthorized()}async post(e){const{status:n,data:i}=await be(this.url(e.resource),{method:"POST",headers:{Authorization:`BEARER ${this.authStore.getData().accessToken}`},data:e.data});if(n===401&&setTimeout(()=>this.logOut()),!n||n===401||n>=500)throw new he({status:n,data:i});return{status:n,data:i}}}const nn=we({resort:"WDW",onUnauthorized:()=>{},logOut:()=>null}),hi=nn.Provider,ke=()=>xe(nn),Ge={bg:"bg-blue-500",text:"text-blue-500"},sn=we(Ge),pi=sn.Provider,Z=()=>xe(sn),gi={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function B(t){const a=t,{type:e,className:n}=a,i=W(a,["type","className"]);let r=`${gi[e||"normal"]} ${n||""}`;const{bg:o}=Z();return r.includes(" bg-")||(r+=` ${o} text-white`),s("button",E({className:`${r} inline-flex items-center justify-center min-w-[36px] rounded-lg px-2 font-semibold disabled:opacity-50`},i))}function H({onClick:t,disabled:e,href:n,children:i}){return s("div",{className:"mb-20"},s("div",{className:"fixed bottom-0 left-0 w-full bg-white bg-opacity-75 text-center"},s("a",{href:n,className:"block max-w-2xl mx-auto px-3 pb-5"},s(B,{type:"full",onClick:t,disabled:e},i))))}function yi({title:t,children:e}){const{bg:n,text:i}=Z();function r(o){return Zt(o)?o.type===k?Gn.map(o.props.children,r):Qn(o,{className:`bg-[#ffffffe6] ${i} ${o.props.className||""}`}):o}return s("div",{className:`flex justify-end gap-x-2 gap-y-1 min-h-[52px] px-3 py-2 text-lg text-white ${n}`},s("h1",{className:"flex-1 self-center py-0.5 text-xl font-semibold overflow-hidden whitespace-nowrap"},t),r(e))}function ae(t){const o=t,{children:e,className:n}=o,i=W(o,["children","className"]),r=E({outer:"",inner:""},typeof n=="string"?{inner:n}:n);return r.outer.match(/\bz-/)||(r.outer+=" z-10"),s("div",E({className:`${r.outer} fixed inset-0`},i),s("div",{className:`${r.inner} max-w-2xl min-h-full mx-auto`},e))}function j(c){var d=c,{heading:t,buttons:e,className:n,theme:i,containerRef:r,children:o}=d,a=W(d,["heading","buttons","className","theme","containerRef","children"]);return s(pi,{value:i||Ge},s(ae,E({className:{outer:`bg-white text-black text-base ${n||""}`,inner:"flex flex-col max-w-2xl h-full"}},a),s(yi,{title:t},e),s("div",{ref:r,className:"flex-1 overflow-auto px-3 pb-3"},o)))}const vi="bg1.disclaimer.accepted",bi={bg:"bg-red-600",text:"text-red-600"};function wi(){const t=localStorage,e=vi,[n,i]=w(!!t.getItem(e));return L(()=>{n&&t.setItem(e,"1")},[n,t,e]),n?null:s(xi,{onAccept:()=>i(!0)})}function xi({onAccept:t}){return s(j,{heading:"Warning!",theme:bi},s("p",null,'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'),s(H,{onClick:t},"Accept"))}const ki="17e2767256f";function Ni(t){return"deferredUuid"in t&&t.deferredUuid!==void 0}class Ei{constructor(e,n,i,r=!1){this.iframe=e,this.resort=i,this.logging=r,this.handlers={},this.handshakeAcked=!1,this.onMessage=o=>{if(o.source!==this.iframe.contentWindow||o.data==="inner.loaded")return;const a=JSON.parse(o.data);this.logging&&console.log("Message:",a);const c=a.type==="message"?a.eventName:a.type,d=this.handlers[c],u=d?d("data"in a?a.data:null):void 0;Ni(a)&&this.send({type:"deferred",action:"resolve",deferredUuid:a.deferredUuid,data:u!=null?u:{}})},this.on("handshake",()=>{this.handshakeAcked||(this.handshakeAcked=!0,this.send({type:"handshakeAck"}),this.logging&&this.sendMessage("setLogLevel",{level:"log"}),this.sendMessage("workflow.execute",{name:"login"}))}),this.on("lightbox.hide",()=>this.open()),this.on("session.dateOfBirth.read",()=>this.open()),this.on("session.loggedin",({token:o})=>{n({swid:o.swid,accessToken:o.access_token,expires:new Date(o.exp)})})}open(){addEventListener("message",this.onMessage),this.iframe.src=this.authPageUrl,this.handshakeAcked=!1}close(){removeEventListener("message",this.onMessage)}on(e,n){this.handlers[e]=n}sendMessage(e,n){this.send({type:"message",eventName:e,data:n})}send(e){var n;(n=this.iframe.contentWindow)==null||n.postMessage(JSON.stringify(O(E({},e),{name:"lightbox-client-window"})),this.authPageUrl)}get authPageUrl(){return`https://cdn.registerdisney.go.com/v2/TPR-${this.resort}-LBSDK.IOS-PROD/en-US?include=l10n,config,html,js&buildId=${ki}`}}function Si({resort:t,onLogin:e}){const n=se(null);return L(()=>{if(!n.current)return;const i=new Ei(n.current,e,t);return i.open(),()=>i.close()},[t,e,n]),s("iframe",{title:"Disney Login Form",ref:n,className:"fixed top-0 left-0 w-full h-full border-0"})}function Ti({authStore:t,children:e}){const[n,i]=w("Blank"),r=wi(),o=ke();L(()=>{o.onUnauthorized=()=>i("LoginForm")},[o]),L(()=>{function c(){if(!(document.hidden||n==="LoginForm"))try{t.getData(),i("Client")}catch{return i("LoginForm")}}return c(),document.addEventListener("visibilitychange",c),()=>{document.removeEventListener("visibilitychange",c)}},[t,n]);const a={Blank:s("div",null),LoginForm:s(Si,{resort:o.resort,onLogin:c=>{t.setData(c),i("Client")}}),Client:e};return s(k,null,r||a[n])}const le=ke,on=we({current:null,begin:()=>null,end:()=>null}),Ci=on.Provider,ce=()=>xe(on);async function Ii(t={}){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(i=>{e(i)},i=>{n(i)},t)})}const Ri={maximumAge:15e3,timeout:2e3};function Pi(t){const[e,n]=w(),i=V(()=>{t(async()=>{try{const{coords:r}=await Ii(Ri);n([r.latitude,r.longitude])}catch{n(void 0)}})},[t]);return[e,i]}const Ai=3e3,Di={alert:"bg-yellow-200",error:"bg-red-200"};function Ne(){const[,t]=w(0),[e,n]=w(""),[i,r]=w("alert"),o=V((c,d)=>{n(c),r(d||"alert"),t(u=>(clearTimeout(u),c?self.setTimeout(()=>{n("")},Ai):u))},[]);return[s(Li,{message:e,type:i}),o]}function Li({message:t,type:e}){return t?s("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${Di[e]} text-gray-800`},t):null}function ue({children:t,className:e,title:n}){return e||(e=""),e.match(/\bw-\S+\s*/)||(e+=" w-4"),e.match(/\bh-\S+\s*/)||(e+=" h-auto"),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:e,role:"img"},n&&s("title",null,n),t)}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ue({className:t}){return s(ue,{className:t},s("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"}))}async function rn(t){return new Promise(e=>{setTimeout(e,t)})}function Oi(){const[t,e]=w(0),n=V(async(r,o=500)=>{e(c=>c+1);const a=rn(o);try{await r()}finally{await a,e(c=>c-1)}},[]);return[t>0?s($i,null):null,n]}function $i(){const{bg:t}=Z();return s(ae,{className:"flex items-center bg-white bg-opacity-75"},s("div",{className:"w-[50px] mx-auto"},s("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${t}`},s(Ue,{className:"animate-spin w-full text-white"}))))}function We(){const[t,e]=Oi(),n=!!t,[i,r]=Ne();return{loadData:V(async(c,d)=>{const u=E({error:"Unknown error occurred",request:"Network request failed"},d);r("");let l=()=>null;const f=new Promise(_=>{l=()=>_(null)});async function m(..._){await f,r(..._)}await e(async()=>{try{await c(m)}catch(_){if(_ instanceof en){const{status:p}=_.response;m(p in u?u[p]:u.request,"error")}else console.error(_),m(u.error,"error")}}),l()},[e,r]),loaderElem:s(k,null,i,t),isLoading:n}}/**
 * Arrow down icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Mi(t){return s(ue,E({},t),s("path",{d:"M8 15.5l7.5-7.5h-4.5v-8h-6v8h-4.5z"}))}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function an(t){return s(ue,E({},t),s("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"}))}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Bi(t){return s(ue,E({},t),s("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"}))}function ln(){const t=ke();return s(B,{type:"small",onClick:()=>t.logOut()},"Log Out")}function cn({heading:t,onClose:e,children:n}){return s(ae,{className:{outer:"bg-black bg-opacity-75",inner:"p-2 flex items-center justify-center h-full"},onClick:e},s("div",{className:"flex flex-col max-h-[90%] rounded-lg px-3 py-4 bg-white",onClick:i=>i.stopPropagation()},s("h2",{className:"mt-0"},t),s("div",{className:"flex-1 overflow-auto"},n),s("div",{className:"pt-4"},s(B,{type:"full",onClick:e},"Close"))))}const Gi="_SELECT_RADIO_BUTTON_";function kt(t){const x=t,{options:e,value:n,onChange:i}=x,r=W(x,["options","value","onChange"]),[o,a]=w(!1),[c,d]=w(0),u=se(null),l=se(null);$n(()=>{var S;if((S=e[0])!=null&&S.icon)return;const h=u.current,y=h==null?void 0:h.firstChild;if(!y)return;const I=y.nodeValue;if(!I)return;let R=0;for(const b of e)y.nodeValue=b.text,R=Math.max(h.offsetWidth,R);y.nodeValue=I,d(R)},[e]);const f=()=>{var h;return(h=l.current)==null?void 0:h.querySelector("input:checked")};L(()=>{var y;if(!o)return;(y=f())==null||y.focus();const h=I=>{var R;(R=l.current)!=null&&R.contains(I.target)||a(!1)};return addEventListener("focusin",h),()=>removeEventListener("focusin",h)},[o]);const m=()=>{const h=f();h&&i(h.value),a(!1)},{icon:_,text:p}=e.find(h=>h.value===n)||e[0];let A=!1;return s(k,null,s(B,O(E({},r),{onClick:()=>a(!0)}),_||s("span",{style:{minWidth:`${c}px`},ref:u},p),s(ue,{className:"w-2.5 ml-2"},s("path",{d:"m6.8273 12.401-5.6333-7.7812a1.0212 1.0212 117.05 0 1 0.82716-1.62l11.958-2e-7a1.0212 1.0212 62.952 0 1 0.82714 1.62l-1.6438 2.2705a79984 79984 125.9 0 0-2.3456 3.2401l-1.6437 2.2706a1.4479 1.4479 180 0 1-2.3456 4.4e-5z"}))),o&&s(ae,{className:{outer:"bg-black bg-opacity-75",inner:"flex items-center justify-center h-full"},onClick:h=>{var I;const y=h.target;if(!((I=l.current)!=null&&I.contains(y)))return a(!1);if(y.tagName==="INPUT"&&!A)return m();A=!1},onKeyDown:({key:h})=>{["Enter"," "].includes(h)?m():h.startsWith("Arrow")&&(A=!0)},"data-testid":"select-shade"},s("ul",{className:"overflow-auto min-w-[50%] max-h-[90%] rounded-lg bg-white text-black",ref:l},e.map(h=>s("li",{className:"border-t-2 first:border-0 border-gray-300",key:h.value},s("label",{className:"flex flex-row items-center px-4 py-3"},s("input",{type:"radio",name:Gi,defaultChecked:h.value===n,value:h.value,className:"w-4 h-4 mr-2.5"})," ",h.icon&&s("span",{"aria-hidden":"true",className:"mr-2.5"},h.icon)," ",h.text))))))}const un=we({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),Ui=un.Provider,Fe=()=>xe(un),Wi="https://bg1.joelface.com/ping",Nt="bg1.ping.date";async function dn(){const{date:t}=U();if(localStorage.getItem(Nt)===t)return;const{status:n}=await be(Wi,{method:"POST"});n===204&&localStorage.setItem(Nt,t)}function F({guests:t,selectable:e,conflicts:n}){return t.length===0?null:s("ul",{className:"mt-2"},t.map(i=>{var r;return s("li",{key:i.id,className:"px-3 py-1"},s("label",{className:"flex items-center"},e&&s("input",{type:"checkbox",checked:e.isSelected(i),onChange:()=>e.onToggle(i),className:"mr-3"}),s("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white"},i.avatarImageUrl?s("img",{src:i.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):s("span",{"aria-hidden":"true"},i.name[0])),s("span",{className:"leading-tight"},i.name,s("br",null),(n==null?void 0:n[i.id])&&s("span",{className:"text-xs font-semibold text-red-700 uppercase"},(r=n[i.id])==null?void 0:r.replace(/_/g," ")))))}))}function He({times:t}){return s("div",{className:"mt-4 text-lg"},"Arrive by:"," ",s("span",{className:"ml-0.5 font-semibold"},t.start.time?s("time",null,z(t.start.time)):"Park Open"," - ",t.end.time?s("time",null,z(t.end.time)):"Park Close"))}function Fi({booking:t,onClose:e}){const n=le(),[i,r]=w(new Set),{loadData:o,loaderElem:a}=We(),{guests:c}=t,d=i.size===0,u=i.size===c.length;function l(){o(async()=>{d||await n.cancelBooking([...i]),e(c.filter(f=>!i.has(f)))})}return s(j,{heading:"Your Lightning Lane",theme:t.park.theme},s("h2",null,t.experience.name),s("div",null,t.park.name),s(He,{times:t}),s("div",{className:"ml-3"},s("label",{className:"flex items-center py-4"},s("input",{type:"checkbox",checked:u,onChange:()=>r(new Set(u?[]:c))}),s("span",{className:"ml-3"},"Select All"))),d?null:s("div",{className:"mb-4"},s("h3",null,"Cancel These Guests"),s(F,{guests:c.filter(f=>i.has(f)),selectable:{isSelected:()=>!0,onToggle:f=>{const m=new Set(i);m.delete(f),r(m)}}})),u?null:s("div",null,s("h3",null,"Select Guests to Cancel"),s(F,{guests:c.filter(f=>!i.has(f)),selectable:{isSelected:()=>!1,onToggle:f=>r(new Set(i).add(f))}})),s(H,{onClick:l},d?"Back":"Cancel "+(u?"Reservation":"Guests")),a)}function fn({booking:t,onClose:e,isRebookable:n,isNew:i}){const r=ce(),[o,a]=w(t.guests),[c,d]=w(!1);return c?s(Fi,{booking:O(E({},t),{guests:o}),onClose:u=>{d(!1),u.length>0?a(u):e(u)}}):s(j,{heading:"Your Lightning Lane",theme:t.park.theme,buttons:n&&s(B,{onClick:()=>r.begin(t)},"Rebook")},s("h2",null,t.experience.name),s("div",null,t.park.name),s(He,{times:t}),t.choices&&s(k,null,s("p",null,"An experience you booked was temporarily unavailable during your return time. You may redeem this Lightning Lane at one of these replacement experiences:"),s("ul",{className:"list-disc mt-2 pl-8"},t.choices.map(u=>s("li",{key:u.id},u.name)))),s("div",{className:"flex mt-4"},s("h3",{className:"inline mt-0"},"Your Party"),t.cancellable&&s(B,{type:"small",onClick:()=>d(!0),className:"ml-3"},"Cancel")),s(F,{guests:o,conflicts:Object.fromEntries(o.filter(u=>u.redemptions!==void 0).map(u=>[u.id,`Redemptions left: ${u.redemptions}`]))}),s(H,{onClick:()=>e(o)},i?"Done":"Back"))}function _n({children:t}){return s("p",{className:"border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100"},t)}function mn(){const{ineligible:t}=Fe();return s(F,{guests:t,conflicts:Object.fromEntries(t.map(e=>[e.id,e.eligibleAfter?`TOO EARLY (${z(e.eligibleAfter)})`:e.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function je({buttonText:t,onSubmit:e}){const{eligible:n,ineligible:i,selected:r,setSelected:o}=Fe(),[a,c]=w(),[d,u]=Ne(),{maxPartySize:l}=le();return a?s(k,null,s("h3",null,"Choose Your Party"),s(F,{guests:n,selectable:{isSelected:m=>a.has(m),onToggle:m=>c(_=>{u(""),_=new Set(_);const p=_.has(m)?"delete":"add";return p==="add"&&_.size>=l?u(`Maximum party size: ${l}`):_[p](m),_})}}),i.length>0&&s(k,null,s("h3",null,"Ineligible Guests"),s(mn,null)),s(H,{disabled:a.size===0,onClick:()=>{o([...a]),c(void 0)}},"Confirm Party"),d):s(k,null,n.length>l&&r.length===l&&s(_n,null,"Party size restricted"),s("div",{className:"mt-4"},s("h3",{className:"inline mt-0"},"Your Party"),s("span",null,s(B,{type:"small",onClick:()=>c(new Set(r)),className:"ml-3"},"Edit"))),s(F,{guests:r}),s(H,{onClick:e},t))}function Hi({offer:t,onBook:e}){const n=ce();return s(k,null,n.current&&s(_n,null,"Rebooking resets the two hour timer"),s(He,{times:t}),t.changed&&s("div",{className:"text-sm"},s("strong",null,"Note:")," Return time has been changed"),s(je,{buttonText:`${n.current?"Rebook":"Book"} Lightning Lane`,onSubmit:e}))}const Et="https://widget.time.is/t.js";function ji(){if([...document.scripts].some(e=>e.src===Et))return;const t=document.createElement("script");t.src=Et,t.onload=hn,document.head.appendChild(t)}const pe={};function hn(){"time_is_widget"in self&&self.time_is_widget.init(pe)}function zi(t){ji(),pe[t]||(pe[t]={}),hn()}function pn(t,e){const n=document.getElementById(t);if(!n||n.firstElementChild)return e();n.textContent=U().time,setTimeout(()=>pn(t,e),100)}function Yi({id:t,onSync:e}){return L(()=>{zi(t),pn(t,e)},[t,e]),s("time",{id:t})}const Ji={WDW:"Orlando_z161",DLR:"Anaheim_z14e"},Qi=5e3;function gn({resort:t,time:e,label:n}){const i=Ji[t],[r,o]=w(null);L(()=>{setTimeout(()=>o(c=>c||!1),Qi)},[]);const a=V(()=>o(!0),[]);return s("table",{className:"mt-4 mx-auto text-gray-500"},s("tbody",null,s(St,{heading:n,time:s("time",null,e||"--:--:--")}),s(St,{heading:s("a",{href:`https://time.is/${i.split("_")[0]}`,id:"time_is_link",target:"_blank",rel:"noreferrer"},"Current time"),time:s(k,null,s(Yi,{id:i,onSync:a}),r===!1&&s("span",{className:"text-sm font-sans font-semibold text-red-600"}," ","(unsynced)"))})))}function St({heading:t,time:e}){return s("tr",null,s("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase"},t,":"),s("td",{className:"text-xl font-mono leading-tight"},"\uFEFF",e))}function Vi({startTime:t,onRefresh:e}){return s(k,null,t&&s(gn,{resort:"WDW",time:t,label:"Booking start"}),s("h3",{className:"mt-4"},"Not Available Yet"),t?s("p",null,"At"," ",s("time",{dateTime:t,className:"font-semibold"},z(t)),", tap the ",s("span",{className:"font-semibold"},"Check Availability")," ","button below to start booking this Lightning Lane."):s("p",null,"Sorry, but you can't make a Lightning Lane reservation for this attraction yet."),s(je,{buttonText:"Check Availability",onSubmit:e}))}function Ki({onClose:t}){const{ineligible:e}=Fe(),{eligibleAfter:n}=e[0]||{},i=ce();return s(k,null,n&&s("div",{className:"mt-4 border-2 border-green-600 rounded p-1 uppercase font-semibold text-center text-green-600 bg-green-100"},"Eligible at ",z(n)),i.current?s(k,null,s("h3",null,"Unable to Rebook"),s("p",null,"Your current reservation cannot be rebooked to this experience due to the following conflicts:")):s(k,null,s("h3",null,"No Eligible Guests"),s("p",null,"No one in your party is currently eligible for this Lightning Lane.")),s(mn,null),s(H,{onClick:t},"Back"))}function qi({onRefresh:t}){return s(k,null,s("h3",null,"No Guests Found"),s("p",null,"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."),s(H,{onClick:t},"Try Again"))}function Zi({onClose:t}){return s(k,null,s("h3",null,"No Reservations Available"),s("p",null,"There aren't enough reservation slots available for your entire party. If only part of your group wishes to go on this attraction, edit your party to check again. Otherwise, go back to the tip board and select another attraction."),s(je,{buttonText:"Back",onSubmit:t}))}function yn({booking:t,button:e,badge:n}){return s("div",{className:"flex items-center gap-x-3"},n,s("div",{className:"flex-1 min-w-0"},s("div",{className:"text-gray-500 text-sm font-semibold uppercase"},t.start.time?s("time",null,z(t.start.time)):s("span",null,"open")," - ",t.end.time?s("time",null,z(t.end.time)):s("span",null,"close")),s("div",{className:"text-lg font-semibold leading-tight truncate"},t.experience.name)),e&&s("div",null,e))}function vn(){const t=ce(),e=Z();return t.current?s("div",{className:`sticky top-0 -mx-3 pb-1 ${e.bg}`},s("div",{className:"pb-3 bg-white"},s("div",{className:`pb-1 ${e.bg} text-white text-sm font-semibold uppercase text-center`},"Rebooking"),s("div",{className:"mt-2 px-3"},s(yn,{booking:t.current,button:s(B,{type:"small",onClick:()=>t.end(!0)},"Keep")})))):null}function Xi({onClose:t}){const e=le(),n=Ge,[i,r]=w(),[o,a]=w(),[c,d]=w(!1);function u(f){!o||(r(m=>{if(!!m)return f.length>0?o.guests=f:m.splice(m.indexOf(o),1),m}),a(void 0))}L(()=>{d(!0),e.bookings().then(f=>r(f))},[e]);function l(){d(!1),setTimeout(t,300)}return o?s(fn,{booking:o,onClose:u,isRebookable:e.isRebookable(o)}):s(k,null,s(ae,{onClick:l,"data-testid":"panel-shade",className:{inner:"bg-black bg-opacity-75"}}),s(j,{heading:"Your Lightning Lanes",buttons:s(B,{onClick:l},"Close"),className:`top-auto ${c?"h-[60%]":"h-0"} duration-200 ease-linear`},i&&i.length>0?s("ul",null,(i||[]).map(f=>{var m;return s("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",key:(m=f.guests[0])==null?void 0:m.entitlementId},s(yn,{booking:f,button:s(B,{type:"small",onClick:()=>a(f)},"More"),badge:e.isRebookable(f)&&s("div",{title:"Rebookable",className:`w-2.5 h-2.5 rounded-full ${n.bg}`})}))})):s("div",{className:"mt-4 text-sm font-semibold text-center uppercase  text-gray-500"},i&&"No current reservations")))}function bn(i){var r=i,{onOpen:t,onClose:e}=r,n=W(r,["onOpen","onClose"]);const[o,a]=w(),c=t||a,d=e||(()=>a(void 0));return s(k,null,s(B,O(E({},n),{onClick:()=>c(s(Xi,{onClose:d})),title:"Your Lightning Lanes"}),s(an,null)),o)}function es({experience:t,park:e,onClose:n}){const i=le(),r=ce(),[o,a]=w(),[c,d]=w(!t.flex.available&&t.flex.enrollmentStartTime!==void 0),[u,l]=w(c?null:void 0),[f,m]=w(),{loadData:_,loaderElem:p}=We();async function A(){if(!u||!o)return;let S=null;await _(async()=>{const b=new Set(o.selected.map(T=>T.id));r.current&&await i.cancelBooking(r.current.guests.filter(T=>b.has(T.id)));try{S=await i.book(u)}finally{r.end()}const C=S.guests.filter(T=>!b.has(T.id));C.length>0&&(await i.cancelBooking(C),S.guests=S.guests.filter(T=>b.has(T.id))),dn()},{410:"Offer expired"}),S&&m(S)}function x(){_(async S=>{const{plus:b}=await i.experiences(e),C=b.find(T=>T.id===t.id);C!=null&&C.flex.available?(d(!1),l(void 0)):S("Reservations not open yet")})}function h(){u&&i.cancelOffer(u),n()}const y=V(()=>{_(async()=>{try{let S=await i.guests({experience:t,park:e});const b=r.current;if(b){const C=new Set(b.guests.map(G=>G.id)),T=[...S.eligible,...S.ineligible].filter(G=>C.has(G.id)&&!(G.ineligibleReason==="TOO_EARLY"||G.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"&&t.id===b.experience.id));S=T.length>0?{eligible:[],ineligible:T}:{eligible:b.guests,ineligible:[]}}a(O(E({},S),{selected:S.eligible.slice(0,i.maxPartySize),setSelected:C=>a(T=>{if(!T)return T;const G=new Set(T.selected);return l(N=>N===null||C.some(P=>!G.has(P))?void 0:N),O(E({},T),{selected:C})})}))}catch(S){throw a({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),S}})},[i,t,e,r,_]);L(()=>{o||y()},[o,y]);const I=V(S=>{!o||o.selected.length===0||_(async()=>{try{const b=await i.offer({experience:t,park:e,guests:o.selected}),{ineligible:C}=b.guests;if(C.length>0){const T=new Set(C.map(N=>N.id)),G=N=>!T.has(N.id);a(O(E({},o),{eligible:o.eligible.filter(G),ineligible:[...C,...o.ineligible],selected:o.selected.filter(G)}))}b.active&&(u&&(b.changed=!1),l(b))}catch(b){throw S||l(null),b}},{410:u?"No reservations available":""})},[i,t,e,o,u,_]);if(L(()=>{u===void 0&&I()},[u,I]),f)return s(fn,{booking:f,onClose:n,isNew:!0});const R=(o==null?void 0:o.eligible.length)===0&&(o==null?void 0:o.ineligible.length)===0;return s(j,{heading:"Lightning Lane",theme:e.theme,buttons:s(k,null,s(bn,null),o&&(c||u||R)&&s(B,{onClick:h},"Cancel"),!c&&u!==void 0&&s(B,{onClick:I,title:"Refresh Offer"},s(Ue,null)))},s(vn,null),s("h2",null,t.name),s("div",null,e.name),s(Ui,{value:o||{eligible:[],ineligible:[],selected:[],setSelected:()=>null}},(o==null?void 0:o.eligible.length)===0?R?s(qi,{onRefresh:y}):s(Ki,{onClose:n}):!o||u===void 0?s("div",null):c?s(Vi,{startTime:t.flex.enrollmentStartTime,onRefresh:x}):u===null?s(Zi,{onClose:n}):s(Hi,{offer:u,onBook:A})),p)}function ze({label:t,children:e}){return s("div",{className:"flex items-center flex-1 whitespace-nowrap"},s("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500"},t)," ",e)}function ts({experience:t,onClick:e}){const{flex:n}=t;return s(ze,{label:"Genie+"},s("span",null,s(B,{onClick:()=>e(t)},n.nextAvailableTime?z(n.nextAvailableTime):"none")))}function ns({experience:{type:t,standby:e}}){return e.displayNextShowTime||t==="ENTERTAINMENT"&&!e.waitTime?s(ss,{standby:e}):s(is,{standby:e})}const is=({standby:t})=>s(ze,{label:"Standby"},t.available?s(xn,{time:t.waitTime!==void 0?t.waitTime+" min":"now"}):s(kn,{text:"down"})),ss=({standby:t})=>s(ze,{label:s(k,null,"Next ",s("span",{className:"hidden xs:inline"},"Show"))},t.displayNextShowTime?s(xn,{time:t.displayNextShowTime}):s(kn,{text:"none"})),wn="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",xn=({time:t})=>s("span",{className:`${wn} border-gray-500 text-gray-500 bg-gray-100`},t),kn=({text:t})=>s("span",{className:`${wn} border-red-600 text-red-600 bg-red-100`},t);function os({bookTime:t,dropTime:e}){const n=Z();return!t&&!e?null:s("div",{className:`flex justify-center gap-x-10 -mx-3 px-3 pb-1 ${n.bg} text-white text-sm font-semibold uppercase text-center`},s(Tt,{label:"Book",time:t}),s(Tt,{label:"Drop",time:e}))}function Tt({label:t,time:e}){if(!e)return null;e=e.slice(0,5);const n=U().time.slice(0,5);return s("div",null,t,":"," ",s("time",{dateTime:e,className:"whitespace-nowrap"},e>n?z(e):"now"))}const rs=6e4,as=30,ls=60,Ct="bg1.genie.tipBoard.park",It="bg1.genie.tipBoard.starred",cs=(t,e)=>+e.lp-+t.lp,us=(t,e)=>(t.priority||1/0)-(e.priority||1/0),Ce=(t,e)=>(e.standby.waitTime||-1)-(t.standby.waitTime||-1),Ie=(t,e)=>(t.flex.nextAvailableTime||"").localeCompare(e.flex.nextAvailableTime||""),ds=(t,e)=>t.name.toLowerCase().localeCompare(e.name.toLowerCase()),Rt=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)),fs=(t,e,n)=>n?Rt(t.geo,n)-Rt(e.geo,n):0;function _s(t,e){const{n,s:i,e:r,w:o}=t.geo,[a,c]=e;return a<n&&a>i&&c<r&&c>o}function Pt(t){const[e,n]=t.split(":").map(Number);return e*60+n}const ms={priority:(t,e)=>cs(t,e)||us(t,e)||Ce(t,e)||Ie(t,e),standby:(t,e)=>Ce(t,e)||Ie(t,e),soonest:(t,e)=>Ie(t,e)||Ce(t,e),nearby:(t,e,n)=>fs(t,e,n),aToZ:()=>0},hs=[{value:"priority",text:"Priority"},{value:"nearby",text:"Nearby"},{value:"standby",text:"Standby"},{value:"soonest",text:"Soonest"},{value:"aToZ",text:"A to Z"}];function ps(){var Ye;const t=le(),{parks:e}=t,[n,i]=w(()=>{const{id:v=e[0].id,date:D=""}=JSON.parse(sessionStorage.getItem(Ct)||"{}")||{};return D===U().date&&e.find(K=>K.id===v)||e[0]}),[r,o]=w([]),[a,c]=w(),[d,u]=w(),l=()=>u(void 0),[f,m]=w("priority"),{loadData:_,loaderElem:p,isLoading:A}=We(),[,x]=w(0),[h,y]=w(()=>({current:null,begin:v=>{y(O(E({},h),{current:v})),i(v.park),l()},end:(v=!1)=>{y(D=>D.current?O(E({},D),{current:null}):D),v&&l()}})),I=se(null),[R,S]=w(()=>{let v=[];try{v=JSON.parse(localStorage.getItem(It)||"[]")}catch(D){console.error(D)}return new Set(v)}),[b,C]=Pi(_);L(()=>{f==="nearby"&&C()},[f,C]);const T=V((v=!0)=>{x(D=>!v&&Date.now()-D<rs?D:(_(async()=>{m(q=>(q==="nearby"&&C(),q));const{plus:K,nextBookTime:Nn}=await t.experiences(n);c(Nn);const En=Pt(U().time);o(K.map(q=>{const Je=q.standby.waitTime||0,Qe=q.flex.nextAvailableTime;if(!Qe)return O(E({},q),{lp:!1});const Sn=Pt(Qe)-En;return O(E({},q),{lp:Je>=as&&Sn<=Math.min(ls,(4-Math.trunc(q.priority||4))/3*Je)})}))}),Date.now()))},[t,n,_,C]);L(()=>{o([]),T()},[T]),L(()=>{if(A||d)return;const v=()=>{document.hidden||T(!1)};return document.addEventListener("visibilitychange",v),()=>{document.removeEventListener("visibilitychange",v)}},[d,T,A]),L(()=>{var v;(v=I.current)==null||v.scroll(0,0)},[n,f,h]),L(()=>{sessionStorage.setItem(Ct,JSON.stringify({id:n.id,date:U().date}))},[n]);function G(v){const K=v.currentTarget.getAttribute("data-id");!K||(R.has(K)?R.delete(K):R.add(K),localStorage.setItem(It,JSON.stringify([...R])),S(new Set([...R])))}const N=Oe(()=>e.map(v=>({value:v.id,icon:v.icon,text:v.name})),[e]),P=(Ye=r==null?void 0:r[0])==null?void 0:Ye.flex.enrollmentStartTime,M=t.nextDropTime(n);return s(Ci,{value:h},s(j,{heading:s(k,null,"G",s("span",{className:"hidden xs:inline"},"enie"),"+"),theme:n.theme,buttons:s(k,null,s(bn,{onOpen:u,onClose:l}),s(kt,{options:N,value:n.id,onChange:v=>i(e.find(D=>D.id===v)),title:"Park"}),s(kt,{options:hs,value:f,onChange:m,title:"Sort By"}),s(B,{onClick:T,title:"Refresh Tip Board"},s(Ue,null))),containerRef:I},s("div",{"aria-hidden":!!d},s(vn,null),s(os,{bookTime:P||a,dropTime:M}),s("ul",null,r.sort((v,D)=>+R.has(D.id)-+R.has(v.id)||+D.flex.available-+v.flex.available||ms[f==="nearby"&&!(b&&_s(n,b))?"priority":f](v,D,b)||ds(v,D)).map(v=>s("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",key:v.id+(R.has(v.id)?"*":"")},s("div",{className:"flex items-center gap-x-2 mt-2"},s(gs,{experience:v,starred:R,onClick:G}),s("h2",{className:"flex-1 mt-0 text-lg leading-tight truncate"},v.name),v.lp?s(At,{name:"Lightning Pick",icon:an,onClick:()=>u(s(ys,{onClose:l}))}):M&&v.drop?s(At,{name:"Upcoming Drop",icon:Mi,onClick:()=>u(s(vs,{dropTime:M,onClose:l}))}):null),v.flex.preexistingPlan&&s("div",{className:"mt-2 border-2 border-green-600 rounded p-1 text-sm uppercase font-semibold text-center text-green-600 bg-green-100"},"Lightning Lane Booked"),s("div",{className:"flex flex-wrap gap-1.5 mt-2"},s(ns,{experience:v}),s(ts,{experience:v,onClick:D=>u(s(es,{experience:D,park:n,onClose:()=>{l(),T(!1)}}))}))))),!A&&s("div",{className:"mt-12 text-center"},s(ln,null)),p)),d)}function At({name:t,icon:e,onClick:n}){const i=Z();return s("button",{title:`${t} (more info)`,className:`-mx-2 px-2 ${i.text}`,onClick:n},s(e,null))}function gs({experience:t,starred:e,onClick:n}){const i=Z();return s("button",{"data-id":t.id,title:"Favorite",className:"-m-2 p-2",onClick:n},s(Bi,{className:e.has(t.id)?i.text:"text-gray-300"}))}function ys(t){return s(cn,E({heading:"Lightning Pick"},t),s("p",null,"When an attraction with a long wait has a Lightning Lane return time in the near future, it's highlighted as a Lightning Pick. Book these quick before they're gone!"))}function vs({dropTime:t,onClose:e}){return s(cn,{heading:"Upcoming Drop",onClose:e},s("p",null,"This attraction may be part of the"," ",s("time",{dateTime:t,className:"font-semibold"},z(t))," ","drop of additional Lightning Lane inventory with earlier return times than what's currently being offered. Availability varies but is always limited, so be sure you're ready to book when the drop time arrives!"))}const bs=ke,ws={success:5e3,failure:1e3};function xs({guests:t,result:e,onDone:n}){const{boardingGroup:i,conflicts:r}=e,o=t.filter(u=>!(u.id in r)),a=t.filter(u=>u.id in r),[c,d]=w(!0);return L(()=>{setTimeout(()=>d(!1),ws[i?"success":"failure"])},[i]),s(k,null,i?s(k,null,s("h2",{className:"mt-5 text-xl"},"Boarding Group: ",i),s(F,{guests:o}),Object.keys(r).length>0&&s(k,null,s("p",{className:"font-semibold"},"These guests could not join:"),s(F,{guests:a,conflicts:r})),s("p",null,"Refer to the My Disney Experience app for return time and other information.")):s(k,null,s("h2",{className:"mt-5 text-xl"},"Sorry!"),s("p",null,"A boarding group could not be obtained."),s(F,{guests:a,conflicts:r})),c?null:s(H,{onClick:n},"Done"))}function ks({guests:t,party:e,onToggle:n,onConfirm:i}){return s(k,null,s("div",{className:"mt-5"},s("h2",{className:"inline mr-3 text-xl"},"Choose Your Party"),s(ln,null)),t?t.length>0?s(F,{guests:t,selectable:{isSelected:r=>e.has(r),onToggle:n}}):s("p",null,"No guests available"):s("p",null,"Loading guests\u2026"),s(H,{disabled:e.size===0,onClick:i},"Confirm Party"))}function Ns({queue:t}){return s(k,null,t.howToEnterMessage.split(`

`).map((e,n)=>s("p",{key:n},e)))}const Es=999;function Ss({guests:t,joinQueue:e,onEdit:n}){const[i,r]=w(!1),[o,a]=Ne();async function c(){r(!0),a("");const d=rn(Es);try{await e()||a("Queue not open yet")}catch(u){a("Error: try again","error"),u instanceof he||console.error(u)}finally{await d,r(!1)}}return s(k,null,s("div",{className:"mt-4"},s("h2",{className:"inline mr-3 text-xl"},"Your Party"),s(B,{type:"small",onClick:n},"Edit")),s(F,{guests:t}),s(H,{disabled:i,onClick:c},"Join Boarding Group"),o)}function Ts({queue:t,queues:e,onChange:n}){e||(e=[]);const{bg:i}=Z(),r=`block w-full ${i} text-white text-xl font-semibold`;return s(k,null,e.length<=1?s("span",{className:`${r} px-1 truncate`},t.name):s("select",{className:`${r} pr-1`,value:t.id,onChange:o=>n?n(o.currentTarget.value):null},e.map(o=>s("option",{key:o.id,value:o.id,className:"text-base font-normal"},o.name))))}const Dt=t=>t.categoryContentId==="attraction";function Cs(){const t=bs(),[e,n]=w(),[i,r]=w(null),[o,a]=w(),[c,d]=w(new Set),[u,l]=w({boardingGroup:null,conflicts:{},closed:!0}),[f,m]=w(!1),[_,p]=w("ChooseParty"),[A,x]=Ne(),h=se(null),y=V(async()=>{x(""),m(!0);const N=(await t.getQueues()).filter(P=>P.isAcceptingJoins||P.isAcceptingPartyCreation).sort((P,M)=>+Dt(M)-+Dt(P)||P.name.localeCompare(M.name));m(!1),n(P=>(P&&N.length===0&&x("No queues available"),N))},[t,x]);L(()=>{y();const N=()=>{document.hidden||y()};return document.addEventListener("visibilitychange",N),()=>{document.removeEventListener("visibilitychange",N)}},[y]),L(()=>{r(N=>{const P=N&&(e==null?void 0:e.find(M=>M.id===N.id));return P||(a(void 0),e&&e.length>0?e[0]:null)})},[e]),L(()=>{if(o||!i)return;let N=!1;return(async()=>{const P=await t.getLinkedGuests(i);N||(a(P),d(new Set(P.filter(M=>M.isPreselected))))})(),()=>{N=!0}},[t,i,o]),L(()=>{var N;(N=h.current)==null||N.scroll(0,0)},[_]);function I(N){const P=new Set(c);P[P.has(N)?"delete":"add"](N);const M=Number(i==null?void 0:i.maxPartySize);M>0&&P.size>M?x(`Maximum party size: ${M}`):(d(P),x(""))}function R(N){const P=e==null?void 0:e.find(M=>M.id===N);P&&(r(P),a(void 0))}async function S(){if(!i||!(await t.getQueue(i)).isAcceptingJoins)return!1;const N=await t.joinQueue(i,[...c]);return l(N),p("BGResult"),N.boardingGroup!==null&&dn(),!0}if((e==null?void 0:e.length)===0)return s(j,{heading:"No Active Queues"},s("p",null,"You can't join any virtual queues just yet. Check back within an hour of the queue opening time, or tap the Refresh button to check again."),s(H,{disabled:f,onClick:y},"Refresh"),A);if(!i)return s("div",null);const b=(o||[]).filter(N=>c.has(N)),C=s(gn,{resort:t.resort,time:i.nextScheduledOpenTime,label:"Next queue opening"}),T=s(Ts,{queue:i,queues:_==="ChooseParty"?e:[],onChange:R});return{ChooseParty:s(j,{heading:T,containerRef:h},s(Ns,{queue:i}),C,s(ks,{guests:o,party:c,onToggle:I,onConfirm:()=>p("JoinQueue")}),A),JoinQueue:s(j,{heading:T},C,s(Ss,{guests:b,onEdit:()=>p("ChooseParty"),joinQueue:S})),BGResult:s(j,{heading:T},s(xs,{guests:b,result:u,onDone:()=>p("ChooseParty")}))}[_]}const De=new Xn("bg1.auth");fi(origin)?Lt(new mi({origin,authStore:De}),Cs):ui(origin)?Be.load({origin,authStore:De}).then(t=>Lt(t,ps)):location.href="https://joelface.github.io/bg1/start.html";async function Lt(t,e){qn({WDW:"America/New_York",DLR:"America/Los_Angeles"}[t.resort]),document.title="BG1",Rs(),Is(),Ps().render(s(hi,{value:t},s(Ti,{authStore:De},s(e,null))))}function Is(){document.body.addEventListener("click",()=>null)}function Rs(){const t=document.createElement("meta");t.name="viewport",t.content="width=device-width, initial-scale=1, maximum-scale=1",document.head.appendChild(t)}function Ps(){const t=document.createElement("div");return t.id="app",document.body.appendChild(t),Kn(t)}
