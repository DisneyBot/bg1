var Mn=Object.defineProperty;var Gn=(e,t,n)=>t in e?Mn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var C=(e,t,n)=>(Gn(e,typeof t!="symbol"?t+"":t,n),n);var ie,x,Ut,ee,Ze,Ft,me={},Ht=[],Bn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function z(e,t){for(var n in t)e[n]=t[n];return e}function Wt(e){var t=e.parentNode;t&&t.removeChild(e)}function s(e,t,n){var o,r,i,l={};for(i in t)i=="key"?o=t[i]:i=="ref"?r=t[i]:l[i]=t[i];if(arguments.length>2&&(l.children=arguments.length>3?ie.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)l[i]===void 0&&(l[i]=e.defaultProps[i]);return te(e,l,o,r,null)}function te(e,t,n,o,r){var i={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r==null?++Ut:r};return r==null&&x.vnode!=null&&x.vnode(i),i}function E(e){return e.children}function Y(e,t){this.props=e,this.context=t}function se(e,t){if(t==null)return e.__?se(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?se(e):null}function zt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return zt(e)}}function Te(e){(!e.__d&&(e.__d=!0)&&ee.push(e)&&!pe.__r++||Ze!==x.debounceRendering)&&((Ze=x.debounceRendering)||setTimeout)(pe)}function pe(){for(var e;pe.__r=ee.length;)e=ee.sort(function(t,n){return t.__v.__b-n.__v.__b}),ee=[],e.some(function(t){var n,o,r,i,l,u;t.__d&&(l=(i=(n=t).__v).__e,(u=n.__P)&&(o=[],(r=z({},i)).__v=i.__v+1,Be(u,i,r,n.__n,u.ownerSVGElement!==void 0,i.__h!=null?[l]:null,o,l==null?se(i):l,i.__h),Jt(o,i),i.__e!=l&&zt(i)))})}function Yt(e,t,n,o,r,i,l,u,d,f){var a,p,h,c,m,I,_,g=o&&o.__k||Ht,y=g.length;for(n.__k=[],a=0;a<t.length;a++)if((c=n.__k[a]=(c=t[a])==null||typeof c=="boolean"?null:typeof c=="string"||typeof c=="number"||typeof c=="bigint"?te(null,c,null,null,c):Array.isArray(c)?te(E,{children:c},null,null,null):c.__b>0?te(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c)!=null){if(c.__=n,c.__b=n.__b+1,(h=g[a])===null||h&&c.key==h.key&&c.type===h.type)g[a]=void 0;else for(p=0;p<y;p++){if((h=g[p])&&c.key==h.key&&c.type===h.type){g[p]=void 0;break}h=null}Be(e,c,h=h||me,r,i,l,u,d,f),m=c.__e,(p=c.ref)&&h.ref!=p&&(_||(_=[]),h.ref&&_.push(h.ref,null,c),_.push(p,c.__c||m,c)),m!=null?(I==null&&(I=m),typeof c.type=="function"&&c.__k===h.__k?c.__d=d=jt(c,d,e):d=Vt(e,c,h,g,m,d),typeof n.type=="function"&&(n.__d=d)):d&&h.__e==d&&d.parentNode!=e&&(d=se(h))}for(n.__e=I,a=y;a--;)g[a]!=null&&Kt(g[a],g[a]);if(_)for(a=0;a<_.length;a++)Qt(_[a],_[++a],_[++a])}function jt(e,t,n){for(var o,r=e.__k,i=0;r&&i<r.length;i++)(o=r[i])&&(o.__=e,t=typeof o.type=="function"?jt(o,t,n):Vt(n,o,o,r,o.__e,t));return t}function j(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(n){j(n,t)}):t.push(e)),t}function Vt(e,t,n,o,r,i){var l,u,d;if(t.__d!==void 0)l=t.__d,t.__d=void 0;else if(n==null||r!=i||r.parentNode==null)e:if(i==null||i.parentNode!==e)e.appendChild(r),l=null;else{for(u=i,d=0;(u=u.nextSibling)&&d<o.length;d+=1)if(u==r)break e;e.insertBefore(r,i),l=i}return l!==void 0?l:r.nextSibling}function Un(e,t,n,o,r){var i;for(i in n)i==="children"||i==="key"||i in t||_e(e,i,null,n[i],o);for(i in t)r&&typeof t[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||n[i]===t[i]||_e(e,i,t[i],n[i],o)}function et(e,t,n){t[0]==="-"?e.setProperty(t,n):e[t]=n==null?"":typeof n!="number"||Bn.test(t)?n:n+"px"}function _e(e,t,n,o,r){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||et(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||et(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o||e.addEventListener(t,i?nt:tt,i):e.removeEventListener(t,i?nt:tt,i);else if(t!=="dangerouslySetInnerHTML"){if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=n==null?"":n;break e}catch{}typeof n=="function"||(n==null||n===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,n))}}function tt(e){this.l[e.type+!1](x.event?x.event(e):e)}function nt(e){this.l[e.type+!0](x.event?x.event(e):e)}function Be(e,t,n,o,r,i,l,u,d){var f,a,p,h,c,m,I,_,g,y,b,w,N,v,S,T=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(d=n.__h,u=t.__e=n.__e,t.__h=null,i=[u]),(f=x.__b)&&f(t);try{e:if(typeof T=="function"){if(_=t.props,g=(f=T.contextType)&&o[f.__c],y=f?g?g.props.value:f.__:o,n.__c?I=(a=t.__c=n.__c).__=a.__E:("prototype"in T&&T.prototype.render?t.__c=a=new T(_,y):(t.__c=a=new Y(_,y),a.constructor=T,a.render=Hn),g&&g.sub(a),a.props=_,a.state||(a.state={}),a.context=y,a.__n=o,p=a.__d=!0,a.__h=[],a._sb=[]),a.__s==null&&(a.__s=a.state),T.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=z({},a.__s)),z(a.__s,T.getDerivedStateFromProps(_,a.__s))),h=a.props,c=a.state,p)T.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(T.getDerivedStateFromProps==null&&_!==h&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(_,y),!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(_,a.__s,y)===!1||t.__v===n.__v){for(a.props=_,a.state=a.__s,t.__v!==n.__v&&(a.__d=!1),a.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function($){$&&($.__=t)}),b=0;b<a._sb.length;b++)a.__h.push(a._sb[b]);a._sb=[],a.__h.length&&l.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(_,a.__s,y),a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(h,c,m)})}if(a.context=y,a.props=_,a.__v=t,a.__P=e,w=x.__r,N=0,"prototype"in T&&T.prototype.render){for(a.state=a.__s,a.__d=!1,w&&w(t),f=a.render(a.props,a.state,a.context),v=0;v<a._sb.length;v++)a.__h.push(a._sb[v]);a._sb=[]}else do a.__d=!1,w&&w(t),f=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++N<25);a.state=a.__s,a.getChildContext!=null&&(o=z(z({},o),a.getChildContext())),p||a.getSnapshotBeforeUpdate==null||(m=a.getSnapshotBeforeUpdate(h,c)),S=f!=null&&f.type===E&&f.key==null?f.props.children:f,Yt(e,Array.isArray(S)?S:[S],t,n,o,r,i,l,u,d),a.base=t.__e,t.__h=null,a.__h.length&&l.push(a),I&&(a.__E=a.__=null),a.__e=!1}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Fn(n.__e,t,n,o,r,i,l,d);(f=x.diffed)&&f(t)}catch($){t.__v=null,(d||i!=null)&&(t.__e=u,t.__h=!!d,i[i.indexOf(u)]=null),x.__e($,t,n)}}function Jt(e,t){x.__c&&x.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(o){o.call(n)})}catch(o){x.__e(o,n.__v)}})}function Fn(e,t,n,o,r,i,l,u){var d,f,a,p=n.props,h=t.props,c=t.type,m=0;if(c==="svg"&&(r=!0),i!=null){for(;m<i.length;m++)if((d=i[m])&&"setAttribute"in d==!!c&&(c?d.localName===c:d.nodeType===3)){e=d,i[m]=null;break}}if(e==null){if(c===null)return document.createTextNode(h);e=r?document.createElementNS("http://www.w3.org/2000/svg",c):document.createElement(c,h.is&&h),i=null,u=!1}if(c===null)p===h||u&&e.data===h||(e.data=h);else{if(i=i&&ie.call(e.childNodes),f=(p=n.props||me).dangerouslySetInnerHTML,a=h.dangerouslySetInnerHTML,!u){if(i!=null)for(p={},m=0;m<e.attributes.length;m++)p[e.attributes[m].name]=e.attributes[m].value;(a||f)&&(a&&(f&&a.__html==f.__html||a.__html===e.innerHTML)||(e.innerHTML=a&&a.__html||""))}if(Un(e,h,p,r,u),a)t.__k=[];else if(m=t.props.children,Yt(e,Array.isArray(m)?m:[m],t,n,o,r&&c!=="foreignObject",i,l,i?i[0]:n.__k&&se(n,0),u),i!=null)for(m=i.length;m--;)i[m]!=null&&Wt(i[m]);u||("value"in h&&(m=h.value)!==void 0&&(m!==e.value||c==="progress"&&!m||c==="option"&&m!==p.value)&&_e(e,"value",m,p.value,!1),"checked"in h&&(m=h.checked)!==void 0&&m!==e.checked&&_e(e,"checked",m,p.checked,!1))}return e}function Qt(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(o){x.__e(o,n)}}function Kt(e,t,n){var o,r;if(x.unmount&&x.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||Qt(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){x.__e(i,t)}o.base=o.__P=null,e.__c=void 0}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&Kt(o[r],t,n||typeof e.type!="function");n||e.__e==null||Wt(e.__e),e.__=e.__e=e.__d=void 0}function Hn(e,t,n){return this.constructor(e,n)}function qt(e,t,n){var o,r,i;x.__&&x.__(e,t),r=(o=typeof n=="function")?null:n&&n.__k||t.__k,i=[],Be(t,e=(!o&&n||t).__k=s(E,null,[e]),r||me,me,t.ownerSVGElement!==void 0,!o&&n?[n]:r?null:t.firstChild?ie.call(t.childNodes):null,i,!o&&n?n:r?r.__e:t.firstChild,o),Jt(i,e)}function Wn(e,t,n){var o,r,i,l=z({},e.props);for(i in t)i=="key"?o=t[i]:i=="ref"?r=t[i]:l[i]=t[i];return arguments.length>2&&(l.children=arguments.length>3?ie.call(arguments,2):n),te(e.type,l,o||e.key,r||e.ref,null)}function K(e,t){var n={__c:t="__cC"+Ft++,__:e,Consumer:function(o,r){return o.children(r)},Provider:function(o){var r,i;return this.getChildContext||(r=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&r.some(Te)},this.sub=function(l){r.push(l);var u=l.componentWillUnmount;l.componentWillUnmount=function(){r.splice(r.indexOf(l),1),u&&u.call(l)}}),o.children}};return n.Provider.__=n.Consumer.contextType=n}ie=Ht.slice,x={__e:function(e,t,n,o){for(var r,i,l;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&i.getDerivedStateFromError!=null&&(r.setState(i.getDerivedStateFromError(e)),l=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),l=r.__d),l)return r.__E=r}catch(u){e=u}throw e}},Ut=0,Y.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=z({},this.state),typeof e=="function"&&(e=e(z({},n),this.props)),e&&z(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Te(this))},Y.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Te(this))},Y.prototype.render=E,ee=[],pe.__r=0,Ft=0;var Z,R,be,st,oe=0,Xt=[],ue=[],ot=x.__b,it=x.__r,rt=x.diffed,at=x.__c,lt=x.unmount;function re(e,t){x.__h&&x.__h(R,e,oe||t),oe=0;var n=R.__H||(R.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:ue}),n.__[e]}function k(e){return oe=1,zn(Zt,e)}function zn(e,t,n){var o=re(Z++,2);if(o.t=e,!o.__c&&(o.__=[n?n(t):Zt(void 0,t),function(i){var l=o.__N?o.__N[0]:o.__[0],u=o.t(l,i);l!==u&&(o.__N=[u,o.__[1]],o.__c.setState({}))}],o.__c=R,!R.u)){R.u=!0;var r=R.shouldComponentUpdate;R.shouldComponentUpdate=function(i,l,u){if(!o.__c.__H)return!0;var d=o.__c.__H.__.filter(function(a){return a.__c});if(d.every(function(a){return!a.__N}))return!r||r.call(this,i,l,u);var f=!1;return d.forEach(function(a){if(a.__N){var p=a.__[0];a.__=a.__N,a.__N=void 0,p!==a.__[0]&&(f=!0)}}),!(!f&&o.__c.props===i)&&(!r||r.call(this,i,l,u))}}return o.__N||o.__}function A(e,t){var n=re(Z++,3);!x.__s&&Fe(n.__H,t)&&(n.__=e,n.i=t,R.__H.__h.push(n))}function Ce(e,t){var n=re(Z++,4);!x.__s&&Fe(n.__H,t)&&(n.__=e,n.i=t,R.__h.push(n))}function X(e){return oe=5,Ue(function(){return{current:e}},[])}function Ue(e,t){var n=re(Z++,7);return Fe(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function F(e,t){return oe=8,Ue(function(){return e},t)}function q(e){var t=R.context[e.__c],n=re(Z++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(R)),t.props.value):e.__}function Yn(){for(var e;e=Xt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(de),e.__H.__h.forEach(Ae),e.__H.__h=[]}catch(t){e.__H.__h=[],x.__e(t,e.__v)}}x.__b=function(e){R=null,ot&&ot(e)},x.__r=function(e){it&&it(e),Z=0;var t=(R=e.__c).__H;t&&(be===R?(t.__h=[],R.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=ue,n.__N=n.i=void 0})):(t.__h.forEach(de),t.__h.forEach(Ae),t.__h=[])),be=R},x.diffed=function(e){rt&&rt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Xt.push(t)!==1&&st===x.requestAnimationFrame||((st=x.requestAnimationFrame)||jn)(Yn)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==ue&&(n.__=n.__V),n.i=void 0,n.__V=ue})),be=R=null},x.__c=function(e,t){t.some(function(n){try{n.__h.forEach(de),n.__h=n.__h.filter(function(o){return!o.__||Ae(o)})}catch(o){t.some(function(r){r.__h&&(r.__h=[])}),t=[],x.__e(o,n.__v)}}),at&&at(e,t)},x.unmount=function(e){lt&&lt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{de(o)}catch(r){t=r}}),n.__H=void 0,t&&x.__e(t,n.__v))};var ct=typeof requestAnimationFrame=="function";function jn(e){var t,n=function(){clearTimeout(o),ct&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);ct&&(t=requestAnimationFrame(n))}function de(e){var t=R,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),R=t}function Ae(e){var t=R;e.__c=e.__(),R=t}function Fe(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function Zt(e,t){return typeof t=="function"?t(e):t}function Vn(e,t){for(var n in t)e[n]=t[n];return e}function ut(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var o in t)if(o!=="__source"&&e[o]!==t[o])return!0;return!1}function dt(e){this.props=e}(dt.prototype=new Y).isPureReactComponent=!0,dt.prototype.shouldComponentUpdate=function(e,t){return ut(this.props,e)||ut(this.state,t)};var ft=x.__b;x.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),ft&&ft(e)};var ht=function(e,t){return e==null?null:j(j(e).map(t))},Jn={map:ht,forEach:ht,count:function(e){return e?j(e).length:0},only:function(e){var t=j(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:j},Qn=x.__e;x.__e=function(e,t,n,o){if(e.then){for(var r,i=t;i=i.__;)if((r=i.__c)&&r.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t)}Qn(e,t,n,o)};var mt=x.unmount;function en(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),e.__c.__H=null),(e=Vn({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(o){return en(o,t,n)})),e}function tn(e,t,n){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(o){return tn(o,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=n)),e}function we(){this.__u=0,this.t=null,this.__b=null}function nn(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function ce(){this.u=null,this.o=null}x.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),mt&&mt(e)},(we.prototype=new Y).__c=function(e,t){var n=t.__c,o=this;o.t==null&&(o.t=[]),o.t.push(n);var r=nn(o.__v),i=!1,l=function(){i||(i=!0,n.__R=null,r?r(u):u())};n.__R=l;var u=function(){if(!--o.__u){if(o.state.__a){var f=o.state.__a;o.__v.__k[0]=tn(f,f.__c.__P,f.__c.__O)}var a;for(o.setState({__a:o.__b=null});a=o.t.pop();)a.forceUpdate()}},d=t.__h===!0;o.__u++||d||o.setState({__a:o.__b=o.__v.__k[0]}),e.then(l,l)},we.prototype.componentWillUnmount=function(){this.t=[]},we.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=en(this.__b,n,o.__O=o.__P)}this.__b=null}var r=t.__a&&s(E,null,e.fallback);return r&&(r.__h=null),[s(E,null,t.__a?null:e.children),r]};var pt=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};(ce.prototype=new Y).__a=function(e){var t=this,n=nn(t.__v),o=t.o.get(e);return o[0]++,function(r){var i=function(){t.props.revealOrder?(o.push(r),pt(t,e,o)):r()};n?n(i):i()}},ce.prototype.render=function(e){this.u=null,this.o=new Map;var t=j(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},ce.prototype.componentDidUpdate=ce.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){pt(e,n,t)})};var sn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Kn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,qn=typeof document<"u",Xn=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};function Zn(e,t,n){return t.__k==null&&(t.textContent=""),qt(e,t),typeof n=="function"&&n(),e?e.__c:null}Y.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Y.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var _t=x.event;function es(){}function ts(){return this.cancelBubble}function ns(){return this.defaultPrevented}x.event=function(e){return _t&&(e=_t(e)),e.persist=es,e.isPropagationStopped=ts,e.isDefaultPrevented=ns,e.nativeEvent=e};var gt={configurable:!0,get:function(){return this.class}},yt=x.vnode;x.vnode=function(e){var t=e.type,n=e.props,o=n;if(typeof t=="string"){var r=t.indexOf("-")===-1;for(var i in o={},n){var l=n[i];qn&&i==="children"&&t==="noscript"||i==="value"&&"defaultValue"in n&&l==null||(i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&l===!0?l="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!Xn(n.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():r&&Kn.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():l===null&&(l=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),o[i]&&(i="oninputCapture")),o[i]=l)}t=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=j(n.children).forEach(function(u){u.props.selected=o.value.indexOf(u.props.value)!=-1})),t=="select"&&o.defaultValue!=null&&(o.value=j(n.children).forEach(function(u){u.props.selected=o.multiple?o.defaultValue.indexOf(u.props.value)!=-1:o.defaultValue==u.props.value})),e.props=o,n.class!=n.className&&(gt.enumerable="className"in n,n.className!=null&&(o.class=n.className),Object.defineProperty(o,"className",gt))}e.$$typeof=sn,yt&&yt(e)};var vt=x.__r;x.__r=function(e){vt&&vt(e),e.__c};function on(e){return!!e&&e.$$typeof===sn}function ss(e){return on(e)?Wn.apply(null,arguments):e}function os(e){return!!e.__k&&(qt(null,e),!0)}function is(e){return{render(t){Zn(t,e)},unmount(){os(e)}}}let rn="America/New_York";function rs(e){rn=e}function O(e){e=new Date(e||Date.now());const t={},n="2-digit";return Intl.DateTimeFormat("en-US",{timeZone:rn,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n}).formatToParts(e).forEach(o=>t[o.type]=o.value),{date:`${t.year}-${t.month}-${t.day}`,time:`${t.hour}:${t.minute}:${t.second}`}}function J(e){const t=e.split(":").slice(0,2).map(Number),n=t[0]>=12?"PM":"AM";return t[0]=t[0]%12||12,t.map(o=>String(o).padStart(2,"0")).join(":").replace(/^0/,"")+" "+n}function bt(e){const[t,n]=e.slice(0,19).split("T");return{date:t,time:n}}function an({start:e,end:t}){if(!t)return xe(e);const n=O().date,o=(e.date||"")<n?"Park Open":xe(e,"Park Open"),r=xe(t,"Park Close");return`${o} - ${r}`}function xe({date:e,time:t}={},n=""){const o=O();return e&&e!==o.date?new Date(e+"T00:00").toLocaleString("en-US",{month:"short",day:"numeric"})+(t?", "+J(t):""):t?J(t):n}class as extends Error{constructor(n){super(`Auth data "${n}" missing or expired`);C(this,"name","ReauthNeeded")}}class ls{constructor(t,n=localStorage){this.storageKey=t,this.storage=n}getData(){try{const t=this.storage.getItem(this.storageKey);if(t){const{swid:n,accessToken:o,expires:r}=JSON.parse(t),i=O(new Date(r)),l=O();if(i.date>l.date||i.date===l.date&&i.time>l.time&&i.time>="17")return{swid:n,accessToken:o}}}catch(t){console.error(t)}throw new as(this.storageKey)}setData(t){this.storage.setItem(this.storageKey,JSON.stringify(t))}deleteData(){this.storage.removeItem(this.storageKey)}}const cs="modulepreload",us=function(e){return"/bg1/"+e},wt={},xt=function(t,n,o){if(!n||n.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=us(i),i in wt)return;wt[i]=!0;const l=i.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!o)for(let a=r.length-1;a>=0;a--){const p=r[a];if(p.href===i&&(!l||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${u}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":cs,l||(f.as="script",f.crossOrigin=""),f.href=i,document.head.appendChild(f),l)return new Promise((a,p)=>{f.addEventListener("load",a),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},ds=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((o,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t)))})},fs=8e3;async function ge(e,t={}){const{params:n,data:o,timeout:r=fs,...i}=t;t=i,t.referrer||(t.referrer=""),t.credentials||(t.credentials="omit"),t.cache||(t.cache="no-store"),t.headers={"User-Agent":"Mozilla/5.0",...t.headers||{}},n&&Object.keys(n).length>0&&(e+=(e.includes("?")?"&":"?")+Object.entries(n).filter(([,f])=>f!=="").map(f=>f.map(encodeURIComponent).join("=")).join("&")),o&&(t.method||(t.method="POST"),t.headers={...t.headers,"Content-Type":"application/json"},t.body=JSON.stringify(o));const l=new AbortController;t.signal=l.signal;const u=setTimeout(()=>l.abort(),r);let d;try{d=await fetch(e,t)}catch(f){return console.error(f),{status:0,data:null}}finally{clearTimeout(u)}return{status:d.status,data:(d.headers.get("Content-Type")||"").startsWith("application/json")?await d.json():{}}}const hs={48199:"Mr-Incredible",48200:"Mrs-Incredible",261227:"Nemo",339625:"Russell",339626:"Carl",364907:"Jack-Skellington",431014:"Princess-Tiana",431065:"Darth_Vader",15549505:"Rapunzel",15655408:"Default_SignedIn",15675686:"Crush",15831168:"Wall-E",16453979:"Merida",16726412:"Stormtrooper",16818199:"Violet",16869301:"Jack-Jack",17345357:"R2-D2",17345359:"C-3PO",17532220:"Bruce",17532224:"Green-Alien",17532227:"Kermit",17532228:"Sorcerer-Mickey",17577168:"Elsa",17577169:"Anna",17813977:"Olaf",17888784:"Yoda",18101167:"Captain-Mickey",18368743:"-Nick",18368747:"-Judy",18393706:"-Flash",18403761:"kion",18405224:"-Moana",18405236:"-Elena",19633995:"50th_Mickey",19633996:"50th_Minnie",90003819:"Alice",90003846:"Ariel",90003898:"Belle",90003967:"Buzz",90003976:"Captain-Hook",90004004:"Chesire-Cat",90004017:"Cinderella",90004068:"Daisy",90004076:"Dash",90004104:"Donald",90004228:"Goofy",90004260:"Hamm",90004328:"Princess-Jasmine",90004340:"Jiminy",90004395:"Lady",90004482:"Mickey-Mouse",90004486:"Minnie",90004537:"Mulan",90004605:"Peter-Pan",90004625:"Pluto",90004626:"Pocahontas",90004642:"Princess-Aurora",90004682:"Rex",90004772:"Snow-White",90004778:"Sparky",90004846:"TinkerBell",90004860:"Tramp",90004939:"Zero"},He="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/90/90/75/dam/",ms=He+"wdpro-assets/avatars/180x180/RetAvatar_180x180_",ps=He+"wdpro-assets/avatars/180x180/RetAvatar-180x180",_s=He+"disney-world/50th-anniversary/avatars/RetAvatar_180x180_",gs={"-":ps,5:_s};function ke(e){const t=hs[e||""];if(!!t)return(gs[t[0]]||ms)+t+".png"}const Pe={"https://disneyworld.disney.go.com":"WDW","https://disneyland.disney.go.com":"DLR"},ys={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"};function vs(e){return e in Pe}class ln extends Error{constructor(n,o="Request failed"){super(`${o}: ${JSON.stringify(n)}`);C(this,"name","RequestError");this.response=n}}const bs=new Set(["ACTIVITY","DINING"]),ws=new Set(["FLEX","OTHER","STANDARD","DAS","FDS"]),W=e=>e.split(";")[0];class We{constructor(t){C(this,"maxPartySize",12);C(this,"nextBookTime");C(this,"onUnauthorized",()=>{});C(this,"origin");C(this,"authStore");C(this,"data");C(this,"parkMap");C(this,"partyIds",new Set);C(this,"guestCache",new Map);C(this,"tracker");C(this,"listeners",{bookingChange:new Set});C(this,"_primaryGuestId","");C(this,"updateTracker",this.bookings);C(this,"convertGuest",t=>{const{id:n,firstName:o,lastName:r,characterId:i,...l}=t,u=`${o} ${r}`.trim();if(!this.guestCache.has(n))switch(t.ineligibleReason){case"INVALID_PARK_ADMISSION":case"PARK_RESERVATION_NEEDED":case"GENIE_PLUS_NEEDED":t.primary&&this.cacheGuest(n,u,i);break;default:this.cacheGuest(n,u,i)}const d=ke(i);return this.partyIds.size>0&&!this.partyIds.has(n)&&(l.ineligibleReason="NOT_IN_PARTY",delete l.eligibleAfter),{...l,id:n,name:u,avatarImageUrl:d}});this.origin=t.origin,this.authStore=t.authStore,this.data=t.data,this.parkMap=Object.fromEntries(this.parks.map(n=>[n.id,n])),this.tracker=t.tracker||new xs}static async load(t){const n=Pe[t.origin].toLowerCase(),o=(await ds(Object.assign({"./data/dlr.ts":()=>xt(()=>import("./dlr.js"),[]),"./data/wdw.ts":()=>xt(()=>import("./wdw.js"),[])}),`./data/${n}.ts`)).default;return new We({...t,data:o})}get resort(){return Pe[this.origin]}get parks(){return this.data.parks}setPartyIds(t){this.partyIds=new Set(t)}async experiences(t){var l,u;await this.primaryGuestId();const n=await this.request({path:`/tipboard-vas/api/v1/parks/${encodeURIComponent(t.id)}/experiences`,params:{eligibilityGuestIds:[...this.guestCache.keys()].join(",")}});this.nextBookTime=(u=(((l=n.eligibility)==null?void 0:l.flexEligibilityWindows)||[]).sort((d,f)=>d.time.time.localeCompare(f.time.time))[0])==null?void 0:u.time.time;const o=this.nextDropTime(t),i=1<<(this.data.pdts[t.id]||[]).indexOf(o||"");return n.availableExperiences.filter(d=>d.id in this.data.experiences).map(d=>{const{pdtMask:f=0,...a}=this.data.experiences[d.id];return{...d,...a,park:t,experienced:this.tracker.experienced(d),drop:!!(i&f)}})}async guests(t){t||(t={id:"0",park:{id:"0"}});const n=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:t.id,parkId:t.park.id}});this._primaryGuestId=n.primaryGuestId;const o=n.ineligibleGuests.map(this.convertGuest),r=n.guests.map(this.convertGuest).filter(i=>!("ineligibleReason"in i)||o.push(i)&&!1);return o.sort((i,l)=>{const u=+!i.primary-+!l.primary||i.name.localeCompare(l.name);return i.eligibleAfter||l.eligibleAfter?(i.eligibleAfter||"99").localeCompare(l.eligibleAfter||"99")||u:i.ineligibleReason===l.ineligibleReason?u:i.ineligibleReason==="NOT_IN_PARTY"?1:l.ineligibleReason==="NOT_IN_PARTY"||i.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?-1:l.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?1:u}),{eligible:r,ineligible:o}}async primaryGuestId(t){return this._primaryGuestId||await this.guests(t),this._primaryGuestId}async offer(t,n,o){var p;const r=await this.request({path:o?"/ea-vas/api/v1/products/modifications/flex/offers":"/ea-vas/api/v2/products/flex/offers",method:"POST",data:{guestIds:((p=o==null?void 0:o.guests)!=null?p:n).map(h=>h.id),ineligibleGuests:[],primaryGuestId:await this.primaryGuestId(t),parkId:t.park.id,experienceId:t.id,selectedTime:t.flex.nextAvailableTime,...o?{modificationType:t.id===o.id?"TIME":"EXPERIENCE"}:{}},userId:!1}),{id:i,date:l,startTime:u,endTime:d,status:f,changeStatus:a}=r.offer;return{id:i,start:{date:l,time:u},end:{date:l,time:d},active:f==="ACTIVE",changed:a!=="NONE",guests:{eligible:(r.eligibleGuests||[]).map(this.convertGuest),ineligible:(r.ineligibleGuests||[]).map(this.convertGuest)},experience:t}}async cancelOffer(t){await this.request({path:`/ea-vas/api/v1/offers/${encodeURIComponent(t.id)}`,method:"DELETE",params:{productType:"FLEX"},userId:!1})}async book(t,n,o){var a;const r=new Set((o!=null?o:t.guests.eligible).map(p=>p.id)),{singleExperienceDetails:{experienceId:i,parkId:l},entitlements:u,startDateTime:d,endDateTime:f}=await this.request({path:n?"/ea-vas/api/v1/products/modifications/flex/bookings":"/ea-vas/api/v1/products/flex/bookings",method:"POST",userId:!1,data:{offerId:t.id,...n?{modificationType:n.id===t.experience.id?"TIME":"EXPERIENCE",existingEntitlements:n.guests.filter(p=>r.has(p.id)).map(p=>({entitlementId:p.entitlementId,entitlementBookingId:p.bookingId})),guestIdsToExclude:n.guests.filter(p=>!r.has(p.id)).map(p=>p.id)}:{}},key:"booking"});return this.updateTracker(),{type:"LL",subtype:"G+",...this.getExperience(i,l),bookingId:(a=u[0])==null?void 0:a.id,start:bt(d),end:bt(f),cancellable:!0,modifiable:!0,guests:u.map(p=>{const h=this.guestCache.get(p.guestId);return{id:p.guestId,name:(h==null?void 0:h.name)||"",avatarImageUrl:ke(h==null?void 0:h.characterId),entitlementId:p.id}})}}async cancelBooking(t){const o=t.map(r=>r.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${o}`,method:"DELETE",userId:!1})}async bookings(){const{swid:t}=this.authStore.getData(),n=new Date(Date.now()),o=O(n).date,r=ys[this.resort],{items:i=[],assets:l={},profiles:u={}}=await this.request({path:`/plan/${r}/api/v1/itinerary-items/${t}?item-types=FASTPASS&item-types=DINING&item-types=ACTIVITY`,params:{destination:this.resort,fields:"items,profiles,assets","guest-locators":t+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":o,"end-date":O(new Date(n.getTime()).setDate(n.getDate()+1)).date,"show-friends":"false"},userId:!1}),d=c=>{const{name:m,avatarId:I,type:_}=u[c.id];return{id:W(c.id),name:`${m.firstName} ${m.lastName}`.trim(),avatarImageUrl:ke(I),..._==="transactional"&&{transactional:!0}}},f=new Date(n);f.setMinutes(f.getMinutes()-30);const a=c=>{const m=l[c.asset],_=l[m.facility].location;if(!_)return;const g=this.parkMap[W(_)]||{id:_,name:l[_].name},y=new Date(c.startDateTime);return y<f?void 0:{type:"RES",subtype:c.type,id:W(c.asset),park:g,name:m.name,start:O(y),end:void 0,cancellable:!1,modifiable:!1,guests:c.guests.map(d).sort((w,N)=>+(N.id===this._primaryGuestId)-+(w.id===this._primaryGuestId)||+!N.transactional-+!w.transactional||w.name.localeCompare(N.name)),bookingId:c.id}},p=c=>{var b;if(!ws.has(c.kind))return;const m=l[c.facility],I=W(m.location),_={FLEX:"G+",STANDARD:"ILL",DAS:"DAS",FDS:"DAS",OTHER:"OTHER"},g=c.kind==="FLEX";let y={type:"LL",subtype:c.multipleExperiences?"MULTI":_[c.kind],...this.getExperience(W(c.facility),I,m.name),start:{date:c.displayStartDate,time:c.displayStartTime},end:{date:c.displayEndDate,time:c.displayEndTime},cancellable:c.cancellable&&g,modifiable:c.modifiable&&g,guests:c.guests.map(w=>({...d(w),entitlementId:w.entitlementId,bookingId:w.bookingId,...w.redemptionsRemaining!==void 0&&{redemptions:w.redemptionsRemaining}})),bookingId:(b=c.guests[0])==null?void 0:b.entitlementId};if(c.multipleExperiences){const w=c.assets.find(N=>N.original);w&&(y={...y,...this.getExperience(W(w.content),W(l[w.content].location))}),y.choices=c.assets.filter(N=>!N.excluded&&!N.original).map(({content:N})=>{const{name:v,location:S}=l[N];return this.getExperience(W(N),W(S),v)}).sort((N,v)=>N.name.localeCompare(v.name))}return y},h=i.map(c=>{if(c.type==="FASTPASS")return p(c);if(c.type&&bs.has(c.type))return a(c)}).filter(c=>!!c&&(c.start.date||o)===o);return this.tracker.update(h,this),h}nextDropTime(t){var o,r;const n=O().time.slice(0,5);return(r=(o=this.data.pdts)==null?void 0:o[t.id])==null?void 0:r.find(i=>i>=n)}logOut(){this.authStore.deleteData(),this.onUnauthorized()}getExperience(t,n,o){var r;return{id:t,name:((r=this.data.experiences[t])==null?void 0:r.name)||o,park:this.parkMap[n]}}cacheGuest(t,n,o){this.guestCache.set(t,{name:n,characterId:o})}async request(t){var d;const{swid:n,accessToken:o}=this.authStore.getData(),r=this.origin+t.path,i={...t.params};((d=t.userId)==null||d)&&(i.userId=n);const{status:l,data:u}=await ge(r,{method:t.method||"GET",params:i,data:t.data,headers:{Authorization:`BEARER ${o}`,"x-user-id":n}});if(l===401)setTimeout(()=>this.logOut());else{const{key:f}=t;if(String(l)[0]==="2"&&(!f||u[f]))return f?u[f]:u}throw new ln({status:l,data:u})}}const kt="bg1.genie.bookings";class xs{constructor(){C(this,"date");C(this,"expIds",new Set);C(this,"experiencedExpIds",new Set);const{date:t=O().date,expIds:n=[],experiencedExpIds:o=[]}=JSON.parse(localStorage.getItem(kt)||"{}");this.date=t,this.expIds=new Set(n),this.experiencedExpIds=new Set(o),this.checkDate()}experienced(t){return this.experiencedExpIds.has(t.id)}async update(t,n){this.checkDate();const o=t.filter(i=>i.type==="LL"&&i.cancellable);for(const i of o)this.experiencedExpIds[i.modifiable?"delete":"add"](i.id);const r=this.expIds;this.expIds=new Set(o.map(i=>i.id));for(const i of r){if(this.expIds.has(i))continue;const{ineligible:l}=await n.guests({id:i,park:{id:"0"}}),u=l.some(d=>d.ineligibleReason==="EXPERIENCE_LIMIT_REACHED");this.experiencedExpIds[u?"add":"delete"](i)}localStorage.setItem(kt,JSON.stringify({date:this.date,expIds:[...this.expIds],experiencedExpIds:[...this.experiencedExpIds]}))}checkDate(){const t=O().date;this.date!==t&&(this.date=t,this.expIds=new Set,this.experiencedExpIds=new Set)}}const cn={"https://vqguest-svc-wdw.wdprapps.disney.com":"WDW","https://vqguest-svc.wdprapps.disney.com":"DLR"};function ks(e){return e in cn}const Ns=e=>e.sort((t,n)=>+n.primary-+t.primary||+n.preselected-+t.preselected||t.name.localeCompare(n.name));class fe extends Error{constructor(n,o="Request failed"){super(`${o}: ${JSON.stringify(n)}`);C(this,"name","RequestError");this.response=n}}class Ss{constructor(t){C(this,"onUnauthorized",()=>{});C(this,"origin");C(this,"authStore");this.origin=t.origin,this.authStore=t.authStore}get resort(){return cn[this.origin]}url(t){return`${this.origin}/application/v1/guest/${t}`}async getQueues(){return(await ge(this.url("getQueues"))).data.queues.map(({queueId:t,...n})=>({...n,id:t}))}async getQueue(t){const n=(await this.getQueues()).find(o=>o.id===t.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(t){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:t.id}});return Ns(n.guests.map(({guestId:o,firstName:r,lastName:i,isPrimaryGuest:l,isPreselected:u,...d})=>({...d,id:o,name:`${r} ${i}`.trim(),primary:!!l,preselected:!!u})))}async joinQueue(t,n){const o=n.map(l=>l.id),{status:r,data:i}=await this.post({resource:"joinQueue",data:{queueId:t.id,guestIds:o}});if(i.responseStatus==="OK"){const l=i.positions.find(u=>u.queueId===t.id&&u.guestIds.length>0&&o.some(d=>u.guestIds.includes(d)));if(!l)throw new fe({status:r,data:i});return{boardingGroup:l.boardingGroup,conflicts:{},closed:!1}}else if(i.responseStatus==="INVALID_GUEST"||i.responseStatus==="CLOSED_QUEUE"){const l=i.responseStatus==="CLOSED_QUEUE",u=new Set,d={};for(const p of i.conflicts)for(const h of p.guestIds){const c=n.find(m=>m.id===h);!c||(d[c.id]=p.conflictType,u.add(h))}const f=n.filter(p=>!u.has(p.id));if(l||f.length===0)return{boardingGroup:null,conflicts:d,closed:l};const a=await this.joinQueue(t,f);return a.conflicts={...d,...a.conflicts},a}else throw new fe({status:r,data:i})}logOut(){this.authStore.deleteData(),this.onUnauthorized()}async post(t){const{status:n,data:o}=await ge(this.url(t.resource),{method:"POST",headers:{Authorization:`BEARER ${this.authStore.getData().accessToken}`},data:t.data});if(n===401&&setTimeout(()=>this.logOut()),!n||n===401||n>=500)throw new fe({status:n,data:o});return{status:n,data:o}}}const un=K({resort:"WDW",onUnauthorized:()=>{},logOut:()=>null}),Es=un.Provider,ze=()=>q(un),Ye={bg:"bg-blue-500",text:"text-blue-500"},dn=K(Ye),Is=dn.Provider,V=()=>q(dn),Ts={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function L(e){const{type:t,className:n,...o}=e;let r=`${Ts[t||"normal"]} ${n||""}`;const{bg:i}=V();return r.includes(" bg-")||(r+=` ${i} text-white`),s("button",{className:`${r} inline-flex items-center justify-center min-w-[36px] rounded-lg px-2 font-semibold disabled:opacity-50`,...o})}function G({onClick:e,disabled:t,children:n}){return s("div",{className:"mb-20"},s("div",{className:"fixed bottom-0 left-0 w-full px-5 pb-5 text-center"},s(L,{className:"max-w-2xl mx-auto shadow-[0px_4px_8px_-1px_#0005]",type:"full",onClick:e,disabled:t},n)))}function Cs({title:e,children:t}){const{bg:n,text:o}=V();function r(i){return on(i)?i.type===E?Jn.map(i.props.children,r):ss(i,{className:`bg-white bg-opacity-90 ${o} ${i.props.className||""}`}):i}return s("div",{className:`flex justify-end gap-x-2 gap-y-1 min-h-[52px] px-3 py-2 text-lg text-white ${n}`},s("h1",{className:"flex-1 self-center py-0.5 text-xl font-semibold overflow-hidden whitespace-nowrap"},e),r(t))}function ae(e){const{children:t,className:n,...o}=e,r={outer:"",inner:"",...typeof n=="string"?{inner:n}:n};return r.outer.match(/\bz-/)||(r.outer+=" z-10"),s("div",{className:`${r.outer} fixed inset-0`,...o},s("div",{className:`${r.inner} max-w-2xl min-h-full mx-auto`},t))}function U({heading:e,buttons:t,className:n,theme:o,containerRef:r,children:i,...l}){return s(Is,{value:o||Ye},s(ae,{className:{outer:`bg-white text-black text-base ${n||""}`,inner:"flex flex-col max-w-2xl h-full"},...l},s(Cs,{title:e},t),s("div",{ref:r,className:"flex-1 overflow-auto px-3 pb-3"},i)))}const As="bg1.disclaimer.accepted",Ps={bg:"bg-red-600",text:"text-red-600"};function Rs(){const e=localStorage,t=As,[n,o]=k(!!e.getItem(t));return A(()=>{n&&e.setItem(t,"1")},[n,e,t]),n?null:s(Ds,{onAccept:()=>o(!0)})}function Ds({onAccept:e}){return s(U,{heading:"Warning!",theme:Ps},s("p",null,'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'),s(G,{onClick:e},"Accept"))}const Ls="181874e5af6";function Os(e){return"deferredUuid"in e&&e.deferredUuid!==void 0}class $s{constructor(t,n,o,r=!1){C(this,"handlers",{});C(this,"handshakeAcked",!1);C(this,"onMessage",t=>{if(t.source!==this.iframe.contentWindow||t.data==="inner.loaded")return;const n=JSON.parse(t.data);this.logging&&console.log("Message:",n);const o=n.type==="message"?n.eventName:n.type,r=this.handlers[o],i=r?r("data"in n?n.data:null):void 0;Os(n)&&this.send({type:"deferred",action:"resolve",deferredUuid:n.deferredUuid,data:i!=null?i:{}})});this.iframe=t,this.resort=o,this.logging=r,this.on("handshake",()=>{this.handshakeAcked||(this.handshakeAcked=!0,this.send({type:"handshakeAck"}),this.logging&&this.sendMessage("setLogLevel",{level:"log"}),this.sendMessage("workflow.execute",{name:"login"}))}),this.on("lightbox.hide",()=>this.open()),this.on("session.dateOfBirth.read",()=>this.open()),this.on("session.loggedin",({token:i})=>{n({swid:i.swid,accessToken:i.access_token,expires:new Date(i.exp)})})}open(){addEventListener("message",this.onMessage),this.iframe.src=this.authPageUrl,this.handshakeAcked=!1}close(){removeEventListener("message",this.onMessage)}on(t,n){this.handlers[t]=n}sendMessage(t,n){this.send({type:"message",eventName:t,data:n})}send(t){var n;(n=this.iframe.contentWindow)==null||n.postMessage(JSON.stringify({...t,name:"lightbox-client-window"}),this.authPageUrl)}get authPageUrl(){return`https://cdn.registerdisney.go.com/v2/TPR-${this.resort}-LBSDK.IOS-PROD/en-US?include=l10n,config,html,js&buildId=${Ls}`}}function Ms({resort:e,onLogin:t}){const n=X(null);return A(()=>{if(!n.current)return;const o=new $s(n.current,t,e);return o.open(),()=>o.close()},[e,t,n]),s("iframe",{title:"Disney Login Form",ref:n,className:"fixed top-0 left-0 w-full h-full border-0"})}function Gs({client:e,authStore:t,children:n}){const[o,r]=k("Blank"),i=Rs();A(()=>{e.onUnauthorized=()=>r("LoginForm")},[e]),A(()=>{function u(){if(!(document.hidden||o==="LoginForm"))try{t.getData(),r("Client")}catch{return r("LoginForm")}}return u(),document.addEventListener("visibilitychange",u),()=>{document.removeEventListener("visibilitychange",u)}},[t,o]);const l={Blank:s("div",null),LoginForm:s(Ms,{resort:e.resort,onLogin:u=>{t.setData(u),r("Client")}}),Client:n};return s(Es,{value:e},i||l[o])}const H=ze,fn=K({elem:null,show:()=>null,close:()=>null}),Bs=fn.Provider,je=()=>q(fn),hn=K(void 0),Us=hn.Provider,Fs=()=>q(hn),mn=K({current:void 0,begin:()=>null,end:()=>null}),Hs=mn.Provider,le=()=>q(mn);async function Ws(e={}){return new Promise((t,n)=>{navigator.geolocation.getCurrentPosition(o=>{t(o)},o=>{n(o)},e)})}const zs={maximumAge:15e3,timeout:2e3};function Ys(e){const[t,n]=k(),o=F(()=>{e(async()=>{try{const{coords:r}=await Ws(zs);n(i=>i&&r.latitude===i[0]&&r.longitude===i[1]?i:[r.latitude,r.longitude])}catch{n(void 0)}})},[e]);return[t,o]}const js=3e3,Vs={alert:"bg-yellow-200",error:"bg-red-200"};function ye(){const[,e]=k(0),[t,n]=k(""),[o,r]=k("alert"),i=F((u,d)=>{n(u),r(d||"alert"),e(f=>(clearTimeout(f),u?self.setTimeout(()=>{n("")},js):f))},[]);return[s(Js,{message:t,type:o}),i]}function Js({message:e,type:t}){return e?s("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${Vs[t]} text-gray-800`},e):null}function Q({children:e,className:t,title:n}){return t||(t=""),t.match(/\bw-\S+\s*/)||(t+=" w-4"),t.match(/\bh-\S+\s*/)||(t+=" h-auto"),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:t,role:"img"},n&&s("title",null,n),e)}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ve({className:e}){return s(Q,{className:e},s("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"}))}async function Re(e){return new Promise(t=>{setTimeout(t,e)})}function Qs(){const[e,t]=k(0),n=F(async(r,i=500)=>{t(u=>u+1);const l=Re(i);try{await r()}finally{await l,await Re(0),t(u=>u-1)}},[]);return[e>0?s(pn,null):null,n]}function pn(){const{bg:e}=V();return s(ae,{className:"flex items-center bg-white bg-opacity-75"},s("div",{className:"w-[50px] mx-auto"},s("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${e}`},s(Ve,{className:"animate-spin w-full text-white"}))))}function Je(){const[e,t]=Qs(),n=!!e,[o,r]=ye();return{loadData:F(async(u,d)=>{const f={error:"Unknown error occurred",request:"Network request failed",...d};r("");let a=()=>null;const p=new Promise(c=>{a=()=>c(null)});async function h(...c){await p,r(...c)}await t(async()=>{try{await u(h)}catch(c){if(c instanceof ln){const{status:m}=c.response;h(m in f?f[m]:f.request,"error")}else console.error(c),h(f.error,"error")}}),a()},[t,r]),loaderElem:s(E,null,o,e),isLoading:n}}const Ks=6e4,qs=30,Xs=60,Nt="bg1.genie.tipBoard.starred",Zs=(e,t)=>+!e.lp-+!t.lp,eo=(e,t)=>(e.priority||1/0)-(t.priority||1/0),to=(e,t)=>(e.sort||1/0)-(t.sort||1/0),Ne=(e,t)=>(t.standby.waitTime||-1)-(e.standby.waitTime||-1),Se=(e,t)=>{var n,o;return(((n=e==null?void 0:e.flex)==null?void 0:n.nextAvailableTime)||"").localeCompare(((o=t==null?void 0:t.flex)==null?void 0:o.nextAvailableTime)||"")},no=(e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase()),so=(e,t)=>e.land.sort-t.land.sort,St=(e,t)=>Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)),oo=(e,t,n)=>e.geo===t.geo?0:e.geo?t.geo?n?St(e.geo,n)-St(t.geo,n):0:-1:1;function io(e,t){const{n,s:o,e:r,w:i}=e.geo,[l,u]=t;return l<n&&l>o&&u<r&&u>i}function Et(e){const[t,n]=e.split(":").map(Number);return t*60+n}const ro={priority:(e,t)=>Zs(e,t)||eo(e,t)||Ne(e,t)||Se(e,t),standby:(e,t)=>Ne(e,t)||Se(e,t),soonest:(e,t)=>Se(e,t)||Ne(e,t),nearby:(e,t,n)=>oo(e,t,n),aToZ:()=>0,land:(e,t)=>so(e,t)||to(e,t)};function ao({park:e,sortType:t,plusOnly:n}){const o=H(),{loadData:r,loaderElem:i,isLoading:l}=Je(),[u,d]=Ys(r),[f,a]=k([]),[{refreshing:p},h]=k({refreshing:!1,lastRefresh:0}),[c,m]=k(new Set);A(()=>{o.updateTracker()},[o]);const I=F((g=!0)=>{h(y=>{if(!g){if(Date.now()-y.lastRefresh<Ks)return y;o.updateTracker()}return{refreshing:!0,lastRefresh:y.lastRefresh}})},[o]);Ce(()=>{a([]),I(!0)},[e,I]),Ce(()=>{!p||(h({refreshing:!1,lastRefresh:Date.now()}),r(async()=>{t==="nearby"&&d();const g=await o.experiences(e),y=Et(O().time);a(g.map(b=>{var v;const w=b.standby.waitTime||0,N=(v=b==null?void 0:b.flex)==null?void 0:v.nextAvailableTime;return{...b,lp:!!N&&w>=qs&&Et(N)-y<=Math.min(Xs,(4-Math.trunc(b.priority||4))/3*w),starred:c.has(b.id)}}))}))},[o,r,e,p,t,c,d]),A(()=>{t==="nearby"&&d()},[t,d]),A(()=>{try{const g=JSON.parse(localStorage.getItem(Nt)||"[]"),y=new Set(g);m(y),a(b=>b.map(w=>({...w,starred:y.has(w.id)})))}catch(g){console.error(g)}},[]);function _(g){const{id:y}=g;g.starred=!g.starred,g.starred?c.add(y):c.delete(y),m(new Set(c)),localStorage.setItem(Nt,JSON.stringify([...c]))}return{experiences:f.filter(g=>(!n||!!g.flex)&&(n||g.standby.available||g.standby.unavailableReason==="TEMPORARILY_DOWN")).sort((g,y)=>{var b,w;return n&&(+!g.starred-+!y.starred||Number((b=y==null?void 0:y.flex)==null?void 0:b.available)-Number((w=g==null?void 0:g.flex)==null?void 0:w.available))||ro[t==="nearby"&&!(u&&io(e,u))?"priority":t](g,y,u)||no(g,y)}),refresh:I,toggleStar:_,isLoading:l,loaderElem:i}}/**
 * Clock icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function _n(e){return s(Q,{...e},s("path",{d:"M10.293 11.707l-3.293-3.293v-4.414h2v3.586l2.707 2.707zM8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14c-3.314 0-6-2.686-6-6s2.686-6 6-6c3.314 0 6 2.686 6 6s-2.686 6-6 6z"}))}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function De(e){return s(Q,{...e},s("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"}))}/**
 * Cog icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function lo(e){return s(Q,{...e},s("path",{d:"M14.59 9.535c-0.839-1.454-0.335-3.317 1.127-4.164l-1.572-2.723c-0.449 0.263-0.972 0.414-1.529 0.414-1.68 0-3.042-1.371-3.042-3.062h-3.145c0.004 0.522-0.126 1.051-0.406 1.535-0.839 1.454-2.706 1.948-4.17 1.106l-1.572 2.723c0.453 0.257 0.845 0.634 1.123 1.117 0.838 1.452 0.336 3.311-1.12 4.16l1.572 2.723c0.448-0.261 0.967-0.41 1.522-0.41 1.675 0 3.033 1.362 3.042 3.046h3.145c-0.001-0.517 0.129-1.040 0.406-1.519 0.838-1.452 2.7-1.947 4.163-1.11l1.572-2.723c-0.45-0.257-0.839-0.633-1.116-1.113zM8 11.24c-1.789 0-3.24-1.45-3.24-3.24s1.45-3.24 3.24-3.24c1.789 0 3.24 1.45 3.24 3.24s-1.45 3.24-3.24 3.24z"}))}const co="_SELECT_RADIO_BUTTON_";function It(e){const{options:t,value:n,onChange:o,...r}=e,[i,l]=k(!1),[u,d]=k(0),f=X(null),a=X(null);Ce(()=>{var w;if((w=t[0])!=null&&w.icon)return;const _=f.current,g=_==null?void 0:_.firstChild;if(!g)return;const y=g.nodeValue;if(!y)return;let b=0;for(const N of t)g.nodeValue=N.text,b=Math.max(_.offsetWidth,b);g.nodeValue=y,d(b)},[t]);const p=()=>{var _;return(_=a.current)==null?void 0:_.querySelector("input:checked")};A(()=>{var g;if(!i)return;(g=p())==null||g.focus();const _=y=>{var b;(b=a.current)!=null&&b.contains(y.target)||l(!1)};return addEventListener("focusin",_),()=>removeEventListener("focusin",_)},[i]);const h=()=>{const _=p();_&&o(_.value),l(!1)},{icon:c,text:m}=t.find(_=>_.value===n)||t[0];let I=!1;return s(E,null,s(L,{...r,onClick:()=>l(!0)},c||s("span",{style:{minWidth:`${u}px`},ref:f},m),s(Q,{className:"w-2.5 ml-2"},s("path",{d:"m6.8273 12.401-5.6333-7.7812a1.0212 1.0212 117.05 0 1 0.82716-1.62l11.958-2e-7a1.0212 1.0212 62.952 0 1 0.82714 1.62l-1.6438 2.2705a79984 79984 125.9 0 0-2.3456 3.2401l-1.6437 2.2706a1.4479 1.4479 180 0 1-2.3456 4.4e-5z"}))),i&&s(ae,{className:{outer:"bg-black bg-opacity-75",inner:"flex items-center justify-center h-full"},onClick:_=>{var y;const g=_.target;if(!((y=a.current)!=null&&y.contains(g)))return l(!1);if(g.tagName==="INPUT"&&!I)return h();I=!1},onKeyDown:({key:_})=>{["Enter"," "].includes(_)?h():_.startsWith("Arrow")&&(I=!0)},"data-testid":"select-shade"},s("ul",{className:"overflow-auto min-w-[50%] max-h-[90%] rounded-lg bg-white text-black",ref:a},t.map(_=>s("li",{className:"border-t-2 first:border-0 border-gray-300",key:_.value},s("label",{className:"flex flex-row items-center px-4 py-3"},s("input",{type:"radio",name:co,defaultChecked:_.value===n,value:_.value,className:"w-4 h-4 mr-2.5"})," ",_.icon&&s("span",{"aria-hidden":"true",className:"mr-2.5"},_.icon)," ",_.text))))))}/**
 * Checkmark icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Tt({className:e}){return s(Q,{className:e},s("path",{d:"M13.5 2l-7.5 7.5-3.5-3.5-2.5 2.5 6 6 10-10z"}))}/**
 * Arrow down icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ct(e){return s(Q,{...e},s("path",{d:"M8 15.5l7.5-7.5h-4.5v-8h-6v8h-4.5z"}))}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function uo(e){return s(Q,{...e},s("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"}))}function ve({heading:e,children:t}){const n=je();return s(ae,{className:{outer:"bg-black bg-opacity-75",inner:"p-2 flex items-center justify-center h-full"},onClick:n.close},s("div",{className:"flex flex-col max-h-[90%] rounded-lg px-3 py-4 bg-white",onClick:o=>o.stopPropagation()},s("h2",{className:"mt-0"},e),s("div",{className:"flex-1 overflow-auto"},t),s("div",{className:"pt-4"},s(L,{type:"full",onClick:n.close},"Close"))))}const Le={eligible:[],ineligible:[],selected:[],setSelected:()=>null},gn=K(Le),fo=gn.Provider,Qe=()=>q(gn),ho="https://bg1.joelface.com/ping",At="bg1.ping.date";async function yn(){const{date:e}=O();if(localStorage.getItem(At)===e)return;const{status:n}=await ge(ho,{method:"POST"});n===204&&localStorage.setItem(At,e)}function M({guests:e,selectable:t,conflicts:n}){return e.length===0?null:s("ul",{className:"mt-2"},e.map(o=>{var r;return s("li",{key:o.id,className:"px-3 py-1"},s("label",{className:"flex items-center"},t&&s("input",{type:"checkbox",checked:t.isSelected(o),onChange:()=>t.onToggle(o),className:"mr-3"}),s("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white"},o.avatarImageUrl?s("img",{src:o.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):s("span",{"aria-hidden":"true"},o.name[0])),s("span",{className:"leading-tight"},o.name,s("br",null),(n==null?void 0:n[o.id])&&s("span",{className:"text-xs font-semibold text-red-700 uppercase"},(r=n[o.id])==null?void 0:r.replace(/_/g," ")))))}))}function Ke(e){return s("div",{className:"mt-4 text-lg"},e.end?"Arrive by":"Reservation at",":"," ",s("span",{className:"ml-0.5 font-semibold"},an(e)))}function mo({booking:e,onClose:t}){const n=H(),[o,r]=k(new Set),{loadData:i,loaderElem:l}=Je(),{guests:u}=e,d=o.size===0,f=o.size===u.length;function a(){i(async()=>{d||await n.cancelBooking([...o]),t(u.filter(c=>!o.has(c)))})}const{name:p,park:h}=e;return s(U,{heading:"Your Lightning Lane",theme:h.theme},s("h2",null,p),s("div",null,h.name),s(Ke,{...e}),s("div",{className:"ml-3"},s("label",{className:"flex items-center py-4"},s("input",{type:"checkbox",checked:f,onChange:()=>r(new Set(f?[]:u))}),s("span",{className:"ml-3"},"Select All"))),!d&&s("div",{className:"mb-4"},s("h3",null,"Cancel These Guests"),s(M,{guests:u.filter(c=>o.has(c)),selectable:{isSelected:()=>!0,onToggle:c=>{const m=new Set(o);m.delete(c),r(m)}}})),!f&&s("div",null,s("h3",null,"Select Guests to Cancel"),s(M,{guests:u.filter(c=>!o.has(c)),selectable:{isSelected:()=>!1,onToggle:c=>r(new Set(o).add(c))}})),s(G,{onClick:a},d?"Back":"Cancel "+(f?"Reservation":"Guests")),l)}function vn({booking:e,onClose:t,isNew:n}){var y;const o=H(),{name:r,park:i,choices:l,type:u}=e,d=u==="LL",f=Fs()||i,a=le(),[p,h]=k(d?e.guests:void 0),[c,m]=k(!1);if(c&&d&&p)return s(mo,{booking:{...e,guests:p},onClose:b=>{m(!1),b.length>0?h(b):t(b)}});const I=new Map([[f,[]],...o.parks.map(b=>[b,[]])]);for(const b of l||[])(y=I.get(b.park))==null||y.push(b);const _=[...I.keys()],g=(l?_.length===1?_[0]:{theme:Ye}:i).theme;return s(U,{heading:"Your "+(d?e.subtype==="DAS"?"DAS Return Time":"Lightning Lane":"Reservation"),theme:g,buttons:e.modifiable&&s(L,{onClick:()=>a.begin(e)},"Modify")},l?s("h2",null,"Multiple Experiences"):s(E,null,s("h2",null,r),s("div",null,i.name)),s(Ke,{...e}),l&&s(E,null,s("p",null,s("b",null,r)," was temporarily unavailable during your return time. You may redeem this Lightning Lane at one of these replacement experiences:"),[...I].filter(([,b])=>b.length>0).map(([b,w=[]])=>{var N;return s("div",{key:b.id,className:`mt-4 rounded ${((N=b.theme)==null?void 0:N.bg)||""}`},s("h3",{className:"mt-0 p-1 text-white text-center"},b.name),s("ul",{className:"list-disc py-2 pl-8 bg-white bg-opacity-90"},w.map(v=>s("li",{key:v.id},v.name))))})),s("div",{className:"flex mt-4"},s("h3",{className:"inline mt-0"},"Your Party"),e.cancellable&&s(L,{type:"small",onClick:()=>m(!0),className:"ml-3"},"Cancel")),s(M,{guests:p||e.guests,conflicts:p&&Object.fromEntries(p.filter(b=>{var w;return((w=b.redemptions)!=null?w:1)!==1}).map(b=>[b.id,`Redemptions left: ${b.redemptions}`]))}),s(G,{onClick:()=>t(p)},n?"Done":"Back"))}function po({children:e}){return s("p",{className:"border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100"},e)}function bn(){const{ineligible:e}=Qe();return s(M,{guests:e,conflicts:Object.fromEntries(e.map(t=>[t.id,t.eligibleAfter?`TOO EARLY (${J(t.eligibleAfter)})`:t.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function qe({buttonText:e,onSubmit:t}){const{eligible:n,ineligible:o,selected:r,setSelected:i}=Qe(),[l,u]=k(),[d,f]=ye(),{maxPartySize:a}=H();return l?s(E,null,s("h3",null,"Choose Your Party"),s(M,{guests:n,selectable:{isSelected:h=>l.has(h),onToggle:h=>u(c=>{f(""),c=new Set(c);const m=c.has(h)?"delete":"add";return m==="add"&&c.size>=a?f(`Maximum party size: ${a}`):c[m](h),c})}}),o.length>0&&s(E,null,s("h3",null,"Ineligible Guests"),s(bn,null)),s(G,{disabled:l.size===0,onClick:()=>{i([...l]),u(void 0)}},"Confirm Party"),d):s(E,null,n.length>a&&r.length===a&&s(po,null,"Party size restricted"),s("div",{className:"mt-4"},s("h3",{className:"inline mt-0"},"Your Party"),s("span",null,s(L,{type:"small",onClick:()=>u(new Set(r)),className:"ml-3"},"Edit"))),s(M,{guests:r}),s(G,{onClick:t},e))}function _o({offer:e,onBook:t}){const n=le();return s(E,null,s(Ke,{...e}),e.changed&&s("div",{className:"text-sm"},s("strong",null,"Note:")," Return time has been changed"),s(qe,{buttonText:`${n.current?"Modify":"Book"} Lightning Lane`,onSubmit:t}))}const Pt="https://widget.time.is/t.js";function go(){if([...document.scripts].some(t=>t.src===Pt))return;const e=document.createElement("script");e.src=Pt,e.onload=wn,document.head.appendChild(e)}const he={};function wn(){"time_is_widget"in self&&self.time_is_widget.init(he)}function yo(e){go(),he[e]||(he[e]={}),wn()}function xn(e,t){const n=document.getElementById(e);if(!n||n.firstElementChild)return t();n.textContent=O().time,setTimeout(()=>xn(e,t),100)}function vo({id:e,onSync:t}){return A(()=>{yo(e),xn(e,t)},[e,t]),s("time",{id:e})}const bo={WDW:"Orlando_z161",DLR:"Anaheim_z14e"},wo=5e3;function kn({resort:e,time:t,label:n}){const o=bo[e],[r,i]=k(null);A(()=>{setTimeout(()=>i(u=>u||!1),wo)},[]);const l=F(()=>i(!0),[]);return s("table",{className:"mt-4 mx-auto text-gray-500"},s("tbody",null,s(Rt,{heading:n,time:s("time",null,t||"--:--:--")}),s(Rt,{heading:s("a",{href:`https://time.is/${o.split("_")[0]}`,id:"time_is_link",target:"_blank",rel:"noreferrer"},"Current time"),time:s(E,null,s(vo,{id:o,onSync:l}),r===!1&&s("span",{className:"text-sm font-sans font-semibold text-red-600"}," ","(unsynced)"))})))}function Rt({heading:e,time:t}){return s("tr",null,s("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase"},e,":"),s("td",{className:"text-xl font-mono leading-tight"},"\uFEFF",t))}function xo({startTime:e,onRefresh:t}){return s(E,null,e&&s(kn,{resort:"WDW",time:e,label:"Booking start"}),s("h3",{className:"mt-4"},"Not Available Yet"),e?s("p",null,"At"," ",s("time",{dateTime:e,className:"font-semibold"},J(e)),", tap the ",s("span",{className:"font-semibold"},"Check Availability")," ","button below to start booking this Lightning Lane."):s("p",null,"Sorry, but you can't make a Lightning Lane reservation for this attraction yet."),s(qe,{buttonText:"Check Availability",onSubmit:t}))}function ko({onClose:e}){const{ineligible:t}=Qe(),{eligibleAfter:n}=t[0]||{},o=le();return s(E,null,n&&s("div",{className:"mt-4 border-2 border-green-600 rounded p-1 uppercase font-semibold text-center text-green-600 bg-green-100"},"Eligible at ",J(n)),o.current?s(E,null,s("h3",null,"Unable to Rebook"),s("p",null,"Your current reservation cannot be rebooked to this experience due to the following conflicts:")):s(E,null,s("h3",null,"No Eligible Guests"),s("p",null,"No one in your party is currently eligible for this Lightning Lane.")),s(bn,null),s(G,{onClick:e},"Back"))}function No({onRefresh:e}){return s(E,null,s("h3",null,"No Guests Found"),s("p",null,"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."),s(G,{onClick:e},"Try Again"))}function So({onClose:e}){return s(E,null,s("h3",null,"No Reservations Available"),s("p",null,"There aren't enough reservation slots available for your entire party. If only part of your group wishes to go on this attraction, edit your party to check again. Otherwise, go back to the tip board and select another attraction."),s(qe,{buttonText:"Back",onSubmit:e}))}function Nn({booking:e,button:t}){return s("div",{className:"flex items-center gap-x-3"},s("div",{className:"flex-1 min-w-0"},s("div",{className:"flex items-center gap-x-2 text-gray-500 text-sm font-semibold uppercase"},e.subtype==="DAS"&&s(E,null,s("span",{className:"px-1 rounded bg-gray-400 text-white"},"DAS")," "),an(e)),s("div",{className:"text-lg font-semibold leading-tight truncate"},e.choices?"Multiple Experiences":e.name)),t&&s("div",null,t))}function Sn(){const e=le(),t=V();return e.current?s("div",{className:`sticky top-0 -mx-3 pb-1 ${t.bg}`},s("div",{className:"pb-3 bg-white"},s("div",{className:`pb-1 ${t.bg} text-white text-sm font-semibold uppercase text-center`},"Modifying Reservation"),s("div",{className:"mt-2 px-3"},s(Nn,{booking:e.current,button:s(L,{type:"small",onClick:()=>e.end(!0)},"Keep")})))):null}function Eo({onClose:e}){const t=H(),[n,o]=k(),[r,i]=k(),[l,u]=k(!1);function d(a){!r||(i(void 0),a&&o(p=>{if(!!p)return a.length>0?r.guests=a:p.splice(p.indexOf(r),1),p}))}A(()=>{u(!0),t.bookings().then(a=>o(a))},[t]);function f(){u(!1),setTimeout(e,300)}return r?s(vn,{booking:r,onClose:d}):s(E,null,s(ae,{onClick:f,"data-testid":"panel-shade",className:{inner:"bg-black bg-opacity-75"}}),s(U,{heading:"Your Day",buttons:s(L,{onClick:f},"Close"),className:`top-auto ${l?"h-[60%]":"h-0"} duration-200 ease-linear`},n&&n.length>0?s("ul",null,(n||[]).map(a=>s("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",key:a.bookingId},s(Nn,{booking:a,button:s(L,{type:"small",onClick:()=>i(a)},"More")})))):s("div",{className:"mt-4 text-sm font-semibold text-center uppercase  text-gray-500"},n&&"No current reservations")))}function En({onOpen:e,onClose:t,...n}){const[o,r]=k(),i=e||r,l=t||(()=>r(void 0));return s(E,null,s(L,{...n,onClick:()=>i(s(Eo,{onClose:l})),title:"Your Day"},s(_n,null)),o)}function Io({experience:e,onClose:t}){const n=H(),o=le(),[r,i]=k(),[l,u]=k(!e.flex.available&&e.flex.enrollmentStartTime!==void 0),[d,f]=k(l?null:void 0),[a,p]=k(),{loadData:h,loaderElem:c}=Je();async function m(){if(!d||!r)return;let w=null;await h(async()=>{try{w=await n.book(d,o.current,r.selected)}finally{o.end()}const N=new Set(r.selected.map(S=>S.id)),v=w.guests.filter(S=>!N.has(S.id));v.length>0&&(await n.cancelBooking(v),w.guests=w.guests.filter(S=>N.has(S.id))),yn()},{410:"Offer expired"}),w&&p(w)}function I(){h(async w=>{var S;const v=(await n.experiences(e.park)).find(T=>T.id===e.id);(S=v==null?void 0:v.flex)!=null&&S.available?(u(!1),f(void 0)):w("Reservations not open yet")})}function _(){d&&n.cancelOffer(d),t()}const g=F(()=>{h(async()=>{try{const w=o.current?{eligible:o.current.guests,ineligible:[]}:await n.guests(e);i({...w,selected:w.eligible.slice(0,n.maxPartySize),setSelected:N=>i(v=>{if(!v)return v;const S=new Set(v.selected);return u(T=>(T||f($=>$===null||N.some(P=>!S.has(P))?void 0:$),T)),{...v,selected:N}})})}catch(w){throw i(Le),w}})},[n,e,o,h]);A(()=>{r||g()},[r,g]);const y=F(w=>{!r||r.selected.length===0||h(async()=>{try{const N=await n.offer(e,r.selected,o.current),{ineligible:v}=N.guests;if(v.length>0){const S=new Set(v.map($=>$.id)),T=$=>!S.has($.id);i({...r,eligible:r.eligible.filter(T),ineligible:[...v,...r.ineligible],selected:r.selected.filter(T)})}N.active?(d&&(N.changed=!1),f(N)):f(S=>S!=null?S:null)}catch(N){throw w||f(null),N}},{410:d?"No reservations available":""})},[n,e,r,d,o,h]);if(A(()=>{d===void 0&&y()},[d,y]),a)return s(vn,{booking:a,onClose:t,isNew:!0});const b=(r==null?void 0:r.eligible.length)===0&&(r==null?void 0:r.ineligible.length)===0;return s(U,{heading:"Lightning Lane",theme:e.park.theme,buttons:s(E,null,s(En,null),r&&(l||d||b)&&s(L,{onClick:_},"Back"),!l&&d!==void 0&&s(L,{onClick:y,title:"Refresh Offer"},s(Ve,null)))},s(Sn,null),s("h2",null,e.name),s("div",null,e.park.name),s(fo,{value:r!=null?r:Le},(r==null?void 0:r.eligible.length)===0?b?s(No,{onRefresh:g}):s(ko,{onClose:t}):!r||d===void 0?s("div",null):l?s(xo,{startTime:e.flex.enrollmentStartTime,onRefresh:I}):d===null?s(So,{onClose:t}):s(_o,{offer:d,onBook:m})),c)}function Xe({label:e,children:t}){return s("div",{className:"flex items-center flex-1 whitespace-nowrap"},s("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500"},e)," ",t)}function To({experience:e,onClick:t}){const{flex:n}=e;return s(Xe,{label:"Genie+"},s("span",null,s(L,{onClick:()=>t(e)},n.nextAvailableTime?J(n.nextAvailableTime):"none")))}function In({children:e}){return s("div",{className:"mt-8 flex justify-center"},s("div",null,s("h2",{className:"mt-0 pl-1 text-gray-500 text-sm leading-tight uppercase"},"Symbols"),s("div",{className:"border-2 border-gray-500 rounded px-2 py-0.5 bg-gray-100"},s("table",null,s("tbody",null,e)))))}function ne({sym:e,def:t,onInfo:n}){return s("tr",null,s("th",{className:"py-0.5 text-center font-bold"},e),s("td",{className:"pl-3 py-0.5"},t),n&&s("td",{className:"pl-3 py-0.5"},s(L,{type:"small",onClick:n},"Info")))}const Tn="bg1.genie.partyIds";function Cn(){const e=JSON.parse(localStorage.getItem(Tn)||"[]");return Array.isArray(e)?e:[]}function Co(){const e=H();A(()=>e.setPartyIds(Cn()),[e])}function Ao({onClose:e}){const t=H(),[n,o]=k(!0),[r,i]=k(),[l,u]=k(()=>{const h=new Set(Cn());return o(h.size===0),h});function d(){const h=[...l];localStorage.setItem(Tn,JSON.stringify(h)),t.setPartyIds(h),e()}A(()=>{t.guests().then(h=>{i([...h.eligible,...h.ineligible].sort((c,m)=>+!c.primary-+!m.primary||c.name.localeCompare(m.name)))})},[t]),A(()=>{n&&u(new Set)},[n]);const f=r==null?void 0:r.filter(h=>l.has(h.id)),a=r==null?void 0:r.filter(h=>!l.has(h.id)),p=h=>s("li",null,s("label",{className:"flex items-center mt-2"},s("input",{type:"radio",name:"auto",onChange:()=>o(h.auto),checked:n===h.auto,className:"mr-2"})," ",h.children));return s(U,{heading:"Party Selection",buttons:s(L,{onClick:e},"Cancel")},s("p",null,"By default, all eligible guests (up to a maximum of 12) are automatically selected when you book a Lightning Lane. If you would like to limit who you book for, you can manually select your party here."),s("ul",null,s(p,{auto:!0},"Book for all eligible guests"),s(p,{auto:!1},"Only book for selected guests")),n?null:(r==null?void 0:r.length)===0?s("p",{className:"text-red-700"},"No guests to select"):f&&a?s(E,null,f.length>0&&s(E,null,s("h3",null,"Your Party"),s(M,{guests:f,selectable:{isSelected:()=>!0,onToggle:h=>{const c=new Set(l);c.delete(h.id),u(c)}}})),a.length>0&&s(E,null,s("h3",null,"Add to Your Party"),s(M,{guests:a,selectable:{isSelected:()=>!1,onToggle:h=>{const c=new Set(l);c.add(h.id),u(c)}}}))):s(pn,null),s(G,{disabled:!n&&l.size===0,onClick:d},"Save"))}function Po({experience:{type:e,standby:t}}){return t.displayNextShowTime||e==="ENTERTAINMENT"&&!t.waitTime?s(Do,{standby:t}):s(Ro,{standby:t})}const Ro=({standby:e})=>s(Xe,{label:"Standby"},e.available?s(Pn,{time:e.waitTime!==void 0?e.waitTime+" min":"now"}):s(Rn,{text:"down"})),Do=({standby:e})=>s(Xe,{label:s(E,null,"Next ",s("span",{className:"hidden xs:inline"},"Show"))},e.displayNextShowTime?s(Pn,{time:e.displayNextShowTime}):s(Rn,{text:"none"})),An="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",Pn=({time:e})=>s("span",{className:`${An} border-gray-500 text-gray-500 bg-gray-100`},e),Rn=({text:e})=>s("span",{className:`${An} border-red-600 text-red-600 bg-red-100`},e);function Lo({bookTime:e,dropTime:t}){const n=V();return!e&&!t?null:s("div",{className:`flex justify-center gap-x-10 -mx-3 px-3 pb-1 ${n.bg} text-white text-sm font-semibold uppercase text-center`},s(Dt,{label:"Book",time:e}),s(Dt,{label:"Drop",time:t}))}function Dt({label:e,time:t}){if(!t)return null;t=t.slice(0,5);const n=O().time.slice(0,5);return s("div",null,e,":"," ",s("time",{dateTime:t,className:"whitespace-nowrap"},t>n?J(t):"now"))}const Oe="Lightning Pick",$e="Upcoming Drop",Me="Booked",Lt=e=>e.experienced&&!e.starred;function Oo({experiences:e,refresh:t,toggleStar:n}){Co();const o=H(),r=je(),i=V(),l=e[0],u=l&&o.nextDropTime(l.park),d=()=>r.show(s(Mo,null)),f=()=>r.show(s(Go,{dropTime:u})),a=()=>r.show(s(Bo,null)),p=m=>s("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",key:m.id+(m.starred?"*":"")},s("div",{className:"flex items-center gap-x-2 mt-2"},s($o,{experience:m,toggleStar:n}),s("h3",{className:"flex-1 mt-0 text-lg font-semibold leading-tight truncate"},m.name),m.lp?s(Ee,{name:Oe,icon:De,onClick:d}):u&&m.drop?s(Ee,{name:$e,icon:Ct,onClick:f}):null,m.flex.preexistingPlan&&s(Ee,{name:Me,icon:Tt,onClick:a})),s("div",{className:"flex flex-wrap gap-1.5 mt-2"},s(Po,{experience:m}),s(To,{experience:m,onClick:I=>r.show(s(Io,{experience:I,onClose:()=>{r.close(),t(!1)}}))}))),h=e.filter(m=>!Lt(m)),c=e.filter(Lt).sort((m,I)=>m.name.localeCompare(I.name));return s(E,null,s(Sn,null),s(Lo,{bookTime:o.nextBookTime,dropTime:u}),s("ul",{"data-testid":"unexperienced"},h.map(p)),c.length>0&&s(E,null,s("h2",{className:`-mx-3 px-3 py-1 text-sm uppercase text-center ${i.bg} text-white`},"Previously Experienced"),s("ul",{"data-testid":"experienced"},c.map(p))),s(In,null,s(ne,{sym:s(De,{className:i.text}),def:Oe,onInfo:d}),s(ne,{sym:s(Ct,{className:i.text}),def:$e,onInfo:f}),s(ne,{sym:s(Tt,{className:i.text}),def:Me,onInfo:a})))}function Ee({name:e,icon:t,onClick:n}){const o=V();return s("button",{title:`${e} (more info)`,className:`-mx-2 px-2 ${o.text}`,onClick:n},s(t,null))}function $o({experience:e,toggleStar:t}){const n=V();return s("button",{title:`${e.starred?"Unfavorite":"Favorite"}`,className:"-m-2 p-2",onClick:()=>t(e)},s(uo,{className:e.starred?n.text:"text-gray-300"}))}function Mo(){return s(ve,{heading:Oe},s("p",null,"When an attraction with a long wait has a Lightning Lane return time in the near future, it's highlighted as a Lightning Pick. Book these quick before they're gone!"))}function Go({dropTime:e}){return s(ve,{heading:$e},s("p",null,"This attraction may be part of the"," ",e?s("time",{dateTime:e,className:"font-semibold"},J(e)):"next"," ","drop of additional Lightning Lane inventory, with earlier return times than what's currently being offered. Availability varies but is always limited, so be sure you're ready to book when the drop time arrives!"))}function Bo(){return s(ve,{heading:Me},s("p",null,"You currently have a Lightning Lane reservation for this attraction."))}function Dn({type:e}){const t=ze();return s(L,{type:e,onClick:()=>t.logOut()},"Log Out")}const Uo={party:Ao};function Fo({onClose:e}){const[t,n]=k(),o=F(()=>n(void 0),[]);if(t){const r=Uo[t];return s(r,{onClose:o})}return s(U,{heading:"Settings"},s("ul",{className:"mt-4"},s(Ot,{button:s(L,{onClick:()=>n("party")},"Select Party"),desc:"BG1's automatic party selection works great for most people, but manually specifying your party may be useful for larger groups or other special situations."}),s(Ot,{button:s(Dn,null),desc:"You should only need to use this if you logged in with the wrong account."})),s(G,{onClick:e},"Close"))}function Ot({button:e,desc:t}){return s("li",null,s("div",{className:"text-center"},e),s("p",{className:"mt-2"},t))}function Ho({experiences:e}){const t=je(),n=r=>t.show(s(Wo,{exp:r})),o=new Map;return e.forEach(r=>{var i,l;o.has(r.land)||o.set(r.land,{ATTRACTION:[],ENTERTAINMENT:[],CHARACTER:[]}),(l=(i=o.get(r.land))==null?void 0:i[r.type])==null||l.push(r)}),s(E,null,[...o].map(([r,i])=>s("div",{key:r.name},s("h2",{className:`pr-1 ${r.theme.text} text-sm font-semibold text-right uppercase`},r.name),s("div",{className:"rounded overflow-hidden"},s(Ie,{title:"Attractions",land:r,experiences:i.ATTRACTION,onInfoClick:n}),s(Ie,{title:"Entertainment",land:r,experiences:i.ENTERTAINMENT,onInfoClick:n}),s(Ie,{title:"Characters",land:r,experiences:i.CHARACTER,onInfoClick:n})))),s(In,null,s(ne,{sym:"*",def:"No listed wait/show time"}),s(ne,{sym:"\u274C",def:"Temporarily down"})))}function Ie({title:e,land:t,experiences:n,onInfoClick:o}){return n.length===0?null:s("div",{className:`${t.theme.bg}`,"data-testid":`${t.name}-${e}`},s("h3",{className:"mt-0 py-1 text-white text-xs font-semibold text-center uppercase"},e),s("table",{className:"w-full bg-white bg-opacity-90 leading-snug"},s("tbody",null,n.map(r=>{var i;return s("tr",{className:"group",key:r.id},s("td",{className:`${r.standby.displayNextShowTime?"min-w-[5.625rem]":"min-w-[2.75rem]"} px-2 py-0.5 group-first:pt-1 group-last:pb-1 ${t.theme.bg} bg-opacity-10 ${t.theme.text} font-bold text-center uppercase whitespace-nowrap`},r.standby.displayNextShowTime?r.displayAdditionalShowTimes&&r.displayAdditionalShowTimes.length>1?s("button",{onClick:()=>o(r),className:"underline"},r.standby.displayNextShowTime):r.standby.displayNextShowTime:r.standby.available?(i=r.standby.waitTime)!=null?i:"*":"\u274C"),s("td",{className:"w-full px-1 pl-2 py-0.5 group-first:pt-1 group-last:pb-1"},r.name))}))))}const Wo=({exp:e})=>{var t;return s(ve,{heading:e.name},s("h3",{className:"w-[75vw] mt-2 text-gray-500 text-sm font-semibold uppercase"},"Upcoming ",e.type==="CHARACTER"?"Appearances":"Shows"),s("ul",{className:"list-disc mt-2 pl-6"},!!e.standby.displayNextShowTime&&s("li",null,e.standby.displayNextShowTime),(t=e.displayAdditionalShowTimes)==null?void 0:t.map(n=>s("li",{key:n},n))))},$t="bg1.genie.tipBoard.park",zo=[{value:"priority",text:"Priority"},{value:"nearby",text:"Nearby"},{value:"standby",text:"Standby"},{value:"soonest",text:"Soonest"},{value:"aToZ",text:"A to Z"}],Ln={"Genie+":{title:s(E,null,"G",s("span",{className:"hidden xs:inline"},"enie"),"+"),component:Oo,plusOnly:!0},Times:{title:"Times",component:Ho,sortType:"land"}},On={name:"Genie+",...Ln["Genie+"]},$n=K({...On,change:()=>{}});function Yo(){var N;const{parks:e}=H(),[t,n]=k(()=>{const{id:v=e[0].id,date:S=""}=JSON.parse(sessionStorage.getItem($t)||"{}")||{};return S===O().date&&e.find(T=>T.id===v)||e[0]}),[o,r]=k(()=>({...On,change:v=>{r(S=>{var T,$;return v!==S.name&&(l(!0),b.current[S.name]=($=(T=y.current)==null?void 0:T.scrollTop)!=null?$:0,S={...Ln[v],name:v,change:S.change}),S})}})),[i,l]=k(!0),[u,d]=k("priority"),{experiences:f,refresh:a,toggleStar:p,isLoading:h,loaderElem:c}=ao({park:t,sortType:(N=o.sortType)!=null?N:u,plusOnly:!!o.plusOnly}),[m,I]=k({elem:null,show:v=>I({...m,elem:v}),close:()=>I(v=>({...v,elem:null}))}),[_,g]=k({current:void 0,begin:v=>{g({..._,current:v}),o.change("Genie+"),n(v.park),m.close()},end:(v=!1)=>{g(S=>S.current?{...S,current:void 0}:S),v&&m.close()}}),y=X(null),b=X({});A(()=>{if(h)return;const v=()=>{document.hidden||a(!1)};return document.addEventListener("visibilitychange",v),()=>{document.removeEventListener("visibilitychange",v)}},[a,h]),A(()=>{var v,S;l(!1),(S=y.current)==null||S.scroll(0,(v=b.current[o.name])!=null?v:0)},[o.name]),A(()=>{h||l(!1)},[h]),A(()=>l(!0),[t]),A(()=>{var v;(v=y.current)==null||v.scroll(0,0)},[t,u,_]),A(()=>{b.current={},sessionStorage.setItem($t,JSON.stringify({id:t.id,date:O().date}))},[t]);const w=Ue(()=>e.map(v=>({value:v.id,icon:v.icon,text:v.name})),[e]);return s(Hs,{value:_},s(U,{heading:o.title,theme:t.theme,buttons:s(E,null,o.sortType===void 0&&s(It,{options:zo,value:u,onChange:d,title:"Sort By"}),s(It,{options:w,value:t.id,onChange:v=>n(e.find(S=>S.id===v)),title:"Park"}),s(En,{onOpen:m.show,onClose:m.close}),s(L,{onClick:a,title:"Refresh Times"},s(Ve,null))),containerRef:y},s(Bs,{value:m},s("div",{"aria-hidden":!!m.elem,className:`${i&&"invisible"} mb-14`},s(o.component,{experiences:f,refresh:a,toggleStar:p})),!m.elem&&c,s(Us,{value:t},m.elem)),s("div",{className:`fixed bottom-0 left-0 w-full ${t.theme.bg} text-white font-semibold`},s("div",{className:"flex items-center justify-center"},s($n.Provider,{value:o},s(Mt,{name:"Genie+",icon:De}),s(Mt,{name:"Times",icon:_n})),s("button",{className:"absolute top-0 right-0 h-full px-3",onClick:()=>m.show(s(Fo,{onClose:m.close})),title:"Settings"},s(lo,null))))))}function Mt({name:e,icon:t}){const n=q($n);return s("button",{className:`flex items-center gap-x-2 border-b-4 ${e===n.name?"border-white":"border-transparent"} px-3 pt-3 pb-2`,onClick:()=>n.change(e)},s(t,null),e)}const jo=ze,Vo={success:5e3,failure:1e3};function Jo({guests:e,result:t,onDone:n}){const{boardingGroup:o,conflicts:r}=t,i=e.filter(f=>!(f.id in r)),l=e.filter(f=>f.id in r),[u,d]=k(!1);return A(()=>{setTimeout(()=>d(!0),Vo[o?"success":"failure"])},[o]),s(E,null,o!==null?s(E,null,s("h2",{className:"mt-5 text-xl"},"Congratulations! \u{1F389}"),s("p",null,"You joined the virtual queue!"),s("p",{className:"text-lg font-semibold"},"Boarding Group: ",o),s(M,{guests:i}),Object.keys(r).length>0&&s(E,null,s("p",{className:"font-semibold"},"These guests could not join:"),s(M,{guests:l,conflicts:r})),s("p",null,"Refer to the My Disney Experience app for return time and other information.")):s(E,null,s("h2",{className:"mt-5 text-xl"},"Sorry!"),s("p",null,"A boarding group could not be obtained."),s(M,{guests:l,conflicts:r})),u&&s(G,{onClick:n},"Done"))}function Qo({guests:e,party:t,onToggle:n,onConfirm:o}){return s(E,null,s("div",{className:"mt-5"},s("h2",{className:"inline mr-3 text-xl"},"Choose Your Party"),s(Dn,{type:"small"})),e?e.length>0?s(M,{guests:e,selectable:{isSelected:r=>t.has(r),onToggle:n}}):s("p",null,"No guests available"):s("p",null,"Loading guests\u2026"),s(G,{disabled:t.size===0,onClick:o},"Confirm Party"))}function Ko({queue:e}){return s(E,null,e.howToEnterMessage.split(`

`).map((t,n)=>s("p",{key:n},t)))}const qo=999;function Xo({guests:e,joinQueue:t,onEdit:n}){const[o,r]=k(!1),[i,l]=ye();async function u(){r(!0),l("");const d=Re(qo);try{await t()||l("Queue not open yet")}catch(f){l("Error: try again","error"),f instanceof fe||console.error(f)}finally{await d,r(!1)}}return s(E,null,s("div",{className:"mt-4"},s("h2",{className:"inline mr-3 text-xl"},"Your Party"),s(L,{type:"small",onClick:n},"Edit")),s(M,{guests:e}),s(G,{disabled:o,onClick:u},"Join Virtual Queue"),i)}function Zo({queue:e,queues:t,onChange:n}){t||(t=[]);const{bg:o}=V(),r=`block w-full ${o} text-white text-xl font-semibold`;return s(E,null,t.length<=1?s("span",{className:`${r} px-1 truncate`},e.name):s("select",{className:`${r} pr-1`,value:e.id,onChange:i=>n?n(i.currentTarget.value):null},t.map(i=>s("option",{key:i.id,value:i.id,className:"text-base font-normal"},i.name))))}const Gt=e=>e.categoryContentId==="attraction";function ei(){const e=jo(),[t,n]=k(),[o,r]=k(null),[i,l]=k(),[u,d]=k(new Set),[f,a]=k({boardingGroup:null,conflicts:{},closed:!0}),[p,h]=k(!1),[c,m]=k("ChooseParty"),[I,_]=ye(),g=X(null),y=F(async()=>{_(""),h(!0);const P=(await e.getQueues()).filter(D=>D.isAcceptingJoins||D.isAcceptingPartyCreation).sort((D,B)=>+Gt(B)-+Gt(D)||D.name.localeCompare(B.name));h(!1),n(D=>(D&&P.length===0&&_("No queues available"),P))},[e,_]);A(()=>{y();const P=()=>{document.hidden||y()};return document.addEventListener("visibilitychange",P),()=>{document.removeEventListener("visibilitychange",P)}},[y]),A(()=>{r(P=>{const D=P&&(t==null?void 0:t.find(B=>B.id===P.id));return D||(l(void 0),t&&t.length>0?t[0]:null)})},[t]),A(()=>{if(i||!o)return;let P=!1;return(async()=>{const D=await e.getLinkedGuests(o);P||(l(D),d(new Set(D.filter(B=>B.preselected))))})(),()=>{P=!0}},[e,o,i]),A(()=>{var P;(P=g.current)==null||P.scroll(0,0)},[c]);function b(P){const D=new Set(u);D[D.has(P)?"delete":"add"](P);const B=Number(o==null?void 0:o.maxPartySize);B>0&&D.size>B?_(`Maximum party size: ${B}`):(d(D),_(""))}function w(P){const D=t==null?void 0:t.find(B=>B.id===P);D&&(r(D),l(void 0))}async function N(){if(!o||!(await e.getQueue(o)).isAcceptingJoins)return!1;const P=await e.joinQueue(o,[...u]);return a(P),m("BGResult"),P.boardingGroup!==null&&yn(),!0}if((t==null?void 0:t.length)===0)return s(U,{heading:"No Active Queues"},s("p",null,"You can't join any virtual queues just yet. Check back within an hour of the queue opening time, or tap the Refresh button to check again."),s(G,{disabled:p,onClick:y},"Refresh"),I);if(!o)return s("div",null);const v=(i||[]).filter(P=>u.has(P)),S=s(kn,{resort:e.resort,time:o.nextScheduledOpenTime,label:"Next queue opening"}),T=s(Zo,{queue:o,queues:c==="ChooseParty"?t:[],onChange:w});return{ChooseParty:s(U,{heading:T,containerRef:g},s(Ko,{queue:o}),S,s(Qo,{guests:i,party:u,onToggle:b,onConfirm:()=>m("JoinQueue")}),I),JoinQueue:s(U,{heading:T},S,s(Xo,{guests:v,onEdit:()=>m("ChooseParty"),joinQueue:N})),BGResult:s(U,{heading:T},s(Jo,{guests:v,result:f,onDone:()=>m("ChooseParty")}))}[c]}const Ge=new ls("bg1.auth");ks(origin)?Bt(new Ss({origin,authStore:Ge}),ei):vs(origin)?We.load({origin,authStore:Ge}).then(e=>Bt(e,Yo)):location.href="https://joelface.github.io/bg1/start.html";async function Bt(e,t){rs({WDW:"America/New_York",DLR:"America/Los_Angeles"}[e.resort]),document.title="BG1",ni(),ti(),si().render(s(Gs,{client:e,authStore:Ge},s(t,null)))}function ti(){document.body.addEventListener("click",()=>null)}function ni(){const e=document.createElement("meta");e.name="viewport",e.content="width=device-width, initial-scale=1, maximum-scale=1",document.head.appendChild(e)}function si(){const e=document.createElement("div");return e.id="app",document.body.appendChild(e),is(e)}
