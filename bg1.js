var te,b,St,X,Fe,Et,he={},Tt=[],gn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function F(t,e){for(var n in e)t[n]=e[n];return t}function It(t){var e=t.parentNode;e&&e.removeChild(t)}function s(t,e,n){var o,r,i,a={};for(i in e)i=="key"?o=e[i]:i=="ref"?r=e[i]:a[i]=e[i];if(arguments.length>2&&(a.children=arguments.length>3?te.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)a[i]===void 0&&(a[i]=t.defaultProps[i]);return Z(t,a,o,r,null)}function Z(t,e,n,o,r){var i={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r==null?++St:r};return r==null&&b.vnode!=null&&b.vnode(i),i}function N(t){return t.children}function W(t,e){this.props=t,this.context=e}function J(t,e){if(e==null)return t.__?J(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?J(t):null}function Ct(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ct(t)}}function Ee(t){(!t.__d&&(t.__d=!0)&&X.push(t)&&!_e.__r++||Fe!==b.debounceRendering)&&((Fe=b.debounceRendering)||setTimeout)(_e)}function _e(){for(var t;_e.__r=X.length;)t=X.sort(function(e,n){return e.__v.__b-n.__v.__b}),X=[],t.some(function(e){var n,o,r,i,a,u;e.__d&&(a=(i=(n=e).__v).__e,(u=n.__P)&&(o=[],(r=F({},i)).__v=i.__v+1,Pe(u,i,r,n.__n,u.ownerSVGElement!==void 0,i.__h!=null?[a]:null,o,a==null?J(i):a,i.__h),At(o,i),i.__e!=a&&Ct(i)))})}function Pt(t,e,n,o,r,i,a,u,d,f){var l,m,h,c,_,I,p,v=o&&o.__k||Tt,S=v.length;for(n.__k=[],l=0;l<e.length;l++)if((c=n.__k[l]=(c=e[l])==null||typeof c=="boolean"?null:typeof c=="string"||typeof c=="number"||typeof c=="bigint"?Z(null,c,null,null,c):Array.isArray(c)?Z(N,{children:c},null,null,null):c.__b>0?Z(c.type,c.props,c.key,null,c.__v):c)!=null){if(c.__=n,c.__b=n.__b+1,(h=v[l])===null||h&&c.key==h.key&&c.type===h.type)v[l]=void 0;else for(m=0;m<S;m++){if((h=v[m])&&c.key==h.key&&c.type===h.type){v[m]=void 0;break}h=null}Pe(t,c,h=h||he,r,i,a,u,d,f),_=c.__e,(m=c.ref)&&h.ref!=m&&(p||(p=[]),h.ref&&p.push(h.ref,null,c),p.push(m,c.__c||_,c)),_!=null?(I==null&&(I=_),typeof c.type=="function"&&c.__k===h.__k?c.__d=d=Rt(c,d,t):d=Dt(t,c,h,v,_,d),typeof n.type=="function"&&(n.__d=d)):d&&h.__e==d&&d.parentNode!=t&&(d=J(h))}for(n.__e=I,l=S;l--;)v[l]!=null&&(typeof n.type=="function"&&v[l].__e!=null&&v[l].__e==n.__d&&(n.__d=J(o,l+1)),Ot(v[l],v[l]));if(p)for(l=0;l<p.length;l++)Lt(p[l],p[++l],p[++l])}function Rt(t,e,n){for(var o,r=t.__k,i=0;r&&i<r.length;i++)(o=r[i])&&(o.__=t,e=typeof o.type=="function"?Rt(o,e,n):Dt(n,o,o,r,o.__e,e));return e}function H(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){H(n,e)}):e.push(t)),e}function Dt(t,e,n,o,r,i){var a,u,d;if(e.__d!==void 0)a=e.__d,e.__d=void 0;else if(n==null||r!=i||r.parentNode==null)e:if(i==null||i.parentNode!==t)t.appendChild(r),a=null;else{for(u=i,d=0;(u=u.nextSibling)&&d<o.length;d+=2)if(u==r)break e;t.insertBefore(r,i),a=i}return a!==void 0?a:r.nextSibling}function yn(t,e,n,o,r){var i;for(i in n)i==="children"||i==="key"||i in e||pe(t,i,null,n[i],o);for(i in e)r&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||n[i]===e[i]||pe(t,i,e[i],n[i],o)}function We(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=n==null?"":typeof n!="number"||gn.test(e)?n:n+"px"}function pe(t,e,n,o,r){var i;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||We(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||We(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?o||t.addEventListener(e,i?je:He,i):t.removeEventListener(e,i?je:He,i);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n==null?"":n;break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,n):t.removeAttribute(e))}}function He(t){this.l[t.type+!1](b.event?b.event(t):t)}function je(t){this.l[t.type+!0](b.event?b.event(t):t)}function Pe(t,e,n,o,r,i,a,u,d){var f,l,m,h,c,_,I,p,v,S,y,g,k,w=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(d=n.__h,u=e.__e=n.__e,e.__h=null,i=[u]),(f=b.__b)&&f(e);try{e:if(typeof w=="function"){if(p=e.props,v=(f=w.contextType)&&o[f.__c],S=f?v?v.props.value:f.__:o,n.__c?I=(l=e.__c=n.__c).__=l.__E:("prototype"in w&&w.prototype.render?e.__c=l=new w(p,S):(e.__c=l=new W(p,S),l.constructor=w,l.render=vn),v&&v.sub(l),l.props=p,l.state||(l.state={}),l.context=S,l.__n=o,m=l.__d=!0,l.__h=[]),l.__s==null&&(l.__s=l.state),w.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=F({},l.__s)),F(l.__s,w.getDerivedStateFromProps(p,l.__s))),h=l.props,c=l.state,m)w.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(w.getDerivedStateFromProps==null&&p!==h&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(p,S),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(p,l.__s,S)===!1||e.__v===n.__v){l.props=p,l.state=l.__s,e.__v!==n.__v&&(l.__d=!1),l.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(C){C&&(C.__=e)}),l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(p,l.__s,S),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(h,c,_)})}if(l.context=S,l.props=p,l.__v=e,l.__P=t,y=b.__r,g=0,"prototype"in w&&w.prototype.render)l.state=l.__s,l.__d=!1,y&&y(e),f=l.render(l.props,l.state,l.context);else do l.__d=!1,y&&y(e),f=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++g<25);l.state=l.__s,l.getChildContext!=null&&(o=F(F({},o),l.getChildContext())),m||l.getSnapshotBeforeUpdate==null||(_=l.getSnapshotBeforeUpdate(h,c)),k=f!=null&&f.type===N&&f.key==null?f.props.children:f,Pt(t,Array.isArray(k)?k:[k],e,n,o,r,i,a,u,d),l.base=e.__e,e.__h=null,l.__h.length&&a.push(l),I&&(l.__E=l.__=null),l.__e=!1}else i==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=bn(n.__e,e,n,o,r,i,a,d);(f=b.diffed)&&f(e)}catch(C){e.__v=null,(d||i!=null)&&(e.__e=u,e.__h=!!d,i[i.indexOf(u)]=null),b.__e(C,e,n)}}function At(t,e){b.__c&&b.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(o){o.call(n)})}catch(o){b.__e(o,n.__v)}})}function bn(t,e,n,o,r,i,a,u){var d,f,l,m=n.props,h=e.props,c=e.type,_=0;if(c==="svg"&&(r=!0),i!=null){for(;_<i.length;_++)if((d=i[_])&&"setAttribute"in d==!!c&&(c?d.localName===c:d.nodeType===3)){t=d,i[_]=null;break}}if(t==null){if(c===null)return document.createTextNode(h);t=r?document.createElementNS("http://www.w3.org/2000/svg",c):document.createElement(c,h.is&&h),i=null,u=!1}if(c===null)m===h||u&&t.data===h||(t.data=h);else{if(i=i&&te.call(t.childNodes),f=(m=n.props||he).dangerouslySetInnerHTML,l=h.dangerouslySetInnerHTML,!u){if(i!=null)for(m={},_=0;_<t.attributes.length;_++)m[t.attributes[_].name]=t.attributes[_].value;(l||f)&&(l&&(f&&l.__html==f.__html||l.__html===t.innerHTML)||(t.innerHTML=l&&l.__html||""))}if(yn(t,h,m,r,u),l)e.__k=[];else if(_=e.props.children,Pt(t,Array.isArray(_)?_:[_],e,n,o,r&&c!=="foreignObject",i,a,i?i[0]:n.__k&&J(n,0),u),i!=null)for(_=i.length;_--;)i[_]!=null&&It(i[_]);u||("value"in h&&(_=h.value)!==void 0&&(_!==t.value||c==="progress"&&!_||c==="option"&&_!==m.value)&&pe(t,"value",_,m.value,!1),"checked"in h&&(_=h.checked)!==void 0&&_!==t.checked&&pe(t,"checked",_,m.checked,!1))}return t}function Lt(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(o){b.__e(o,n)}}function Ot(t,e,n){var o,r;if(b.unmount&&b.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Lt(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){b.__e(i,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&Ot(o[r],e,typeof t.type!="function");n||t.__e==null||It(t.__e),t.__e=t.__d=void 0}function vn(t,e,n){return this.constructor(t,n)}function $t(t,e,n){var o,r,i;b.__&&b.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,i=[],Pe(e,t=(!o&&n||e).__k=s(N,null,[t]),r||he,he,e.ownerSVGElement!==void 0,!o&&n?[n]:r?null:e.firstChild?te.call(e.childNodes):null,i,!o&&n?n:r?r.__e:e.firstChild,o),At(i,t)}function kn(t,e,n){var o,r,i,a=F({},t.props);for(i in e)i=="key"?o=e[i]:i=="ref"?r=e[i]:a[i]=e[i];return arguments.length>2&&(a.children=arguments.length>3?te.call(arguments,2):n),Z(t.type,a,o||t.key,r||t.ref,null)}function ne(t,e){var n={__c:e="__cC"+Et++,__:t,Consumer:function(o,r){return o.children(r)},Provider:function(o){var r,i;return this.getChildContext||(r=[],(i={})[e]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&r.some(Ee)},this.sub=function(a){r.push(a);var u=a.componentWillUnmount;a.componentWillUnmount=function(){r.splice(r.indexOf(a),1),u&&u.call(a)}}),o.children}};return n.Provider.__=n.Consumer.contextType=n}te=Tt.slice,b={__e:function(t,e,n,o){for(var r,i,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((i=r.constructor)&&i.getDerivedStateFromError!=null&&(r.setState(i.getDerivedStateFromError(t)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),a=r.__d),a)return r.__E=r}catch(u){t=u}throw t}},St=0,W.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=F({},this.state),typeof t=="function"&&(t=t(F({},n),this.props)),t&&F(n,t),t!=null&&this.__v&&(e&&this.__h.push(e),Ee(this))},W.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ee(this))},W.prototype.render=N,X=[],_e.__r=0,Et=0;var q,D,ve,ze,ee=0,Mt=[],le=[],Ye=b.__b,Ve=b.__r,Je=b.diffed,Qe=b.__c,qe=b.unmount;function se(t,e){b.__h&&b.__h(D,t,ee||e),ee=0;var n=D.__H||(D.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:le}),n.__[t]}function x(t){return ee=1,wn(Bt,t)}function wn(t,e,n){var o=se(q++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Bt(void 0,e),function(i){var a=o.__N?o.__N[0]:o.__[0],u=o.t(a,i);a!==u&&(o.__N=[u,o.__[1]],o.__c.setState({}))}],o.__c=D,!D.u)){D.u=!0;var r=D.shouldComponentUpdate;D.shouldComponentUpdate=function(i,a,u){if(!o.__c.__H)return!0;var d=o.__c.__H.__.filter(function(l){return l.__c});if(d.every(function(l){return!l.__N}))return!r||r.call(this,i,a,u);var f=!1;return d.forEach(function(l){if(l.__N){var m=l.__[0];l.__=l.__N,l.__N=void 0,m!==l.__[0]&&(f=!0)}}),!!f&&(!r||r.call(this,i,a,u))}}return o.__N||o.__}function P(t,e){var n=se(q++,3);!b.__s&&De(n.__H,e)&&(n.__=t,n.i=e,D.__H.__h.push(n))}function ce(t,e){var n=se(q++,4);!b.__s&&De(n.__H,e)&&(n.__=t,n.i=e,D.__h.push(n))}function Q(t){return ee=5,Re(function(){return{current:t}},[])}function Re(t,e){var n=se(q++,7);return De(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function j(t,e){return ee=8,Re(function(){return t},e)}function oe(t){var e=D.context[t.__c],n=se(q++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(D)),e.props.value):t.__}function xn(){for(var t;t=Mt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ue),t.__H.__h.forEach(Te),t.__H.__h=[]}catch(e){t.__H.__h=[],b.__e(e,t.__v)}}b.__b=function(t){D=null,Ye&&Ye(t)},b.__r=function(t){Ve&&Ve(t),q=0;var e=(D=t.__c).__H;e&&(ve===D?(e.__h=[],D.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=le,n.__N=n.i=void 0})):(e.__h.forEach(ue),e.__h.forEach(Te),e.__h=[])),ve=D},b.diffed=function(t){Je&&Je(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Mt.push(e)!==1&&ze===b.requestAnimationFrame||((ze=b.requestAnimationFrame)||function(n){var o,r=function(){clearTimeout(i),Ke&&cancelAnimationFrame(o),setTimeout(n)},i=setTimeout(r,100);Ke&&(o=requestAnimationFrame(r))})(xn)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==le&&(n.__=n.__V),n.i=void 0,n.__V=le})),ve=D=null},b.__c=function(t,e){e.some(function(n){try{n.__h.forEach(ue),n.__h=n.__h.filter(function(o){return!o.__||Te(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],b.__e(o,n.__v)}}),Qe&&Qe(t,e)},b.unmount=function(t){qe&&qe(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{ue(o)}catch(r){e=r}}),e&&b.__e(e,n.__v))};var Ke=typeof requestAnimationFrame=="function";function ue(t){var e=D,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),D=e}function Te(t){var e=D;t.__c=t.__(),D=e}function De(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Bt(t,e){return typeof e=="function"?e(t):e}function Nn(t,e){for(var n in e)t[n]=e[n];return t}function Xe(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var o in e)if(o!=="__source"&&t[o]!==e[o])return!0;return!1}function Ze(t){this.props=t}(Ze.prototype=new W).isPureReactComponent=!0,Ze.prototype.shouldComponentUpdate=function(t,e){return Xe(this.props,t)||Xe(this.state,e)};var et=b.__b;b.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),et&&et(t)};var tt=function(t,e){return t==null?null:H(H(t).map(e))},Sn={map:tt,forEach:tt,count:function(t){return t?H(t).length:0},only:function(t){var e=H(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:H},En=b.__e;b.__e=function(t,e,n,o){if(t.then){for(var r,i=e;i=i.__;)if((r=i.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}En(t,e,n,o)};var nt=b.unmount;function ke(){this.__u=0,this.t=null,this.__b=null}function Gt(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function ae(){this.u=null,this.o=null}b.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),nt&&nt(t)},(ke.prototype=new W).__c=function(t,e){var n=e.__c,o=this;o.t==null&&(o.t=[]),o.t.push(n);var r=Gt(o.__v),i=!1,a=function(){i||(i=!0,n.__R=null,r?r(u):u())};n.__R=a;var u=function(){if(!--o.__u){if(o.state.__a){var f=o.state.__a;o.__v.__k[0]=function m(h,c,_){return h&&(h.__v=null,h.__k=h.__k&&h.__k.map(function(I){return m(I,c,_)}),h.__c&&h.__c.__P===c&&(h.__e&&_.insertBefore(h.__e,h.__d),h.__c.__e=!0,h.__c.__P=_)),h}(f,f.__c.__P,f.__c.__O)}var l;for(o.setState({__a:o.__b=null});l=o.t.pop();)l.forceUpdate()}},d=e.__h===!0;o.__u++||d||o.setState({__a:o.__b=o.__v.__k[0]}),t.then(a,a)},ke.prototype.componentWillUnmount=function(){this.t=[]},ke.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=function i(a,u,d){return a&&(a.__c&&a.__c.__H&&(a.__c.__H.__.forEach(function(f){typeof f.__c=="function"&&f.__c()}),a.__c.__H=null),(a=Nn({},a)).__c!=null&&(a.__c.__P===d&&(a.__c.__P=u),a.__c=null),a.__k=a.__k&&a.__k.map(function(f){return i(f,u,d)})),a}(this.__b,n,o.__O=o.__P)}this.__b=null}var r=e.__a&&s(N,null,t.fallback);return r&&(r.__h=null),[s(N,null,e.__a?null:t.children),r]};var st=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};(ae.prototype=new W).__a=function(t){var e=this,n=Gt(e.__v),o=e.o.get(t);return o[0]++,function(r){var i=function(){e.props.revealOrder?(o.push(r),st(e,t,o)):r()};n?n(i):i()}},ae.prototype.render=function(t){this.u=null,this.o=new Map;var e=H(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},ae.prototype.componentDidUpdate=ae.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){st(t,n,e)})};var Ut=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,Tn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,In=typeof document!="undefined",Cn=function(t){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};function Pn(t,e,n){return e.__k==null&&(e.textContent=""),$t(t,e),typeof n=="function"&&n(),t?t.__c:null}W.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(W.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var ot=b.event;function Rn(){}function Dn(){return this.cancelBubble}function An(){return this.defaultPrevented}b.event=function(t){return ot&&(t=ot(t)),t.persist=Rn,t.isPropagationStopped=Dn,t.isDefaultPrevented=An,t.nativeEvent=t};var it={configurable:!0,get:function(){return this.class}},rt=b.vnode;b.vnode=function(t){var e=t.type,n=t.props,o=n;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var i in o={},n){var a=n[i];In&&i==="children"&&e==="noscript"||i==="value"&&"defaultValue"in n&&a==null||(i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&a===!0?a="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+e)&&!Cn(n.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():r&&Tn.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),o[i]&&(i="oninputCapture")),o[i]=a)}e=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=H(n.children).forEach(function(u){u.props.selected=o.value.indexOf(u.props.value)!=-1})),e=="select"&&o.defaultValue!=null&&(o.value=H(n.children).forEach(function(u){u.props.selected=o.multiple?o.defaultValue.indexOf(u.props.value)!=-1:o.defaultValue==u.props.value})),t.props=o,n.class!=n.className&&(it.enumerable="className"in n,n.className!=null&&(o.class=n.className),Object.defineProperty(o,"className",it))}t.$$typeof=Ut,rt&&rt(t)};var at=b.__r;b.__r=function(t){at&&at(t),t.__c};function Ft(t){return!!t&&t.$$typeof===Ut}function Ln(t){return Ft(t)?kn.apply(null,arguments):t}function On(t){return!!t.__k&&($t(null,t),!0)}function $n(t){return{render(e){Pn(e,t)},unmount(){On(t)}}}let Wt="America/New_York";function Mn(t){Wt=t}function O(t){t=new Date(t||Date.now());const e={},n="2-digit";return Intl.DateTimeFormat("en-US",{timeZone:Wt,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n}).formatToParts(t).forEach(o=>e[o.type]=o.value),{date:`${e.year}-${e.month}-${e.day}`,time:`${e.hour}:${e.minute}:${e.second}`}}function Y(t){const e=t.split(":").slice(0,2).map(Number),n=e[0]>=12?"PM":"AM";return e[0]=e[0]%12||12,e.map(o=>String(o).padStart(2,"0")).join(":").replace(/^0/,"")+" "+n}function lt(t){const[e,n]=t.slice(0,19).split("T");return{date:e,time:n}}function Ht({start:t,end:e}){if(!e)return we(t);const n=O().date,o=(t.date||"")<n?"Park Open":we(t,"Park Open"),r=we(e,"Park Close");return`${o} - ${r}`}function we({date:t,time:e}={},n=""){const o=O();return t&&t!==o.date?new Date(t+"T00:00").toLocaleString("en-US",{month:"short",day:"numeric"})+(e?", "+Y(e):""):e?Y(e):n}class Bn extends Error{constructor(e){super(`Auth data "${e}" missing or expired`),this.name="ReauthNeeded"}}class Gn{constructor(e,n=localStorage){this.storageKey=e,this.storage=n}getData(){try{const e=this.storage.getItem(this.storageKey);if(e){const{swid:n,accessToken:o,expires:r}=JSON.parse(e),i=O(new Date(r)),a=O();if(i.date>a.date||i.date===a.date&&i.time>a.time&&i.time>="17")return{swid:n,accessToken:o}}}catch(e){console.error(e)}throw new Bn(this.storageKey)}setData(e){this.storage.setItem(this.storageKey,JSON.stringify(e))}deleteData(){this.storage.removeItem(this.storageKey)}}const Un="modulepreload",ct={},Fn="/bg1/",ut=function(e,n){return!n||n.length===0?e():Promise.all(n.map(o=>{if(o=`${Fn}${o}`,o in ct)return;ct[o]=!0;const r=o.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${i}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":Un,r||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),r)return new Promise((u,d)=>{a.addEventListener("load",u),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())},Wn=8e3;async function me(t,e={}){const{params:n,data:o,timeout:r=Wn,...i}=e;e=i,e.referrer||(e.referrer=""),e.credentials||(e.credentials="omit"),e.cache||(e.cache="no-store"),e.headers={"User-Agent":"Mozilla/5.0",...e.headers||{}},n&&Object.keys(n).length>0&&(t+=(t.includes("?")?"&":"?")+Object.entries(n).filter(([,f])=>f!=="").map(f=>f.map(encodeURIComponent).join("=")).join("&")),o&&(e.method||(e.method="POST"),e.headers={...e.headers,"Content-Type":"application/json"},e.body=JSON.stringify(o));const a=new AbortController;e.signal=a.signal;const u=setTimeout(()=>a.abort(),r);let d;try{d=await fetch(t,e)}catch(f){return console.error(f),{status:0,data:null}}finally{clearTimeout(u)}return{status:d.status,data:(d.headers.get("Content-Type")||"").startsWith("application/json")?await d.json():{}}}const Hn={48199:"Mr-Incredible",48200:"Mrs-Incredible",261227:"Nemo",339625:"Russell",339626:"Carl",364907:"Jack-Skellington",431014:"Princess-Tiana",431065:"Darth_Vader",15549505:"Rapunzel",15655408:"Default_SignedIn",15675686:"Crush",15831168:"Wall-E",16453979:"Merida",16726412:"Stormtrooper",16818199:"Violet",16869301:"Jack-Jack",17345357:"R2-D2",17345359:"C-3PO",17532220:"Bruce",17532224:"Green-Alien",17532227:"Kermit",17532228:"Sorcerer-Mickey",17577168:"Elsa",17577169:"Anna",17813977:"Olaf",17888784:"Yoda",18101167:"Captain-Mickey",18368743:"-Nick",18368747:"-Judy",18393706:"-Flash",18403761:"kion",18405224:"-Moana",18405236:"-Elena",19633995:"50th_Mickey",19633996:"50th_Minnie",90003819:"Alice",90003846:"Ariel",90003898:"Belle",90003967:"Buzz",90003976:"Captain-Hook",90004004:"Chesire-Cat",90004017:"Cinderella",90004068:"Daisy",90004076:"Dash",90004104:"Donald",90004228:"Goofy",90004260:"Hamm",90004328:"Princess-Jasmine",90004340:"Jiminy",90004395:"Lady",90004482:"Mickey-Mouse",90004486:"Minnie",90004537:"Mulan",90004605:"Peter-Pan",90004625:"Pluto",90004626:"Pocahontas",90004642:"Princess-Aurora",90004682:"Rex",90004772:"Snow-White",90004778:"Sparky",90004846:"TinkerBell",90004860:"Tramp",90004939:"Zero"},Ae="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/90/90/75/dam/",jn=Ae+"wdpro-assets/avatars/180x180/RetAvatar_180x180_",zn=Ae+"wdpro-assets/avatars/180x180/RetAvatar-180x180",Yn=Ae+"disney-world/50th-anniversary/avatars/RetAvatar_180x180_",Vn={"-":zn,5:Yn};function xe(t){const e=Hn[t||""];if(!!e)return(Vn[e[0]]||jn)+e+".png"}function Jn(t){switch(t){case"./data/dlr.ts":return ut(()=>import("./dlr.js"),[]);case"./data/wdw.ts":return ut(()=>import("./wdw.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const Ie={"https://disneyworld.disney.go.com":"WDW","https://disneyland.disney.go.com":"DLR"},Qn={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"};function qn(t){return t in Ie}class jt extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}const Kn=new Set(["ACTIVITY","DINING"]),Xn=new Set(["FLEX","OTHER","STANDARD","DAS","FDS"]),U=t=>t.split(";")[0];class Le{constructor(e){this.maxPartySize=12,this.onUnauthorized=()=>{},this.partyIds=new Set,this.guestCache=new Map,this.listeners={bookingChange:new Set},this._primaryGuestId="",this.updateTracker=this.bookings,this.convertGuest=n=>{const{id:o,firstName:r,lastName:i,characterId:a,...u}=n,d=`${r} ${i}`.trim();if(!this.guestCache.has(o))switch(n.ineligibleReason){case"INVALID_PARK_ADMISSION":case"PARK_RESERVATION_NEEDED":case"GENIE_PLUS_NEEDED":n.primary&&this.cacheGuest(o,d,a);break;default:this.cacheGuest(o,d,a)}const f=xe(a);return this.partyIds.size>0&&!this.partyIds.has(o)&&(u.ineligibleReason="NOT_IN_PARTY",delete u.eligibleAfter),{...u,id:o,name:d,avatarImageUrl:f}},this.origin=e.origin,this.authStore=e.authStore,this.data=e.data,this.parkMap=Object.fromEntries(this.parks.map(n=>[n.id,n])),this.tracker=e.tracker||new Zn}static async load(e){const n=Ie[e.origin].toLowerCase(),o=(await Jn(`./data/${n}.ts`)).default;return new Le({...e,data:o})}get resort(){return Ie[this.origin]}get parks(){return this.data.parks}setPartyIds(e){this.partyIds=new Set(e)}async experiences(e){var u,d;await this.primaryGuestId();const n=await this.request({path:`/tipboard-vas/api/v1/parks/${encodeURIComponent(e.id)}/experiences`,params:{eligibilityGuestIds:[...this.guestCache.keys()].join(",")}}),o=(d=(((u=n.eligibility)==null?void 0:u.flexEligibilityWindows)||[]).sort((f,l)=>f.time.time.localeCompare(l.time.time))[0])==null?void 0:d.time.time,r=this.nextDropTime(e),i=(this.data.pdts[e.id]||[]).indexOf(r||""),a=1<<i;return{plus:n.availableExperiences.filter(f=>!!f.flex&&f.id in this.data.experiences).map(f=>{const{pdtMask:l=0,...m}=this.data.experiences[f.id];return{...f,...m,park:e,booked:this.tracker.booked(f),drop:!!(a&l)}}),nextBookTime:o}}async guests(e){e||(e={id:"0",park:{id:"0"}});const n=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:e.id,parkId:e.park.id}});this._primaryGuestId=n.primaryGuestId;const o=n.ineligibleGuests.map(this.convertGuest),r=n.guests.map(this.convertGuest).filter(i=>!("ineligibleReason"in i)||o.push(i)&&!1);return o.sort((i,a)=>{const u=+!i.primary-+!a.primary||i.name.localeCompare(a.name);return i.eligibleAfter||a.eligibleAfter?(i.eligibleAfter||"99").localeCompare(a.eligibleAfter||"99")||u:i.ineligibleReason===a.ineligibleReason?u:i.ineligibleReason==="NOT_IN_PARTY"?1:a.ineligibleReason==="NOT_IN_PARTY"||i.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?-1:a.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?1:u}),{eligible:r,ineligible:o}}async primaryGuestId(e){return this._primaryGuestId||await this.guests(e),this._primaryGuestId}async offer({experience:e,guests:n}){const o=await this.request({path:"/ea-vas/api/v2/products/flex/offers",method:"POST",data:{guestIds:n.map(l=>l.id),ineligibleGuests:[],primaryGuestId:await this.primaryGuestId(e),parkId:e.park.id,experienceId:e.id,selectedTime:e.flex.nextAvailableTime},userId:!1}),{id:r,date:i,startTime:a,endTime:u,status:d,changeStatus:f}=o.offer;return{id:r,start:{date:i,time:a},end:{date:i,time:u},active:d==="ACTIVE",changed:f!=="NONE",guests:{eligible:(o.eligibleGuests||[]).map(this.convertGuest),ineligible:(o.ineligibleGuests||[]).map(this.convertGuest)}}}async cancelOffer(e){await this.request({path:`/ea-vas/api/v1/offers/${encodeURIComponent(e.id)}`,method:"DELETE",params:{productType:"FLEX"},userId:!1})}async book(e){var u;const{singleExperienceDetails:{experienceId:n,parkId:o},entitlements:r,startDateTime:i,endDateTime:a}=await this.request({path:"/ea-vas/api/v1/products/flex/bookings",method:"POST",userId:!1,data:{offerId:e.id},key:"booking"});return this.updateTracker(),{type:"LL",subtype:"G+",...this.getExperience(n,o),bookingId:(u=r[0])==null?void 0:u.id,start:lt(i),end:lt(a),cancellable:!0,rebookable:!0,guests:r.map(d=>{const f=this.guestCache.get(d.guestId);return{id:d.guestId,name:(f==null?void 0:f.name)||"",avatarImageUrl:xe(f==null?void 0:f.characterId),entitlementId:d.id}})}}async cancelBooking(e){const o=e.map(r=>r.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${o}`,method:"DELETE",userId:!1})}async bookings(){const{swid:e}=this.authStore.getData(),n=new Date(Date.now()),o=O(n).date,r=Qn[this.resort],{items:i=[],assets:a={},profiles:u={}}=await this.request({path:`/plan/${r}/api/v1/itinerary-items/${e}?item-types=FASTPASS&item-types=DINING&item-types=ACTIVITY`,params:{destination:this.resort,fields:"items,profiles,assets","guest-locators":e+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":o,"end-date":O(new Date(n.getTime()).setDate(n.getDate()+1)).date,"show-friends":"false"},userId:!1}),d=c=>{const{name:_,avatarId:I,type:p}=u[c.id];return{id:U(c.id),name:`${_.firstName} ${_.lastName}`.trim(),avatarImageUrl:xe(I),...p==="transactional"&&{transactional:!0}}},f=new Date(n);f.setMinutes(f.getMinutes()-30);const l=c=>{const _=a[c.asset],p=a[_.facility].location;if(!p)return;const v=this.parkMap[U(p)]||{id:p,name:a[p].name},S=new Date(c.startDateTime);return S<f?void 0:{type:"RES",subtype:c.type,id:U(c.asset),park:v,name:_.name,start:O(S),end:void 0,cancellable:!1,rebookable:!1,guests:c.guests.map(d).sort((g,k)=>+(k.id===this._primaryGuestId)-+(g.id===this._primaryGuestId)||+!k.transactional-+!g.transactional||g.name.localeCompare(k.name)),bookingId:c.id}},m=c=>{var S;if(!Xn.has(c.kind))return;const _=a[c.facility],I=U(_.location),p={FLEX:"G+",STANDARD:"ILL",DAS:"DAS",FDS:"DAS",OTHER:"OTHER"};let v={type:"LL",subtype:c.multipleExperiences?"MULTI":p[c.kind],...this.getExperience(U(c.facility),I,_.name),start:{date:c.displayStartDate,time:c.displayStartTime},end:{date:c.displayEndDate,time:c.displayEndTime},cancellable:c.cancellable&&c.kind==="FLEX",rebookable:!1,guests:c.guests.map(y=>({...d(y),entitlementId:y.entitlementId,...y.redemptionsRemaining!==void 0&&{redemptions:y.redemptionsRemaining}})),bookingId:(S=c.guests[0])==null?void 0:S.entitlementId};if(c.multipleExperiences){const y=c.assets.find(g=>g.original);y&&(v={...v,...this.getExperience(U(y.content),U(a[y.content].location))}),v.choices=c.assets.filter(g=>!g.excluded&&!g.original).map(({content:g})=>{const{name:k,location:w}=a[g];return this.getExperience(U(g),U(w),k)}).sort((g,k)=>g.name.localeCompare(k.name))}return v},h=i.map(c=>{if(c.type==="FASTPASS")return m(c);if(c.type&&Kn.has(c.type))return l(c)}).filter(c=>!!c&&(c.start.date||o)===o);return this.tracker.update(h,this),h}nextDropTime(e){var o,r;const n=O().time.slice(0,5);return(r=(o=this.data.pdts)==null?void 0:o[e.id])==null?void 0:r.find(i=>i>=n)}logOut(){this.authStore.deleteData(),this.onUnauthorized()}getExperience(e,n,o){var r;return{id:e,name:((r=this.data.experiences[e])==null?void 0:r.name)||o,park:this.parkMap[n]}}cacheGuest(e,n,o){this.guestCache.set(e,{name:n,characterId:o})}async request(e){var d;const{swid:n,accessToken:o}=this.authStore.getData(),r=this.origin+e.path,i={...e.params};((d=e.userId)==null||d)&&(i.userId=n);const{status:a,data:u}=await me(r,{method:e.method||"GET",params:i,data:e.data,headers:{Authorization:`BEARER ${o}`,"x-user-id":n}});if(a===401)setTimeout(()=>this.logOut());else{const{key:f}=e;if(String(a)[0]==="2"&&(!f||u[f]))return f?u[f]:u}throw new jt({status:a,data:u})}}const dt="bg1.genie.bookings";class Zn{constructor(){this.entitlementIds=[],this.mostRecent=new Map,this.expToPark=new Map,this.bookedExpIds=new Set;const{date:e=O().date,entitlementIds:n=[],mostRecent:o={},expToPark:r={},bookedExpIds:i=[]}=JSON.parse(localStorage.getItem(dt)||"{}");this.date=e,this.entitlementIds=n,this.mostRecent=new Map(Object.entries(o)),this.expToPark=new Map(Object.entries(r)),this.bookedExpIds=new Set(i),this.checkDate()}booked(e){return this.bookedExpIds.has(e.id)}update(e,n){this.checkDate();const o=e.filter(d=>d.type==="LL"&&d.cancellable),r=new Map,i=new Set(this.entitlementIds),a=this.expToPark;this.expToPark=new Map(o.map(d=>[d.id,d.park.id])),this.entitlementIds=o.map(d=>d.guests.map(({id:f,entitlementId:l})=>(this.entitlementIds.push(l),i.has(l)||r.set(f,r.has(f)?"":l),l))).flat(1),this.mostRecent=new Map([...this.mostRecent,...r]);for(const[d,f]of a)this.expToPark.has(d)||n.guests({id:d,park:{id:f}}).then(({ineligible:l})=>{const m=l.some(h=>h.ineligibleReason==="EXPERIENCE_LIMIT_REACHED");this.bookedExpIds[m?"add":"delete"](d)});const u=new Set(this.mostRecent.values());for(const d of o)d.guests.some(f=>!u.has(f.entitlementId))&&this.bookedExpIds.add(d.id);localStorage.setItem(dt,JSON.stringify({date:this.date,entitlementIds:this.entitlementIds,mostRecent:Object.fromEntries(this.mostRecent),expToPark:Object.fromEntries(this.expToPark),bookedExpIds:[...this.bookedExpIds]})),e.forEach(d=>{d.rebookable=d.cancellable&&d.guests.every(f=>this.mostRecent.get(f.id)===f.entitlementId)})}checkDate(){const e=O().date;this.date!==e&&(this.date=e,this.entitlementIds=[],this.mostRecent=new Map,this.expToPark=new Map,this.bookedExpIds=new Set)}}const zt={"https://vqguest-svc-wdw.wdprapps.disney.com":"WDW","https://vqguest-svc.wdprapps.disney.com":"DLR"};function es(t){return t in zt}const ts=t=>t.sort((e,n)=>+n.primary-+e.primary||+n.preselected-+e.preselected||e.name.localeCompare(n.name));class de extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}class ns{constructor(e){this.onUnauthorized=()=>{},this.origin=e.origin,this.authStore=e.authStore}get resort(){return zt[this.origin]}url(e){return`${this.origin}/application/v1/guest/${e}`}async getQueues(){return(await me(this.url("getQueues"))).data.queues.map(({queueId:e,...n})=>({...n,id:e}))}async getQueue(e){const n=(await this.getQueues()).find(o=>o.id===e.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(e){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:e.id}});return ts(n.guests.map(({guestId:o,firstName:r,lastName:i,isPrimaryGuest:a,isPreselected:u,...d})=>({...d,id:o,name:`${r} ${i}`.trim(),primary:!!a,preselected:!!u})))}async joinQueue(e,n){const o=n.map(a=>a.id),{status:r,data:i}=await this.post({resource:"joinQueue",data:{queueId:e.id,guestIds:o}});if(i.responseStatus==="OK"){const a=i.positions.find(u=>u.queueId===e.id&&u.guestIds.length>0&&o.some(d=>u.guestIds.includes(d)));if(!a)throw new de({status:r,data:i});return{boardingGroup:a.boardingGroup,conflicts:{},closed:!1}}else if(i.responseStatus==="INVALID_GUEST"||i.responseStatus==="CLOSED_QUEUE"){const a=i.responseStatus==="CLOSED_QUEUE",u=new Set,d={};for(const m of i.conflicts)for(const h of m.guestIds){const c=n.find(_=>_.id===h);!c||(d[c.id]=m.conflictType,u.add(h))}const f=n.filter(m=>!u.has(m.id));if(a||f.length===0)return{boardingGroup:null,conflicts:d,closed:a};const l=await this.joinQueue(e,f);return l.conflicts={...d,...l.conflicts},l}else throw new de({status:r,data:i})}logOut(){this.authStore.deleteData(),this.onUnauthorized()}async post(e){const{status:n,data:o}=await me(this.url(e.resource),{method:"POST",headers:{Authorization:`BEARER ${this.authStore.getData().accessToken}`},data:e.data});if(n===401&&setTimeout(()=>this.logOut()),!n||n===401||n>=500)throw new de({status:n,data:o});return{status:n,data:o}}}const Yt=ne({resort:"WDW",onUnauthorized:()=>{},logOut:()=>null}),ss=Yt.Provider,ge=()=>oe(Yt),ye={bg:"bg-blue-500",text:"text-blue-500"},Vt=ne(ye),os=Vt.Provider,V=()=>oe(Vt),is={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function L(t){const{type:e,className:n,...o}=t;let r=`${is[e||"normal"]} ${n||""}`;const{bg:i}=V();return r.includes(" bg-")||(r+=` ${i} text-white`),s("button",{className:`${r} inline-flex items-center justify-center min-w-[36px] rounded-lg px-2 font-semibold disabled:opacity-50`,...o})}function B({onClick:t,disabled:e,children:n}){return s("div",{className:"mb-20"},s("div",{className:"fixed bottom-0 left-0 w-full px-5 pb-5 text-center"},s(L,{className:"max-w-2xl mx-auto shadow-[0px_4px_8px_-1px_#0005]",type:"full",onClick:t,disabled:e},n)))}function rs({title:t,children:e}){const{bg:n,text:o}=V();function r(i){return Ft(i)?i.type===N?Sn.map(i.props.children,r):Ln(i,{className:`bg-[#ffffffe6] ${o} ${i.props.className||""}`}):i}return s("div",{className:`flex justify-end gap-x-2 gap-y-1 min-h-[52px] px-3 py-2 text-lg text-white ${n}`},s("h1",{className:"flex-1 self-center py-0.5 text-xl font-semibold overflow-hidden whitespace-nowrap"},t),r(e))}function ie(t){const{children:e,className:n,...o}=t,r={outer:"",inner:"",...typeof n=="string"?{inner:n}:n};return r.outer.match(/\bz-/)||(r.outer+=" z-10"),s("div",{className:`${r.outer} fixed inset-0`,...o},s("div",{className:`${r.inner} max-w-2xl min-h-full mx-auto`},e))}function G({heading:t,buttons:e,className:n,theme:o,containerRef:r,children:i,...a}){return s(os,{value:o||ye},s(ie,{className:{outer:`bg-white text-black text-base ${n||""}`,inner:"flex flex-col max-w-2xl h-full"},...a},s(rs,{title:t},e),s("div",{ref:r,className:"flex-1 overflow-auto px-3 pb-3"},i)))}const as="bg1.disclaimer.accepted",ls={bg:"bg-red-600",text:"text-red-600"};function cs(){const t=localStorage,e=as,[n,o]=x(!!t.getItem(e));return P(()=>{n&&t.setItem(e,"1")},[n,t,e]),n?null:s(us,{onAccept:()=>o(!0)})}function us({onAccept:t}){return s(G,{heading:"Warning!",theme:ls},s("p",null,'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'),s(B,{onClick:t},"Accept"))}const ds="17e2767256f";function fs(t){return"deferredUuid"in t&&t.deferredUuid!==void 0}class hs{constructor(e,n,o,r=!1){this.iframe=e,this.resort=o,this.logging=r,this.handlers={},this.handshakeAcked=!1,this.onMessage=i=>{if(i.source!==this.iframe.contentWindow||i.data==="inner.loaded")return;const a=JSON.parse(i.data);this.logging&&console.log("Message:",a);const u=a.type==="message"?a.eventName:a.type,d=this.handlers[u],f=d?d("data"in a?a.data:null):void 0;fs(a)&&this.send({type:"deferred",action:"resolve",deferredUuid:a.deferredUuid,data:f!=null?f:{}})},this.on("handshake",()=>{this.handshakeAcked||(this.handshakeAcked=!0,this.send({type:"handshakeAck"}),this.logging&&this.sendMessage("setLogLevel",{level:"log"}),this.sendMessage("workflow.execute",{name:"login"}))}),this.on("lightbox.hide",()=>this.open()),this.on("session.dateOfBirth.read",()=>this.open()),this.on("session.loggedin",({token:i})=>{n({swid:i.swid,accessToken:i.access_token,expires:new Date(i.exp)})})}open(){addEventListener("message",this.onMessage),this.iframe.src=this.authPageUrl,this.handshakeAcked=!1}close(){removeEventListener("message",this.onMessage)}on(e,n){this.handlers[e]=n}sendMessage(e,n){this.send({type:"message",eventName:e,data:n})}send(e){var n;(n=this.iframe.contentWindow)==null||n.postMessage(JSON.stringify({...e,name:"lightbox-client-window"}),this.authPageUrl)}get authPageUrl(){return`https://cdn.registerdisney.go.com/v2/TPR-${this.resort}-LBSDK.IOS-PROD/en-US?include=l10n,config,html,js&buildId=${ds}`}}function _s({resort:t,onLogin:e}){const n=Q(null);return P(()=>{if(!n.current)return;const o=new hs(n.current,e,t);return o.open(),()=>o.close()},[t,e,n]),s("iframe",{title:"Disney Login Form",ref:n,className:"fixed top-0 left-0 w-full h-full border-0"})}function ps({authStore:t,children:e}){const[n,o]=x("Blank"),r=cs(),i=ge();P(()=>{i.onUnauthorized=()=>o("LoginForm")},[i]),P(()=>{function u(){if(!(document.hidden||n==="LoginForm"))try{t.getData(),o("Client")}catch{return o("LoginForm")}}return u(),document.addEventListener("visibilitychange",u),()=>{document.removeEventListener("visibilitychange",u)}},[t,n]);const a={Blank:s("div",null),LoginForm:s(_s,{resort:i.resort,onLogin:u=>{t.setData(u),o("Client")}}),Client:e};return s(N,null,r||a[n])}const z=ge,Jt=ne(void 0),ms=Jt.Provider,gs=()=>oe(Jt),Qt=ne({current:null,begin:()=>null,end:()=>null}),ys=Qt.Provider,re=()=>oe(Qt);async function bs(t={}){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(o=>{e(o)},o=>{n(o)},t)})}const vs={maximumAge:15e3,timeout:2e3};function ks(t){const[e,n]=x(),o=j(()=>{t(async()=>{try{const{coords:r}=await bs(vs);n(i=>i&&r.latitude===i[0]&&r.longitude===i[1]?i:[r.latitude,r.longitude])}catch{n(void 0)}})},[t]);return[e,o]}const ws=3e3,xs={alert:"bg-yellow-200",error:"bg-red-200"};function be(){const[,t]=x(0),[e,n]=x(""),[o,r]=x("alert"),i=j((u,d)=>{n(u),r(d||"alert"),t(f=>(clearTimeout(f),u?self.setTimeout(()=>{n("")},ws):f))},[]);return[s(Ns,{message:e,type:o}),i]}function Ns({message:t,type:e}){return t?s("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${xs[e]} text-gray-800`},t):null}function K({children:t,className:e,title:n}){return e||(e=""),e.match(/\bw-\S+\s*/)||(e+=" w-4"),e.match(/\bh-\S+\s*/)||(e+=" h-auto"),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:e,role:"img"},n&&s("title",null,n),t)}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Oe({className:t}){return s(K,{className:t},s("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"}))}async function qt(t){return new Promise(e=>{setTimeout(e,t)})}function Ss(){const[t,e]=x(0),n=j(async(r,i=500)=>{e(u=>u+1);const a=qt(i);try{await r()}finally{await a,e(u=>u-1)}},[]);return[t>0?s(Kt,null):null,n]}function Kt(){const{bg:t}=V();return s(ie,{className:"flex items-center bg-white bg-opacity-75"},s("div",{className:"w-[50px] mx-auto"},s("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${t}`},s(Oe,{className:"animate-spin w-full text-white"}))))}function $e(){const[t,e]=Ss(),n=!!t,[o,r]=be();return{loadData:j(async(u,d)=>{const f={error:"Unknown error occurred",request:"Network request failed",...d};r("");let l=()=>null;const m=new Promise(c=>{l=()=>c(null)});async function h(...c){await m,r(...c)}await e(async()=>{try{await u(h)}catch(c){if(c instanceof jt){const{status:_}=c.response;h(_ in f?f[_]:f.request,"error")}else console.error(c),h(f.error,"error")}}),l()},[e,r]),loaderElem:s(N,null,o,t),isLoading:n}}const Es=6e4,Ts=30,Is=60,ft="bg1.genie.tipBoard.starred",Cs=(t,e)=>+e.lp-+t.lp,Ps=(t,e)=>(t.priority||1/0)-(e.priority||1/0),Ne=(t,e)=>(e.standby.waitTime||-1)-(t.standby.waitTime||-1),Se=(t,e)=>(t.flex.nextAvailableTime||"").localeCompare(e.flex.nextAvailableTime||""),Rs=(t,e)=>t.name.toLowerCase().localeCompare(e.name.toLowerCase()),ht=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)),Ds=(t,e,n)=>n?ht(t.geo,n)-ht(e.geo,n):0;function As(t,e){const{n,s:o,e:r,w:i}=t.geo,[a,u]=e;return a<n&&a>o&&u<r&&u>i}function _t(t){const[e,n]=t.split(":").map(Number);return e*60+n}const Ls={priority:(t,e)=>Cs(t,e)||Ps(t,e)||Ne(t,e)||Se(t,e),standby:(t,e)=>Ne(t,e)||Se(t,e),soonest:(t,e)=>Se(t,e)||Ne(t,e),nearby:(t,e,n)=>Ds(t,e,n),aToZ:()=>0};function Os({park:t,sortType:e}){const n=z(),{loadData:o,loaderElem:r,isLoading:i}=$e(),[a,u]=ks(o),[d,f]=x([]),[l,m]=x(),[{refreshing:h},c]=x({refreshing:!1,lastRefresh:0}),[_,I]=x(!0),p=Q(new Set);P(()=>{n.updateTracker()},[n]);const v=j((y=!0)=>{c(g=>{if(!y){if(Date.now()-g.lastRefresh<Es)return g;n.updateTracker()}return{refreshing:!0,lastRefresh:g.lastRefresh}})},[n]);ce(()=>{f([]),v(!0)},[t,v]),ce(()=>{!h||(c({refreshing:!1,lastRefresh:Date.now()}),o(async()=>{e==="nearby"&&u();const{plus:y,nextBookTime:g}=await n.experiences(t);m(g);const k=_t(O().time);f(y.map(w=>{const C=w.standby.waitTime||0,A=w.flex.nextAvailableTime;return{...w,lp:!!A&&C>=Ts&&_t(A)-k<=Math.min(Is,(4-Math.trunc(w.priority||4))/3*C),starred:p.current.has(w.id)}})),I(!1)}))},[n,o,t,h,e,u]),P(()=>{e==="nearby"&&u()},[e,u]),P(()=>I(!1),[a,e]),ce(()=>{_||(f(y=>[...y.sort((g,k)=>+k.starred-+g.starred||+k.flex.available-+g.flex.available||Ls[e==="nearby"&&!(a&&As(t,a))?"priority":e](g,k,a)||Rs(g,k))]),I(!0))},[_,t,a,e]),P(()=>{try{const y=JSON.parse(localStorage.getItem(ft)||"[]");p.current=new Set(y),f(g=>g.map(k=>({...k,starred:p.current.has(k.id)})))}catch(y){console.error(y)}},[]);function S(y){const{id:g}=y;y.starred=!y.starred,y.starred?p.current.add(g):p.current.delete(g),localStorage.setItem(ft,JSON.stringify([...p.current])),I(!1)}return{experiences:d,nextBookTime:l,refresh:v,toggleStar:S,isLoading:i,loaderElem:r}}/**
 * Arrow down icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function $s(t){return s(K,{...t},s("path",{d:"M8 15.5l7.5-7.5h-4.5v-8h-6v8h-4.5z"}))}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ms(t){return s(K,{...t},s("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"}))}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Bs(t){return s(K,{...t},s("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"}))}function Xt(){const t=ge();return s(L,{type:"small",onClick:()=>t.logOut()},"Log Out")}function Zt({heading:t,onClose:e,children:n}){return s(ie,{className:{outer:"bg-black bg-opacity-75",inner:"p-2 flex items-center justify-center h-full"},onClick:e},s("div",{className:"flex flex-col max-h-[90%] rounded-lg px-3 py-4 bg-white",onClick:o=>o.stopPropagation()},s("h2",{className:"mt-0"},t),s("div",{className:"flex-1 overflow-auto"},n),s("div",{className:"pt-4"},s(L,{type:"full",onClick:e},"Close"))))}const Gs="_SELECT_RADIO_BUTTON_";function pt(t){const{options:e,value:n,onChange:o,...r}=t,[i,a]=x(!1),[u,d]=x(0),f=Q(null),l=Q(null);ce(()=>{var g;if((g=e[0])!=null&&g.icon)return;const p=f.current,v=p==null?void 0:p.firstChild;if(!v)return;const S=v.nodeValue;if(!S)return;let y=0;for(const k of e)v.nodeValue=k.text,y=Math.max(p.offsetWidth,y);v.nodeValue=S,d(y)},[e]);const m=()=>{var p;return(p=l.current)==null?void 0:p.querySelector("input:checked")};P(()=>{var v;if(!i)return;(v=m())==null||v.focus();const p=S=>{var y;(y=l.current)!=null&&y.contains(S.target)||a(!1)};return addEventListener("focusin",p),()=>removeEventListener("focusin",p)},[i]);const h=()=>{const p=m();p&&o(p.value),a(!1)},{icon:c,text:_}=e.find(p=>p.value===n)||e[0];let I=!1;return s(N,null,s(L,{...r,onClick:()=>a(!0)},c||s("span",{style:{minWidth:`${u}px`},ref:f},_),s(K,{className:"w-2.5 ml-2"},s("path",{d:"m6.8273 12.401-5.6333-7.7812a1.0212 1.0212 117.05 0 1 0.82716-1.62l11.958-2e-7a1.0212 1.0212 62.952 0 1 0.82714 1.62l-1.6438 2.2705a79984 79984 125.9 0 0-2.3456 3.2401l-1.6437 2.2706a1.4479 1.4479 180 0 1-2.3456 4.4e-5z"}))),i&&s(ie,{className:{outer:"bg-black bg-opacity-75",inner:"flex items-center justify-center h-full"},onClick:p=>{var S;const v=p.target;if(!((S=l.current)!=null&&S.contains(v)))return a(!1);if(v.tagName==="INPUT"&&!I)return h();I=!1},onKeyDown:({key:p})=>{["Enter"," "].includes(p)?h():p.startsWith("Arrow")&&(I=!0)},"data-testid":"select-shade"},s("ul",{className:"overflow-auto min-w-[50%] max-h-[90%] rounded-lg bg-white text-black",ref:l},e.map(p=>s("li",{className:"border-t-2 first:border-0 border-gray-300",key:p.value},s("label",{className:"flex flex-row items-center px-4 py-3"},s("input",{type:"radio",name:Gs,defaultChecked:p.value===n,value:p.value,className:"w-4 h-4 mr-2.5"})," ",p.icon&&s("span",{"aria-hidden":"true",className:"mr-2.5"},p.icon)," ",p.text))))))}const en=ne({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),Us=en.Provider,Me=()=>oe(en),Fs="https://bg1.joelface.com/ping",mt="bg1.ping.date";async function tn(){const{date:t}=O();if(localStorage.getItem(mt)===t)return;const{status:n}=await me(Fs,{method:"POST"});n===204&&localStorage.setItem(mt,t)}function $({guests:t,selectable:e,conflicts:n}){return t.length===0?null:s("ul",{className:"mt-2"},t.map(o=>{var r;return s("li",{key:o.id,className:"px-3 py-1"},s("label",{className:"flex items-center"},e&&s("input",{type:"checkbox",checked:e.isSelected(o),onChange:()=>e.onToggle(o),className:"mr-3"}),s("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white"},o.avatarImageUrl?s("img",{src:o.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):s("span",{"aria-hidden":"true"},o.name[0])),s("span",{className:"leading-tight"},o.name,s("br",null),(n==null?void 0:n[o.id])&&s("span",{className:"text-xs font-semibold text-red-700 uppercase"},(r=n[o.id])==null?void 0:r.replace(/_/g," ")))))}))}function Be(t){return s("div",{className:"mt-4 text-lg"},t.end?"Arrive by":"Reservation at",":"," ",s("span",{className:"ml-0.5 font-semibold"},Ht(t)))}function Ws({booking:t,onClose:e}){const n=z(),[o,r]=x(new Set),{loadData:i,loaderElem:a}=$e(),{guests:u}=t,d=o.size===0,f=o.size===u.length;function l(){i(async()=>{d||await n.cancelBooking([...o]),e(u.filter(c=>!o.has(c)))})}const{name:m,park:h}=t;return s(G,{heading:"Your Lightning Lane",theme:h.theme},s("h2",null,m),s("div",null,h.name),s(Be,{...t}),s("div",{className:"ml-3"},s("label",{className:"flex items-center py-4"},s("input",{type:"checkbox",checked:f,onChange:()=>r(new Set(f?[]:u))}),s("span",{className:"ml-3"},"Select All"))),!d&&s("div",{className:"mb-4"},s("h3",null,"Cancel These Guests"),s($,{guests:u.filter(c=>o.has(c)),selectable:{isSelected:()=>!0,onToggle:c=>{const _=new Set(o);_.delete(c),r(_)}}})),!f&&s("div",null,s("h3",null,"Select Guests to Cancel"),s($,{guests:u.filter(c=>!o.has(c)),selectable:{isSelected:()=>!1,onToggle:c=>r(new Set(o).add(c))}})),s(B,{onClick:l},d?"Back":"Cancel "+(f?"Reservation":"Guests")),a)}function nn({booking:t,onClose:e,isNew:n}){var S;const o=z(),{name:r,park:i,choices:a,type:u}=t,d=u==="LL",f=gs()||i,l=re(),[m,h]=x(d?t.guests:void 0),[c,_]=x(!1);if(c&&d&&m)return s(Ws,{booking:{...t,guests:m},onClose:y=>{_(!1),y.length>0?h(y):e(y)}});const I=new Map([[f,[]],...o.parks.map(y=>[y,[]])]);for(const y of a||[])(S=I.get(y.park))==null||S.push(y);const p=[...I.keys()],v=(a?p.length===1?p[0]:{theme:ye}:i).theme;return s(G,{heading:"Your "+(d?t.subtype==="DAS"?"DAS Return Time":"Lightning Lane":"Reservation"),theme:v,buttons:t.rebookable&&s(L,{onClick:()=>l.begin(t)},"Rebook")},a?s("h2",null,"Multiple Experiences"):s(N,null,s("h2",null,r),s("div",null,i.name)),s(Be,{...t}),a&&s(N,null,s("p",null,s("b",null,r)," was temporarily unavailable during your return time. You may redeem this Lightning Lane at one of these replacement experiences:"),[...I].filter(([,y])=>y.length>0).map(([y,g=[]])=>{var k;return s("div",{key:y.id,className:`mt-4 rounded ${((k=y.theme)==null?void 0:k.bg)||""}`},s("h3",{className:"mt-0 p-1 text-white text-center"},y.name),s("ul",{className:"list-disc py-2 pl-8 bg-white bg-opacity-90"},g.map(w=>s("li",{key:w.id},w.name))))})),s("div",{className:"flex mt-4"},s("h3",{className:"inline mt-0"},"Your Party"),t.cancellable&&s(L,{type:"small",onClick:()=>_(!0),className:"ml-3"},"Cancel")),s($,{guests:m||t.guests,conflicts:m&&Object.fromEntries(m.filter(y=>{var g;return((g=y.redemptions)!=null?g:1)!==1}).map(y=>[y.id,`Redemptions left: ${y.redemptions}`]))}),s(B,{onClick:()=>e(m)},n?"Done":"Back"))}function sn({children:t}){return s("p",{className:"border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100"},t)}function on(){const{ineligible:t}=Me();return s($,{guests:t,conflicts:Object.fromEntries(t.map(e=>[e.id,e.eligibleAfter?`TOO EARLY (${Y(e.eligibleAfter)})`:e.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function Ge({buttonText:t,onSubmit:e}){const{eligible:n,ineligible:o,selected:r,setSelected:i}=Me(),[a,u]=x(),[d,f]=be(),{maxPartySize:l}=z();return a?s(N,null,s("h3",null,"Choose Your Party"),s($,{guests:n,selectable:{isSelected:h=>a.has(h),onToggle:h=>u(c=>{f(""),c=new Set(c);const _=c.has(h)?"delete":"add";return _==="add"&&c.size>=l?f(`Maximum party size: ${l}`):c[_](h),c})}}),o.length>0&&s(N,null,s("h3",null,"Ineligible Guests"),s(on,null)),s(B,{disabled:a.size===0,onClick:()=>{i([...a]),u(void 0)}},"Confirm Party"),d):s(N,null,n.length>l&&r.length===l&&s(sn,null,"Party size restricted"),s("div",{className:"mt-4"},s("h3",{className:"inline mt-0"},"Your Party"),s("span",null,s(L,{type:"small",onClick:()=>u(new Set(r)),className:"ml-3"},"Edit"))),s($,{guests:r}),s(B,{onClick:e},t))}function Hs({offer:t,onBook:e}){const n=re();return s(N,null,n.current&&s(sn,null,"Rebooking resets the two hour timer"),s(Be,{...t}),t.changed&&s("div",{className:"text-sm"},s("strong",null,"Note:")," Return time has been changed"),s(Ge,{buttonText:`${n.current?"Rebook":"Book"} Lightning Lane`,onSubmit:e}))}const gt="https://widget.time.is/t.js";function js(){if([...document.scripts].some(e=>e.src===gt))return;const t=document.createElement("script");t.src=gt,t.onload=rn,document.head.appendChild(t)}const fe={};function rn(){"time_is_widget"in self&&self.time_is_widget.init(fe)}function zs(t){js(),fe[t]||(fe[t]={}),rn()}function an(t,e){const n=document.getElementById(t);if(!n||n.firstElementChild)return e();n.textContent=O().time,setTimeout(()=>an(t,e),100)}function Ys({id:t,onSync:e}){return P(()=>{zs(t),an(t,e)},[t,e]),s("time",{id:t})}const Vs={WDW:"Orlando_z161",DLR:"Anaheim_z14e"},Js=5e3;function ln({resort:t,time:e,label:n}){const o=Vs[t],[r,i]=x(null);P(()=>{setTimeout(()=>i(u=>u||!1),Js)},[]);const a=j(()=>i(!0),[]);return s("table",{className:"mt-4 mx-auto text-gray-500"},s("tbody",null,s(yt,{heading:n,time:s("time",null,e||"--:--:--")}),s(yt,{heading:s("a",{href:`https://time.is/${o.split("_")[0]}`,id:"time_is_link",target:"_blank",rel:"noreferrer"},"Current time"),time:s(N,null,s(Ys,{id:o,onSync:a}),r===!1&&s("span",{className:"text-sm font-sans font-semibold text-red-600"}," ","(unsynced)"))})))}function yt({heading:t,time:e}){return s("tr",null,s("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase"},t,":"),s("td",{className:"text-xl font-mono leading-tight"},"\uFEFF",e))}function Qs({startTime:t,onRefresh:e}){return s(N,null,t&&s(ln,{resort:"WDW",time:t,label:"Booking start"}),s("h3",{className:"mt-4"},"Not Available Yet"),t?s("p",null,"At"," ",s("time",{dateTime:t,className:"font-semibold"},Y(t)),", tap the ",s("span",{className:"font-semibold"},"Check Availability")," ","button below to start booking this Lightning Lane."):s("p",null,"Sorry, but you can't make a Lightning Lane reservation for this attraction yet."),s(Ge,{buttonText:"Check Availability",onSubmit:e}))}function qs({onClose:t}){const{ineligible:e}=Me(),{eligibleAfter:n}=e[0]||{},o=re();return s(N,null,n&&s("div",{className:"mt-4 border-2 border-green-600 rounded p-1 uppercase font-semibold text-center text-green-600 bg-green-100"},"Eligible at ",Y(n)),o.current?s(N,null,s("h3",null,"Unable to Rebook"),s("p",null,"Your current reservation cannot be rebooked to this experience due to the following conflicts:")):s(N,null,s("h3",null,"No Eligible Guests"),s("p",null,"No one in your party is currently eligible for this Lightning Lane.")),s(on,null),s(B,{onClick:t},"Back"))}function Ks({onRefresh:t}){return s(N,null,s("h3",null,"No Guests Found"),s("p",null,"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."),s(B,{onClick:t},"Try Again"))}function Xs({onClose:t}){return s(N,null,s("h3",null,"No Reservations Available"),s("p",null,"There aren't enough reservation slots available for your entire party. If only part of your group wishes to go on this attraction, edit your party to check again. Otherwise, go back to the tip board and select another attraction."),s(Ge,{buttonText:"Back",onSubmit:t}))}function cn({booking:t,button:e,badge:n}){return s("div",{className:"flex items-center gap-x-3"},s("div",{className:"flex-1 min-w-0"},s("div",{className:"flex items-center gap-x-2 text-gray-500 text-sm font-semibold uppercase"},n,t.subtype==="DAS"&&s(N,null,s("span",{className:"px-1 rounded bg-gray-400 text-white"},"DAS")," "),Ht(t)),s("div",{className:"text-lg font-semibold leading-tight truncate"},t.choices?"Multiple Experiences":t.name)),e&&s("div",null,e))}function un(){const t=re(),e=V();return t.current?s("div",{className:`sticky top-0 -mx-3 pb-1 ${e.bg}`},s("div",{className:"pb-3 bg-white"},s("div",{className:`pb-1 ${e.bg} text-white text-sm font-semibold uppercase text-center`},"Rebooking"),s("div",{className:"mt-2 px-3"},s(cn,{booking:t.current,button:s(L,{type:"small",onClick:()=>t.end(!0)},"Keep")})))):null}/**
 * Clock icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Zs(t){return s(K,{...t},s("path",{d:"M10.293 11.707l-3.293-3.293v-4.414h2v3.586l2.707 2.707zM8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14c-3.314 0-6-2.686-6-6s2.686-6 6-6c3.314 0 6 2.686 6 6s-2.686 6-6 6z"}))}function eo({onClose:t}){const e=z(),n=ye,[o,r]=x(),[i,a]=x(),[u,d]=x(!1);function f(m){!i||(a(void 0),m&&r(h=>{if(!!h)return m.length>0?i.guests=m:h.splice(h.indexOf(i),1),h}))}P(()=>{d(!0),e.bookings().then(m=>r(m))},[e]);function l(){d(!1),setTimeout(t,300)}return i?s(nn,{booking:i,onClose:f}):s(N,null,s(ie,{onClick:l,"data-testid":"panel-shade",className:{inner:"bg-black bg-opacity-75"}}),s(G,{heading:"Your Day",buttons:s(L,{onClick:l},"Close"),className:`top-auto ${u?"h-[60%]":"h-0"} duration-200 ease-linear`},o&&o.length>0?s("ul",null,(o||[]).map(m=>s("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",key:m.bookingId},s(cn,{booking:m,button:s(L,{type:"small",onClick:()=>a(m)},"More"),badge:m.rebookable&&s("span",{title:"Rebookable",className:`inline-block w-2.5 h-2.5 rounded-full ${n.bg}`})})))):s("div",{className:"mt-4 text-sm font-semibold text-center uppercase  text-gray-500"},o&&"No current reservations")))}function dn({onOpen:t,onClose:e,...n}){const[o,r]=x(),i=t||r,a=e||(()=>r(void 0));return s(N,null,s(L,{...n,onClick:()=>i(s(eo,{onClose:a})),title:"Your Day"},s(Zs,null)),o)}function to({experience:t,onClose:e}){const n=z(),o=re(),[r,i]=x(),[a,u]=x(!t.flex.available&&t.flex.enrollmentStartTime!==void 0),[d,f]=x(a?null:void 0),[l,m]=x(),{loadData:h,loaderElem:c}=$e();async function _(){if(!d||!r)return;let g=null;await h(async()=>{const k=new Set(r.selected.map(C=>C.id));o.current&&await n.cancelBooking(o.current.guests.filter(C=>k.has(C.id)));try{g=await n.book(d)}finally{o.end()}const w=g.guests.filter(C=>!k.has(C.id));w.length>0&&(await n.cancelBooking(w),g.guests=g.guests.filter(C=>k.has(C.id))),tn()},{410:"Offer expired"}),g&&m(g)}function I(){h(async g=>{const{plus:k}=await n.experiences(t.park),w=k.find(C=>C.id===t.id);w!=null&&w.flex.available?(u(!1),f(void 0)):g("Reservations not open yet")})}function p(){d&&n.cancelOffer(d),e()}const v=j(()=>{h(async()=>{try{let g=await n.guests(t);const k=o.current;if(k){const w=new Set(k.guests.map(A=>A.id)),C=[...g.eligible,...g.ineligible].filter(A=>w.has(A.id)&&!(A.ineligibleReason==="TOO_EARLY"||A.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"&&t.id===k.id));g=C.length>0?{eligible:[],ineligible:C}:{eligible:k.guests,ineligible:[]}}i({...g,selected:g.eligible.slice(0,n.maxPartySize),setSelected:w=>i(C=>{if(!C)return C;const A=new Set(C.selected);return f(E=>E===null||w.some(T=>!A.has(T))?void 0:E),{...C,selected:w}})})}catch(g){throw i({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),g}})},[n,t,o,h]);P(()=>{r||v()},[r,v]);const S=j(g=>{!r||r.selected.length===0||h(async()=>{try{const k=await n.offer({experience:t,guests:r.selected}),{ineligible:w}=k.guests;if(w.length>0){const C=new Set(w.map(E=>E.id)),A=E=>!C.has(E.id);i({...r,eligible:r.eligible.filter(A),ineligible:[...w,...r.ineligible],selected:r.selected.filter(A)})}k.active&&(d&&(k.changed=!1),f(k))}catch(k){throw g||f(null),k}},{410:d?"No reservations available":""})},[n,t,r,d,h]);if(P(()=>{d===void 0&&S()},[d,S]),l)return s(nn,{booking:l,onClose:e,isNew:!0});const y=(r==null?void 0:r.eligible.length)===0&&(r==null?void 0:r.ineligible.length)===0;return s(G,{heading:"Lightning Lane",theme:t.park.theme,buttons:s(N,null,s(dn,null),r&&(a||d||y)&&s(L,{onClick:p},"Cancel"),!a&&d!==void 0&&s(L,{onClick:S,title:"Refresh Offer"},s(Oe,null)))},s(un,null),s("h2",null,t.name),s("div",null,t.park.name),s(Us,{value:r||{eligible:[],ineligible:[],selected:[],setSelected:()=>null}},(r==null?void 0:r.eligible.length)===0?y?s(Ks,{onRefresh:v}):s(qs,{onClose:e}):!r||d===void 0?s("div",null):a?s(Qs,{startTime:t.flex.enrollmentStartTime,onRefresh:I}):d===null?s(Xs,{onClose:e}):s(Hs,{offer:d,onBook:_})),c)}function Ue({label:t,children:e}){return s("div",{className:"flex items-center flex-1 whitespace-nowrap"},s("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500"},t)," ",e)}function no({experience:t,onClick:e}){const{flex:n}=t;return s(Ue,{label:"Genie+"},s("span",null,s(L,{onClick:()=>e(t)},n.nextAvailableTime?Y(n.nextAvailableTime):"none")))}const fn="bg1.genie.partyIds";function hn(){const t=JSON.parse(localStorage.getItem(fn)||"[]");return Array.isArray(t)?t:[]}function so(){const t=z();P(()=>t.setPartyIds(hn()),[t])}function oo({onClose:t}){const e=z(),[n,o]=x(!0),[r,i]=x(),[a,u]=x(()=>{const h=new Set(hn());return o(h.size===0),h});function d(){const h=[...a];localStorage.setItem(fn,JSON.stringify(h)),e.setPartyIds(h),t()}P(()=>{e.guests().then(h=>{i([...h.eligible,...h.ineligible].sort((c,_)=>+!c.primary-+!_.primary||c.name.localeCompare(_.name)))})},[e]),P(()=>{n&&u(new Set)},[n]);const f=r==null?void 0:r.filter(h=>a.has(h.id)),l=r==null?void 0:r.filter(h=>!a.has(h.id)),m=h=>s("li",null,s("label",{className:"flex items-center mt-2"},s("input",{type:"radio",name:"auto",onChange:()=>o(h.auto),checked:n===h.auto,className:"mr-2"})," ",h.children));return s(G,{heading:"Party Selection",buttons:s(L,{onClick:t},"Cancel")},s("p",null,"By default, all eligible guests (up to a maximum of 12) are automatically selected when you book a Lightning Lane. If you would like to limit who you book for, you can manually select your party here."),s("ul",null,s(m,{auto:!0},"Book for all eligible guests"),s(m,{auto:!1},"Only book for selected guests")),n?null:(r==null?void 0:r.length)===0?s("p",{className:"text-red-700"},"No guests to select"):f&&l?s(N,null,f.length>0&&s(N,null,s("h3",null,"Your Party"),s($,{guests:f,selectable:{isSelected:()=>!0,onToggle:h=>{const c=new Set(a);c.delete(h.id),u(c)}}})),l.length>0&&s(N,null,s("h3",null,"Add to Your Party"),s($,{guests:l,selectable:{isSelected:()=>!1,onToggle:h=>{const c=new Set(a);c.add(h.id),u(c)}}}))):s(Kt,null),s(B,{disabled:!n&&a.size===0,onClick:d},"Save"))}function io({experience:{type:t,standby:e}}){return e.displayNextShowTime||t==="ENTERTAINMENT"&&!e.waitTime?s(ao,{standby:e}):s(ro,{standby:e})}const ro=({standby:t})=>s(Ue,{label:"Standby"},t.available?s(pn,{time:t.waitTime!==void 0?t.waitTime+" min":"now"}):s(mn,{text:"down"})),ao=({standby:t})=>s(Ue,{label:s(N,null,"Next ",s("span",{className:"hidden xs:inline"},"Show"))},t.displayNextShowTime?s(pn,{time:t.displayNextShowTime}):s(mn,{text:"none"})),_n="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",pn=({time:t})=>s("span",{className:`${_n} border-gray-500 text-gray-500 bg-gray-100`},t),mn=({text:t})=>s("span",{className:`${_n} border-red-600 text-red-600 bg-red-100`},t);function lo({bookTime:t,dropTime:e}){const n=V();return!t&&!e?null:s("div",{className:`flex justify-center gap-x-10 -mx-3 px-3 pb-1 ${n.bg} text-white text-sm font-semibold uppercase text-center`},s(bt,{label:"Book",time:t}),s(bt,{label:"Drop",time:e}))}function bt({label:t,time:e}){if(!e)return null;e=e.slice(0,5);const n=O().time.slice(0,5);return s("div",null,t,":"," ",s("time",{dateTime:e,className:"whitespace-nowrap"},e>n?Y(e):"now"))}const vt="bg1.genie.tipBoard.park",co=[{value:"priority",text:"Priority"},{value:"nearby",text:"Nearby"},{value:"standby",text:"Standby"},{value:"soonest",text:"Soonest"},{value:"aToZ",text:"A to Z"}],kt=t=>t.booked&&!t.starred;function uo(){var A;so();const t=z(),{parks:e}=t,[n,o]=x(()=>{const{id:E=e[0].id,date:T=""}=JSON.parse(sessionStorage.getItem(vt)||"{}")||{};return T===O().date&&e.find(R=>R.id===E)||e[0]}),[r,i]=x("priority"),{experiences:a,nextBookTime:u,refresh:d,toggleStar:f,isLoading:l,loaderElem:m}=Os({park:n,sortType:r}),[h,c]=x(),_=()=>c(void 0),[I,p]=x(()=>({current:null,begin:E=>{p({...I,current:E}),o(E.park),_()},end:(E=!1)=>{p(T=>T.current?{...T,current:null}:T),E&&_()}})),v=Q(null);P(()=>{if(l||h)return;const E=()=>{document.hidden||d(!1)};return document.addEventListener("visibilitychange",E),()=>{document.removeEventListener("visibilitychange",E)}},[h,d,l]),P(()=>{var E;(E=v.current)==null||E.scroll(0,0)},[n,r,I]),P(()=>{sessionStorage.setItem(vt,JSON.stringify({id:n.id,date:O().date}))},[n]);const S=Re(()=>e.map(E=>({value:E.id,icon:E.icon,text:E.name})),[e]),y=(A=a==null?void 0:a[0])==null?void 0:A.flex.enrollmentStartTime,g=t.nextDropTime(n),k=E=>s("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",key:E.id+(E.starred?"*":"")},s("div",{className:"flex items-center gap-x-2 mt-2"},s(fo,{experience:E,toggleStar:f}),s("h3",{className:"flex-1 mt-0 text-lg font-semibold leading-tight truncate"},E.name),E.lp?s(wt,{name:"Lightning Pick",icon:Ms,onClick:()=>c(s(ho,{onClose:_}))}):g&&E.drop?s(wt,{name:"Upcoming Drop",icon:$s,onClick:()=>c(s(_o,{dropTime:g,onClose:_}))}):null),E.flex.preexistingPlan&&s("div",{className:"mt-2 border-2 border-green-600 rounded p-1 text-sm uppercase font-semibold text-center text-green-600 bg-green-100"},"Lightning Lane Booked"),s("div",{className:"flex flex-wrap gap-1.5 mt-2"},s(io,{experience:E}),s(no,{experience:E,onClick:T=>c(s(to,{experience:T,onClose:()=>{_(),d(!1)}}))}))),w=a.filter(E=>!kt(E)),C=a.filter(kt).sort((E,T)=>E.name.localeCompare(T.name));return s(ys,{value:I},s(G,{heading:s(N,null,"G",s("span",{className:"hidden xs:inline"},"enie"),"+"),theme:n.theme,buttons:s(N,null,s(dn,{onOpen:c,onClose:_}),s(pt,{options:S,value:n.id,onChange:E=>o(e.find(T=>T.id===E)),title:"Park"}),s(pt,{options:co,value:r,onChange:i,title:"Sort By"}),s(L,{onClick:d,title:"Refresh Tip Board"},s(Oe,null))),containerRef:v},s("div",{"aria-hidden":!!h},s(un,null),s(lo,{bookTime:y||u,dropTime:g}),s("ul",{"data-testid":"unbooked"},w.map(k)),C.length>0&&s(N,null,s("h2",{className:`-mx-3 px-3 py-1 text-sm uppercase text-center ${n.theme.bg} text-white`},"Previously Booked"),s("ul",{"data-testid":"booked"},C.map(k))),!l&&s("div",{className:"mt-12 flex justify-center gap-x-3"},s(L,{type:"small",onClick:()=>c(s(oo,{onClose:_}))},"Party"),s(Xt,null)),m)),s(ms,{value:n},h))}function wt({name:t,icon:e,onClick:n}){const o=V();return s("button",{title:`${t} (more info)`,className:`-mx-2 px-2 ${o.text}`,onClick:n},s(e,null))}function fo({experience:t,toggleStar:e}){const n=V();return s("button",{title:`${t.starred?"Unfavorite":"Favorite"}`,className:"-m-2 p-2",onClick:()=>e(t)},s(Bs,{className:t.starred?n.text:"text-gray-300"}))}function ho(t){return s(Zt,{heading:"Lightning Pick",...t},s("p",null,"When an attraction with a long wait has a Lightning Lane return time in the near future, it's highlighted as a Lightning Pick. Book these quick before they're gone!"))}function _o({dropTime:t,onClose:e}){return s(Zt,{heading:"Upcoming Drop",onClose:e},s("p",null,"This attraction may be part of the"," ",s("time",{dateTime:t,className:"font-semibold"},Y(t))," ","drop of additional Lightning Lane inventory with earlier return times than what's currently being offered. Availability varies but is always limited, so be sure you're ready to book when the drop time arrives!"))}const po=ge,mo={success:5e3,failure:1e3};function go({guests:t,result:e,onDone:n}){const{boardingGroup:o,conflicts:r}=e,i=t.filter(f=>!(f.id in r)),a=t.filter(f=>f.id in r),[u,d]=x(!1);return P(()=>{setTimeout(()=>d(!0),mo[o?"success":"failure"])},[o]),s(N,null,o!==null?s(N,null,s("h2",{className:"mt-5 text-xl"},"Congratulations! \u{1F389}"),s("p",null,"You joined the virtual queue!"),s("p",{className:"text-lg font-semibold"},"Boarding Group: ",o),s($,{guests:i}),Object.keys(r).length>0&&s(N,null,s("p",{className:"font-semibold"},"These guests could not join:"),s($,{guests:a,conflicts:r})),s("p",null,"Refer to the My Disney Experience app for return time and other information.")):s(N,null,s("h2",{className:"mt-5 text-xl"},"Sorry!"),s("p",null,"A boarding group could not be obtained."),s($,{guests:a,conflicts:r})),u&&s(B,{onClick:n},"Done"))}function yo({guests:t,party:e,onToggle:n,onConfirm:o}){return s(N,null,s("div",{className:"mt-5"},s("h2",{className:"inline mr-3 text-xl"},"Choose Your Party"),s(Xt,null)),t?t.length>0?s($,{guests:t,selectable:{isSelected:r=>e.has(r),onToggle:n}}):s("p",null,"No guests available"):s("p",null,"Loading guests\u2026"),s(B,{disabled:e.size===0,onClick:o},"Confirm Party"))}function bo({queue:t}){return s(N,null,t.howToEnterMessage.split(`

`).map((e,n)=>s("p",{key:n},e)))}const vo=999;function ko({guests:t,joinQueue:e,onEdit:n}){const[o,r]=x(!1),[i,a]=be();async function u(){r(!0),a("");const d=qt(vo);try{await e()||a("Queue not open yet")}catch(f){a("Error: try again","error"),f instanceof de||console.error(f)}finally{await d,r(!1)}}return s(N,null,s("div",{className:"mt-4"},s("h2",{className:"inline mr-3 text-xl"},"Your Party"),s(L,{type:"small",onClick:n},"Edit")),s($,{guests:t}),s(B,{disabled:o,onClick:u},"Join Virtual Queue"),i)}function wo({queue:t,queues:e,onChange:n}){e||(e=[]);const{bg:o}=V(),r=`block w-full ${o} text-white text-xl font-semibold`;return s(N,null,e.length<=1?s("span",{className:`${r} px-1 truncate`},t.name):s("select",{className:`${r} pr-1`,value:t.id,onChange:i=>n?n(i.currentTarget.value):null},e.map(i=>s("option",{key:i.id,value:i.id,className:"text-base font-normal"},i.name))))}const xt=t=>t.categoryContentId==="attraction";function xo(){const t=po(),[e,n]=x(),[o,r]=x(null),[i,a]=x(),[u,d]=x(new Set),[f,l]=x({boardingGroup:null,conflicts:{},closed:!0}),[m,h]=x(!1),[c,_]=x("ChooseParty"),[I,p]=be(),v=Q(null),S=j(async()=>{p(""),h(!0);const T=(await t.getQueues()).filter(R=>R.isAcceptingJoins||R.isAcceptingPartyCreation).sort((R,M)=>+xt(M)-+xt(R)||R.name.localeCompare(M.name));h(!1),n(R=>(R&&T.length===0&&p("No queues available"),T))},[t,p]);P(()=>{S();const T=()=>{document.hidden||S()};return document.addEventListener("visibilitychange",T),()=>{document.removeEventListener("visibilitychange",T)}},[S]),P(()=>{r(T=>{const R=T&&(e==null?void 0:e.find(M=>M.id===T.id));return R||(a(void 0),e&&e.length>0?e[0]:null)})},[e]),P(()=>{if(i||!o)return;let T=!1;return(async()=>{const R=await t.getLinkedGuests(o);T||(a(R),d(new Set(R.filter(M=>M.preselected))))})(),()=>{T=!0}},[t,o,i]),P(()=>{var T;(T=v.current)==null||T.scroll(0,0)},[c]);function y(T){const R=new Set(u);R[R.has(T)?"delete":"add"](T);const M=Number(o==null?void 0:o.maxPartySize);M>0&&R.size>M?p(`Maximum party size: ${M}`):(d(R),p(""))}function g(T){const R=e==null?void 0:e.find(M=>M.id===T);R&&(r(R),a(void 0))}async function k(){if(!o||!(await t.getQueue(o)).isAcceptingJoins)return!1;const T=await t.joinQueue(o,[...u]);return l(T),_("BGResult"),T.boardingGroup!==null&&tn(),!0}if((e==null?void 0:e.length)===0)return s(G,{heading:"No Active Queues"},s("p",null,"You can't join any virtual queues just yet. Check back within an hour of the queue opening time, or tap the Refresh button to check again."),s(B,{disabled:m,onClick:S},"Refresh"),I);if(!o)return s("div",null);const w=(i||[]).filter(T=>u.has(T)),C=s(ln,{resort:t.resort,time:o.nextScheduledOpenTime,label:"Next queue opening"}),A=s(wo,{queue:o,queues:c==="ChooseParty"?e:[],onChange:g});return{ChooseParty:s(G,{heading:A,containerRef:v},s(bo,{queue:o}),C,s(yo,{guests:i,party:u,onToggle:y,onConfirm:()=>_("JoinQueue")}),I),JoinQueue:s(G,{heading:A},C,s(ko,{guests:w,onEdit:()=>_("ChooseParty"),joinQueue:k})),BGResult:s(G,{heading:A},s(go,{guests:w,result:f,onDone:()=>_("ChooseParty")}))}[c]}const Ce=new Gn("bg1.auth");es(origin)?Nt(new ns({origin,authStore:Ce}),xo):qn(origin)?Le.load({origin,authStore:Ce}).then(t=>Nt(t,uo)):location.href="https://joelface.github.io/bg1/start.html";async function Nt(t,e){Mn({WDW:"America/New_York",DLR:"America/Los_Angeles"}[t.resort]),document.title="BG1",So(),No(),Eo().render(s(ss,{value:t},s(ps,{authStore:Ce},s(e,null))))}function No(){document.body.addEventListener("click",()=>null)}function So(){const t=document.createElement("meta");t.name="viewport",t.content="width=device-width, initial-scale=1, maximum-scale=1",document.head.appendChild(t)}function Eo(){const t=document.createElement("div");return t.id="app",document.body.appendChild(t),$n(t)}
