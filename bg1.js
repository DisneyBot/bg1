var Un=Object.defineProperty;var Hn=(e,t,n)=>t in e?Un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var P=(e,t,n)=>(Hn(e,typeof t!="symbol"?t+"":t,n),n);var se,b,Ft,ee,nt,zt,pe={},Yt=[],Wn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Y(e,t){for(var n in t)e[n]=t[n];return e}function jt(e){var t=e.parentNode;t&&t.removeChild(e)}function Ce(e,t,n){var r,o,s,a={};for(s in t)s=="key"?r=t[s]:s=="ref"?o=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?se.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)a[s]===void 0&&(a[s]=e.defaultProps[s]);return te(e,a,r,o,null)}function te(e,t,n,r,o){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++Ft};return o==null&&b.vnode!=null&&b.vnode(s),s}function k(e){return e.children}function j(e,t){this.props=e,this.context=t}function ie(e,t){if(t==null)return e.__?ie(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?ie(e):null}function Vt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Vt(e)}}function Pe(e){(!e.__d&&(e.__d=!0)&&ee.push(e)&&!me.__r++||nt!==b.debounceRendering)&&((nt=b.debounceRendering)||setTimeout)(me)}function me(){for(var e;me.__r=ee.length;)e=ee.sort(function(t,n){return t.__v.__b-n.__v.__b}),ee=[],e.some(function(t){var n,r,o,s,a,c;t.__d&&(a=(s=(n=t).__v).__e,(c=n.__P)&&(r=[],(o=Y({},s)).__v=s.__v+1,We(c,s,o,n.__n,c.ownerSVGElement!==void 0,s.__h!=null?[a]:null,r,a??ie(s),s.__h),qt(r,s),s.__e!=a&&Vt(s)))})}function Jt(e,t,n,r,o,s,a,c,u,f){var l,m,h,d,p,E,x,v=r&&r.__k||Yt,g=v.length;for(n.__k=[],l=0;l<t.length;l++)if((d=n.__k[l]=(d=t[l])==null||typeof d=="boolean"?null:typeof d=="string"||typeof d=="number"||typeof d=="bigint"?te(null,d,null,null,d):Array.isArray(d)?te(k,{children:d},null,null,null):d.__b>0?te(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d)!=null){if(d.__=n,d.__b=n.__b+1,(h=v[l])===null||h&&d.key==h.key&&d.type===h.type)v[l]=void 0;else for(m=0;m<g;m++){if((h=v[m])&&d.key==h.key&&d.type===h.type){v[m]=void 0;break}h=null}We(e,d,h=h||pe,o,s,a,c,u,f),p=d.__e,(m=d.ref)&&h.ref!=m&&(x||(x=[]),h.ref&&x.push(h.ref,null,d),x.push(m,d.__c||p,d)),p!=null?(E==null&&(E=p),typeof d.type=="function"&&d.__k===h.__k?d.__d=u=Qt(d,u,e):u=Kt(e,d,h,v,p,u),typeof n.type=="function"&&(n.__d=u)):u&&h.__e==u&&u.parentNode!=e&&(u=ie(h))}for(n.__e=E,l=g;l--;)v[l]!=null&&Xt(v[l],v[l]);if(x)for(l=0;l<x.length;l++)Zt(x[l],x[++l],x[++l])}function Qt(e,t,n){for(var r,o=e.__k,s=0;o&&s<o.length;s++)(r=o[s])&&(r.__=e,t=typeof r.type=="function"?Qt(r,t,n):Kt(n,r,r,o,r.__e,t));return t}function V(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(n){V(n,t)}):t.push(e)),t}function Kt(e,t,n,r,o,s){var a,c,u;if(t.__d!==void 0)a=t.__d,t.__d=void 0;else if(n==null||o!=s||o.parentNode==null)e:if(s==null||s.parentNode!==e)e.appendChild(o),a=null;else{for(c=s,u=0;(c=c.nextSibling)&&u<r.length;u+=1)if(c==o)break e;e.insertBefore(o,s),a=s}return a!==void 0?a:o.nextSibling}function Fn(e,t,n,r,o){var s;for(s in n)s==="children"||s==="key"||s in t||_e(e,s,null,n[s],r);for(s in t)o&&typeof t[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||n[s]===t[s]||_e(e,s,t[s],n[s],r)}function it(e,t,n){t[0]==="-"?e.setProperty(t,n):e[t]=n==null?"":typeof n!="number"||Wn.test(t)?n:n+"px"}function _e(e,t,n,r,o){var s;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||it(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||it(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r||e.addEventListener(t,s?st:rt,s):e.removeEventListener(t,s?st:rt,s);else if(t!=="dangerouslySetInnerHTML"){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,n))}}function rt(e){this.l[e.type+!1](b.event?b.event(e):e)}function st(e){this.l[e.type+!0](b.event?b.event(e):e)}function We(e,t,n,r,o,s,a,c,u){var f,l,m,h,d,p,E,x,v,g,y,S,_,w,I,T=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(u=n.__h,c=t.__e=n.__e,t.__h=null,s=[c]),(f=b.__b)&&f(t);try{e:if(typeof T=="function"){if(x=t.props,v=(f=T.contextType)&&r[f.__c],g=f?v?v.props.value:f.__:r,n.__c?E=(l=t.__c=n.__c).__=l.__E:("prototype"in T&&T.prototype.render?t.__c=l=new T(x,g):(t.__c=l=new j(x,g),l.constructor=T,l.render=Yn),v&&v.sub(l),l.props=x,l.state||(l.state={}),l.context=g,l.__n=r,m=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),T.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Y({},l.__s)),Y(l.__s,T.getDerivedStateFromProps(x,l.__s))),h=l.props,d=l.state,m)T.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(T.getDerivedStateFromProps==null&&x!==h&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(x,g),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(x,l.__s,g)===!1||t.__v===n.__v){for(l.props=x,l.state=l.__s,t.__v!==n.__v&&(l.__d=!1),l.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(O){O&&(O.__=t)}),y=0;y<l._sb.length;y++)l.__h.push(l._sb[y]);l._sb=[],l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(x,l.__s,g),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(h,d,p)})}if(l.context=g,l.props=x,l.__v=t,l.__P=e,S=b.__r,_=0,"prototype"in T&&T.prototype.render){for(l.state=l.__s,l.__d=!1,S&&S(t),f=l.render(l.props,l.state,l.context),w=0;w<l._sb.length;w++)l.__h.push(l._sb[w]);l._sb=[]}else do l.__d=!1,S&&S(t),f=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++_<25);l.state=l.__s,l.getChildContext!=null&&(r=Y(Y({},r),l.getChildContext())),m||l.getSnapshotBeforeUpdate==null||(p=l.getSnapshotBeforeUpdate(h,d)),I=f!=null&&f.type===k&&f.key==null?f.props.children:f,Jt(e,Array.isArray(I)?I:[I],t,n,r,o,s,a,c,u),l.base=t.__e,t.__h=null,l.__h.length&&a.push(l),E&&(l.__E=l.__=null),l.__e=!1}else s==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=zn(n.__e,t,n,r,o,s,a,u);(f=b.diffed)&&f(t)}catch(O){t.__v=null,(u||s!=null)&&(t.__e=c,t.__h=!!u,s[s.indexOf(c)]=null),b.__e(O,t,n)}}function qt(e,t){b.__c&&b.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(r){r.call(n)})}catch(r){b.__e(r,n.__v)}})}function zn(e,t,n,r,o,s,a,c){var u,f,l,m=n.props,h=t.props,d=t.type,p=0;if(d==="svg"&&(o=!0),s!=null){for(;p<s.length;p++)if((u=s[p])&&"setAttribute"in u==!!d&&(d?u.localName===d:u.nodeType===3)){e=u,s[p]=null;break}}if(e==null){if(d===null)return document.createTextNode(h);e=o?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,h.is&&h),s=null,c=!1}if(d===null)m===h||c&&e.data===h||(e.data=h);else{if(s=s&&se.call(e.childNodes),f=(m=n.props||pe).dangerouslySetInnerHTML,l=h.dangerouslySetInnerHTML,!c){if(s!=null)for(m={},p=0;p<e.attributes.length;p++)m[e.attributes[p].name]=e.attributes[p].value;(l||f)&&(l&&(f&&l.__html==f.__html||l.__html===e.innerHTML)||(e.innerHTML=l&&l.__html||""))}if(Fn(e,h,m,o,c),l)t.__k=[];else if(p=t.props.children,Jt(e,Array.isArray(p)?p:[p],t,n,r,o&&d!=="foreignObject",s,a,s?s[0]:n.__k&&ie(n,0),c),s!=null)for(p=s.length;p--;)s[p]!=null&&jt(s[p]);c||("value"in h&&(p=h.value)!==void 0&&(p!==e.value||d==="progress"&&!p||d==="option"&&p!==m.value)&&_e(e,"value",p,m.value,!1),"checked"in h&&(p=h.checked)!==void 0&&p!==e.checked&&_e(e,"checked",p,m.checked,!1))}return e}function Zt(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){b.__e(r,n)}}function Xt(e,t,n){var r,o;if(b.unmount&&b.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Zt(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){b.__e(s,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&Xt(r[o],t,n||typeof e.type!="function");n||e.__e==null||jt(e.__e),e.__=e.__e=e.__d=void 0}function Yn(e,t,n){return this.constructor(e,n)}function en(e,t,n){var r,o,s;b.__&&b.__(e,t),o=(r=typeof n=="function")?null:n&&n.__k||t.__k,s=[],We(t,e=(!r&&n||t).__k=Ce(k,null,[e]),o||pe,pe,t.ownerSVGElement!==void 0,!r&&n?[n]:o?null:t.firstChild?se.call(t.childNodes):null,s,!r&&n?n:o?o.__e:t.firstChild,r),qt(s,e)}function jn(e,t,n){var r,o,s,a=Y({},e.props);for(s in t)s=="key"?r=t[s]:s=="ref"?o=t[s]:a[s]=t[s];return arguments.length>2&&(a.children=arguments.length>3?se.call(arguments,2):n),te(e.type,a,r||e.key,o||e.ref,null)}function K(e,t){var n={__c:t="__cC"+zt++,__:e,Consumer:function(r,o){return r.children(o)},Provider:function(r){var o,s;return this.getChildContext||(o=[],(s={})[t]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&o.some(Pe)},this.sub=function(a){o.push(a);var c=a.componentWillUnmount;a.componentWillUnmount=function(){o.splice(o.indexOf(a),1),c&&c.call(a)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}se=Yt.slice,b={__e:function(e,t,n,r){for(var o,s,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((s=o.constructor)&&s.getDerivedStateFromError!=null&&(o.setState(s.getDerivedStateFromError(e)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),a=o.__d),a)return o.__E=o}catch(c){e=c}throw e}},Ft=0,j.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Y({},this.state),typeof e=="function"&&(e=e(Y({},n),this.props)),e&&Y(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Pe(this))},j.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Pe(this))},j.prototype.render=k,ee=[],me.__r=0,zt=0;var X,D,xe,ot,re=0,tn=[],de=[],at=b.__b,lt=b.__r,ct=b.diffed,dt=b.__c,ut=b.unmount;function oe(e,t){b.__h&&b.__h(D,e,re||t),re=0;var n=D.__H||(D.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:de}),n.__[e]}function N(e){return re=1,Vn(nn,e)}function Vn(e,t,n){var r=oe(X++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):nn(void 0,t),function(s){var a=r.__N?r.__N[0]:r.__[0],c=r.t(a,s);a!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=D,!D.u)){D.u=!0;var o=D.shouldComponentUpdate;D.shouldComponentUpdate=function(s,a,c){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(l){return l.__c});if(u.every(function(l){return!l.__N}))return!o||o.call(this,s,a,c);var f=!1;return u.forEach(function(l){if(l.__N){var m=l.__[0];l.__=l.__N,l.__N=void 0,m!==l.__[0]&&(f=!0)}}),!(!f&&r.__c.props===s)&&(!o||o.call(this,s,a,c))}}return r.__N||r.__}function A(e,t){var n=oe(X++,3);!b.__s&&ze(n.__H,t)&&(n.__=e,n.i=t,D.__H.__h.push(n))}function Ae(e,t){var n=oe(X++,4);!b.__s&&ze(n.__H,t)&&(n.__=e,n.i=t,D.__h.push(n))}function Z(e){return re=5,Fe(function(){return{current:e}},[])}function Fe(e,t){var n=oe(X++,7);return ze(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function W(e,t){return re=8,Fe(function(){return e},t)}function q(e){var t=D.context[e.__c],n=oe(X++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(D)),t.props.value):e.__}function Jn(){for(var e;e=tn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ue),e.__H.__h.forEach(Re),e.__H.__h=[]}catch(t){e.__H.__h=[],b.__e(t,e.__v)}}b.__b=function(e){D=null,at&&at(e)},b.__r=function(e){lt&&lt(e),X=0;var t=(D=e.__c).__H;t&&(xe===D?(t.__h=[],D.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=de,n.__N=n.i=void 0})):(t.__h.forEach(ue),t.__h.forEach(Re),t.__h=[])),xe=D},b.diffed=function(e){ct&&ct(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(tn.push(t)!==1&&ot===b.requestAnimationFrame||((ot=b.requestAnimationFrame)||Qn)(Jn)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==de&&(n.__=n.__V),n.i=void 0,n.__V=de})),xe=D=null},b.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ue),n.__h=n.__h.filter(function(r){return!r.__||Re(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],b.__e(r,n.__v)}}),dt&&dt(e,t)},b.unmount=function(e){ut&&ut(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ue(r)}catch(o){t=o}}),n.__H=void 0,t&&b.__e(t,n.__v))};var ht=typeof requestAnimationFrame=="function";function Qn(e){var t,n=function(){clearTimeout(r),ht&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);ht&&(t=requestAnimationFrame(n))}function ue(e){var t=D,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),D=t}function Re(e){var t=D;e.__c=e.__(),D=t}function ze(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function nn(e,t){return typeof t=="function"?t(e):t}function Kn(e,t){for(var n in t)e[n]=t[n];return e}function ft(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function pt(e){this.props=e}(pt.prototype=new j).isPureReactComponent=!0,pt.prototype.shouldComponentUpdate=function(e,t){return ft(this.props,e)||ft(this.state,t)};var mt=b.__b;b.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),mt&&mt(e)};var _t=function(e,t){return e==null?null:V(V(e).map(t))},qn={map:_t,forEach:_t,count:function(e){return e?V(e).length:0},only:function(e){var t=V(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:V},Zn=b.__e;b.__e=function(e,t,n,r){if(e.then){for(var o,s=t;s=s.__;)if((o=s.__c)&&o.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),o.__c(e,t)}Zn(e,t,n,r)};var gt=b.unmount;function rn(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=Kn({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return rn(r,t,n)})),e}function sn(e,t,n){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return sn(r,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=n)),e}function we(){this.__u=0,this.t=null,this.__b=null}function on(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function ce(){this.u=null,this.o=null}b.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),gt&&gt(e)},(we.prototype=new j).__c=function(e,t){var n=t.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var o=on(r.__v),s=!1,a=function(){s||(s=!0,n.__R=null,o?o(c):c())};n.__R=a;var c=function(){if(!--r.__u){if(r.state.__a){var f=r.state.__a;r.__v.__k[0]=sn(f,f.__c.__P,f.__c.__O)}var l;for(r.setState({__a:r.__b=null});l=r.t.pop();)l.forceUpdate()}},u=t.__h===!0;r.__u++||u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(a,a)},we.prototype.componentWillUnmount=function(){this.t=[]},we.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=rn(this.__b,n,r.__O=r.__P)}this.__b=null}var o=t.__a&&Ce(k,null,e.fallback);return o&&(o.__h=null),[Ce(k,null,t.__a?null:e.children),o]};var yt=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};(ce.prototype=new j).__a=function(e){var t=this,n=on(t.__v),r=t.o.get(e);return r[0]++,function(o){var s=function(){t.props.revealOrder?(r.push(o),yt(t,e,r)):o()};n?n(s):s()}},ce.prototype.render=function(e){this.u=null,this.o=new Map;var t=V(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},ce.prototype.componentDidUpdate=ce.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){yt(e,n,t)})};var an=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Xn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ei=typeof document<"u",ti=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};function ni(e,t,n){return t.__k==null&&(t.textContent=""),en(e,t),typeof n=="function"&&n(),e?e.__c:null}j.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(j.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var vt=b.event;function ii(){}function ri(){return this.cancelBubble}function si(){return this.defaultPrevented}b.event=function(e){return vt&&(e=vt(e)),e.persist=ii,e.isPropagationStopped=ri,e.isDefaultPrevented=si,e.nativeEvent=e};var bt={configurable:!0,get:function(){return this.class}},xt=b.vnode;b.vnode=function(e){var t=e.type,n=e.props,r=n;if(typeof t=="string"){var o=t.indexOf("-")===-1;for(var s in r={},n){var a=n[s];ei&&s==="children"&&t==="noscript"||s==="value"&&"defaultValue"in n&&a==null||(s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&a===!0?a="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+t)&&!ti(n.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():o&&Xn.test(s)?s=s.replace(/[A-Z0-9]/g,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput$/i.test(s)&&(s=s.toLowerCase(),r[s]&&(s="oninputCapture")),r[s]=a)}t=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=V(n.children).forEach(function(c){c.props.selected=r.value.indexOf(c.props.value)!=-1})),t=="select"&&r.defaultValue!=null&&(r.value=V(n.children).forEach(function(c){c.props.selected=r.multiple?r.defaultValue.indexOf(c.props.value)!=-1:r.defaultValue==c.props.value})),e.props=r,n.class!=n.className&&(bt.enumerable="className"in n,n.className!=null&&(r.class=n.className),Object.defineProperty(r,"className",bt))}e.$$typeof=an,xt&&xt(e)};var wt=b.__r;b.__r=function(e){wt&&wt(e),e.__c};function ln(e){return!!e&&e.$$typeof===an}function oi(e){return ln(e)?jn.apply(null,arguments):e}function ai(e){return!!e.__k&&(en(null,e),!0)}var li=0;function i(e,t,n,r,o){var s,a,c={};for(a in t)a=="ref"?s=t[a]:c[a]=t[a];var u={type:e,props:c,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--li,__source:o,__self:r};if(typeof e=="function"&&(s=e.defaultProps))for(a in s)c[a]===void 0&&(c[a]=s[a]);return b.vnode&&b.vnode(u),u}function ci(e){return{render(t){ni(t,e)},unmount(){ai(e)}}}let cn="America/New_York";function di(e){cn=e}function $(e){e=new Date(e||Date.now());const t={},n="2-digit";return Intl.DateTimeFormat("en-US",{timeZone:cn,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n}).formatToParts(e).forEach(r=>t[r.type]=r.value),{date:`${t.year}-${t.month}-${t.day}`,time:`${t.hour}:${t.minute}:${t.second}`}}function J(e){const t=e.split(":").slice(0,2).map(Number),n=t[0]>=12?"PM":"AM";return t[0]=t[0]%12||12,t.map(r=>String(r).padStart(2,"0")).join(":").replace(/^0/,"")+" "+n}function kt(e){const[t,n]=e.slice(0,19).split("T");return{date:t,time:n}}function dn({start:e,end:t}){if(!t)return ke(e);const n=$().date,r=(e.date||"")<n?"Park Open":ke(e,"Park Open"),o=ke(t,"Park Close");return`${r} - ${o}`}function ke({date:e,time:t}={},n=""){const r=$();return e&&e!==r.date?new Date(e+"T00:00").toLocaleString("en-US",{month:"short",day:"numeric"})+(t?", "+J(t):""):t?J(t):n}class ui extends Error{constructor(n){super(`Auth data "${n}" missing or expired`);P(this,"name","ReauthNeeded")}}class hi{constructor(t,n=localStorage){this.storageKey=t,this.storage=n}getData(){try{const t=this.storage.getItem(this.storageKey);if(t){const{swid:n,accessToken:r,expires:o}=JSON.parse(t),s=$(new Date(o)),a=$();if(s.date>a.date||s.date===a.date&&s.time>a.time&&s.time>="17")return{swid:n,accessToken:r}}}catch(t){console.error(t)}throw new ui(this.storageKey)}setData(t){this.storage.setItem(this.storageKey,JSON.stringify(t))}deleteData(){this.storage.removeItem(this.storageKey)}}const fi="modulepreload",pi=function(e){return"/bg1/"+e},Nt={},St=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=pi(s),s in Nt)return;Nt[s]=!0;const a=s.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!r)for(let l=o.length-1;l>=0;l--){const m=o[l];if(m.href===s&&(!a||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${c}`))return;const f=document.createElement("link");if(f.rel=a?"stylesheet":fi,a||(f.as="script",f.crossOrigin=""),f.href=s,document.head.appendChild(f),a)return new Promise((l,m)=>{f.addEventListener("load",l),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())},mi=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t)))})},_i=8e3;async function ge(e,t={}){const{params:n,data:r,timeout:o=_i,...s}=t;t=s,t.referrer||(t.referrer=""),t.credentials||(t.credentials="omit"),t.cache||(t.cache="no-store"),t.headers={...t.headers||{}},n&&Object.keys(n).length>0&&(e+=(e.includes("?")?"&":"?")+Object.entries(n).filter(([,f])=>f!=="").map(f=>f.map(encodeURIComponent).join("=")).join("&")),r&&(t.method||(t.method="POST"),t.headers={...t.headers,"Content-Type":"application/json"},t.body=JSON.stringify(r));const a=new AbortController;t.signal=a.signal;const c=setTimeout(()=>a.abort(),o);let u;try{u=await fetch(e,t)}catch(f){return console.error(f),{status:0,data:null}}finally{clearTimeout(c)}return{status:u.status,data:(u.headers.get("Content-Type")||"").startsWith("application/json")?await u.json():{}}}const gi={48199:"Mr-Incredible",48200:"Mrs-Incredible",261227:"Nemo",339625:"Russell",339626:"Carl",364907:"Jack-Skellington",431014:"Princess-Tiana",431065:"Darth_Vader",15549505:"Rapunzel",15655408:"Default_SignedIn",15675686:"Crush",15831168:"Wall-E",16453979:"Merida",16726412:"Stormtrooper",16818199:"Violet",16869301:"Jack-Jack",17345357:"R2-D2",17345359:"C-3PO",17532220:"Bruce",17532224:"Green-Alien",17532227:"Kermit",17532228:"Sorcerer-Mickey",17577168:"Elsa",17577169:"Anna",17813977:"Olaf",17888784:"Yoda",18101167:"Captain-Mickey",18368743:"-Nick",18368747:"-Judy",18393706:"-Flash",18403761:"kion",18405224:"-Moana",18405236:"-Elena",19633995:"50th_Mickey",19633996:"50th_Minnie",90003819:"Alice",90003846:"Ariel",90003898:"Belle",90003967:"Buzz",90003976:"Captain-Hook",90004004:"Chesire-Cat",90004017:"Cinderella",90004068:"Daisy",90004076:"Dash",90004104:"Donald",90004228:"Goofy",90004260:"Hamm",90004328:"Princess-Jasmine",90004340:"Jiminy",90004395:"Lady",90004482:"Mickey-Mouse",90004486:"Minnie",90004537:"Mulan",90004605:"Peter-Pan",90004625:"Pluto",90004626:"Pocahontas",90004642:"Princess-Aurora",90004682:"Rex",90004772:"Snow-White",90004778:"Sparky",90004846:"TinkerBell",90004860:"Tramp",90004939:"Zero"},Ye="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/90/90/75/dam/",yi=Ye+"wdpro-assets/avatars/180x180/RetAvatar_180x180_",vi=Ye+"wdpro-assets/avatars/180x180/RetAvatar-180x180",bi=Ye+"disney-world/50th-anniversary/avatars/RetAvatar_180x180_",xi={"-":vi,5:bi};function Ne(e){const t=gi[e||""];if(t)return(xi[t[0]]||yi)+t+".png"}const De={"https://disneyworld.disney.go.com":"WDW","https://disneyland.disney.go.com":"DLR"},wi={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"};function ki(e){return e in De}let un=class extends Error{constructor(n,r="Request failed"){super(`${r}: ${JSON.stringify(n)}`);P(this,"name","RequestError");this.response=n}};const Ni=new Set(["ACTIVITY","DINING"]),z=e=>e.split(";")[0];function hn(e){const{date:t,time:n}=$();return e.modifiable&&t===e.end.date&&n<=(e.end.time??"")}class Si extends Error{constructor(){super(...arguments);P(this,"name","ModifyNotAllowed")}}function Et(e){if(e&&!hn(e))throw new Si}class je{constructor(t){P(this,"maxPartySize",12);P(this,"nextBookTime");P(this,"onUnauthorized",()=>{});P(this,"origin");P(this,"authStore");P(this,"expData");P(this,"parkMap");P(this,"drops",{});P(this,"partyIds",new Set);P(this,"guestCache",new Map);P(this,"tracker");P(this,"_primaryGuestId","");P(this,"updateTracker",this.bookings);P(this,"convertGuest",t=>{const{id:n,firstName:r,lastName:o,characterId:s,...a}=t,c=`${r} ${o}`.trim();if(!this.guestCache.has(n))switch(t.ineligibleReason){case"INVALID_PARK_ADMISSION":case"PARK_RESERVATION_NEEDED":case"GENIE_PLUS_NEEDED":t.primary&&this.cacheGuest(n,c,s);break;default:this.cacheGuest(n,c,s)}const u=Ne(s);return this.partyIds.size>0&&!this.partyIds.has(n)&&(a.ineligibleReason="NOT_IN_PARTY",delete a.eligibleAfter),{...a,id:n,name:c,avatarImageUrl:u}});var n,r;this.origin=t.origin,this.authStore=t.authStore,this.parkMap=new Map(t.data.parks.map(o=>[o.id,o])),this.tracker=t.tracker||new Ei;for(const[o,s]of Object.entries(t.data.pdts??{}))this.drops[o]=s.map(a=>({time:new Date(new Date().setHours(a/60,a%60,0)).toTimeString().slice(0,5),expIds:[]}));this.expData={...t.data.experiences};for(const[o,s]of Object.entries(t.data.experiences)){if(!s.pdtMask)continue;const{id:a}=s.land.park;for(const[c,u]of((r=(n=this.drops)==null?void 0:n[a])==null?void 0:r.entries())??[])s.pdtMask&1<<c&&u.expIds.push(o)}}static async load(t){const n=De[t.origin].toLowerCase(),r=(await mi(Object.assign({"./data/dlr.ts":()=>St(()=>import("./dlr.js"),[]),"./data/wdw.ts":()=>St(()=>import("./wdw.js"),[])}),`./data/${n}.ts`)).default;return new je({...t,data:r})}get resort(){return De[this.origin]}get parks(){return[...this.parkMap.values()]}setPartyIds(t){this.partyIds=new Set(t)}async experiences(t){var o,s;await this.primaryGuestId();const n=await this.request({path:`/tipboard-vas/api/v1/parks/${encodeURIComponent(t.id)}/experiences`,params:{eligibilityGuestIds:[...this.guestCache.keys()].join(",")}});this.nextBookTime=(s=(((o=n.eligibility)==null?void 0:o.flexEligibilityWindows)||[]).sort((a,c)=>a.time.time.localeCompare(c.time.time))[0])==null?void 0:s.time.time;const{expIds:r=[]}=this.nextDrop(t)??{};return n.availableExperiences.filter(a=>a.id in this.expData).map(a=>({...a,...this.expData[a.id],park:t,experienced:this.tracker.experienced(a),drop:r.includes(a.id)}))}async guests(t){t||(t={id:"0",park:{id:"0"}});const n=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:t.id,parkId:t.park.id}});this._primaryGuestId=n.primaryGuestId;const r=n.ineligibleGuests.map(this.convertGuest),o=n.guests.map(this.convertGuest).filter(s=>!("ineligibleReason"in s)||r.push(s)&&!1);return r.sort((s,a)=>{const c=+!s.primary-+!a.primary||s.name.localeCompare(a.name);return s.eligibleAfter||a.eligibleAfter?(s.eligibleAfter||"99").localeCompare(a.eligibleAfter||"99")||c:s.ineligibleReason===a.ineligibleReason?c:s.ineligibleReason==="NOT_IN_PARTY"?1:a.ineligibleReason==="NOT_IN_PARTY"||s.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?-1:a.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?1:c}),{eligible:o,ineligible:r}}async primaryGuestId(t){return this._primaryGuestId||await this.guests(t),this._primaryGuestId}async offer(t,n,r){Et(r);const o=await this.request({path:r?"/ea-vas/api/v1/products/modifications/flex/offers":"/ea-vas/api/v2/products/flex/offers",method:"POST",data:{guestIds:((r==null?void 0:r.guests)??n).map(m=>m.id),ineligibleGuests:[],primaryGuestId:n.map(m=>m.id).sort((m,h)=>m.localeCompare(h))[0],parkId:t.park.id,experienceId:t.id,selectedTime:t.flex.nextAvailableTime,...r?{modificationType:t.id===r.id?"TIME":"EXPERIENCE"}:{}},userId:!1}),{id:s,date:a,startTime:c,endTime:u,status:f,changeStatus:l}=o.offer;return{id:s,start:{date:a,time:c},end:{date:a,time:u},active:f==="ACTIVE",changed:l!=="NONE",guests:{eligible:(o.eligibleGuests||[]).map(this.convertGuest),ineligible:(o.ineligibleGuests||[]).map(this.convertGuest)},experience:t}}async cancelOffer(t){await this.request({path:`/ea-vas/api/v1/offers/${encodeURIComponent(t.id)}`,method:"DELETE",params:{productType:"FLEX"},userId:!1})}async book(t,n,r){var l;Et(n);const o=new Set((r??t.guests.eligible).map(m=>m.id)),{singleExperienceDetails:{experienceId:s,parkId:a},entitlements:c,startDateTime:u,endDateTime:f}=await this.request({path:n?"/ea-vas/api/v1/products/modifications/flex/bookings":"/ea-vas/api/v1/products/flex/bookings",method:"POST",userId:!1,data:{offerId:t.id,...n?{modificationType:n.id===t.experience.id?"TIME":"EXPERIENCE",existingEntitlements:n.guests.filter(m=>o.has(m.id)).map(m=>({entitlementId:m.entitlementId,entitlementBookingId:m.bookingId})),guestIdsToExclude:n.guests.filter(m=>!o.has(m.id)).map(m=>m.id)}:{}},key:"booking"});return this.updateTracker(),{type:"LL",subtype:"G+",...this.getExperience(s,a),bookingId:(l=c[0])==null?void 0:l.id,start:kt(u),end:kt(f),cancellable:!0,modifiable:!0,guests:c.map(m=>{const h=this.guestCache.get(m.guestId);return{id:m.guestId,name:(h==null?void 0:h.name)||"",avatarImageUrl:Ne(h==null?void 0:h.characterId),entitlementId:m.id}})}}async cancelBooking(t){const r=t.map(o=>o.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${r}`,method:"DELETE",userId:!1})}async bookings(){const{swid:t}=this.authStore.getData(),n=new Date(Date.now()),r=$(n).date,o=wi[this.resort],{items:s=[],assets:a={},profiles:c={}}=await this.request({path:`/plan/${o}/api/v1/itinerary-items/${t}?item-types=FASTPASS&item-types=DINING&item-types=ACTIVITY`,params:{destination:this.resort,fields:"items,profiles,assets","guest-locators":t+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":r,"end-date":$(new Date(n.getTime()).setDate(n.getDate()+1)).date,"show-friends":"false"},userId:!1}),u=d=>{const{name:p,avatarId:E,type:x}=c[d.id];return{id:z(d.id),name:`${p.firstName} ${p.lastName}`.trim(),avatarImageUrl:Ne(E),...x==="transactional"&&{transactional:!0}}},f=new Date(n);f.setMinutes(f.getMinutes()-30);const l=d=>{const p=a[d.asset],x=a[p.facility].location;if(!x)return;const v=this.parkMap.get(z(x))||{id:x,name:a[x].name},g=new Date(d.startDateTime);return g<f?void 0:{type:"RES",subtype:d.type,id:z(d.asset),park:v,name:p.name,start:$(g),end:void 0,cancellable:!1,modifiable:!1,guests:d.guests.map(u).sort((S,_)=>+(_.id===this._primaryGuestId)-+(S.id===this._primaryGuestId)||+!_.transactional-+!S.transactional||S.name.localeCompare(_.name)),bookingId:d.id}},m=d=>{var S;const p={FLEX:"G+",STANDARD:"ILL",DAS:"DAS",FDS:"DAS",OTHER:"OTHER"},E=d.multipleExperiences?"MULTI":p[d.kind];if(!E)return;const x=E==="G+",v=a[d.facility],g=z(v.location);let y={type:"LL",subtype:E,...this.getExperience(z(d.facility),g,v.name),start:{date:d.displayStartDate,time:d.displayStartTime},end:{date:d.displayEndDate,time:d.displayEndTime},cancellable:d.cancellable&&x,modifiable:d.modifiable&&x,guests:d.guests.map(_=>({...u(_),entitlementId:_.entitlementId,bookingId:_.bookingId,..._.redemptionsRemaining!==void 0&&{redemptions:_.redemptionsRemaining}})),bookingId:(S=d.guests[0])==null?void 0:S.entitlementId};if(y.modifiable=hn(y),d.multipleExperiences){const _=d.assets.find(w=>w.original);_&&(y={...y,...this.getExperience(z(_.content),z(a[_.content].location))}),y.choices=d.assets.filter(w=>!w.excluded&&!w.original).map(({content:w})=>{const{name:I,location:T}=a[w];return this.getExperience(z(w),z(T),I)}).sort((w,I)=>w.name.localeCompare(I.name))}return y},h=s.map(d=>{try{if(d.type==="FASTPASS")return m(d);if(d.type&&Ni.has(d.type))return l(d)}catch(p){console.error(p)}}).filter(d=>!!d&&(d.start.date||r)===r);return this.tracker.update(h,this),h}upcomingDrops(t){var r;const n=$().time.slice(0,5);return(((r=this.drops)==null?void 0:r[t.id])??[]).filter(({time:o})=>o>=n).map(({time:o,expIds:s})=>({time:o,experiences:s.map(a=>({id:a,name:this.expData[a].name})).sort((a,c)=>a.name.localeCompare(c.name))}))}nextDropTime(t){var n;return(n=this.nextDrop(t))==null?void 0:n.time}logOut(){this.authStore.deleteData(),this.onUnauthorized()}nextDrop(t){var r,o;const n=$().time.slice(0,5);return(o=(r=this.drops)==null?void 0:r[t.id])==null?void 0:o.find(({time:s})=>s>=n)}getExperience(t,n,r){var o;return{id:t,name:((o=this.expData[t])==null?void 0:o.name)||r,park:this.parkMap.get(n)}}cacheGuest(t,n,r){this.guestCache.set(t,{name:n,characterId:r})}async request(t){const{swid:n,accessToken:r}=this.authStore.getData(),o=this.origin+t.path,s={...t.params};(t.userId??!0)&&(s.userId=n);const{status:a,data:c}=await ge(o,{method:t.method||"GET",params:s,data:t.data,headers:{Authorization:`BEARER ${r}`,"x-user-id":n}});if(a===401)setTimeout(()=>this.logOut());else{const{key:u}=t;if(String(a)[0]==="2"&&(!u||c[u]))return u?c[u]:c}throw new un({status:a,data:c})}}const It="bg1.genie.bookings";class Ei{constructor(){P(this,"date");P(this,"expIds",new Set);P(this,"experiencedExpIds",new Set);const{date:t=$().date,expIds:n=[],experiencedExpIds:r=[]}=JSON.parse(localStorage.getItem(It)||"{}");this.date=t,this.expIds=new Set(n),this.experiencedExpIds=new Set(r),this.checkDate()}experienced(t){return this.experiencedExpIds.has(t.id)}async update(t,n){this.checkDate();const r=t.filter(s=>s.type==="LL"&&s.cancellable);for(const s of r)this.experiencedExpIds[s.modifiable?"delete":"add"](s.id);const o=this.expIds;this.expIds=new Set(r.map(s=>s.id));for(const s of o){if(this.expIds.has(s))continue;const{ineligible:a}=await n.guests({id:s,park:{id:"0"}}),c=a.some(u=>u.ineligibleReason==="EXPERIENCE_LIMIT_REACHED");this.experiencedExpIds[c?"add":"delete"](s)}localStorage.setItem(It,JSON.stringify({date:this.date,expIds:[...this.expIds],experiencedExpIds:[...this.experiencedExpIds]}))}checkDate(){const t=$().date;this.date!==t&&(this.date=t,this.expIds=new Set,this.experiencedExpIds=new Set)}}const fn={"https://vqguest-svc-wdw.wdprapps.disney.com":"WDW","https://vqguest-svc.wdprapps.disney.com":"DLR"};function Ii(e){return e in fn}const Ti=e=>e.sort((t,n)=>+n.primary-+t.primary||+n.preselected-+t.preselected||t.name.localeCompare(n.name));class he extends Error{constructor(n,r="Request failed"){super(`${r}: ${JSON.stringify(n)}`);P(this,"name","RequestError");this.response=n}}class Ci{constructor(t){P(this,"onUnauthorized",()=>{});P(this,"origin");P(this,"authStore");this.origin=t.origin,this.authStore=t.authStore}get resort(){return fn[this.origin]}url(t){return`${this.origin}/application/v1/guest/${t}`}async getQueues(){return(await ge(this.url("getQueues"))).data.queues.map(({queueId:t,...n})=>({...n,id:t}))}async getQueue(t){const n=(await this.getQueues()).find(r=>r.id===t.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(t){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:t.id}});return Ti(n.guests.map(({guestId:r,firstName:o,lastName:s,isPrimaryGuest:a,isPreselected:c,...u})=>({...u,id:r,name:`${o} ${s}`.trim(),primary:!!a,preselected:!!c})))}async joinQueue(t,n){const r=n.map(a=>a.id),{status:o,data:s}=await this.post({resource:"joinQueue",data:{queueId:t.id,guestIds:r}});if(s.responseStatus==="OK"){const a=s.positions.find(c=>c.queueId===t.id&&c.guestIds.length>0&&r.some(u=>c.guestIds.includes(u)));if(!a)throw new he({status:o,data:s});return{boardingGroup:a.boardingGroup,conflicts:{},closed:!1}}else if(s.responseStatus==="INVALID_GUEST"||s.responseStatus==="CLOSED_QUEUE"){const a=s.responseStatus==="CLOSED_QUEUE",c=new Set,u={};for(const m of s.conflicts)for(const h of m.guestIds){const d=n.find(p=>p.id===h);d&&(u[d.id]=m.conflictType,c.add(h))}const f=n.filter(m=>!c.has(m.id));if(a||f.length===0)return{boardingGroup:null,conflicts:u,closed:a};const l=await this.joinQueue(t,f);return l.conflicts={...u,...l.conflicts},l}else throw new he({status:o,data:s})}logOut(){this.authStore.deleteData(),this.onUnauthorized()}async post(t){const{status:n,data:r}=await ge(this.url(t.resource),{method:"POST",headers:{Authorization:`BEARER ${this.authStore.getData().accessToken}`},data:t.data});if(n===401&&setTimeout(()=>this.logOut()),!n||n===401||n>=500)throw new he({status:n,data:r});return{status:n,data:r}}}const pn=K({resort:"WDW",onUnauthorized:()=>{},logOut:()=>null}),Pi=pn.Provider,Ve=()=>q(pn),Je={bg:"bg-blue-500",text:"text-blue-500"},mn=K(Je),Ai=mn.Provider,F=()=>q(mn),Ri={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function L(e){const{type:t,className:n,...r}=e;let o=`${Ri[t||"normal"]} ${n||""}`;const{bg:s}=F();return o.includes(" bg-")||(o+=` ${s} text-white`),i("button",{className:`${o} inline-flex items-center justify-center min-w-[36px] rounded-lg px-2 font-semibold disabled:opacity-50`,...r})}function G({onClick:e,disabled:t,children:n}){return i("div",{className:"mb-20",children:i("div",{className:"fixed bottom-0 left-0 w-full px-5 pb-5 text-center",children:i(L,{className:"max-w-2xl mx-auto shadow-[0px_4px_8px_-1px_#0005]",type:"full",onClick:e,disabled:t,children:n})})})}function Di({title:e,children:t}){const{bg:n,text:r}=F();function o(s){return ln(s)?s.type===k?qn.map(s.props.children,o):oi(s,{className:`bg-white bg-opacity-90 ${r} ${s.props.className||""}`}):s}return i("div",{className:`flex justify-end gap-x-2 gap-y-1 min-h-[52px] px-3 py-2 text-lg text-white ${n}`,children:[i("h1",{className:"flex-1 self-center py-0.5 text-xl font-semibold overflow-hidden whitespace-nowrap",children:e}),o(t)]})}function ae(e){const{children:t,className:n,...r}=e,o={outer:"",inner:"",...typeof n=="string"?{inner:n}:n};return o.outer.match(/\bz-/)||(o.outer+=" z-10"),i("div",{className:`${o.outer} fixed inset-0`,...r,children:i("div",{className:`${o.inner} max-w-2xl min-h-full mx-auto`,children:t})})}function U({heading:e,buttons:t,className:n,theme:r,containerRef:o,children:s,...a}){return i(Ai,{value:r||Je,children:i(ae,{className:{outer:`bg-white text-black text-base ${n||""}`,inner:"flex flex-col max-w-2xl h-full"},...a,children:[i(Di,{title:e,children:t}),i("div",{ref:o,className:"flex-1 overflow-auto px-3 pb-3",children:s})]})})}const Li="bg1.disclaimer.accepted",$i={bg:"bg-red-600",text:"text-red-600"};function Oi(){const e=localStorage,t=Li,[n,r]=N(!!e.getItem(t));return A(()=>{n&&e.setItem(t,"1")},[n,e,t]),n?null:i(Mi,{onAccept:()=>r(!0)})}function Mi({onAccept:e}){return i(U,{heading:"Warning!",theme:$i,children:[i("p",{children:'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'}),i(G,{onClick:e,children:"Accept"})]})}const Gi="181874e5af6";function Bi(e){return"deferredUuid"in e&&e.deferredUuid!==void 0}class Ui{constructor(t,n,r,o=!1){P(this,"handlers",{});P(this,"handshakeAcked",!1);P(this,"onMessage",t=>{if(t.source!==this.iframe.contentWindow||t.data==="inner.loaded")return;const n=JSON.parse(t.data);this.logging&&console.log("Message:",n);const r=n.type==="message"?n.eventName:n.type,o=this.handlers[r],s=o?o("data"in n?n.data:null):void 0;Bi(n)&&this.send({type:"deferred",action:"resolve",deferredUuid:n.deferredUuid,data:s??{}})});this.iframe=t,this.resort=r,this.logging=o,this.on("handshake",()=>{this.handshakeAcked||(this.handshakeAcked=!0,this.send({type:"handshakeAck"}),this.logging&&this.sendMessage("setLogLevel",{level:"log"}),this.sendMessage("workflow.execute",{name:"login"}))}),this.on("lightbox.hide",()=>this.open()),this.on("session.dateOfBirth.read",()=>this.open()),this.on("session.loggedin",({token:s})=>{n({swid:s.swid,accessToken:s.access_token,expires:new Date(s.exp)})})}open(){addEventListener("message",this.onMessage),this.iframe.src=this.authPageUrl,this.handshakeAcked=!1}close(){removeEventListener("message",this.onMessage)}on(t,n){this.handlers[t]=n}sendMessage(t,n){this.send({type:"message",eventName:t,data:n})}send(t){var n;(n=this.iframe.contentWindow)==null||n.postMessage(JSON.stringify({...t,name:"lightbox-client-window"}),this.authPageUrl)}get authPageUrl(){return`https://cdn.registerdisney.go.com/v2/TPR-${this.resort}-LBSDK.IOS-PROD/en-US?include=l10n,config,html,js&buildId=${Gi}`}}function Hi({resort:e,onLogin:t}){const n=Z(null);return A(()=>{if(!n.current)return;const r=new Ui(n.current,t,e);return r.open(),()=>r.close()},[e,t,n]),i("iframe",{title:"Disney Login Form",ref:n,className:"fixed top-0 left-0 w-full h-full border-0"})}function Wi({client:e,authStore:t,children:n}){const[r,o]=N("Blank"),s=Oi();A(()=>{e.onUnauthorized=()=>o("LoginForm")},[e]),A(()=>{function c(){if(!(document.hidden||r==="LoginForm"))try{t.getData(),o("Client")}catch{return o("LoginForm")}}return c(),document.addEventListener("visibilitychange",c),()=>{document.removeEventListener("visibilitychange",c)}},[t,r]);const a={Blank:i("div",{}),LoginForm:i(Hi,{resort:e.resort,onLogin:c=>{t.setData(c),o("Client")}}),Client:n};return i(Pi,{value:e,children:s||a[r]})}const H=Ve,_n=K({elem:null,show:()=>null,close:()=>null}),Fi=_n.Provider,Qe=()=>q(_n),gn=K(void 0),zi=gn.Provider,Yi=()=>q(gn),yn=K({current:void 0,begin:()=>null,end:()=>null}),ji=yn.Provider,le=()=>q(yn);async function Vi(e={}){return new Promise((t,n)=>{navigator.geolocation.getCurrentPosition(r=>{t(r)},r=>{n(r)},e)})}const Ji={maximumAge:15e3,timeout:2e3};function Qi(e){const[t,n]=N(),r=W(()=>{e(async()=>{try{const{coords:o}=await Vi(Ji);n(s=>s&&o.latitude===s[0]&&o.longitude===s[1]?s:[o.latitude,o.longitude])}catch{n(void 0)}})},[e]);return[t,r]}const Ki=3e3,qi={alert:"bg-yellow-200",error:"bg-red-200"};function ve(){const[,e]=N(0),[t,n]=N(""),[r,o]=N("alert"),s=W((c,u)=>{n(c),o(u||"alert"),e(f=>(clearTimeout(f),c?self.setTimeout(()=>{n("")},Ki):f))},[]);return[i(Zi,{message:t,type:r}),s]}function Zi({message:e,type:t}){return e?i("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${qi[t]} text-gray-800`,children:e}):null}function Q({children:e,className:t,title:n}){return t||(t=""),t.match(/\bw-\S+\s*/)||(t+=" w-4"),t.match(/\bh-\S+\s*/)||(t+=" h-auto"),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:t,role:"img",children:[n&&i("title",{children:n}),e]})}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ke({className:e}){return i(Q,{className:e,children:i("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"})})}async function Le(e){return new Promise(t=>{setTimeout(t,e)})}function Xi(){const[e,t]=N(0),n=W(async(o,s=500)=>{t(c=>c+1);const a=Le(s);try{await o()}finally{await a,await Le(0),t(c=>c-1)}},[]);return[e>0?i(vn,{}):null,n]}function vn(){const{bg:e}=F();return i(ae,{className:"flex items-center bg-white bg-opacity-75",children:i("div",{className:"w-[50px] mx-auto",children:i("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${e}`,children:i(Ke,{className:"animate-spin w-full text-white"})})})})}function qe(){const[e,t]=Xi(),n=!!e,[r,o]=ve();return{loadData:W(async(c,u)=>{const f={error:"Unknown error occurred",request:"Network request failed",...u};o("");let l=()=>null;const m=new Promise(d=>{l=()=>d(null)});async function h(...d){await m,o(...d)}await t(async()=>{try{await c(h)}catch(d){if(d instanceof un){const{status:p}=d.response;h(p in f?f[p]:f.request,"error")}else console.error(d),h(f.error,"error")}}),l()},[t,o]),loaderElem:i(k,{children:[r,e]}),isLoading:n}}const er=6e4,tr=30,nr=60,Tt="bg1.genie.tipBoard.starred",ir=(e,t)=>+!e.lp-+!t.lp,rr=(e,t)=>(e.priority||1/0)-(t.priority||1/0),sr=(e,t)=>(e.sort||1/0)-(t.sort||1/0),Se=(e,t)=>(t.standby.waitTime||-1)-(e.standby.waitTime||-1),Ee=(e,t)=>{var n,r;return ye(((n=e==null?void 0:e.flex)==null?void 0:n.nextAvailableTime)||"00:00")-ye(((r=t==null?void 0:t.flex)==null?void 0:r.nextAvailableTime)||"00:00")},or=(e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase()),ar=(e,t)=>e.land.sort-t.land.sort,Ct=(e,t)=>Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)),lr=(e,t,n)=>e.geo===t.geo?0:e.geo?t.geo?n?Ct(e.geo,n)-Ct(t.geo,n):0:-1:1;function cr(e,t){const{n,s:r,e:o,w:s}=e.geo,[a,c]=t;return a<n&&a>r&&c<o&&c>s}function ye(e){const[t,n]=e.split(":").map(Number);return(t+17)%24*60+n}const dr={priority:(e,t)=>ir(e,t)||rr(e,t)||Se(e,t)||Ee(e,t),standby:(e,t)=>Se(e,t)||Ee(e,t),soonest:(e,t)=>Ee(e,t)||Se(e,t),nearby:(e,t,n)=>lr(e,t,n),aToZ:()=>0,land:(e,t)=>ar(e,t)||sr(e,t)};function ur({park:e,sortType:t,plusOnly:n}){const r=H(),{loadData:o,loaderElem:s,isLoading:a}=qe(),[c,u]=Qi(o),[f,l]=N([]),[{refreshing:m},h]=N({refreshing:!1,lastRefresh:0}),[d,p]=N(new Set);A(()=>{r.updateTracker()},[r]);const E=W((v=!0)=>{h(g=>{if(!v){if(Date.now()-g.lastRefresh<er)return g;r.updateTracker()}return{refreshing:!0,lastRefresh:g.lastRefresh}})},[r]);Ae(()=>{l([]),E(!0)},[e,E]),Ae(()=>{m&&(h({refreshing:!1,lastRefresh:Date.now()}),o(async()=>{t==="nearby"&&u();const v=await r.experiences(e),g=ye($().time);l(v.map(y=>{var w;const S=y.standby.waitTime||0,_=(w=y==null?void 0:y.flex)==null?void 0:w.nextAvailableTime;return{...y,lp:!!_&&S>=tr&&ye(_)-g<=Math.min(nr,(4-Math.trunc(y.priority||4))/3*S),starred:d.has(y.id)}}))}))},[r,o,e,m,t,d,u]),A(()=>{t==="nearby"&&u()},[t,u]),A(()=>{try{const v=JSON.parse(localStorage.getItem(Tt)||"[]"),g=new Set(v);p(g),l(y=>y.map(S=>({...S,starred:g.has(S.id)})))}catch(v){console.error(v)}},[]);function x(v){const{id:g}=v;v.starred=!v.starred,v.starred?d.add(g):d.delete(g),p(new Set(d)),localStorage.setItem(Tt,JSON.stringify([...d]))}return{experiences:f.filter(v=>(!n||!!v.flex)&&(n||v.standby.available||v.standby.unavailableReason==="TEMPORARILY_DOWN")).sort((v,g)=>{var y,S;return n&&(+!v.starred-+!g.starred||Number((y=g==null?void 0:g.flex)==null?void 0:y.available)-Number((S=v==null?void 0:v.flex)==null?void 0:S.available))||dr[t==="nearby"&&!(c&&cr(e,c))?"priority":t](v,g,c)||or(v,g)}),refresh:E,toggleStar:x,isLoading:a,loaderElem:s}}/**
 * Clock icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function bn(e){return i(Q,{...e,children:i("path",{d:"M10.293 11.707l-3.293-3.293v-4.414h2v3.586l2.707 2.707zM8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14c-3.314 0-6-2.686-6-6s2.686-6 6-6c3.314 0 6 2.686 6 6s-2.686 6-6 6z"})})}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function $e(e){return i(Q,{...e,children:i("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"})})}/**
 * Cog icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function hr(e){return i(Q,{...e,children:i("path",{d:"M14.59 9.535c-0.839-1.454-0.335-3.317 1.127-4.164l-1.572-2.723c-0.449 0.263-0.972 0.414-1.529 0.414-1.68 0-3.042-1.371-3.042-3.062h-3.145c0.004 0.522-0.126 1.051-0.406 1.535-0.839 1.454-2.706 1.948-4.17 1.106l-1.572 2.723c0.453 0.257 0.845 0.634 1.123 1.117 0.838 1.452 0.336 3.311-1.12 4.16l1.572 2.723c0.448-0.261 0.967-0.41 1.522-0.41 1.675 0 3.033 1.362 3.042 3.046h3.145c-0.001-0.517 0.129-1.040 0.406-1.519 0.838-1.452 2.7-1.947 4.163-1.11l1.572-2.723c-0.45-0.257-0.839-0.633-1.116-1.113zM8 11.24c-1.789 0-3.24-1.45-3.24-3.24s1.45-3.24 3.24-3.24c1.789 0 3.24 1.45 3.24 3.24s-1.45 3.24-3.24 3.24z"})})}const fr="_SELECT_RADIO_BUTTON_";function Pt(e){const{options:t,selected:n,title:r,onChange:o,...s}=e,[a,c]=N(!1),[u,f]=N(0),l=Z(null),m=Z(null);Ae(()=>{var w;if((w=t.values().next().value)!=null&&w.icon)return;const g=l.current,y=g==null?void 0:g.firstChild;if(!y)return;const S=y.nodeValue;if(!S)return;let _=0;for(const I of t.values())y.nodeValue=I.text,_=Math.max(g.offsetWidth,_);y.nodeValue=S,f(_)},[t]);const h=()=>{var g;return(g=m.current)==null?void 0:g.querySelector("input:checked")};A(()=>{var y;if(!a)return;(y=h())==null||y.focus();const g=S=>{var _;(_=m.current)!=null&&_.contains(S.target)||c(!1)};return addEventListener("focusin",g),()=>removeEventListener("focusin",g)},[a]);const d=()=>{const g=h();if(g){const y=g.value,S=t.get(y);S&&o(S.value??y)}c(!1)},p=t.get(n);if(!p)return null;const{icon:E,text:x}=p;let v=!1;return i(k,{children:[i(L,{...s,title:E?`${r}: ${p.text}`:r,onClick:()=>c(!0),children:[E||i("span",{style:{minWidth:`${u}px`},ref:l,children:x}),i(Q,{className:"w-2.5 ml-2",children:i("path",{d:"m6.8273 12.401-5.6333-7.7812a1.0212 1.0212 117.05 0 1 0.82716-1.62l11.958-2e-7a1.0212 1.0212 62.952 0 1 0.82714 1.62l-1.6438 2.2705a79984 79984 125.9 0 0-2.3456 3.2401l-1.6437 2.2706a1.4479 1.4479 180 0 1-2.3456 4.4e-5z"})})]}),a&&i(ae,{className:{outer:"bg-black bg-opacity-75",inner:"flex items-center justify-center h-full"},onChange:()=>{v||d(),v=!1},onClick:g=>{var y;(y=m.current)!=null&&y.contains(g.target)||c(!1)},onKeyDown:({key:g})=>{["Enter"," "].includes(g)?d():g.startsWith("Arrow")&&(v=!0)},"data-testid":"select-shade",children:i("ul",{className:"overflow-auto min-w-[50%] max-h-[90%] rounded-lg bg-white text-black",ref:m,children:[...t].map(([g,y])=>i("li",{className:"border-t-2 first:border-0 border-gray-300",children:i("label",{className:"flex flex-row items-center px-4 py-3",children:[i("input",{type:"radio",name:fr,value:g,defaultChecked:g===n,className:"w-4 h-4 mr-2.5"})," ",y.icon&&i("span",{"aria-hidden":"true",className:"mr-2.5",children:y.icon})," ",y.text]})},y.text))})})]})}/**
 * Checkmark icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function At({className:e}){return i(Q,{className:e,children:i("path",{d:"M13.5 2l-7.5 7.5-3.5-3.5-2.5 2.5 6 6 10-10z"})})}/**
 * Arrow down icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Rt(e){return i(Q,{...e,children:i("path",{d:"M8 15.5l7.5-7.5h-4.5v-8h-6v8h-4.5z"})})}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function pr(e){return i(Q,{...e,children:i("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"})})}function be({heading:e,children:t}){const n=Qe();return i(ae,{className:{outer:"bg-black bg-opacity-75",inner:"p-2 flex items-center justify-center h-full"},onClick:n.close,children:i("div",{className:"flex flex-col max-h-[90%] rounded-lg px-3 py-4 bg-white",onClick:r=>r.stopPropagation(),children:[i("h2",{className:"mt-0",children:e}),i("div",{className:"flex-1 overflow-auto",children:t}),i("div",{className:"pt-4",children:i(L,{type:"full",onClick:n.close,children:"Close"})})]})})}const Oe={eligible:[],ineligible:[],selected:[],setSelected:()=>null},xn=K(Oe),mr=xn.Provider,Ze=()=>q(xn),_r="https://bg1.joelface.com/ping",Dt="bg1.ping.date";async function wn(){const{date:e}=$();if(localStorage.getItem(Dt)===e)return;const{status:n}=await ge(_r,{method:"POST"});n===204&&localStorage.setItem(Dt,e)}function M({guests:e,selectable:t,conflicts:n}){return e.length===0?null:i("ul",{className:"mt-2",children:e.map(r=>{var o;return i("li",{className:"px-3 py-1",children:i("label",{className:"flex items-center",children:[t&&i("input",{type:"checkbox",checked:t.isSelected(r),onChange:()=>t.onToggle(r),className:"mr-3"}),i("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white",children:r.avatarImageUrl?i("img",{src:r.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):i("span",{"aria-hidden":"true",children:r.name[0]})}),i("span",{className:"leading-tight",children:[r.name,i("br",{}),(n==null?void 0:n[r.id])&&i("span",{className:"text-xs font-semibold text-red-700 uppercase",children:(o=n[r.id])==null?void 0:o.replace(/_/g," ")})]})]})},r.id)})})}function Xe(e){return i("div",{className:"mt-4 text-lg",children:[e.end?"Arrive by":"Reservation at",":"," ",i("span",{className:"ml-0.5 font-semibold",children:dn(e)})]})}function gr({booking:e,onClose:t}){const n=H(),[r,o]=N(new Set),{loadData:s,loaderElem:a}=qe(),{guests:c}=e,u=r.size===0,f=r.size===c.length;function l(){s(async()=>{u||await n.cancelBooking([...r]),t(c.filter(d=>!r.has(d)))})}const{name:m,park:h}=e;return i(U,{heading:"Your Lightning Lane",theme:h.theme,children:[i("h2",{children:m}),i("div",{children:h.name}),i(Xe,{...e}),i("div",{className:"ml-3",children:i("label",{className:"flex items-center py-4",children:[i("input",{type:"checkbox",checked:f,onChange:()=>o(new Set(f?[]:c))}),i("span",{className:"ml-3",children:"Select All"})]})}),!u&&i("div",{className:"mb-4",children:[i("h3",{children:"Cancel These Guests"}),i(M,{guests:c.filter(d=>r.has(d)),selectable:{isSelected:()=>!0,onToggle:d=>{const p=new Set(r);p.delete(d),o(p)}}})]}),!f&&i("div",{children:[i("h3",{children:"Select Guests to Cancel"}),i(M,{guests:c.filter(d=>!r.has(d)),selectable:{isSelected:()=>!1,onToggle:d=>o(new Set(r).add(d))}})]}),i(G,{onClick:l,children:u?"Back":"Cancel "+(f?"Reservation":"Guests")}),a]})}function kn({bg:e,experiences:t,heading:n}){return i("div",{className:`mt-4 rounded ${e}`,children:[i("h3",{className:"mt-0 p-1 text-white text-center",children:n}),i("ul",{className:"list-disc py-2 pl-8 bg-white bg-opacity-90",children:t.map(r=>i("li",{children:r.name},r.id))})]})}function Nn({booking:e,onClose:t,isNew:n}){var g;const r=H(),{name:o,park:s,choices:a,type:c}=e,u=c==="LL",f=Yi()||s,l=le(),[m,h]=N(u?e.guests:void 0),[d,p]=N(!1);if(d&&u&&m)return i(gr,{booking:{...e,guests:m},onClose:y=>{p(!1),y.length>0?h(y):t(y)}});const E=new Map([[f,[]],...r.parks.map(y=>[y,[]])]);for(const y of a||[])(g=E.get(y.park))==null||g.push(y);const x=[...E.keys()],v=(a?x.length===1?x[0]:{theme:Je}:s).theme;return i(U,{heading:"Your "+(u?e.subtype==="DAS"?"DAS Return Time":"Lightning Lane":"Reservation"),theme:v,buttons:e.modifiable&&i(L,{onClick:()=>l.begin(e),children:"Modify"}),children:[a?i("h2",{children:"Multiple Experiences"}):i(k,{children:[i("h2",{children:o}),i("div",{children:s.name})]}),i(Xe,{...e}),a&&i(k,{children:[i("p",{children:[i("b",{children:o})," was temporarily unavailable during your return time. You may redeem this Lightning Lane at one of these replacement experiences:"]}),[...E].filter(([,y])=>y.length>0).map(([y,S=[]])=>{var _;return i(kn,{heading:y.name,experiences:S,bg:((_=y.theme)==null?void 0:_.bg)??""},y.id)})]}),i("div",{className:"flex mt-4",children:[i("h3",{className:"inline mt-0",children:"Your Party"}),e.cancellable&&i(L,{type:"small",onClick:()=>p(!0),className:"ml-3",children:"Cancel"})]}),i(M,{guests:m||e.guests,conflicts:m&&Object.fromEntries(m.filter(y=>(y.redemptions??1)!==1).map(y=>[y.id,`Redemptions left: ${y.redemptions}`]))}),i(G,{onClick:()=>t(m),children:n?"Done":"Back"})]})}function yr({children:e}){return i("p",{className:"border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100",children:e})}function Me(){const{ineligible:e}=Ze();return i(M,{guests:e,conflicts:Object.fromEntries(e.map(t=>[t.id,t.eligibleAfter?`TOO EARLY (${J(t.eligibleAfter)})`:t.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function et({buttonText:e,onSubmit:t}){const{eligible:n,ineligible:r,selected:o,setSelected:s}=Ze(),[a,c]=N(),[u,f]=ve(),{maxPartySize:l}=H();return a?i(k,{children:[i("h3",{children:"Choose Your Party"}),i(M,{guests:n,selectable:{isSelected:h=>a.has(h),onToggle:h=>c(d=>{f(""),d=new Set(d);const p=d.has(h)?"delete":"add";return p==="add"&&d.size>=l?f(`Maximum party size: ${l}`):d[p](h),d})}}),r.length>0&&i(k,{children:[i("h3",{children:"Ineligible Guests"}),i(Me,{})]}),i(G,{disabled:a.size===0,onClick:()=>{s([...a]),c(void 0)},children:"Confirm Party"}),u]}):i(k,{children:[n.length>l&&o.length===l&&i(yr,{children:"Party size restricted"}),n.length>0?i(k,{children:[i("div",{className:"mt-4",children:[i("h3",{className:"inline mt-0",children:"Your Party"}),i("span",{children:i(L,{type:"small",onClick:()=>c(new Set(o)),className:"ml-3",children:"Edit"})})]}),i(M,{guests:o})]}):i(k,{children:[i("h3",{children:"Ineligible Guests"}),i(Me,{})]}),i(G,{onClick:t,children:e})]})}function vr({offer:e,onBook:t}){const n=le();return i(k,{children:[i(Xe,{...e}),e.changed&&i("div",{className:"text-sm",children:[i("strong",{children:"Note:"})," Return time has been changed"]}),i(et,{buttonText:`${n.current?"Modify":"Book"} Lightning Lane`,onSubmit:t})]})}const Lt="https://widget.time.is/t.js";function br(){if([...document.scripts].some(t=>t.src===Lt))return;const e=document.createElement("script");e.src=Lt,e.onload=Sn,document.head.appendChild(e)}const fe={};function Sn(){"time_is_widget"in self&&self.time_is_widget.init(fe)}function xr(e){br(),fe[e]||(fe[e]={}),Sn()}function En(e,t){const n=document.getElementById(e);if(!n||n.firstElementChild)return t();n.textContent=$().time,setTimeout(()=>En(e,t),100)}function wr({id:e,onSync:t}){return A(()=>{xr(e),En(e,t)},[e,t]),i("time",{id:e})}const kr={WDW:"Orlando_z161",DLR:"Anaheim_z14e"},Nr=5e3;function In({resort:e,time:t,label:n}){const r=kr[e],[o,s]=N(null);A(()=>{setTimeout(()=>s(c=>c||!1),Nr)},[]);const a=W(()=>s(!0),[]);return i("table",{className:"mt-4 mx-auto text-gray-500",children:i("tbody",{children:[i($t,{heading:n,time:i("time",{children:t||"--:--:--"})}),i($t,{heading:i("a",{href:`https://time.is/${r.split("_")[0]}`,id:"time_is_link",target:"_blank",rel:"noreferrer",children:"Current time"}),time:i(k,{children:[i(wr,{id:r,onSync:a}),o===!1&&i("span",{className:"text-sm font-sans font-semibold text-red-600",children:[" ","(unsynced)"]})]})})]})})}function $t({heading:e,time:t}){return i("tr",{children:[i("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase",children:[e,":"]}),i("td",{className:"text-xl font-mono leading-tight",children:["\uFEFF",t]})]})}function Sr({startTime:e,onRefresh:t}){return i(k,{children:[e&&i(In,{resort:"WDW",time:e,label:"Booking start"}),e?i("p",{children:["At"," ",i("time",{dateTime:e,className:"font-semibold",children:J(e)}),", tap the ",i("span",{className:"font-semibold",children:"Check Availability"})," ","button below to start booking this Lightning Lane."]}):i("p",{children:"Sorry, but you can't make a Lightning Lane reservation for this attraction yet."}),i(et,{buttonText:"Check Availability",onSubmit:t})]})}function Er({onClose:e}){const{ineligible:t}=Ze(),{eligibleAfter:n}=t[0]||{},r=le();return i(k,{children:[n&&i("div",{className:"mt-4 border-2 border-green-600 rounded p-1 uppercase font-semibold text-center text-green-600 bg-green-100",children:["Eligible at ",J(n)]}),r.current?i(k,{children:[i("h3",{children:"Unable to Modify"}),i("p",{children:"Your current reservation cannot be modified to this experience due to the following conflicts:"})]}):i(k,{children:[i("h3",{children:"No Eligible Guests"}),i("p",{children:"No one in your party is currently eligible for this Lightning Lane."})]}),i(Me,{}),i(G,{onClick:e,children:"Back"})]})}function Ir({onRefresh:e}){return i(k,{children:[i("h3",{children:"No Guests Found"}),i("p",{children:"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."}),i(G,{onClick:e,children:"Try Again"})]})}function Tr({onClose:e}){return i(k,{children:[i("h3",{children:"No Reservations Available"}),i("p",{children:"There aren't enough reservation slots available for your entire party. If only part of your group wishes to go on this attraction, edit your party to check again. Otherwise, go back to the tip board and select another attraction."}),i(et,{buttonText:"Back",onSubmit:e})]})}function Tn({booking:e,button:t}){return i("div",{className:"flex items-center gap-x-3",children:[i("div",{className:"flex-1 min-w-0",children:[i("div",{className:"flex items-center gap-x-2 text-gray-500 text-sm font-semibold uppercase",children:[e.subtype==="DAS"&&i(k,{children:[i("span",{className:"px-1 rounded bg-gray-400 text-white",children:"DAS"})," "]}),dn(e)]}),i("div",{className:"text-lg font-semibold leading-tight truncate",children:e.choices?"Multiple Experiences":e.name})]}),t&&i("div",{children:t})]})}function Cn(){const e=le(),t=F();return e.current?i("div",{className:`sticky top-0 -mx-3 pb-1 ${t.bg}`,children:i("div",{className:"pb-3 bg-white",children:[i("div",{className:`pb-1 ${t.bg} text-white text-sm font-semibold uppercase text-center`,children:"Modifying Reservation"}),i("div",{className:"mt-2 px-3",children:i(Tn,{booking:e.current,button:i(L,{type:"small",onClick:()=>e.end(!0),children:"Keep"})})})]})}):null}function Cr({onClose:e}){const t=H(),[n,r]=N(),[o,s]=N(),[a,c]=N(!1);function u(l){o&&(s(void 0),l&&r(m=>{if(m)return l.length>0?o.guests=l:m.splice(m.indexOf(o),1),m}))}A(()=>{c(!0),t.bookings().then(l=>r(l))},[t]);function f(){c(!1),setTimeout(e,300)}return o?i(Nn,{booking:o,onClose:u}):i(k,{children:[i(ae,{onClick:f,"data-testid":"panel-shade",className:{inner:"bg-black bg-opacity-75"}}),i(U,{heading:"Your Day",buttons:i(L,{onClick:f,children:"Close"}),className:`top-auto ${a?"h-[60%]":"h-0"} duration-200 ease-linear`,children:n&&n.length>0?i("ul",{children:(n||[]).map(l=>i("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",children:i(Tn,{booking:l,button:i(L,{type:"small",onClick:()=>s(l),children:"More"})})},l.bookingId))}):i("div",{className:"mt-4 text-sm font-semibold text-center uppercase  text-gray-500",children:n&&"No current reservations"})})]})}function Pn({onOpen:e,onClose:t,...n}){const[r,o]=N(),s=e||o,a=t||(()=>o(void 0));return i(k,{children:[i(L,{...n,onClick:()=>s(i(Cr,{onClose:a})),title:"Your Day",children:i(bn,{})}),r]})}function Pr({experience:e,onClose:t}){const n=H(),r=le(),[o,s]=N(),[a,c]=N(!e.flex.available&&e.flex.enrollmentStartTime!==void 0),[u,f]=N(a?null:void 0),[l,m]=N(),{loadData:h,loaderElem:d}=qe();async function p(){if(!u||!o)return;let _=null;await h(async()=>{try{_=await n.book(u,r.current,o.selected)}finally{r.end()}const w=new Set(o.selected.map(T=>T.id)),I=_.guests.filter(T=>!w.has(T.id));I.length>0&&(await n.cancelBooking(I),_.guests=_.guests.filter(T=>w.has(T.id))),wn()},{410:"Offer expired"}),_&&m(_)}function E(){h(async _=>{var T;const I=(await n.experiences(e.park)).find(O=>O.id===e.id);(T=I==null?void 0:I.flex)!=null&&T.available?(c(!1),f(void 0)):_("Reservations not open yet")})}function x(){u&&n.cancelOffer(u),t()}const v=W(()=>{h(async()=>{try{const _=r.current?{eligible:r.current.guests,ineligible:[]}:await n.guests(e);s({..._,selected:_.eligible.slice(0,n.maxPartySize),setSelected:w=>s(I=>{if(!I)return I;const T=new Set(I.selected);return c(O=>(O||f(C=>C===null||w.some(R=>!T.has(R))?void 0:C),O)),{...I,selected:w}})})}catch(_){throw s(Oe),_}})},[n,e,r,h]);A(()=>{o||v()},[o,v]);const g=W(_=>{!o||o.selected.length===0||h(async()=>{try{const w=await n.offer(e,o.selected,r.current),{ineligible:I}=w.guests;if(I.length>0){const T=new Set(I.map(C=>C.id)),O=C=>!T.has(C.id);s({...o,eligible:o.eligible.filter(O),ineligible:[...I,...o.ineligible],selected:o.selected.filter(O)})}w.active?(u&&(w.changed=!1),f(w)):f(T=>T??null)}catch(w){throw _||f(null),w}},{410:u?"No reservations available":""})},[n,e,o,u,r,h]);if(A(()=>{u===void 0&&g()},[u,g]),l)return i(Nn,{booking:l,onClose:t,isNew:!0});const y=(o==null?void 0:o.eligible.length)===0,S=y&&(o==null?void 0:o.ineligible.length)===0;return i(U,{heading:"Lightning Lane",theme:e.park.theme,buttons:i(k,{children:[i(Pn,{}),(o&&(u||S)||a)&&i(L,{onClick:x,children:"Back"}),!a&&u!==void 0&&i(L,{onClick:g,title:"Refresh Offer",children:i(Ke,{})})]}),children:[i(Cn,{}),i("h2",{children:e.name}),i("div",{children:e.park.name}),i(mr,{value:o??Oe,children:a&&o?i(Sr,{startTime:e.flex.enrollmentStartTime||"07:00:00",onRefresh:E}):S?i(Ir,{onRefresh:v}):y?i(Er,{onClose:t}):!o||u===void 0?i("div",{}):u===null?i(Tr,{onClose:t}):i(vr,{offer:u,onBook:p})}),d]})}function tt({label:e,children:t}){return i("div",{className:"flex items-center flex-1 whitespace-nowrap",children:[i("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500",children:e})," ",t]})}function Ar({experience:e,onClick:t}){const{flex:n}=e;return i(tt,{label:"Genie+",children:i("span",{children:i(L,{onClick:()=>t(e),children:n.nextAvailableTime?J(n.nextAvailableTime):"none"})})})}function An({children:e}){return i("div",{className:"mt-8 flex justify-center",children:i("div",{children:[i("h2",{className:"mt-0 pl-1 text-gray-500 text-sm leading-tight uppercase",children:"Symbols"}),i("div",{className:"border-2 border-gray-500 rounded px-2 py-0.5 bg-gray-100",children:i("table",{children:i("tbody",{children:e})})})]})})}function ne({sym:e,def:t,onInfo:n}){return i("tr",{children:[i("th",{className:"py-0.5 text-center font-bold",children:e}),i("td",{className:"pl-3 py-0.5",children:t}),n&&i("td",{className:"pl-3 py-0.5",children:i(L,{type:"small",onClick:n,children:"Info"})})]})}const Rn="bg1.genie.partyIds";function Dn(){const e=JSON.parse(localStorage.getItem(Rn)||"[]");return Array.isArray(e)?e:[]}function Rr(){const e=H();A(()=>e.setPartyIds(Dn()),[e])}function Dr({onClose:e}){const t=H(),[n,r]=N(!0),[o,s]=N(),[a,c]=N(()=>{const h=new Set(Dn());return r(h.size===0),h});function u(){const h=[...a];localStorage.setItem(Rn,JSON.stringify(h)),t.setPartyIds(h),e()}A(()=>{t.guests().then(h=>{s([...h.eligible,...h.ineligible].sort((d,p)=>+!d.primary-+!p.primary||d.name.localeCompare(p.name)))})},[t]),A(()=>{n&&c(new Set)},[n]);const f=o==null?void 0:o.filter(h=>a.has(h.id)),l=o==null?void 0:o.filter(h=>!a.has(h.id)),m=h=>i("li",{children:i("label",{className:"flex items-center mt-2",children:[i("input",{type:"radio",name:"auto",onChange:()=>r(h.auto),checked:n===h.auto,className:"mr-2"})," ",h.children]})});return i(U,{heading:"Party Selection",buttons:i(L,{onClick:e,children:"Cancel"}),children:[i("p",{children:"By default, all eligible guests (up to a maximum of 12) are automatically selected when you book a Lightning Lane. If you would like to limit who you book for, you can manually select your party here."}),i("ul",{children:[i(m,{auto:!0,children:"Book for all eligible guests"}),i(m,{auto:!1,children:"Only book for selected guests"})]}),n?null:(o==null?void 0:o.length)===0?i("p",{className:"text-red-700",children:"No guests to select"}):f&&l?i(k,{children:[f.length>0&&i(k,{children:[i("h3",{children:"Your Party"}),i(M,{guests:f,selectable:{isSelected:()=>!0,onToggle:h=>{const d=new Set(a);d.delete(h.id),c(d)}}})]}),l.length>0&&i(k,{children:[i("h3",{children:"Add to Your Party"}),i(M,{guests:l,selectable:{isSelected:()=>!1,onToggle:h=>{const d=new Set(a);d.add(h.id),c(d)}}})]})]}):i(vn,{}),i(G,{disabled:!n&&a.size===0,onClick:u,children:"Save"})]})}function Lr({experience:{type:e,standby:t}}){return t.displayNextShowTime||e==="ENTERTAINMENT"&&!t.waitTime?i(Or,{standby:t}):i($r,{standby:t})}const $r=({standby:e})=>i(tt,{label:"Standby",children:e.available?i($n,{time:e.waitTime!==void 0?e.waitTime+" min":"now"}):i(On,{text:"down"})}),Or=({standby:e})=>i(tt,{label:i(k,{children:["Next ",i("span",{className:"hidden xs:inline",children:"Show"})]}),children:e.displayNextShowTime?i($n,{time:e.displayNextShowTime}):i(On,{text:"none"})}),Ln="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",$n=({time:e})=>i("span",{className:`${Ln} border-gray-500 text-gray-500 bg-gray-100`,children:e}),On=({text:e})=>i("span",{className:`${Ln} border-red-600 text-red-600 bg-red-100`,children:e});function Mr({bookTime:e,dropTime:t}){const n=F();return!e&&!t?null:i("div",{className:`flex justify-center gap-x-10 -mx-3 px-3 pb-1 ${n.bg} text-white text-sm font-semibold uppercase text-center`,children:[i(Ot,{label:"Book",time:e}),i(Ot,{label:"Drop",time:t})]})}function Ot({label:e,time:t}){if(!t)return null;t=t.slice(0,5);const n=$().time.slice(0,5);return i("div",{children:[e,":"," ",i("time",{dateTime:t,className:"whitespace-nowrap",children:t>n?J(t):"now"})]})}const Ge="Lightning Pick",Be="Upcoming Drop",Ue="Booked",Mt=e=>e.experienced&&!e.starred;function Gr({experiences:e,refresh:t,toggleStar:n}){Rr();const r=H(),o=Qe(),s=F(),a=e[0],c=a&&r.nextDropTime(a.park),u=()=>o.show(i(Ur,{})),f=()=>o.show(i(Hr,{dropTime:c,park:a.park})),l=()=>o.show(i(Wr,{})),m=p=>i("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",children:[i("div",{className:"flex items-center gap-x-2 mt-2",children:[i(Br,{experience:p,toggleStar:n}),i("h3",{className:"flex-1 mt-0 text-lg font-semibold leading-tight truncate",children:p.name}),p.lp?i(Ie,{name:Ge,icon:$e,onClick:u}):c&&p.drop?i(Ie,{name:Be,icon:Rt,onClick:f}):null,p.flex.preexistingPlan&&i(Ie,{name:Ue,icon:At,onClick:l})]}),i("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[i(Lr,{experience:p}),i(Ar,{experience:p,onClick:E=>o.show(i(Pr,{experience:E,onClose:()=>{o.close(),t(!1)}}))})]})]},p.id+(p.starred?"*":"")),h=e.filter(p=>!Mt(p)),d=e.filter(Mt).sort((p,E)=>p.name.localeCompare(E.name));return i(k,{children:[i(Cn,{}),i(Mr,{bookTime:r.nextBookTime,dropTime:c}),i("ul",{"data-testid":"unexperienced",children:h.map(m)}),d.length>0&&i(k,{children:[i("h2",{className:`-mx-3 px-3 py-1 text-sm uppercase text-center ${s.bg} text-white`,children:"Previously Experienced"}),i("ul",{"data-testid":"experienced",children:d.map(m)})]}),i(An,{children:[i(ne,{sym:i($e,{className:s.text}),def:Ge,onInfo:u}),i(ne,{sym:i(Rt,{className:s.text}),def:Be,onInfo:f}),i(ne,{sym:i(At,{className:s.text}),def:Ue,onInfo:l})]})]})}function Ie({name:e,icon:t,onClick:n}){const r=F();return i("button",{title:`${e} (more info)`,className:`-mx-2 px-2 ${r.text}`,onClick:n,children:i(t,{})})}function Br({experience:e,toggleStar:t}){const n=F();return i("button",{title:`${e.starred?"Unfavorite":"Favorite"}`,className:"-m-2 p-2",onClick:()=>t(e),children:i(pr,{className:e.starred?n.text:"text-gray-300"})})}function Ur(){return i(be,{heading:Ge,children:i("p",{children:"When an attraction with a long wait has a Lightning Lane return time in the near future, it's highlighted as a Lightning Pick. Book these quick before they're gone!"})})}function Hr({dropTime:e,park:t}){const n=H(),{bg:r}=F();return i(be,{heading:Be,children:[i("p",{children:["This attraction may be part of the"," ",e?i("time",{dateTime:e,className:"font-semibold",children:J(e)}):"next"," ","drop of additional Lightning Lane inventory, with earlier return times than what's currently being offered. Availability varies but is always limited, so be sure you're ready to book when the drop time arrives!"]}),n.upcomingDrops(t).map(o=>i(kn,{heading:J(o.time),experiences:o.experiences,bg:r},o.time))]})}function Wr(){return i(be,{heading:Ue,children:i("p",{children:"You currently have a Lightning Lane reservation for this attraction."})})}function Mn({type:e}){const t=Ve();return i(L,{type:e,onClick:()=>t.logOut(),children:"Log Out"})}const Fr={party:Dr};function zr({onClose:e}){const[t,n]=N(),r=W(()=>n(void 0),[]);if(t){const o=Fr[t];return i(o,{onClose:r})}return i(U,{heading:"Settings",children:[i("ul",{className:"mt-4",children:[i(Gt,{button:i(L,{onClick:()=>n("party"),children:"Select Party"}),desc:"BG1's automatic party selection works great for most people, but manually specifying your party may be useful for larger groups or other special situations."}),i(Gt,{button:i(Mn,{}),desc:"You should only need to use this if you logged in with the wrong account."})]}),i(G,{onClick:e,children:"Close"})]})}function Gt({button:e,desc:t}){return i("li",{children:[i("div",{className:"text-center",children:e}),i("p",{className:"mt-2",children:t})]})}function Yr({experiences:e}){const t=Qe(),n=o=>t.show(i(jr,{exp:o})),r=new Map;return e.forEach(o=>{var s,a;r.has(o.land)||r.set(o.land,{ATTRACTION:[],ENTERTAINMENT:[],CHARACTER:[]}),(a=(s=r.get(o.land))==null?void 0:s[o.type])==null||a.push(o)}),i(k,{children:[[...r].map(([o,s])=>i("div",{children:[i("h2",{className:`pr-1 ${o.theme.text} text-sm font-semibold text-right uppercase`,children:o.name}),i("div",{className:"rounded overflow-hidden",children:[i(Te,{title:"Attractions",land:o,experiences:s.ATTRACTION,onInfoClick:n}),i(Te,{title:"Entertainment",land:o,experiences:s.ENTERTAINMENT,onInfoClick:n}),i(Te,{title:"Characters",land:o,experiences:s.CHARACTER,onInfoClick:n})]})]},o.name)),i(An,{children:[i(ne,{sym:"*",def:"No listed wait/show time"}),i(ne,{sym:"\u274C",def:"Temporarily down"})]})]})}function Te({title:e,land:t,experiences:n,onInfoClick:r}){return n.length===0?null:i("div",{className:`${t.theme.bg}`,"data-testid":`${t.name}-${e}`,children:[i("h3",{className:"mt-0 py-1 text-white text-xs font-semibold text-center uppercase",children:e}),i("table",{className:"w-full bg-white bg-opacity-90 leading-snug",children:i("tbody",{children:n.map(o=>{var s;return i("tr",{className:"group",children:[i("td",{className:`${o.standby.displayNextShowTime?"min-w-[5.625rem]":"min-w-[2.75rem]"} px-2 py-0.5 group-first:pt-1 group-last:pb-1 ${t.theme.bg} bg-opacity-10 ${t.theme.text} font-bold text-center uppercase whitespace-nowrap`,children:o.standby.displayNextShowTime?(((s=o.displayAdditionalShowTimes)==null?void 0:s.length)??0)>0?i("button",{onClick:()=>r(o),className:"underline",children:o.standby.displayNextShowTime}):o.standby.displayNextShowTime:o.standby.available?o.standby.waitTime??"*":"\u274C"}),i("td",{className:"w-full px-1 pl-2 py-0.5 group-first:pt-1 group-last:pb-1",children:o.name})]},o.id)})})})]})}const jr=({exp:e})=>{var t;return i(be,{heading:e.name,children:[i("h3",{className:"w-[75vw] mt-2 text-gray-500 text-sm font-semibold uppercase",children:["Upcoming ",e.type==="CHARACTER"?"Appearances":"Shows"]}),i("ul",{className:"list-disc mt-2 pl-6",children:[!!e.standby.displayNextShowTime&&i("li",{children:e.standby.displayNextShowTime}),(t=e.displayAdditionalShowTimes)==null?void 0:t.map(n=>i("li",{children:n},n))]})]})},Bt="bg1.genie.tipBoard.park",Vr="bg1.merlock.screen",Jr=new Map([["priority",{text:"Priority"}],["nearby",{text:"Nearby"}],["standby",{text:"Standby"}],["soonest",{text:"Soonest"}],["aToZ",{text:"A to Z"}]]),He={"Genie+":{title:i(k,{children:["G",i("span",{className:"hidden xs:inline",children:"enie"}),"+"]}),component:Gr,plusOnly:!0},Times:{title:"Times",component:Yr,sortType:"land"}},Gn=K({...He["Genie+"],name:"Genie+",change:()=>{}});function Qr(){const{parks:e}=H(),[t,n]=N(()=>{const{id:_=e[0].id,date:w=""}=JSON.parse(sessionStorage.getItem(Bt)||"{}")||{};return w===$().date&&e.find(I=>I.id===_)||e[0]}),[r,o]=N(()=>{const _={"Genie+":"Genie+",Times:"Times"}[String(localStorage.getItem(Vr))]??"Genie+";return{...He[_],name:_,change:w=>{o(I=>{var T;return w!==I.name&&(a(!0),y.current[I.name]=((T=g.current)==null?void 0:T.scrollTop)??0,I={...He[w],name:w,change:I.change},localStorage.setItem("bg1.merlock.screen",w)),I})}}}),[s,a]=N(!0),[c,u]=N("priority"),{experiences:f,refresh:l,toggleStar:m,isLoading:h,loaderElem:d}=ur({park:t,sortType:r.sortType??c,plusOnly:!!r.plusOnly}),[p,E]=N({elem:null,show:_=>E({...p,elem:_}),close:()=>E(_=>({..._,elem:null}))}),[x,v]=N({current:void 0,begin:_=>{v({...x,current:_}),r.change("Genie+"),n(_.park),p.close()},end:(_=!1)=>{v(w=>w.current?{...w,current:void 0}:w),_&&p.close()}}),g=Z(null),y=Z({});A(()=>{if(h)return;const _=()=>{document.hidden||l(!1)};return document.addEventListener("visibilitychange",_),()=>{document.removeEventListener("visibilitychange",_)}},[l,h]),A(()=>{var _;a(!1),(_=g.current)==null||_.scroll(0,y.current[r.name]??0)},[r.name]),A(()=>{h||a(!1)},[h]),A(()=>a(!0),[t]),A(()=>{var _;(_=g.current)==null||_.scroll(0,0)},[t,c,x]),A(()=>{y.current={},sessionStorage.setItem(Bt,JSON.stringify({id:t.id,date:$().date}))},[t]);const S=Fe(()=>new Map(e.map(_=>[_.id,{value:_,icon:_.icon,text:_.name}])),[e]);return i(ji,{value:x,children:i(U,{heading:r.title,theme:t.theme,buttons:i(k,{children:[r.sortType===void 0&&i(Pt,{options:Jr,selected:c,onChange:u,title:"Sort By"}),i(Pt,{options:S,selected:t.id,onChange:n,title:"Park","data-testid":"park-select"}),i(Pn,{onOpen:p.show,onClose:p.close}),i(L,{onClick:l,title:"Refresh Times",children:i(Ke,{})})]}),containerRef:g,children:[i(Fi,{value:p,children:[i("div",{"aria-hidden":!!p.elem,className:`${s&&"invisible"} mb-14`,children:i(r.component,{experiences:f,refresh:l,toggleStar:m})}),!p.elem&&d,i(zi,{value:t,children:p.elem})]}),i("div",{className:`fixed bottom-0 left-0 w-full ${t.theme.bg} text-white font-semibold`,children:i("div",{className:"flex items-center justify-center",children:[i(Gn.Provider,{value:r,children:[i(Ut,{name:"Genie+",icon:$e}),i(Ut,{name:"Times",icon:bn})]}),i("button",{className:"absolute top-0 right-0 h-full px-3",onClick:()=>p.show(i(zr,{onClose:p.close})),title:"Settings",children:i(hr,{})})]})})]})})}function Ut({name:e,icon:t}){const n=q(Gn);return i("button",{className:`flex items-center gap-x-2 border-b-4 ${e===n.name?"border-white":"border-transparent"} px-3 pt-3 pb-2`,onClick:()=>n.change(e),children:[i(t,{}),e]})}const Kr=Ve,qr={success:5e3,failure:1e3};function Zr({guests:e,result:t,onDone:n}){const{boardingGroup:r,conflicts:o}=t,s=e.filter(f=>!(f.id in o)),a=e.filter(f=>f.id in o),[c,u]=N(!1);return A(()=>{setTimeout(()=>u(!0),qr[r?"success":"failure"])},[r]),i(k,{children:[r!==null?i(k,{children:[i("h2",{className:"mt-5 text-xl",children:"Congratulations! \u{1F389}"}),i("p",{children:"You joined the virtual queue!"}),i("p",{className:"text-lg font-semibold",children:["Boarding Group: ",r]}),i(M,{guests:s}),Object.keys(o).length>0&&i(k,{children:[i("p",{className:"font-semibold",children:"These guests could not join:"}),i(M,{guests:a,conflicts:o})]}),i("p",{children:"Refer to the My Disney Experience app for return time and other information."})]}):i(k,{children:[i("h2",{className:"mt-5 text-xl",children:"Sorry!"}),i("p",{children:"A boarding group could not be obtained."}),i(M,{guests:a,conflicts:o})]}),c&&i(G,{onClick:n,children:"Done"})]})}function Xr({guests:e,party:t,onToggle:n,onConfirm:r}){return i(k,{children:[i("div",{className:"mt-5",children:[i("h2",{className:"inline mr-3 text-xl",children:"Choose Your Party"}),i(Mn,{type:"small"})]}),e?e.length>0?i(M,{guests:e,selectable:{isSelected:o=>t.has(o),onToggle:n}}):i("p",{children:"No guests available"}):i("p",{children:"Loading guests\u2026"}),i(G,{disabled:t.size===0,onClick:r,children:"Confirm Party"})]})}function es({queue:e}){return i(k,{children:e.howToEnterMessage.split(`

`).map((t,n)=>i("p",{children:t},n))})}const ts=999;function ns({guests:e,joinQueue:t,onEdit:n}){const[r,o]=N(!1),[s,a]=ve();async function c(){o(!0),a("");const u=Le(ts);try{await t()||a("Queue not open yet")}catch(f){a("Error: try again","error"),f instanceof he||console.error(f)}finally{await u,o(!1)}}return i(k,{children:[i("div",{className:"mt-4",children:[i("h2",{className:"inline mr-3 text-xl",children:"Your Party"}),i(L,{type:"small",onClick:n,children:"Edit"})]}),i(M,{guests:e}),i(G,{disabled:r,onClick:c,children:"Join Virtual Queue"}),s]})}function is({queue:e,queues:t,onChange:n}){t||(t=[]);const{bg:r}=F(),o=`block w-full ${r} text-white text-xl font-semibold`;return i(k,{children:t.length<=1?i("span",{className:`${o} px-1 truncate`,children:e.name}):i("select",{className:`${o} pr-1`,value:e.id,onChange:s=>n?n(s.currentTarget.value):null,children:t.map(s=>i("option",{value:s.id,className:"text-base font-normal",children:s.name},s.id))})})}const Ht=e=>e.categoryContentId==="attraction";function rs(){const e=Kr(),[t,n]=N(),[r,o]=N(null),[s,a]=N(),[c,u]=N(new Set),[f,l]=N({boardingGroup:null,conflicts:{},closed:!0}),[m,h]=N(!1),[d,p]=N("ChooseParty"),[E,x]=ve(),v=Z(null),g=W(async()=>{x(""),h(!0);const C=(await e.getQueues()).filter(R=>R.isAcceptingJoins||R.isAcceptingPartyCreation).sort((R,B)=>+Ht(B)-+Ht(R)||R.name.localeCompare(B.name));h(!1),n(R=>(R&&C.length===0&&x("No queues available"),C))},[e,x]);A(()=>{g();const C=()=>{document.hidden||g()};return document.addEventListener("visibilitychange",C),()=>{document.removeEventListener("visibilitychange",C)}},[g]),A(()=>{o(C=>{const R=C&&(t==null?void 0:t.find(B=>B.id===C.id));return R||(a(void 0),t&&t.length>0?t[0]:null)})},[t]),A(()=>{if(s||!r)return;let C=!1;return(async()=>{const R=await e.getLinkedGuests(r);C||(a(R),u(new Set(R.filter(B=>B.preselected))))})(),()=>{C=!0}},[e,r,s]),A(()=>{var C;(C=v.current)==null||C.scroll(0,0)},[d]);function y(C){const R=new Set(c);R[R.has(C)?"delete":"add"](C);const B=Number(r==null?void 0:r.maxPartySize);B>0&&R.size>B?x(`Maximum party size: ${B}`):(u(R),x(""))}function S(C){const R=t==null?void 0:t.find(B=>B.id===C);R&&(o(R),a(void 0))}async function _(){if(!r||!(await e.getQueue(r)).isAcceptingJoins)return!1;const C=await e.joinQueue(r,[...c]);return l(C),p("BGResult"),C.boardingGroup!==null&&wn(),!0}if((t==null?void 0:t.length)===0)return i(U,{heading:"No Active Queues",children:[i("p",{children:"You can't join any virtual queues just yet. Check back within an hour of the queue opening time, or tap the Refresh button to check again."}),i(G,{disabled:m,onClick:g,children:"Refresh"}),E]});if(!r)return i("div",{});const w=(s||[]).filter(C=>c.has(C)),I=i(In,{resort:e.resort,time:r.nextScheduledOpenTime,label:"Next queue opening"}),T=i(is,{queue:r,queues:d==="ChooseParty"?t:[],onChange:S});return{ChooseParty:i(U,{heading:T,containerRef:v,children:[i(es,{queue:r}),I,i(Xr,{guests:s,party:c,onToggle:y,onConfirm:()=>p("JoinQueue")}),E]}),JoinQueue:i(U,{heading:T,children:[I,i(ns,{guests:w,onEdit:()=>p("ChooseParty"),joinQueue:_})]}),BGResult:i(U,{heading:T,children:i(Zr,{guests:w,result:f,onDone:()=>p("ChooseParty")})})}[d]}Bn();function Bn(){if(!document.body){setTimeout(Bn,100);return}const e=new hi("bg1.auth");Ii(origin)?Wt(new Ci({origin,authStore:e}),rs,e):ki(origin)?je.load({origin,authStore:e}).then(t=>Wt(t,Qr,e)):location.href="https://joelface.github.io/bg1/start.html"}async function Wt(e,t,n){di({WDW:"America/New_York",DLR:"America/Los_Angeles"}[e.resort]),document.title="BG1",os(),ss(),as().render(i(Wi,{client:e,authStore:n,children:i(t,{})}))}function ss(){document.body.addEventListener("click",()=>null)}function os(){const e=document.createElement("meta");e.name="viewport",e.content="width=device-width, initial-scale=1, maximum-scale=1",document.head.appendChild(e)}function as(){const e=document.createElement("div");return e.id="app",document.body.appendChild(e),ci(e)}
