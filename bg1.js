var Pn=Object.defineProperty,Rn=Object.defineProperties;var An=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var Ke=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var Ve=(t,e,n)=>e in t?Pn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w=(t,e)=>{for(var n in e||(e={}))Ke.call(e,n)&&Ve(t,n,e[n]);if(he)for(var n of he(e))qe.call(e,n)&&Ve(t,n,e[n]);return t},L=(t,e)=>Rn(t,An(e));var U=(t,e)=>{var n={};for(var i in t)Ke.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&he)for(var i of he(t))e.indexOf(i)<0&&qe.call(t,i)&&(n[i]=t[i]);return n};var ae,y,Ot,ie,Mt,Ze,Bt,ve={},Gt=[],Dn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function z(t,e){for(var n in e)t[n]=e[n];return t}function Ut(t){var e=t.parentNode;e&&e.removeChild(t)}function o(t,e,n){var i,r,s,l={};for(s in e)s=="key"?i=e[s]:s=="ref"?r=e[s]:l[s]=e[s];if(arguments.length>2&&(l.children=arguments.length>3?ae.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)l[s]===void 0&&(l[s]=t.defaultProps[s]);return oe(t,l,i,r,null)}function oe(t,e,n,i,r){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r==null?++Ot:r};return r==null&&y.vnode!=null&&y.vnode(s),s}function S(t){return t.children}function Y(t,e){this.props=t,this.context=e}function ee(t,e){if(e==null)return t.__?ee(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?ee(t):null}function Wt(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Wt(t)}}function Re(t){(!t.__d&&(t.__d=!0)&&ie.push(t)&&!be.__r++||Ze!==y.debounceRendering)&&((Ze=y.debounceRendering)||Mt)(be)}function be(){for(var t;be.__r=ie.length;)t=ie.sort(function(e,n){return e.__v.__b-n.__v.__b}),ie=[],t.some(function(e){var n,i,r,s,l,c;e.__d&&(l=(s=(n=e).__v).__e,(c=n.__P)&&(i=[],(r=z({},s)).__v=s.__v+1,$e(c,s,r,n.__n,c.ownerSVGElement!==void 0,s.__h!=null?[l]:null,i,l==null?ee(s):l,s.__h),zt(i,s),s.__e!=l&&Wt(s)))})}function Ft(t,e,n,i,r,s,l,c,u,d){var a,m,_,f,h,N,v,p=i&&i.__k||Gt,g=p.length;for(n.__k=[],a=0;a<e.length;a++)if((f=n.__k[a]=(f=e[a])==null||typeof f=="boolean"?null:typeof f=="string"||typeof f=="number"||typeof f=="bigint"?oe(null,f,null,null,f):Array.isArray(f)?oe(S,{children:f},null,null,null):f.__b>0?oe(f.type,f.props,f.key,null,f.__v):f)!=null){if(f.__=n,f.__b=n.__b+1,(_=p[a])===null||_&&f.key==_.key&&f.type===_.type)p[a]=void 0;else for(m=0;m<g;m++){if((_=p[m])&&f.key==_.key&&f.type===_.type){p[m]=void 0;break}_=null}$e(t,f,_=_||ve,r,s,l,c,u,d),h=f.__e,(m=f.ref)&&_.ref!=m&&(v||(v=[]),_.ref&&v.push(_.ref,null,f),v.push(m,f.__c||h,f)),h!=null?(N==null&&(N=h),typeof f.type=="function"&&f.__k===_.__k?f.__d=u=Ht(f,u,t):u=jt(t,f,_,p,h,u),typeof n.type=="function"&&(n.__d=u)):u&&_.__e==u&&u.parentNode!=t&&(u=ee(_))}for(n.__e=N,a=g;a--;)p[a]!=null&&(typeof n.type=="function"&&p[a].__e!=null&&p[a].__e==n.__d&&(n.__d=ee(i,a+1)),Jt(p[a],p[a]));if(v)for(a=0;a<v.length;a++)Yt(v[a],v[++a],v[++a])}function Ht(t,e,n){for(var i,r=t.__k,s=0;r&&s<r.length;s++)(i=r[s])&&(i.__=t,e=typeof i.type=="function"?Ht(i,e,n):jt(n,i,i,r,i.__e,e));return e}function J(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){J(n,e)}):e.push(t)),e}function jt(t,e,n,i,r,s){var l,c,u;if(e.__d!==void 0)l=e.__d,e.__d=void 0;else if(n==null||r!=s||r.parentNode==null)e:if(s==null||s.parentNode!==t)t.appendChild(r),l=null;else{for(c=s,u=0;(c=c.nextSibling)&&u<i.length;u+=2)if(c==r)break e;t.insertBefore(r,s),l=s}return l!==void 0?l:r.nextSibling}function Ln(t,e,n,i,r){var s;for(s in n)s==="children"||s==="key"||s in e||ke(t,s,null,n[s],i);for(s in e)r&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||n[s]===e[s]||ke(t,s,e[s],n[s],i)}function Xe(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=n==null?"":typeof n!="number"||Dn.test(e)?n:n+"px"}function ke(t,e,n,i,r){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||Xe(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||Xe(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i||t.addEventListener(e,s?tt:et,s):t.removeEventListener(e,s?tt:et,s);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n==null?"":n;break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,n):t.removeAttribute(e))}}function et(t){this.l[t.type+!1](y.event?y.event(t):t)}function tt(t){this.l[t.type+!0](y.event?y.event(t):t)}function $e(t,e,n,i,r,s,l,c,u){var d,a,m,_,f,h,N,v,p,g,P,b,C,E=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(u=n.__h,c=e.__e=n.__e,e.__h=null,s=[c]),(d=y.__b)&&d(e);try{e:if(typeof E=="function"){if(v=e.props,p=(d=E.contextType)&&i[d.__c],g=d?p?p.props.value:d.__:i,n.__c?N=(a=e.__c=n.__c).__=a.__E:("prototype"in E&&E.prototype.render?e.__c=a=new E(v,g):(e.__c=a=new Y(v,g),a.constructor=E,a.render=On),p&&p.sub(a),a.props=v,a.state||(a.state={}),a.context=g,a.__n=i,m=a.__d=!0,a.__h=[]),a.__s==null&&(a.__s=a.state),E.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=z({},a.__s)),z(a.__s,E.getDerivedStateFromProps(v,a.__s))),_=a.props,f=a.state,m)E.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(E.getDerivedStateFromProps==null&&v!==_&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(v,g),!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(v,a.__s,g)===!1||e.__v===n.__v){a.props=v,a.state=a.__s,e.__v!==n.__v&&(a.__d=!1),a.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(T){T&&(T.__=e)}),a.__h.length&&l.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(v,a.__s,g),a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(_,f,h)})}if(a.context=g,a.props=v,a.__v=e,a.__P=t,P=y.__r,b=0,"prototype"in E&&E.prototype.render)a.state=a.__s,a.__d=!1,P&&P(e),d=a.render(a.props,a.state,a.context);else do a.__d=!1,P&&P(e),d=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++b<25);a.state=a.__s,a.getChildContext!=null&&(i=z(z({},i),a.getChildContext())),m||a.getSnapshotBeforeUpdate==null||(h=a.getSnapshotBeforeUpdate(_,f)),C=d!=null&&d.type===S&&d.key==null?d.props.children:d,Ft(t,Array.isArray(C)?C:[C],e,n,i,r,s,l,c,u),a.base=e.__e,e.__h=null,a.__h.length&&l.push(a),N&&(a.__E=a.__=null),a.__e=!1}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$n(n.__e,e,n,i,r,s,l,u);(d=y.diffed)&&d(e)}catch(T){e.__v=null,(u||s!=null)&&(e.__e=c,e.__h=!!u,s[s.indexOf(c)]=null),y.__e(T,e,n)}}function zt(t,e){y.__c&&y.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(i){i.call(n)})}catch(i){y.__e(i,n.__v)}})}function $n(t,e,n,i,r,s,l,c){var u,d,a,m=n.props,_=e.props,f=e.type,h=0;if(f==="svg"&&(r=!0),s!=null){for(;h<s.length;h++)if((u=s[h])&&"setAttribute"in u==!!f&&(f?u.localName===f:u.nodeType===3)){t=u,s[h]=null;break}}if(t==null){if(f===null)return document.createTextNode(_);t=r?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,_.is&&_),s=null,c=!1}if(f===null)m===_||c&&t.data===_||(t.data=_);else{if(s=s&&ae.call(t.childNodes),d=(m=n.props||ve).dangerouslySetInnerHTML,a=_.dangerouslySetInnerHTML,!c){if(s!=null)for(m={},h=0;h<t.attributes.length;h++)m[t.attributes[h].name]=t.attributes[h].value;(a||d)&&(a&&(d&&a.__html==d.__html||a.__html===t.innerHTML)||(t.innerHTML=a&&a.__html||""))}if(Ln(t,_,m,r,c),a)e.__k=[];else if(h=e.props.children,Ft(t,Array.isArray(h)?h:[h],e,n,i,r&&f!=="foreignObject",s,l,s?s[0]:n.__k&&ee(n,0),c),s!=null)for(h=s.length;h--;)s[h]!=null&&Ut(s[h]);c||("value"in _&&(h=_.value)!==void 0&&(h!==t.value||f==="progress"&&!h||f==="option"&&h!==m.value)&&ke(t,"value",h,m.value,!1),"checked"in _&&(h=_.checked)!==void 0&&h!==t.checked&&ke(t,"checked",h,m.checked,!1))}return t}function Yt(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(i){y.__e(i,n)}}function Jt(t,e,n){var i,r;if(y.unmount&&y.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||Yt(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){y.__e(s,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&Jt(i[r],e,typeof t.type!="function");n||t.__e==null||Ut(t.__e),t.__e=t.__d=void 0}function On(t,e,n){return this.constructor(t,n)}function Qt(t,e,n){var i,r,s;y.__&&y.__(t,e),r=(i=typeof n=="function")?null:n&&n.__k||e.__k,s=[],$e(e,t=(!i&&n||e).__k=o(S,null,[t]),r||ve,ve,e.ownerSVGElement!==void 0,!i&&n?[n]:r?null:e.firstChild?ae.call(e.childNodes):null,s,!i&&n?n:r?r.__e:e.firstChild,i),zt(s,t)}function Mn(t,e,n){var i,r,s,l=z({},t.props);for(s in e)s=="key"?i=e[s]:s=="ref"?r=e[s]:l[s]=e[s];return arguments.length>2&&(l.children=arguments.length>3?ae.call(arguments,2):n),oe(t.type,l,i||t.key,r||t.ref,null)}function le(t,e){var n={__c:e="__cC"+Bt++,__:t,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,s;return this.getChildContext||(r=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&r.some(Re)},this.sub=function(l){r.push(l);var c=l.componentWillUnmount;l.componentWillUnmount=function(){r.splice(r.indexOf(l),1),c&&c.call(l)}}),i.children}};return n.Provider.__=n.Consumer.contextType=n}ae=Gt.slice,y={__e:function(t,e,n,i){for(var r,s,l;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),l=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),l=r.__d),l)return r.__E=r}catch(c){t=c}throw t}},Ot=0,Y.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=z({},this.state),typeof t=="function"&&(t=t(z({},n),this.props)),t&&z(n,t),t!=null&&this.__v&&(e&&this.__h.push(e),Re(this))},Y.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Re(this))},Y.prototype.render=S,ie=[],Mt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,be.__r=0,Bt=0;var te,O,Se,nt,se=0,Vt=[],it=y.__b,ot=y.__r,st=y.diffed,rt=y.__c,at=y.unmount;function ce(t,e){y.__h&&y.__h(O,t,se||e),se=0;var n=O.__H||(O.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function x(t){return se=1,Bn(Kt,t)}function Bn(t,e,n){var i=ce(te++,2);return i.t=t,i.__c||(i.__=[n?n(e):Kt(void 0,e),function(r){var s=i.t(i.__[0],r);i.__[0]!==s&&(i.__=[s,i.__[1]],i.__c.setState({}))}],i.__c=O),i.__}function $(t,e){var n=ce(te++,3);!y.__s&&Me(n.__H,e)&&(n.__=t,n.u=e,O.__H.__h.push(n))}function Gn(t,e){var n=ce(te++,4);!y.__s&&Me(n.__H,e)&&(n.__=t,n.u=e,O.__h.push(n))}function re(t){return se=5,Oe(function(){return{current:t}},[])}function Oe(t,e){var n=ce(te++,7);return Me(n.__H,e)?(n.o=t(),n.u=e,n.__h=t,n.o):n.__}function Q(t,e){return se=8,Oe(function(){return t},e)}function ue(t){var e=O.context[t.__c],n=ce(te++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(O)),e.props.value):t.__}function Un(){for(var t;t=Vt.shift();)if(t.__P)try{t.__H.__h.forEach(pe),t.__H.__h.forEach(Ae),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){O=null,it&&it(t)},y.__r=function(t){ot&&ot(t),te=0;var e=(O=t.__c).__H;e&&(Se===O?(e.__h=[],O.__h=[],e.__.forEach(function(n){n.o=n.u=void 0})):(e.__.forEach(function(n){n.u&&(n.__H=n.u),n.o&&(n.__=n.o),n.o=n.u=void 0}),e.__h.forEach(pe),e.__h.forEach(Ae),e.__h=[])),Se=O},y.diffed=function(t){st&&st(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(Vt.push(e)!==1&&nt===y.requestAnimationFrame||((nt=y.requestAnimationFrame)||function(n){var i,r=function(){clearTimeout(s),lt&&cancelAnimationFrame(i),setTimeout(n)},s=setTimeout(r,100);lt&&(i=requestAnimationFrame(r))})(Un)),O=null,Se=null},y.__c=function(t,e){e.some(function(n){try{n.__H&&n.__H.__.forEach(function(i){i.u&&(i.__H=i.u),i.o&&(i.__=i.o),i.o=i.u=void 0}),n.__h.forEach(pe),n.__h=n.__h.filter(function(i){return!i.__||Ae(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(i,n.__v)}}),rt&&rt(t,e)},y.unmount=function(t){at&&at(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{pe(i)}catch(r){e=r}}),e&&y.__e(e,n.__v))};var lt=typeof requestAnimationFrame=="function";function pe(t){var e=O,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),O=e}function Ae(t){var e=O;t.__c=t.__(),O=e}function Me(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}function Kt(t,e){return typeof e=="function"?e(t):e}function Wn(t,e){for(var n in e)t[n]=e[n];return t}function ct(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var i in e)if(i!=="__source"&&t[i]!==e[i])return!0;return!1}function ut(t){this.props=t}(ut.prototype=new Y).isPureReactComponent=!0,ut.prototype.shouldComponentUpdate=function(t,e){return ct(this.props,t)||ct(this.state,e)};var dt=y.__b;y.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),dt&&dt(t)};var ft=function(t,e){return t==null?null:J(J(t).map(e))},Fn={map:ft,forEach:ft,count:function(t){return t?J(t).length:0},only:function(t){var e=J(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:J},Hn=y.__e;y.__e=function(t,e,n,i){if(t.then){for(var r,s=e;s=s.__;)if((r=s.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}Hn(t,e,n,i)};var _t=y.unmount;function Te(){this.__u=0,this.t=null,this.__b=null}function qt(t){var e=t.__.__c;return e&&e.__e&&e.__e(t)}function me(){this.u=null,this.o=null}y.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),_t&&_t(t)},(Te.prototype=new Y).__c=function(t,e){var n=e.__c,i=this;i.t==null&&(i.t=[]),i.t.push(n);var r=qt(i.__v),s=!1,l=function(){s||(s=!0,n.__R=null,r?r(c):c())};n.__R=l;var c=function(){if(!--i.__u){if(i.state.__e){var d=i.state.__e;i.__v.__k[0]=function m(_,f,h){return _&&(_.__v=null,_.__k=_.__k&&_.__k.map(function(N){return m(N,f,h)}),_.__c&&_.__c.__P===f&&(_.__e&&h.insertBefore(_.__e,_.__d),_.__c.__e=!0,_.__c.__P=h)),_}(d,d.__c.__P,d.__c.__O)}var a;for(i.setState({__e:i.__b=null});a=i.t.pop();)a.forceUpdate()}},u=e.__h===!0;i.__u++||u||i.setState({__e:i.__b=i.__v.__k[0]}),t.then(l,l)},Te.prototype.componentWillUnmount=function(){this.t=[]},Te.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=function s(l,c,u){return l&&(l.__c&&l.__c.__H&&(l.__c.__H.__.forEach(function(d){typeof d.__c=="function"&&d.__c()}),l.__c.__H=null),(l=Wn({},l)).__c!=null&&(l.__c.__P===u&&(l.__c.__P=c),l.__c=null),l.__k=l.__k&&l.__k.map(function(d){return s(d,c,u)})),l}(this.__b,n,i.__O=i.__P)}this.__b=null}var r=e.__e&&o(S,null,t.fallback);return r&&(r.__h=null),[o(S,null,e.__e?null:t.children),r]};var ht=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};(me.prototype=new Y).__e=function(t){var e=this,n=qt(e.__v),i=e.o.get(t);return i[0]++,function(r){var s=function(){e.props.revealOrder?(i.push(r),ht(e,t,i)):r()};n?n(s):s()}},me.prototype.render=function(t){this.u=null,this.o=new Map;var e=J(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},me.prototype.componentDidUpdate=me.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){ht(t,n,e)})};var Zt=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,jn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,zn=typeof document!="undefined",Yn=function(t){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};function Jn(t,e,n){return e.__k==null&&(e.textContent=""),Qt(t,e),typeof n=="function"&&n(),t?t.__c:null}Y.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Y.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var mt=y.event;function Qn(){}function Vn(){return this.cancelBubble}function Kn(){return this.defaultPrevented}y.event=function(t){return mt&&(t=mt(t)),t.persist=Qn,t.isPropagationStopped=Vn,t.isDefaultPrevented=Kn,t.nativeEvent=t};var pt={configurable:!0,get:function(){return this.class}},gt=y.vnode;y.vnode=function(t){var e=t.type,n=t.props,i=n;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var s in i={},n){var l=n[s];zn&&s==="children"&&e==="noscript"||s==="value"&&"defaultValue"in n&&l==null||(s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&l===!0?l="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!Yn(n.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():r&&jn.test(s)?s=s.replace(/[A-Z0-9]/,"-$&").toLowerCase():l===null&&(l=void 0),/^oninput/i.test(s)&&(s=s.toLowerCase(),i[s]&&(s="oninputCapture")),i[s]=l)}e=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=J(n.children).forEach(function(c){c.props.selected=i.value.indexOf(c.props.value)!=-1})),e=="select"&&i.defaultValue!=null&&(i.value=J(n.children).forEach(function(c){c.props.selected=i.multiple?i.defaultValue.indexOf(c.props.value)!=-1:i.defaultValue==c.props.value})),t.props=i,n.class!=n.className&&(pt.enumerable="className"in n,n.className!=null&&(i.class=n.className),Object.defineProperty(i,"className",pt))}t.$$typeof=Zt,gt&&gt(t)};var yt=y.__r;y.__r=function(t){yt&&yt(t),t.__c};function Xt(t){return!!t&&t.$$typeof===Zt}function qn(t){return Xt(t)?Mn.apply(null,arguments):t}function Zn(t){return!!t.__k&&(Qt(null,t),!0)}function Xn(t){return{render(e){Jn(e,t)},unmount(){Zn(t)}}}let en="America/New_York";function ei(t){en=t}function G(t){t=new Date(t||Date.now());const e={},n="2-digit";return Intl.DateTimeFormat("en-US",{timeZone:en,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n}).formatToParts(t).forEach(i=>e[i.type]=i.value),{date:`${e.year}-${e.month}-${e.day}`,time:`${e.hour}:${e.minute}:${e.second}`}}function X(t){const e=t.split(":").slice(0,2).map(Number),n=e[0]>=12?"PM":"AM";return e[0]=e[0]%12||12,e.map(i=>String(i).padStart(2,"0")).join(":").replace(/^0/,"")+" "+n}function vt(t){const[e,n]=t.slice(0,19).split("T");return{date:e,time:n}}function tn({start:t,end:e}){const n=bt(t,"Park Open"),i=bt(e,"Park Close");return`${n} - ${i}`}function bt({date:t,time:e},n){const i=G();return t&&t!==i.date?new Date(t+"T00:00").toLocaleString("en-US",{month:"short",day:"numeric",year:t.split("-")[0]===i.date.split("-")[0]?void 0:"numeric"}):e?X(e):n}class ti extends Error{constructor(e){super(`Auth data "${e}" missing or expired`),this.name="ReauthNeeded"}}class ni{constructor(e,n=localStorage){this.storageKey=e,this.storage=n}getData(){try{const e=this.storage.getItem(this.storageKey);if(e){const{swid:n,accessToken:i,expires:r}=JSON.parse(e),s=G(new Date(r)),l=G();if(s.date>l.date||s.date===l.date&&s.time>l.time&&s.time>="17")return{swid:n,accessToken:i}}}catch(e){console.error(e)}throw new ti(this.storageKey)}setData(e){this.storage.setItem(this.storageKey,JSON.stringify(e))}deleteData(){this.storage.removeItem(this.storageKey)}}const ii="modulepreload",kt={},oi="/bg1/",wt=function(e,n){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=`${oi}${i}`,i in kt)return;kt[i]=!0;const r=i.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const l=document.createElement("link");if(l.rel=r?"stylesheet":ii,r||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),r)return new Promise((c,u)=>{l.addEventListener("load",c),l.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())},si=8e3;async function we(t,e={}){const d=e,{params:n,data:i,timeout:r=si}=d;e=U(d,["params","data","timeout"]),e.referrer||(e.referrer=""),e.credentials||(e.credentials="omit"),e.cache||(e.cache="no-store"),e.headers=w({"User-Agent":"Mozilla/5.0"},e.headers||{}),n&&Object.keys(n).length>0&&(t+="?"+Object.entries(n).filter(([,a])=>a!=="").map(a=>a.map(encodeURIComponent).join("=")).join("&")),i&&(e.method||(e.method="POST"),e.headers=L(w({},e.headers),{"Content-Type":"application/json"}),e.body=JSON.stringify(i));const l=new AbortController;e.signal=l.signal;const c=setTimeout(()=>l.abort(),r);let u;try{u=await fetch(t,e)}catch(a){return console.error(a),{status:0,data:null}}finally{clearTimeout(c)}return{status:u.status,data:(u.headers.get("Content-Type")||"").startsWith("application/json")?await u.json():{}}}const ri={48199:"Mr-Incredible",48200:"Mrs-Incredible",261227:"Nemo",339625:"Russell",339626:"Carl",364907:"Jack-Skellington",431014:"Princess-Tiana",431065:"Darth_Vader",15549505:"Rapunzel",15655408:"Default_SignedIn",15675686:"Crush",15831168:"Wall-E",16453979:"Merida",16726412:"Stormtrooper",16818199:"Violet",16869301:"Jack-Jack",17345357:"R2-D2",17345359:"C-3PO",17532220:"Bruce",17532224:"Green-Alien",17532227:"Kermit",17532228:"Sorcerer-Mickey",17577168:"Elsa",17577169:"Anna",17813977:"Olaf",17888784:"Yoda",18101167:"Captain-Mickey",18368743:"-Nick",18368747:"-Judy",18393706:"-Flash",18403761:"kion",18405224:"-Moana",18405236:"-Elena",19633995:"50th_Mickey",19633996:"50th_Minnie",90003819:"Alice",90003846:"Ariel",90003898:"Belle",90003967:"Buzz",90003976:"Captain-Hook",90004004:"Chesire-Cat",90004017:"Cinderella",90004068:"Daisy",90004076:"Dash",90004104:"Donald",90004228:"Goofy",90004260:"Hamm",90004328:"Princess-Jasmine",90004340:"Jiminy",90004395:"Lady",90004482:"Mickey-Mouse",90004486:"Minnie",90004537:"Mulan",90004605:"Peter-Pan",90004625:"Pluto",90004626:"Pocahontas",90004642:"Princess-Aurora",90004682:"Rex",90004772:"Snow-White",90004778:"Sparky",90004846:"TinkerBell",90004860:"Tramp",90004939:"Zero"},Be="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/90/90/75/dam/",ai=Be+"wdpro-assets/avatars/180x180/RetAvatar_180x180_",li=Be+"wdpro-assets/avatars/180x180/RetAvatar-180x180",ci=Be+"disney-world/50th-anniversary/avatars/RetAvatar_180x180_",ui={"-":li,5:ci};function Ce(t){const e=ri[t||""];if(!!e)return(ui[e[0]]||ai)+e+".png"}function di(t){switch(t){case"./data/dlr.ts":return wt(()=>import("./dlr.js"),[]);case"./data/wdw.ts":return wt(()=>import("./wdw.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const De={"https://disneyworld.disney.go.com":"WDW","https://disneyland.disney.go.com":"DLR"},fi={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"};function _i(t){return t in De}class nn extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}const Z=t=>t.split(";")[0];class Ge{constructor(e){this.maxPartySize=12,this.onUnauthorized=()=>{},this.guestCache=new Map,this.listeners={bookingChange:new Set},this._primaryGuestId="",this.convertGuest=n=>{const a=n,{id:i,firstName:r,lastName:s,characterId:l}=a,c=U(a,["id","firstName","lastName","characterId"]),u=`${r} ${s}`.trim();if(!this.guestCache.has(i))switch(n.ineligibleReason){case"INVALID_PARK_ADMISSION":case"PARK_RESERVATION_NEEDED":case"GENIE_PLUS_NEEDED":n.primary&&this.cacheGuest(i,u,l);break;default:this.cacheGuest(i,u,l)}const d=Ce(l);return L(w({},c),{id:i,name:u,avatarImageUrl:d})},this.origin=e.origin,this.authStore=e.authStore,this.data=e.data,this.parkMap=Object.fromEntries(this.parks.map(n=>[n.id,n])),this.bookingStack=new hi}static async load(e){const n=De[e.origin].toLowerCase(),i=(await di(`./data/${n}.ts`)).default;return new Ge(L(w({},e),{data:i}))}get resort(){return De[this.origin]}get parks(){return this.data.parks}async experiences(e){var c,u;await this.primaryGuestId();const n=await this.request({path:`/tipboard-vas/api/v1/parks/${encodeURIComponent(e.id)}/experiences`,params:{eligibilityGuestIds:[...this.guestCache.keys()].join(",")}}),i=(u=(((c=n.eligibility)==null?void 0:c.flexEligibilityWindows)||[]).sort((d,a)=>d.time.time.localeCompare(a.time.time))[0])==null?void 0:u.time.time,r=this.nextDropTime(e),s=(this.data.pdts[e.id]||[]).indexOf(r||""),l=1<<s;return{plus:n.availableExperiences.filter(d=>!!d.flex&&d.id in this.data.experiences).map(d=>{const f=this.data.experiences[d.id],{pdtMask:a=0}=f,m=U(f,["pdtMask"]);return L(w(w({},d),m),{park:e,drop:!!(l&a)})}),nextBookTime:i}}async guests(e){e||(e={id:"0",park:{id:"0"}});const n=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:e.id,parkId:e.park.id}});this._primaryGuestId=n.primaryGuestId;const i=n.ineligibleGuests.map(this.convertGuest),r=n.guests.map(this.convertGuest).filter(s=>!("ineligibleReason"in s)||i.push(s)&&!1);return i.sort((s,l)=>{const c=+!s.primary-+!l.primary||s.name.localeCompare(l.name);return s.eligibleAfter||l.eligibleAfter?(s.eligibleAfter||"99").localeCompare(l.eligibleAfter||"99")||c:s.ineligibleReason===l.ineligibleReason?c:s.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?-1:l.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?1:c}),{eligible:r,ineligible:i}}async primaryGuestId(e){return this._primaryGuestId||await this.guests(e),this._primaryGuestId}async offer({experience:e,guests:n}){const i=await this.request({path:"/ea-vas/api/v2/products/flex/offers",method:"POST",data:{guestIds:n.map(a=>a.id),ineligibleGuests:[],primaryGuestId:await this.primaryGuestId(e),parkId:e.park.id,experienceId:e.id,selectedTime:e.flex.nextAvailableTime},userId:!1}),{id:r,date:s,startTime:l,endTime:c,status:u,changeStatus:d}=i.offer;return{id:r,start:{date:s,time:l},end:{date:s,time:c},active:u==="ACTIVE",changed:d!=="NONE",guests:{eligible:(i.eligibleGuests||[]).map(this.convertGuest),ineligible:(i.ineligibleGuests||[]).map(this.convertGuest)}}}async cancelOffer(e){await this.request({path:`/ea-vas/api/v1/offers/${encodeURIComponent(e.id)}`,method:"DELETE",params:{productType:"FLEX"},userId:!1})}async book(e){const{singleExperienceDetails:{experienceId:n,parkId:i},entitlements:r,startDateTime:s,endDateTime:l}=await this.request({path:"/ea-vas/api/v1/products/flex/bookings",method:"POST",userId:!1,data:{offerId:e.id},key:"booking"});return this.bookings(),L(w({},this.getExperience(n,i)),{start:vt(s),end:vt(l),cancellable:!0,guests:r.map(c=>{const u=this.guestCache.get(c.guestId);return{id:c.guestId,name:(u==null?void 0:u.name)||"",avatarImageUrl:Ce(u==null?void 0:u.characterId),entitlementId:c.id}})})}async cancelBooking(e){const i=e.map(r=>r.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${i}`,method:"DELETE",userId:!1})}async bookings(){const{swid:e}=this.authStore.getData(),n=new Date(Date.now()),i=fi[this.resort],{items:r=[],assets:s={},profiles:l={}}=await this.request({path:`/plan/${i}/api/v1/itinerary-items/${e}`,params:{destination:this.resort,fields:"items,profiles,assets","item-types":"FASTPASS","guest-locators":e+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":G(n).date,"end-date":G(new Date(n.getTime()).setDate(n.getDate()+1)).date,"show-friends":"false"},userId:!1}),c=G(new Date(n.getTime()).setMinutes(n.getMinutes()-15)),u=new Set(["FLEX","OTHER"]),d=r.filter(a=>a.type==="FASTPASS"&&u.has(a.kind)).filter(a=>(a.displayEndDate||"9999")>c.date||a.displayEndDate===c.date&&(a.displayEndTime||"24")>=c.time).map(a=>{const m=Z(a.facility),_=s[a.facility];let f=L(w({},this.getExperience(m,Z(_.location),_.name)),{start:{date:a.displayStartDate,time:a.displayStartTime},end:{date:a.displayEndDate,time:a.displayEndTime},cancellable:a.cancellable,guests:a.guests.map(h=>{const{name:N,avatarId:v}=l[h.id],p=Z(h.id);return w({id:p,entitlementId:h.entitlementId,name:`${N.firstName} ${N.lastName}`.trim(),avatarImageUrl:Ce(v)},h.redemptionsRemaining!==void 0&&{redemptions:h.redemptionsRemaining})})});if(a.multipleExperiences){const h=a.assets.find(N=>N.original);h&&(f=w(w({},f),this.getExperience(Z(h.content),Z(s[h.content].location)))),f.choices=a.assets.filter(N=>!N.excluded&&!N.original).map(({content:N})=>{const v=s[N];return this.getExperience(Z(N),Z(v.location),v.name)}).sort((N,v)=>N.name.localeCompare(v.name))}return f}).sort((a,m)=>((a.start.date||"0000-00-00")+(a.start.time||"")).localeCompare((m.start.date||"0000-00-00")+(m.start.time||"")));return this.bookingStack.update(d),d}isRebookable(e){return this.bookingStack.isRebookable(e)}nextDropTime(e){var i,r;const n=G().time.slice(0,5);return(r=(i=this.data.pdts)==null?void 0:i[e.id])==null?void 0:r.find(s=>s>=n)}logOut(){this.authStore.deleteData(),this.onUnauthorized()}getExperience(e,n,i){var r;return{id:e,name:((r=this.data.experiences[e])==null?void 0:r.name)||i,park:this.parkMap[n]}}cacheGuest(e,n,i){this.guestCache.set(e,{name:n,characterId:i})}async request(e){var u;const{swid:n,accessToken:i}=this.authStore.getData(),r=this.origin+e.path,s=w({},e.params);((u=e.userId)==null||u)&&(s.userId=n);const{status:l,data:c}=await we(r,{method:e.method||"GET",params:s,data:e.data,headers:{Authorization:`BEARER ${i}`,"x-user-id":n}});if(l===401)setTimeout(()=>this.logOut());else{const{key:d}=e;if(String(l)[0]==="2"&&(!d||c[d]))return d?c[d]:c}throw new nn({status:l,data:c})}}const xt="bg1.genie.bookings";class hi{constructor(e=!0){if(this.entitlementIds=[],this.mostRecent=new Map,!e)return;const{entitlementIds:n=[],mostRecent:i={}}=JSON.parse(localStorage.getItem(xt)||"{}");this.entitlementIds=n,this.mostRecent=new Map(Object.entries(i))}isRebookable(e){return e.guests.every(n=>this.mostRecent.get(n.id)===n.entitlementId)}update(e){const n=new Map,i=new Set(this.entitlementIds);this.entitlementIds=e.filter(({cancellable:r})=>r).map(r=>r.guests.map(({id:s,entitlementId:l})=>(this.entitlementIds.push(l),i.has(l)||n.set(s,n.has(s)?"":l),l))).flat(1),this.mostRecent=new Map([...this.mostRecent,...n]),n.size>0&&localStorage.setItem(xt,JSON.stringify({entitlementIds:this.entitlementIds,mostRecent:Object.fromEntries(this.mostRecent)}))}}const on={"https://vqguest-svc-wdw.wdprapps.disney.com":"WDW","https://vqguest-svc.wdprapps.disney.com":"DLR"};function mi(t){return t in on}const pi=t=>t.sort((e,n)=>+!e.isPrimaryGuest-+!n.isPrimaryGuest||+!e.isPreselected-+!n.isPreselected||e.name.localeCompare(n.name));class ge extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}class gi{constructor(e){this.onUnauthorized=()=>{},this.origin=e.origin,this.authStore=e.authStore}get resort(){return on[this.origin]}url(e){return`${this.origin}/application/v1/guest/${e}`}async getQueues(){return(await we(this.url("getQueues"))).data.queues.map(i=>{var r=i,{queueId:e}=r,n=U(r,["queueId"]);return L(w({},n),{id:e})})}async getQueue(e){const n=(await this.getQueues()).find(i=>i.id===e.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(e){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:e.id}});return pi(n.guests.map(c=>{var u=c,{guestId:i,firstName:r,lastName:s}=u,l=U(u,["guestId","firstName","lastName"]);return L(w({},l),{id:i,name:`${r} ${s}`.trim()})}))}async joinQueue(e,n){const i=n.map(l=>l.id),{status:r,data:s}=await this.post({resource:"joinQueue",data:{queueId:e.id,guestIds:i}});if(s.responseStatus==="OK"){const l=s.positions.find(c=>c.queueId===e.id&&c.guestIds.length>0&&i.some(u=>c.guestIds.includes(u)));if(!l)throw new ge({status:r,data:s});return{boardingGroup:l.boardingGroup,conflicts:{},closed:!1}}else if(s.responseStatus==="INVALID_GUEST"||s.responseStatus==="CLOSED_QUEUE"){const l=s.responseStatus==="CLOSED_QUEUE",c=new Set,u={};for(const m of s.conflicts)for(const _ of m.guestIds){const f=n.find(h=>h.id===_);!f||(u[f.id]=m.conflictType,c.add(_))}const d=n.filter(m=>!c.has(m.id));if(l||d.length===0)return{boardingGroup:null,conflicts:u,closed:l};const a=await this.joinQueue(e,d);return a.conflicts=w(w({},u),a.conflicts),a}else throw new ge({status:r,data:s})}logOut(){this.authStore.deleteData(),this.onUnauthorized()}async post(e){const{status:n,data:i}=await we(this.url(e.resource),{method:"POST",headers:{Authorization:`BEARER ${this.authStore.getData().accessToken}`},data:e.data});if(n===401&&setTimeout(()=>this.logOut()),!n||n===401||n>=500)throw new ge({status:n,data:i});return{status:n,data:i}}}const sn=le({resort:"WDW",onUnauthorized:()=>{},logOut:()=>null}),yi=sn.Provider,xe=()=>ue(sn),Ne={bg:"bg-blue-500",text:"text-blue-500"},rn=le(Ne),vi=rn.Provider,q=()=>ue(rn),bi={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function B(t){const l=t,{type:e,className:n}=l,i=U(l,["type","className"]);let r=`${bi[e||"normal"]} ${n||""}`;const{bg:s}=q();return r.includes(" bg-")||(r+=` ${s} text-white`),o("button",w({className:`${r} inline-flex items-center justify-center min-w-[36px] rounded-lg px-2 font-semibold disabled:opacity-50`},i))}function F({onClick:t,disabled:e,children:n}){return o("div",{className:"mb-20"},o("div",{className:"fixed bottom-0 left-0 w-full px-5 pb-5 text-center"},o(B,{className:"max-w-2xl mx-auto shadow-[0px_4px_8px_-1px_#0005]",type:"full",onClick:t,disabled:e},n)))}function ki({title:t,children:e}){const{bg:n,text:i}=q();function r(s){return Xt(s)?s.type===S?Fn.map(s.props.children,r):qn(s,{className:`bg-[#ffffffe6] ${i} ${s.props.className||""}`}):s}return o("div",{className:`flex justify-end gap-x-2 gap-y-1 min-h-[52px] px-3 py-2 text-lg text-white ${n}`},o("h1",{className:"flex-1 self-center py-0.5 text-xl font-semibold overflow-hidden whitespace-nowrap"},t),r(e))}function de(t){const s=t,{children:e,className:n}=s,i=U(s,["children","className"]),r=w({outer:"",inner:""},typeof n=="string"?{inner:n}:n);return r.outer.match(/\bz-/)||(r.outer+=" z-10"),o("div",w({className:`${r.outer} fixed inset-0`},i),o("div",{className:`${r.inner} max-w-2xl min-h-full mx-auto`},e))}function H(c){var u=c,{heading:t,buttons:e,className:n,theme:i,containerRef:r,children:s}=u,l=U(u,["heading","buttons","className","theme","containerRef","children"]);return o(vi,{value:i||Ne},o(de,w({className:{outer:`bg-white text-black text-base ${n||""}`,inner:"flex flex-col max-w-2xl h-full"}},l),o(ki,{title:t},e),o("div",{ref:r,className:"flex-1 overflow-auto px-3 pb-3"},s)))}const wi="bg1.disclaimer.accepted",xi={bg:"bg-red-600",text:"text-red-600"};function Ni(){const t=localStorage,e=wi,[n,i]=x(!!t.getItem(e));return $(()=>{n&&t.setItem(e,"1")},[n,t,e]),n?null:o(Ei,{onAccept:()=>i(!0)})}function Ei({onAccept:t}){return o(H,{heading:"Warning!",theme:xi},o("p",null,'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'),o(F,{onClick:t},"Accept"))}const Si="17e2767256f";function Ti(t){return"deferredUuid"in t&&t.deferredUuid!==void 0}class Ci{constructor(e,n,i,r=!1){this.iframe=e,this.resort=i,this.logging=r,this.handlers={},this.handshakeAcked=!1,this.onMessage=s=>{if(s.source!==this.iframe.contentWindow||s.data==="inner.loaded")return;const l=JSON.parse(s.data);this.logging&&console.log("Message:",l);const c=l.type==="message"?l.eventName:l.type,u=this.handlers[c],d=u?u("data"in l?l.data:null):void 0;Ti(l)&&this.send({type:"deferred",action:"resolve",deferredUuid:l.deferredUuid,data:d!=null?d:{}})},this.on("handshake",()=>{this.handshakeAcked||(this.handshakeAcked=!0,this.send({type:"handshakeAck"}),this.logging&&this.sendMessage("setLogLevel",{level:"log"}),this.sendMessage("workflow.execute",{name:"login"}))}),this.on("lightbox.hide",()=>this.open()),this.on("session.dateOfBirth.read",()=>this.open()),this.on("session.loggedin",({token:s})=>{n({swid:s.swid,accessToken:s.access_token,expires:new Date(s.exp)})})}open(){addEventListener("message",this.onMessage),this.iframe.src=this.authPageUrl,this.handshakeAcked=!1}close(){removeEventListener("message",this.onMessage)}on(e,n){this.handlers[e]=n}sendMessage(e,n){this.send({type:"message",eventName:e,data:n})}send(e){var n;(n=this.iframe.contentWindow)==null||n.postMessage(JSON.stringify(L(w({},e),{name:"lightbox-client-window"})),this.authPageUrl)}get authPageUrl(){return`https://cdn.registerdisney.go.com/v2/TPR-${this.resort}-LBSDK.IOS-PROD/en-US?include=l10n,config,html,js&buildId=${Si}`}}function Ii({resort:t,onLogin:e}){const n=re(null);return $(()=>{if(!n.current)return;const i=new Ci(n.current,e,t);return i.open(),()=>i.close()},[t,e,n]),o("iframe",{title:"Disney Login Form",ref:n,className:"fixed top-0 left-0 w-full h-full border-0"})}function Pi({authStore:t,children:e}){const[n,i]=x("Blank"),r=Ni(),s=xe();$(()=>{s.onUnauthorized=()=>i("LoginForm")},[s]),$(()=>{function c(){if(!(document.hidden||n==="LoginForm"))try{t.getData(),i("Client")}catch{return i("LoginForm")}}return c(),document.addEventListener("visibilitychange",c),()=>{document.removeEventListener("visibilitychange",c)}},[t,n]);const l={Blank:o("div",null),LoginForm:o(Ii,{resort:s.resort,onLogin:c=>{t.setData(c),i("Client")}}),Client:e};return o(S,null,r||l[n])}const ne=xe,an=le(void 0),Ri=an.Provider,Ai=()=>ue(an),ln=le({current:null,begin:()=>null,end:()=>null}),Di=ln.Provider,fe=()=>ue(ln);async function Li(t={}){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(i=>{e(i)},i=>{n(i)},t)})}const $i={maximumAge:15e3,timeout:2e3};function Oi(t){const[e,n]=x(),i=Q(()=>{t(async()=>{try{const{coords:r}=await Li($i);n([r.latitude,r.longitude])}catch{n(void 0)}})},[t]);return[e,i]}const Mi=3e3,Bi={alert:"bg-yellow-200",error:"bg-red-200"};function Ee(){const[,t]=x(0),[e,n]=x(""),[i,r]=x("alert"),s=Q((c,u)=>{n(c),r(u||"alert"),t(d=>(clearTimeout(d),c?self.setTimeout(()=>{n("")},Mi):d))},[]);return[o(Gi,{message:e,type:i}),s]}function Gi({message:t,type:e}){return t?o("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${Bi[e]} text-gray-800`},t):null}function _e({children:t,className:e,title:n}){return e||(e=""),e.match(/\bw-\S+\s*/)||(e+=" w-4"),e.match(/\bh-\S+\s*/)||(e+=" h-auto"),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:e,role:"img"},n&&o("title",null,n),t)}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ue({className:t}){return o(_e,{className:t},o("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"}))}async function cn(t){return new Promise(e=>{setTimeout(e,t)})}function Ui(){const[t,e]=x(0),n=Q(async(r,s=500)=>{e(c=>c+1);const l=cn(s);try{await r()}finally{await l,e(c=>c-1)}},[]);return[t>0?o(Wi,null):null,n]}function Wi(){const{bg:t}=q();return o(de,{className:"flex items-center bg-white bg-opacity-75"},o("div",{className:"w-[50px] mx-auto"},o("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${t}`},o(Ue,{className:"animate-spin w-full text-white"}))))}function We(){const[t,e]=Ui(),n=!!t,[i,r]=Ee();return{loadData:Q(async(c,u)=>{const d=w({error:"Unknown error occurred",request:"Network request failed"},u);r("");let a=()=>null;const m=new Promise(f=>{a=()=>f(null)});async function _(...f){await m,r(...f)}await e(async()=>{try{await c(_)}catch(f){if(f instanceof nn){const{status:h}=f.response;_(h in d?d[h]:d.request,"error")}else console.error(f),_(d.error,"error")}}),a()},[e,r]),loaderElem:o(S,null,i,t),isLoading:n}}/**
 * Arrow down icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Fi(t){return o(_e,w({},t),o("path",{d:"M8 15.5l7.5-7.5h-4.5v-8h-6v8h-4.5z"}))}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function un(t){return o(_e,w({},t),o("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"}))}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Hi(t){return o(_e,w({},t),o("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"}))}function dn(){const t=xe();return o(B,{type:"small",onClick:()=>t.logOut()},"Log Out")}function fn({heading:t,onClose:e,children:n}){return o(de,{className:{outer:"bg-black bg-opacity-75",inner:"p-2 flex items-center justify-center h-full"},onClick:e},o("div",{className:"flex flex-col max-h-[90%] rounded-lg px-3 py-4 bg-white",onClick:i=>i.stopPropagation()},o("h2",{className:"mt-0"},t),o("div",{className:"flex-1 overflow-auto"},n),o("div",{className:"pt-4"},o(B,{type:"full",onClick:e},"Close"))))}const ji="_SELECT_RADIO_BUTTON_";function Nt(t){const v=t,{options:e,value:n,onChange:i}=v,r=U(v,["options","value","onChange"]),[s,l]=x(!1),[c,u]=x(0),d=re(null),a=re(null);Gn(()=>{var C;if((C=e[0])!=null&&C.icon)return;const p=d.current,g=p==null?void 0:p.firstChild;if(!g)return;const P=g.nodeValue;if(!P)return;let b=0;for(const E of e)g.nodeValue=E.text,b=Math.max(p.offsetWidth,b);g.nodeValue=P,u(b)},[e]);const m=()=>{var p;return(p=a.current)==null?void 0:p.querySelector("input:checked")};$(()=>{var g;if(!s)return;(g=m())==null||g.focus();const p=P=>{var b;(b=a.current)!=null&&b.contains(P.target)||l(!1)};return addEventListener("focusin",p),()=>removeEventListener("focusin",p)},[s]);const _=()=>{const p=m();p&&i(p.value),l(!1)},{icon:f,text:h}=e.find(p=>p.value===n)||e[0];let N=!1;return o(S,null,o(B,L(w({},r),{onClick:()=>l(!0)}),f||o("span",{style:{minWidth:`${c}px`},ref:d},h),o(_e,{className:"w-2.5 ml-2"},o("path",{d:"m6.8273 12.401-5.6333-7.7812a1.0212 1.0212 117.05 0 1 0.82716-1.62l11.958-2e-7a1.0212 1.0212 62.952 0 1 0.82714 1.62l-1.6438 2.2705a79984 79984 125.9 0 0-2.3456 3.2401l-1.6437 2.2706a1.4479 1.4479 180 0 1-2.3456 4.4e-5z"}))),s&&o(de,{className:{outer:"bg-black bg-opacity-75",inner:"flex items-center justify-center h-full"},onClick:p=>{var P;const g=p.target;if(!((P=a.current)!=null&&P.contains(g)))return l(!1);if(g.tagName==="INPUT"&&!N)return _();N=!1},onKeyDown:({key:p})=>{["Enter"," "].includes(p)?_():p.startsWith("Arrow")&&(N=!0)},"data-testid":"select-shade"},o("ul",{className:"overflow-auto min-w-[50%] max-h-[90%] rounded-lg bg-white text-black",ref:a},e.map(p=>o("li",{className:"border-t-2 first:border-0 border-gray-300",key:p.value},o("label",{className:"flex flex-row items-center px-4 py-3"},o("input",{type:"radio",name:ji,defaultChecked:p.value===n,value:p.value,className:"w-4 h-4 mr-2.5"})," ",p.icon&&o("span",{"aria-hidden":"true",className:"mr-2.5"},p.icon)," ",p.text))))))}const _n=le({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),zi=_n.Provider,Fe=()=>ue(_n),Yi="https://bg1.joelface.com/ping",Et="bg1.ping.date";async function hn(){const{date:t}=G();if(localStorage.getItem(Et)===t)return;const{status:n}=await we(Yi,{method:"POST"});n===204&&localStorage.setItem(Et,t)}function W({guests:t,selectable:e,conflicts:n}){return t.length===0?null:o("ul",{className:"mt-2"},t.map(i=>{var r;return o("li",{key:i.id,className:"px-3 py-1"},o("label",{className:"flex items-center"},e&&o("input",{type:"checkbox",checked:e.isSelected(i),onChange:()=>e.onToggle(i),className:"mr-3"}),o("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white"},i.avatarImageUrl?o("img",{src:i.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):o("span",{"aria-hidden":"true"},i.name[0])),o("span",{className:"leading-tight"},i.name,o("br",null),(n==null?void 0:n[i.id])&&o("span",{className:"text-xs font-semibold text-red-700 uppercase"},(r=n[i.id])==null?void 0:r.replace(/_/g," ")))))}))}function He(t){return o("div",{className:"mt-4 text-lg"},"Arrive by:"," ",o("span",{className:"ml-0.5 font-semibold"},tn(t)))}function Ji({booking:t,onClose:e}){const n=ne(),[i,r]=x(new Set),{loadData:s,loaderElem:l}=We(),{guests:c}=t,u=i.size===0,d=i.size===c.length;function a(){s(async()=>{u||await n.cancelBooking([...i]),e(c.filter(f=>!i.has(f)))})}const{name:m,park:_}=t;return o(H,{heading:"Your Lightning Lane",theme:_.theme},o("h2",null,m),o("div",null,_.name),o(He,w({},t)),o("div",{className:"ml-3"},o("label",{className:"flex items-center py-4"},o("input",{type:"checkbox",checked:d,onChange:()=>r(new Set(d?[]:c))}),o("span",{className:"ml-3"},"Select All"))),u?null:o("div",{className:"mb-4"},o("h3",null,"Cancel These Guests"),o(W,{guests:c.filter(f=>i.has(f)),selectable:{isSelected:()=>!0,onToggle:f=>{const h=new Set(i);h.delete(f),r(h)}}})),d?null:o("div",null,o("h3",null,"Select Guests to Cancel"),o(W,{guests:c.filter(f=>!i.has(f)),selectable:{isSelected:()=>!1,onToggle:f=>r(new Set(i).add(f))}})),o(F,{onClick:a},u?"Back":"Cancel "+(d?"Reservation":"Guests")),l)}function mn({booking:t,onClose:e,isRebookable:n,isNew:i}){var p;const r=ne(),{name:s,park:l,choices:c}=t,u=Ai()||l,d=fe(),[a,m]=x(t.guests),[_,f]=x(!1);if(_)return o(Ji,{booking:L(w({},t),{guests:a}),onClose:g=>{f(!1),g.length>0?m(g):e(g)}});const h=new Map([[u,[]],...r.parks.map(g=>[g,[]])]);for(const g of c||[])(p=h.get(g.park))==null||p.push(g);const N=[...h.keys()],v=(c?N.length===1?N[0]:{theme:Ne}:l).theme;return o(H,{heading:"Your Lightning Lane",theme:v,buttons:n&&o(B,{onClick:()=>d.begin(t)},"Rebook")},c?o("h2",null,"Multiple Experiences"):o(S,null,o("h2",null,s),o("div",null,l.name)),o(He,w({},t)),c&&o(S,null,o("p",null,o("b",null,s)," was temporarily unavailable during your return time. You may redeem this Lightning Lane at one of these replacement experiences:"),[...h].filter(([,g])=>g.length>0).map(([g,P=[]])=>o("div",{key:g.id,className:`mt-4 rounded ${g.theme.bg}`},o("h3",{className:"mt-0 p-1 text-white text-center"},g.name),o("ul",{className:"list-disc py-2 pl-8 bg-white bg-opacity-90"},P.map(b=>o("li",{key:b.id},b.name)))))),o("div",{className:"flex mt-4"},o("h3",{className:"inline mt-0"},"Your Party"),t.cancellable&&o(B,{type:"small",onClick:()=>f(!0),className:"ml-3"},"Cancel")),o(W,{guests:a,conflicts:Object.fromEntries(a.filter(g=>g.redemptions!==void 0).map(g=>[g.id,`Redemptions left: ${g.redemptions}`]))}),o(F,{onClick:()=>e(a)},i?"Done":"Back"))}function pn({children:t}){return o("p",{className:"border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100"},t)}function gn(){const{ineligible:t}=Fe();return o(W,{guests:t,conflicts:Object.fromEntries(t.map(e=>[e.id,e.eligibleAfter?`TOO EARLY (${X(e.eligibleAfter)})`:e.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function je({buttonText:t,onSubmit:e}){const{eligible:n,ineligible:i,selected:r,setSelected:s}=Fe(),[l,c]=x(),[u,d]=Ee(),{maxPartySize:a}=ne();return l?o(S,null,o("h3",null,"Choose Your Party"),o(W,{guests:n,selectable:{isSelected:_=>l.has(_),onToggle:_=>c(f=>{d(""),f=new Set(f);const h=f.has(_)?"delete":"add";return h==="add"&&f.size>=a?d(`Maximum party size: ${a}`):f[h](_),f})}}),i.length>0&&o(S,null,o("h3",null,"Ineligible Guests"),o(gn,null)),o(F,{disabled:l.size===0,onClick:()=>{s([...l]),c(void 0)}},"Confirm Party"),u):o(S,null,n.length>a&&r.length===a&&o(pn,null,"Party size restricted"),o("div",{className:"mt-4"},o("h3",{className:"inline mt-0"},"Your Party"),o("span",null,o(B,{type:"small",onClick:()=>c(new Set(r)),className:"ml-3"},"Edit"))),o(W,{guests:r}),o(F,{onClick:e},t))}function Qi({offer:t,onBook:e}){const n=fe();return o(S,null,n.current&&o(pn,null,"Rebooking resets the two hour timer"),o(He,w({},t)),t.changed&&o("div",{className:"text-sm"},o("strong",null,"Note:")," Return time has been changed"),o(je,{buttonText:`${n.current?"Rebook":"Book"} Lightning Lane`,onSubmit:e}))}const St="https://widget.time.is/t.js";function Vi(){if([...document.scripts].some(e=>e.src===St))return;const t=document.createElement("script");t.src=St,t.onload=yn,document.head.appendChild(t)}const ye={};function yn(){"time_is_widget"in self&&self.time_is_widget.init(ye)}function Ki(t){Vi(),ye[t]||(ye[t]={}),yn()}function vn(t,e){const n=document.getElementById(t);if(!n||n.firstElementChild)return e();n.textContent=G().time,setTimeout(()=>vn(t,e),100)}function qi({id:t,onSync:e}){return $(()=>{Ki(t),vn(t,e)},[t,e]),o("time",{id:t})}const Zi={WDW:"Orlando_z161",DLR:"Anaheim_z14e"},Xi=5e3;function bn({resort:t,time:e,label:n}){const i=Zi[t],[r,s]=x(null);$(()=>{setTimeout(()=>s(c=>c||!1),Xi)},[]);const l=Q(()=>s(!0),[]);return o("table",{className:"mt-4 mx-auto text-gray-500"},o("tbody",null,o(Tt,{heading:n,time:o("time",null,e||"--:--:--")}),o(Tt,{heading:o("a",{href:`https://time.is/${i.split("_")[0]}`,id:"time_is_link",target:"_blank",rel:"noreferrer"},"Current time"),time:o(S,null,o(qi,{id:i,onSync:l}),r===!1&&o("span",{className:"text-sm font-sans font-semibold text-red-600"}," ","(unsynced)"))})))}function Tt({heading:t,time:e}){return o("tr",null,o("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase"},t,":"),o("td",{className:"text-xl font-mono leading-tight"},"\uFEFF",e))}function eo({startTime:t,onRefresh:e}){return o(S,null,t&&o(bn,{resort:"WDW",time:t,label:"Booking start"}),o("h3",{className:"mt-4"},"Not Available Yet"),t?o("p",null,"At"," ",o("time",{dateTime:t,className:"font-semibold"},X(t)),", tap the ",o("span",{className:"font-semibold"},"Check Availability")," ","button below to start booking this Lightning Lane."):o("p",null,"Sorry, but you can't make a Lightning Lane reservation for this attraction yet."),o(je,{buttonText:"Check Availability",onSubmit:e}))}function to({onClose:t}){const{ineligible:e}=Fe(),{eligibleAfter:n}=e[0]||{},i=fe();return o(S,null,n&&o("div",{className:"mt-4 border-2 border-green-600 rounded p-1 uppercase font-semibold text-center text-green-600 bg-green-100"},"Eligible at ",X(n)),i.current?o(S,null,o("h3",null,"Unable to Rebook"),o("p",null,"Your current reservation cannot be rebooked to this experience due to the following conflicts:")):o(S,null,o("h3",null,"No Eligible Guests"),o("p",null,"No one in your party is currently eligible for this Lightning Lane.")),o(gn,null),o(F,{onClick:t},"Back"))}function no({onRefresh:t}){return o(S,null,o("h3",null,"No Guests Found"),o("p",null,"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."),o(F,{onClick:t},"Try Again"))}function io({onClose:t}){return o(S,null,o("h3",null,"No Reservations Available"),o("p",null,"There aren't enough reservation slots available for your entire party. If only part of your group wishes to go on this attraction, edit your party to check again. Otherwise, go back to the tip board and select another attraction."),o(je,{buttonText:"Back",onSubmit:t}))}function kn({booking:t,button:e,badge:n}){return o("div",{className:"flex items-center gap-x-3"},n,o("div",{className:"flex-1 min-w-0"},o("div",{className:"text-gray-500 text-sm font-semibold uppercase"},tn(t)),o("div",{className:"text-lg font-semibold leading-tight truncate"},t.choices?"Multiple Experiences":t.name)),e&&o("div",null,e))}function wn(){const t=fe(),e=q();return t.current?o("div",{className:`sticky top-0 -mx-3 pb-1 ${e.bg}`},o("div",{className:"pb-3 bg-white"},o("div",{className:`pb-1 ${e.bg} text-white text-sm font-semibold uppercase text-center`},"Rebooking"),o("div",{className:"mt-2 px-3"},o(kn,{booking:t.current,button:o(B,{type:"small",onClick:()=>t.end(!0)},"Keep")})))):null}function oo({onClose:t}){const e=ne(),n=Ne,[i,r]=x(),[s,l]=x(),[c,u]=x(!1);function d(m){!s||(r(_=>{if(!!_)return m.length>0?s.guests=m:_.splice(_.indexOf(s),1),_}),l(void 0))}$(()=>{u(!0),e.bookings().then(m=>r(m))},[e]);function a(){u(!1),setTimeout(t,300)}return s?o(mn,{booking:s,onClose:d,isRebookable:e.isRebookable(s)}):o(S,null,o(de,{onClick:a,"data-testid":"panel-shade",className:{inner:"bg-black bg-opacity-75"}}),o(H,{heading:"Your Lightning Lanes",buttons:o(B,{onClick:a},"Close"),className:`top-auto ${c?"h-[60%]":"h-0"} duration-200 ease-linear`},i&&i.length>0?o("ul",null,(i||[]).map(m=>{var _;return o("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",key:(_=m.guests[0])==null?void 0:_.entitlementId},o(kn,{booking:m,button:o(B,{type:"small",onClick:()=>l(m)},"More"),badge:e.isRebookable(m)&&o("div",{title:"Rebookable",className:`w-2.5 h-2.5 rounded-full ${n.bg}`})}))})):o("div",{className:"mt-4 text-sm font-semibold text-center uppercase  text-gray-500"},i&&"No current reservations")))}function xn(i){var r=i,{onOpen:t,onClose:e}=r,n=U(r,["onOpen","onClose"]);const[s,l]=x(),c=t||l,u=e||(()=>l(void 0));return o(S,null,o(B,L(w({},n),{onClick:()=>c(o(oo,{onClose:u})),title:"Your Lightning Lanes"}),o(un,null)),s)}function so({experience:t,onClose:e}){const n=ne(),i=fe(),[r,s]=x(),[l,c]=x(!t.flex.available&&t.flex.enrollmentStartTime!==void 0),[u,d]=x(l?null:void 0),[a,m]=x(),{loadData:_,loaderElem:f}=We();async function h(){if(!u||!r)return;let b=null;await _(async()=>{const C=new Set(r.selected.map(T=>T.id));i.current&&await n.cancelBooking(i.current.guests.filter(T=>C.has(T.id)));try{b=await n.book(u)}finally{i.end()}const E=b.guests.filter(T=>!C.has(T.id));E.length>0&&(await n.cancelBooking(E),b.guests=b.guests.filter(T=>C.has(T.id))),hn()},{410:"Offer expired"}),b&&m(b)}function N(){_(async b=>{const{plus:C}=await n.experiences(t.park),E=C.find(T=>T.id===t.id);E!=null&&E.flex.available?(c(!1),d(void 0)):b("Reservations not open yet")})}function v(){u&&n.cancelOffer(u),e()}const p=Q(()=>{_(async()=>{try{let b=await n.guests(t);const C=i.current;if(C){const E=new Set(C.guests.map(A=>A.id)),T=[...b.eligible,...b.ineligible].filter(A=>E.has(A.id)&&!(A.ineligibleReason==="TOO_EARLY"||A.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"&&t.id===C.id));b=T.length>0?{eligible:[],ineligible:T}:{eligible:C.guests,ineligible:[]}}s(L(w({},b),{selected:b.eligible.slice(0,n.maxPartySize),setSelected:E=>s(T=>{if(!T)return T;const A=new Set(T.selected);return d(j=>j===null||E.some(I=>!A.has(I))?void 0:j),L(w({},T),{selected:E})})}))}catch(b){throw s({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),b}})},[n,t,i,_]);$(()=>{r||p()},[r,p]);const g=Q(b=>{!r||r.selected.length===0||_(async()=>{try{const C=await n.offer({experience:t,guests:r.selected}),{ineligible:E}=C.guests;if(E.length>0){const T=new Set(E.map(j=>j.id)),A=j=>!T.has(j.id);s(L(w({},r),{eligible:r.eligible.filter(A),ineligible:[...E,...r.ineligible],selected:r.selected.filter(A)}))}C.active&&(u&&(C.changed=!1),d(C))}catch(C){throw b||d(null),C}},{410:u?"No reservations available":""})},[n,t,r,u,_]);if($(()=>{u===void 0&&g()},[u,g]),a)return o(mn,{booking:a,onClose:e,isNew:!0});const P=(r==null?void 0:r.eligible.length)===0&&(r==null?void 0:r.ineligible.length)===0;return o(H,{heading:"Lightning Lane",theme:t.park.theme,buttons:o(S,null,o(xn,null),r&&(l||u||P)&&o(B,{onClick:v},"Cancel"),!l&&u!==void 0&&o(B,{onClick:g,title:"Refresh Offer"},o(Ue,null)))},o(wn,null),o("h2",null,t.name),o("div",null,t.park.name),o(zi,{value:r||{eligible:[],ineligible:[],selected:[],setSelected:()=>null}},(r==null?void 0:r.eligible.length)===0?P?o(no,{onRefresh:p}):o(to,{onClose:e}):!r||u===void 0?o("div",null):l?o(eo,{startTime:t.flex.enrollmentStartTime,onRefresh:N}):u===null?o(io,{onClose:e}):o(Qi,{offer:u,onBook:h})),f)}function ze({label:t,children:e}){return o("div",{className:"flex items-center flex-1 whitespace-nowrap"},o("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500"},t)," ",e)}function ro({experience:t,onClick:e}){const{flex:n}=t;return o(ze,{label:"Genie+"},o("span",null,o(B,{onClick:()=>e(t)},n.nextAvailableTime?X(n.nextAvailableTime):"none")))}function ao({experience:{type:t,standby:e}}){return e.displayNextShowTime||t==="ENTERTAINMENT"&&!e.waitTime?o(co,{standby:e}):o(lo,{standby:e})}const lo=({standby:t})=>o(ze,{label:"Standby"},t.available?o(En,{time:t.waitTime!==void 0?t.waitTime+" min":"now"}):o(Sn,{text:"down"})),co=({standby:t})=>o(ze,{label:o(S,null,"Next ",o("span",{className:"hidden xs:inline"},"Show"))},t.displayNextShowTime?o(En,{time:t.displayNextShowTime}):o(Sn,{text:"none"})),Nn="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",En=({time:t})=>o("span",{className:`${Nn} border-gray-500 text-gray-500 bg-gray-100`},t),Sn=({text:t})=>o("span",{className:`${Nn} border-red-600 text-red-600 bg-red-100`},t);function uo({bookTime:t,dropTime:e}){const n=q();return!t&&!e?null:o("div",{className:`flex justify-center gap-x-10 -mx-3 px-3 pb-1 ${n.bg} text-white text-sm font-semibold uppercase text-center`},o(Ct,{label:"Book",time:t}),o(Ct,{label:"Drop",time:e}))}function Ct({label:t,time:e}){if(!e)return null;e=e.slice(0,5);const n=G().time.slice(0,5);return o("div",null,t,":"," ",o("time",{dateTime:e,className:"whitespace-nowrap"},e>n?X(e):"now"))}const fo=6e4,_o=30,ho=60,It="bg1.genie.tipBoard.park",Pt="bg1.genie.tipBoard.starred",mo=(t,e)=>+e.lp-+t.lp,po=(t,e)=>(t.priority||1/0)-(e.priority||1/0),Ie=(t,e)=>(e.standby.waitTime||-1)-(t.standby.waitTime||-1),Pe=(t,e)=>(t.flex.nextAvailableTime||"").localeCompare(e.flex.nextAvailableTime||""),go=(t,e)=>t.name.toLowerCase().localeCompare(e.name.toLowerCase()),Rt=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)),yo=(t,e,n)=>n?Rt(t.geo,n)-Rt(e.geo,n):0;function vo(t,e){const{n,s:i,e:r,w:s}=t.geo,[l,c]=e;return l<n&&l>i&&c<r&&c>s}function At(t){const[e,n]=t.split(":").map(Number);return e*60+n}const bo={priority:(t,e)=>mo(t,e)||po(t,e)||Ie(t,e)||Pe(t,e),standby:(t,e)=>Ie(t,e)||Pe(t,e),soonest:(t,e)=>Pe(t,e)||Ie(t,e),nearby:(t,e,n)=>yo(t,e,n),aToZ:()=>0},ko=[{value:"priority",text:"Priority"},{value:"nearby",text:"Nearby"},{value:"standby",text:"Standby"},{value:"soonest",text:"Soonest"},{value:"aToZ",text:"A to Z"}];function wo(){var Ye;const t=ne(),{parks:e}=t,[n,i]=x(()=>{const{id:k=e[0].id,date:D=""}=JSON.parse(sessionStorage.getItem(It)||"{}")||{};return D===G().date&&e.find(V=>V.id===k)||e[0]}),[r,s]=x([]),[l,c]=x(),[u,d]=x(),a=()=>d(void 0),[m,_]=x("priority"),{loadData:f,loaderElem:h,isLoading:N}=We(),[,v]=x(0),[p,g]=x(()=>({current:null,begin:k=>{g(L(w({},p),{current:k})),i(k.park),a()},end:(k=!1)=>{g(D=>D.current?L(w({},D),{current:null}):D),k&&a()}})),P=re(null),[b,C]=x(()=>{let k=[];try{k=JSON.parse(localStorage.getItem(Pt)||"[]")}catch(D){console.error(D)}return new Set(k)}),[E,T]=Oi(f);$(()=>{m==="nearby"&&T()},[m,T]);const A=Q((k=!0)=>{v(D=>!k&&Date.now()-D<fo?D:(f(async()=>{_(K=>(K==="nearby"&&T(),K));const{plus:V,nextBookTime:Tn}=await t.experiences(n);c(Tn);const Cn=At(G().time);s(V.map(K=>{const Je=K.standby.waitTime||0,Qe=K.flex.nextAvailableTime;if(!Qe)return L(w({},K),{lp:!1});const In=At(Qe)-Cn;return L(w({},K),{lp:Je>=_o&&In<=Math.min(ho,(4-Math.trunc(K.priority||4))/3*Je)})}))}),Date.now()))},[t,n,f,T]);$(()=>{s([]),A()},[A]),$(()=>{if(N||u)return;const k=()=>{document.hidden||A(!1)};return document.addEventListener("visibilitychange",k),()=>{document.removeEventListener("visibilitychange",k)}},[u,A,N]),$(()=>{var k;(k=P.current)==null||k.scroll(0,0)},[n,m,p]),$(()=>{sessionStorage.setItem(It,JSON.stringify({id:n.id,date:G().date}))},[n]);function j(k){const V=k.currentTarget.getAttribute("data-id");!V||(b.has(V)?b.delete(V):b.add(V),localStorage.setItem(Pt,JSON.stringify([...b])),C(new Set([...b])))}const I=Oe(()=>e.map(k=>({value:k.id,icon:k.icon,text:k.name})),[e]),R=(Ye=r==null?void 0:r[0])==null?void 0:Ye.flex.enrollmentStartTime,M=t.nextDropTime(n);return o(Di,{value:p},o(H,{heading:o(S,null,"G",o("span",{className:"hidden xs:inline"},"enie"),"+"),theme:n.theme,buttons:o(S,null,o(xn,{onOpen:d,onClose:a}),o(Nt,{options:I,value:n.id,onChange:k=>i(e.find(D=>D.id===k)),title:"Park"}),o(Nt,{options:ko,value:m,onChange:_,title:"Sort By"}),o(B,{onClick:A,title:"Refresh Tip Board"},o(Ue,null))),containerRef:P},o("div",{"aria-hidden":!!u},o(wn,null),o(uo,{bookTime:R||l,dropTime:M}),o("ul",null,r.sort((k,D)=>+b.has(D.id)-+b.has(k.id)||+D.flex.available-+k.flex.available||bo[m==="nearby"&&!(E&&vo(n,E))?"priority":m](k,D,E)||go(k,D)).map(k=>o("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",key:k.id+(b.has(k.id)?"*":"")},o("div",{className:"flex items-center gap-x-2 mt-2"},o(xo,{experience:k,starred:b,onClick:j}),o("h2",{className:"flex-1 mt-0 text-lg leading-tight truncate"},k.name),k.lp?o(Dt,{name:"Lightning Pick",icon:un,onClick:()=>d(o(No,{onClose:a}))}):M&&k.drop?o(Dt,{name:"Upcoming Drop",icon:Fi,onClick:()=>d(o(Eo,{dropTime:M,onClose:a}))}):null),k.flex.preexistingPlan&&o("div",{className:"mt-2 border-2 border-green-600 rounded p-1 text-sm uppercase font-semibold text-center text-green-600 bg-green-100"},"Lightning Lane Booked"),o("div",{className:"flex flex-wrap gap-1.5 mt-2"},o(ao,{experience:k}),o(ro,{experience:k,onClick:D=>d(o(so,{experience:D,onClose:()=>{a(),A(!1)}}))}))))),!N&&o("div",{className:"mt-12 text-center"},o(dn,null)),h)),o(Ri,{value:n},u))}function Dt({name:t,icon:e,onClick:n}){const i=q();return o("button",{title:`${t} (more info)`,className:`-mx-2 px-2 ${i.text}`,onClick:n},o(e,null))}function xo({experience:t,starred:e,onClick:n}){const i=q();return o("button",{"data-id":t.id,title:"Favorite",className:"-m-2 p-2",onClick:n},o(Hi,{className:e.has(t.id)?i.text:"text-gray-300"}))}function No(t){return o(fn,w({heading:"Lightning Pick"},t),o("p",null,"When an attraction with a long wait has a Lightning Lane return time in the near future, it's highlighted as a Lightning Pick. Book these quick before they're gone!"))}function Eo({dropTime:t,onClose:e}){return o(fn,{heading:"Upcoming Drop",onClose:e},o("p",null,"This attraction may be part of the"," ",o("time",{dateTime:t,className:"font-semibold"},X(t))," ","drop of additional Lightning Lane inventory with earlier return times than what's currently being offered. Availability varies but is always limited, so be sure you're ready to book when the drop time arrives!"))}const So=xe,To={success:5e3,failure:1e3};function Co({guests:t,result:e,onDone:n}){const{boardingGroup:i,conflicts:r}=e,s=t.filter(d=>!(d.id in r)),l=t.filter(d=>d.id in r),[c,u]=x(!0);return $(()=>{setTimeout(()=>u(!1),To[i?"success":"failure"])},[i]),o(S,null,i?o(S,null,o("h2",{className:"mt-5 text-xl"},"Boarding Group: ",i),o(W,{guests:s}),Object.keys(r).length>0&&o(S,null,o("p",{className:"font-semibold"},"These guests could not join:"),o(W,{guests:l,conflicts:r})),o("p",null,"Refer to the My Disney Experience app for return time and other information.")):o(S,null,o("h2",{className:"mt-5 text-xl"},"Sorry!"),o("p",null,"A boarding group could not be obtained."),o(W,{guests:l,conflicts:r})),c?null:o(F,{onClick:n},"Done"))}function Io({guests:t,party:e,onToggle:n,onConfirm:i}){return o(S,null,o("div",{className:"mt-5"},o("h2",{className:"inline mr-3 text-xl"},"Choose Your Party"),o(dn,null)),t?t.length>0?o(W,{guests:t,selectable:{isSelected:r=>e.has(r),onToggle:n}}):o("p",null,"No guests available"):o("p",null,"Loading guests\u2026"),o(F,{disabled:e.size===0,onClick:i},"Confirm Party"))}function Po({queue:t}){return o(S,null,t.howToEnterMessage.split(`

`).map((e,n)=>o("p",{key:n},e)))}const Ro=999;function Ao({guests:t,joinQueue:e,onEdit:n}){const[i,r]=x(!1),[s,l]=Ee();async function c(){r(!0),l("");const u=cn(Ro);try{await e()||l("Queue not open yet")}catch(d){l("Error: try again","error"),d instanceof ge||console.error(d)}finally{await u,r(!1)}}return o(S,null,o("div",{className:"mt-4"},o("h2",{className:"inline mr-3 text-xl"},"Your Party"),o(B,{type:"small",onClick:n},"Edit")),o(W,{guests:t}),o(F,{disabled:i,onClick:c},"Join Boarding Group"),s)}function Do({queue:t,queues:e,onChange:n}){e||(e=[]);const{bg:i}=q(),r=`block w-full ${i} text-white text-xl font-semibold`;return o(S,null,e.length<=1?o("span",{className:`${r} px-1 truncate`},t.name):o("select",{className:`${r} pr-1`,value:t.id,onChange:s=>n?n(s.currentTarget.value):null},e.map(s=>o("option",{key:s.id,value:s.id,className:"text-base font-normal"},s.name))))}const Lt=t=>t.categoryContentId==="attraction";function Lo(){const t=So(),[e,n]=x(),[i,r]=x(null),[s,l]=x(),[c,u]=x(new Set),[d,a]=x({boardingGroup:null,conflicts:{},closed:!0}),[m,_]=x(!1),[f,h]=x("ChooseParty"),[N,v]=Ee(),p=re(null),g=Q(async()=>{v(""),_(!0);const I=(await t.getQueues()).filter(R=>R.isAcceptingJoins||R.isAcceptingPartyCreation).sort((R,M)=>+Lt(M)-+Lt(R)||R.name.localeCompare(M.name));_(!1),n(R=>(R&&I.length===0&&v("No queues available"),I))},[t,v]);$(()=>{g();const I=()=>{document.hidden||g()};return document.addEventListener("visibilitychange",I),()=>{document.removeEventListener("visibilitychange",I)}},[g]),$(()=>{r(I=>{const R=I&&(e==null?void 0:e.find(M=>M.id===I.id));return R||(l(void 0),e&&e.length>0?e[0]:null)})},[e]),$(()=>{if(s||!i)return;let I=!1;return(async()=>{const R=await t.getLinkedGuests(i);I||(l(R),u(new Set(R.filter(M=>M.isPreselected))))})(),()=>{I=!0}},[t,i,s]),$(()=>{var I;(I=p.current)==null||I.scroll(0,0)},[f]);function P(I){const R=new Set(c);R[R.has(I)?"delete":"add"](I);const M=Number(i==null?void 0:i.maxPartySize);M>0&&R.size>M?v(`Maximum party size: ${M}`):(u(R),v(""))}function b(I){const R=e==null?void 0:e.find(M=>M.id===I);R&&(r(R),l(void 0))}async function C(){if(!i||!(await t.getQueue(i)).isAcceptingJoins)return!1;const I=await t.joinQueue(i,[...c]);return a(I),h("BGResult"),I.boardingGroup!==null&&hn(),!0}if((e==null?void 0:e.length)===0)return o(H,{heading:"No Active Queues"},o("p",null,"You can't join any virtual queues just yet. Check back within an hour of the queue opening time, or tap the Refresh button to check again."),o(F,{disabled:m,onClick:g},"Refresh"),N);if(!i)return o("div",null);const E=(s||[]).filter(I=>c.has(I)),T=o(bn,{resort:t.resort,time:i.nextScheduledOpenTime,label:"Next queue opening"}),A=o(Do,{queue:i,queues:f==="ChooseParty"?e:[],onChange:b});return{ChooseParty:o(H,{heading:A,containerRef:p},o(Po,{queue:i}),T,o(Io,{guests:s,party:c,onToggle:P,onConfirm:()=>h("JoinQueue")}),N),JoinQueue:o(H,{heading:A},T,o(Ao,{guests:E,onEdit:()=>h("ChooseParty"),joinQueue:C})),BGResult:o(H,{heading:A},o(Co,{guests:E,result:d,onDone:()=>h("ChooseParty")}))}[f]}const Le=new ni("bg1.auth");mi(origin)?$t(new gi({origin,authStore:Le}),Lo):_i(origin)?Ge.load({origin,authStore:Le}).then(t=>$t(t,wo)):location.href="https://joelface.github.io/bg1/start.html";async function $t(t,e){ei({WDW:"America/New_York",DLR:"America/Los_Angeles"}[t.resort]),document.title="BG1",Oo(),$o(),Mo().render(o(yi,{value:t},o(Pi,{authStore:Le},o(e,null))))}function $o(){document.body.addEventListener("click",()=>null)}function Oo(){const t=document.createElement("meta");t.name="viewport",t.content="width=device-width, initial-scale=1, maximum-scale=1",document.head.appendChild(t)}function Mo(){const t=document.createElement("div");return t.id="app",document.body.appendChild(t),Xn(t)}
