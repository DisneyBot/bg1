var se,w,At,ee,ze,Dt,fe={},Lt=[],In=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function W(t,e){for(var n in e)t[n]=e[n];return t}function $t(t){var e=t.parentNode;e&&e.removeChild(t)}function s(t,e,n){var o,r,i,a={};for(i in e)i=="key"?o=e[i]:i=="ref"?r=e[i]:a[i]=e[i];if(arguments.length>2&&(a.children=arguments.length>3?se.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)a[i]===void 0&&(a[i]=t.defaultProps[i]);return te(t,a,o,r,null)}function te(t,e,n,o,r){var i={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r==null?++At:r};return r==null&&w.vnode!=null&&w.vnode(i),i}function S(t){return t.children}function j(t,e){this.props=t,this.context=e}function Q(t,e){if(e==null)return t.__?Q(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Q(t):null}function Ot(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ot(t)}}function Te(t){(!t.__d&&(t.__d=!0)&&ee.push(t)&&!he.__r++||ze!==w.debounceRendering)&&((ze=w.debounceRendering)||setTimeout)(he)}function he(){for(var t;he.__r=ee.length;)t=ee.sort(function(e,n){return e.__v.__b-n.__v.__b}),ee=[],t.some(function(e){var n,o,r,i,a,c;e.__d&&(a=(i=(n=e).__v).__e,(c=n.__P)&&(o=[],(r=W({},i)).__v=i.__v+1,Ae(c,i,r,n.__n,c.ownerSVGElement!==void 0,i.__h!=null?[a]:null,o,a==null?Q(i):a,i.__h),Ut(o,i),i.__e!=a&&Ot(i)))})}function Mt(t,e,n,o,r,i,a,c,u,f){var l,p,h,d,m,T,_,g=o&&o.__k||Lt,v=g.length;for(n.__k=[],l=0;l<e.length;l++)if((d=n.__k[l]=(d=e[l])==null||typeof d=="boolean"?null:typeof d=="string"||typeof d=="number"||typeof d=="bigint"?te(null,d,null,null,d):Array.isArray(d)?te(S,{children:d},null,null,null):d.__b>0?te(d.type,d.props,d.key,null,d.__v):d)!=null){if(d.__=n,d.__b=n.__b+1,(h=g[l])===null||h&&d.key==h.key&&d.type===h.type)g[l]=void 0;else for(p=0;p<v;p++){if((h=g[p])&&d.key==h.key&&d.type===h.type){g[p]=void 0;break}h=null}Ae(t,d,h=h||fe,r,i,a,c,u,f),m=d.__e,(p=d.ref)&&h.ref!=p&&(_||(_=[]),h.ref&&_.push(h.ref,null,d),_.push(p,d.__c||m,d)),m!=null?(T==null&&(T=m),typeof d.type=="function"&&d.__k===h.__k?d.__d=u=Gt(d,u,t):u=Bt(t,d,h,g,m,u),typeof n.type=="function"&&(n.__d=u)):u&&h.__e==u&&u.parentNode!=t&&(u=Q(h))}for(n.__e=T,l=v;l--;)g[l]!=null&&(typeof n.type=="function"&&g[l].__e!=null&&g[l].__e==n.__d&&(n.__d=Q(o,l+1)),Ht(g[l],g[l]));if(_)for(l=0;l<_.length;l++)Ft(_[l],_[++l],_[++l])}function Gt(t,e,n){for(var o,r=t.__k,i=0;r&&i<r.length;i++)(o=r[i])&&(o.__=t,e=typeof o.type=="function"?Gt(o,e,n):Bt(n,o,o,r,o.__e,e));return e}function z(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){z(n,e)}):e.push(t)),e}function Bt(t,e,n,o,r,i){var a,c,u;if(e.__d!==void 0)a=e.__d,e.__d=void 0;else if(n==null||r!=i||r.parentNode==null)e:if(i==null||i.parentNode!==t)t.appendChild(r),a=null;else{for(c=i,u=0;(c=c.nextSibling)&&u<o.length;u+=2)if(c==r)break e;t.insertBefore(r,i),a=i}return a!==void 0?a:r.nextSibling}function Cn(t,e,n,o,r){var i;for(i in n)i==="children"||i==="key"||i in e||me(t,i,null,n[i],o);for(i in e)r&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||n[i]===e[i]||me(t,i,e[i],n[i],o)}function Ye(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=n==null?"":typeof n!="number"||In.test(e)?n:n+"px"}function me(t,e,n,o,r){var i;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||Ye(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||Ye(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?o||t.addEventListener(e,i?Je:Ve,i):t.removeEventListener(e,i?Je:Ve,i);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n==null?"":n;break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,n):t.removeAttribute(e))}}function Ve(t){this.l[t.type+!1](w.event?w.event(t):t)}function Je(t){this.l[t.type+!0](w.event?w.event(t):t)}function Ae(t,e,n,o,r,i,a,c,u){var f,l,p,h,d,m,T,_,g,v,b,k,E,y=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(u=n.__h,c=e.__e=n.__e,e.__h=null,i=[c]),(f=w.__b)&&f(e);try{e:if(typeof y=="function"){if(_=e.props,g=(f=y.contextType)&&o[f.__c],v=f?g?g.props.value:f.__:o,n.__c?T=(l=e.__c=n.__c).__=l.__E:("prototype"in y&&y.prototype.render?e.__c=l=new y(_,v):(e.__c=l=new j(_,v),l.constructor=y,l.render=Pn),g&&g.sub(l),l.props=_,l.state||(l.state={}),l.context=v,l.__n=o,p=l.__d=!0,l.__h=[]),l.__s==null&&(l.__s=l.state),y.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=W({},l.__s)),W(l.__s,y.getDerivedStateFromProps(_,l.__s))),h=l.props,d=l.state,p)y.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(y.getDerivedStateFromProps==null&&_!==h&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(_,v),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(_,l.__s,v)===!1||e.__v===n.__v){l.props=_,l.state=l.__s,e.__v!==n.__v&&(l.__d=!1),l.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(x){x&&(x.__=e)}),l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(_,l.__s,v),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(h,d,m)})}if(l.context=v,l.props=_,l.__v=e,l.__P=t,b=w.__r,k=0,"prototype"in y&&y.prototype.render)l.state=l.__s,l.__d=!1,b&&b(e),f=l.render(l.props,l.state,l.context);else do l.__d=!1,b&&b(e),f=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++k<25);l.state=l.__s,l.getChildContext!=null&&(o=W(W({},o),l.getChildContext())),p||l.getSnapshotBeforeUpdate==null||(m=l.getSnapshotBeforeUpdate(h,d)),E=f!=null&&f.type===S&&f.key==null?f.props.children:f,Mt(t,Array.isArray(E)?E:[E],e,n,o,r,i,a,c,u),l.base=e.__e,e.__h=null,l.__h.length&&a.push(l),T&&(l.__E=l.__=null),l.__e=!1}else i==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Rn(n.__e,e,n,o,r,i,a,u);(f=w.diffed)&&f(e)}catch(x){e.__v=null,(u||i!=null)&&(e.__e=c,e.__h=!!u,i[i.indexOf(c)]=null),w.__e(x,e,n)}}function Ut(t,e){w.__c&&w.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(o){o.call(n)})}catch(o){w.__e(o,n.__v)}})}function Rn(t,e,n,o,r,i,a,c){var u,f,l,p=n.props,h=e.props,d=e.type,m=0;if(d==="svg"&&(r=!0),i!=null){for(;m<i.length;m++)if((u=i[m])&&"setAttribute"in u==!!d&&(d?u.localName===d:u.nodeType===3)){t=u,i[m]=null;break}}if(t==null){if(d===null)return document.createTextNode(h);t=r?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,h.is&&h),i=null,c=!1}if(d===null)p===h||c&&t.data===h||(t.data=h);else{if(i=i&&se.call(t.childNodes),f=(p=n.props||fe).dangerouslySetInnerHTML,l=h.dangerouslySetInnerHTML,!c){if(i!=null)for(p={},m=0;m<t.attributes.length;m++)p[t.attributes[m].name]=t.attributes[m].value;(l||f)&&(l&&(f&&l.__html==f.__html||l.__html===t.innerHTML)||(t.innerHTML=l&&l.__html||""))}if(Cn(t,h,p,r,c),l)e.__k=[];else if(m=e.props.children,Mt(t,Array.isArray(m)?m:[m],e,n,o,r&&d!=="foreignObject",i,a,i?i[0]:n.__k&&Q(n,0),c),i!=null)for(m=i.length;m--;)i[m]!=null&&$t(i[m]);c||("value"in h&&(m=h.value)!==void 0&&(m!==t.value||d==="progress"&&!m||d==="option"&&m!==p.value)&&me(t,"value",m,p.value,!1),"checked"in h&&(m=h.checked)!==void 0&&m!==t.checked&&me(t,"checked",m,p.checked,!1))}return t}function Ft(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(o){w.__e(o,n)}}function Ht(t,e,n){var o,r;if(w.unmount&&w.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Ft(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){w.__e(i,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&Ht(o[r],e,typeof t.type!="function");n||t.__e==null||$t(t.__e),t.__e=t.__d=void 0}function Pn(t,e,n){return this.constructor(t,n)}function Wt(t,e,n){var o,r,i;w.__&&w.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,i=[],Ae(e,t=(!o&&n||e).__k=s(S,null,[t]),r||fe,fe,e.ownerSVGElement!==void 0,!o&&n?[n]:r?null:e.firstChild?se.call(e.childNodes):null,i,!o&&n?n:r?r.__e:e.firstChild,o),Ut(i,t)}function An(t,e,n){var o,r,i,a=W({},t.props);for(i in e)i=="key"?o=e[i]:i=="ref"?r=e[i]:a[i]=e[i];return arguments.length>2&&(a.children=arguments.length>3?se.call(arguments,2):n),te(t.type,a,o||t.key,r||t.ref,null)}function K(t,e){var n={__c:e="__cC"+Dt++,__:t,Consumer:function(o,r){return o.children(r)},Provider:function(o){var r,i;return this.getChildContext||(r=[],(i={})[e]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&r.some(Te)},this.sub=function(a){r.push(a);var c=a.componentWillUnmount;a.componentWillUnmount=function(){r.splice(r.indexOf(a),1),c&&c.call(a)}}),o.children}};return n.Provider.__=n.Consumer.contextType=n}se=Lt.slice,w={__e:function(t,e,n,o){for(var r,i,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((i=r.constructor)&&i.getDerivedStateFromError!=null&&(r.setState(i.getDerivedStateFromError(t)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),a=r.__d),a)return r.__E=r}catch(c){t=c}throw t}},At=0,j.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=W({},this.state),typeof t=="function"&&(t=t(W({},n),this.props)),t&&W(n,t),t!=null&&this.__v&&(e&&this.__h.push(e),Te(this))},j.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Te(this))},j.prototype.render=S,ee=[],he.__r=0,Dt=0;var X,P,be,Qe,ne=0,jt=[],le=[],qe=w.__b,Ke=w.__r,Xe=w.diffed,Ze=w.__c,et=w.unmount;function oe(t,e){w.__h&&w.__h(P,t,ne||e),ne=0;var n=P.__H||(P.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:le}),n.__[t]}function N(t){return ne=1,Dn(zt,t)}function Dn(t,e,n){var o=oe(X++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):zt(void 0,e),function(i){var a=o.__N?o.__N[0]:o.__[0],c=o.t(a,i);a!==c&&(o.__N=[c,o.__[1]],o.__c.setState({}))}],o.__c=P,!P.u)){P.u=!0;var r=P.shouldComponentUpdate;P.shouldComponentUpdate=function(i,a,c){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(l){return l.__c});if(u.every(function(l){return!l.__N}))return!r||r.call(this,i,a,c);var f=!1;return u.forEach(function(l){if(l.__N){var p=l.__[0];l.__=l.__N,l.__N=void 0,p!==l.__[0]&&(f=!0)}}),!!f&&(!r||r.call(this,i,a,c))}}return o.__N||o.__}function C(t,e){var n=oe(X++,3);!w.__s&&Le(n.__H,e)&&(n.__=t,n.i=e,P.__H.__h.push(n))}function Ee(t,e){var n=oe(X++,4);!w.__s&&Le(n.__H,e)&&(n.__=t,n.i=e,P.__h.push(n))}function q(t){return ne=5,De(function(){return{current:t}},[])}function De(t,e){var n=oe(X++,7);return Le(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function U(t,e){return ne=8,De(function(){return t},e)}function Z(t){var e=P.context[t.__c],n=oe(X++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(P)),e.props.value):t.__}function Ln(){for(var t;t=jt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ce),t.__H.__h.forEach(Ie),t.__H.__h=[]}catch(e){t.__H.__h=[],w.__e(e,t.__v)}}w.__b=function(t){P=null,qe&&qe(t)},w.__r=function(t){Ke&&Ke(t),X=0;var e=(P=t.__c).__H;e&&(be===P?(e.__h=[],P.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=le,n.__N=n.i=void 0})):(e.__h.forEach(ce),e.__h.forEach(Ie),e.__h=[])),be=P},w.diffed=function(t){Xe&&Xe(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(jt.push(e)!==1&&Qe===w.requestAnimationFrame||((Qe=w.requestAnimationFrame)||function(n){var o,r=function(){clearTimeout(i),tt&&cancelAnimationFrame(o),setTimeout(n)},i=setTimeout(r,100);tt&&(o=requestAnimationFrame(r))})(Ln)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==le&&(n.__=n.__V),n.i=void 0,n.__V=le})),be=P=null},w.__c=function(t,e){e.some(function(n){try{n.__h.forEach(ce),n.__h=n.__h.filter(function(o){return!o.__||Ie(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],w.__e(o,n.__v)}}),Ze&&Ze(t,e)},w.unmount=function(t){et&&et(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{ce(o)}catch(r){e=r}}),e&&w.__e(e,n.__v))};var tt=typeof requestAnimationFrame=="function";function ce(t){var e=P,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),P=e}function Ie(t){var e=P;t.__c=t.__(),P=e}function Le(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function zt(t,e){return typeof e=="function"?e(t):e}function $n(t,e){for(var n in e)t[n]=e[n];return t}function nt(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var o in e)if(o!=="__source"&&t[o]!==e[o])return!0;return!1}function st(t){this.props=t}(st.prototype=new j).isPureReactComponent=!0,st.prototype.shouldComponentUpdate=function(t,e){return nt(this.props,t)||nt(this.state,e)};var ot=w.__b;w.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),ot&&ot(t)};var it=function(t,e){return t==null?null:z(z(t).map(e))},On={map:it,forEach:it,count:function(t){return t?z(t).length:0},only:function(t){var e=z(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:z},Mn=w.__e;w.__e=function(t,e,n,o){if(t.then){for(var r,i=e;i=i.__;)if((r=i.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}Mn(t,e,n,o)};var rt=w.unmount;function ve(){this.__u=0,this.t=null,this.__b=null}function Yt(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function ae(){this.u=null,this.o=null}w.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),rt&&rt(t)},(ve.prototype=new j).__c=function(t,e){var n=e.__c,o=this;o.t==null&&(o.t=[]),o.t.push(n);var r=Yt(o.__v),i=!1,a=function(){i||(i=!0,n.__R=null,r?r(c):c())};n.__R=a;var c=function(){if(!--o.__u){if(o.state.__a){var f=o.state.__a;o.__v.__k[0]=function p(h,d,m){return h&&(h.__v=null,h.__k=h.__k&&h.__k.map(function(T){return p(T,d,m)}),h.__c&&h.__c.__P===d&&(h.__e&&m.insertBefore(h.__e,h.__d),h.__c.__e=!0,h.__c.__P=m)),h}(f,f.__c.__P,f.__c.__O)}var l;for(o.setState({__a:o.__b=null});l=o.t.pop();)l.forceUpdate()}},u=e.__h===!0;o.__u++||u||o.setState({__a:o.__b=o.__v.__k[0]}),t.then(a,a)},ve.prototype.componentWillUnmount=function(){this.t=[]},ve.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=function i(a,c,u){return a&&(a.__c&&a.__c.__H&&(a.__c.__H.__.forEach(function(f){typeof f.__c=="function"&&f.__c()}),a.__c.__H=null),(a=$n({},a)).__c!=null&&(a.__c.__P===u&&(a.__c.__P=c),a.__c=null),a.__k=a.__k&&a.__k.map(function(f){return i(f,c,u)})),a}(this.__b,n,o.__O=o.__P)}this.__b=null}var r=e.__a&&s(S,null,t.fallback);return r&&(r.__h=null),[s(S,null,e.__a?null:t.children),r]};var at=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};(ae.prototype=new j).__a=function(t){var e=this,n=Yt(e.__v),o=e.o.get(t);return o[0]++,function(r){var i=function(){e.props.revealOrder?(o.push(r),at(e,t,o)):r()};n?n(i):i()}},ae.prototype.render=function(t){this.u=null,this.o=new Map;var e=z(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},ae.prototype.componentDidUpdate=ae.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){at(t,n,e)})};var Vt=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,Gn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Bn=typeof document!="undefined",Un=function(t){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};function Fn(t,e,n){return e.__k==null&&(e.textContent=""),Wt(t,e),typeof n=="function"&&n(),t?t.__c:null}j.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(j.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var lt=w.event;function Hn(){}function Wn(){return this.cancelBubble}function jn(){return this.defaultPrevented}w.event=function(t){return lt&&(t=lt(t)),t.persist=Hn,t.isPropagationStopped=Wn,t.isDefaultPrevented=jn,t.nativeEvent=t};var ct={configurable:!0,get:function(){return this.class}},ut=w.vnode;w.vnode=function(t){var e=t.type,n=t.props,o=n;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var i in o={},n){var a=n[i];Bn&&i==="children"&&e==="noscript"||i==="value"&&"defaultValue"in n&&a==null||(i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&a===!0?a="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+e)&&!Un(n.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():r&&Gn.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),o[i]&&(i="oninputCapture")),o[i]=a)}e=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=z(n.children).forEach(function(c){c.props.selected=o.value.indexOf(c.props.value)!=-1})),e=="select"&&o.defaultValue!=null&&(o.value=z(n.children).forEach(function(c){c.props.selected=o.multiple?o.defaultValue.indexOf(c.props.value)!=-1:o.defaultValue==c.props.value})),t.props=o,n.class!=n.className&&(ct.enumerable="className"in n,n.className!=null&&(o.class=n.className),Object.defineProperty(o,"className",ct))}t.$$typeof=Vt,ut&&ut(t)};var dt=w.__r;w.__r=function(t){dt&&dt(t),t.__c};function Jt(t){return!!t&&t.$$typeof===Vt}function zn(t){return Jt(t)?An.apply(null,arguments):t}function Yn(t){return!!t.__k&&(Wt(null,t),!0)}function Vn(t){return{render(e){Fn(e,t)},unmount(){Yn(t)}}}let Qt="America/New_York";function Jn(t){Qt=t}function L(t){t=new Date(t||Date.now());const e={},n="2-digit";return Intl.DateTimeFormat("en-US",{timeZone:Qt,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n}).formatToParts(t).forEach(o=>e[o.type]=o.value),{date:`${e.year}-${e.month}-${e.day}`,time:`${e.hour}:${e.minute}:${e.second}`}}function V(t){const e=t.split(":").slice(0,2).map(Number),n=e[0]>=12?"PM":"AM";return e[0]=e[0]%12||12,e.map(o=>String(o).padStart(2,"0")).join(":").replace(/^0/,"")+" "+n}function ft(t){const[e,n]=t.slice(0,19).split("T");return{date:e,time:n}}function qt({start:t,end:e}){if(!e)return ke(t);const n=L().date,o=(t.date||"")<n?"Park Open":ke(t,"Park Open"),r=ke(e,"Park Close");return`${o} - ${r}`}function ke({date:t,time:e}={},n=""){const o=L();return t&&t!==o.date?new Date(t+"T00:00").toLocaleString("en-US",{month:"short",day:"numeric"})+(e?", "+V(e):""):e?V(e):n}class Qn extends Error{constructor(e){super(`Auth data "${e}" missing or expired`),this.name="ReauthNeeded"}}class qn{constructor(e,n=localStorage){this.storageKey=e,this.storage=n}getData(){try{const e=this.storage.getItem(this.storageKey);if(e){const{swid:n,accessToken:o,expires:r}=JSON.parse(e),i=L(new Date(r)),a=L();if(i.date>a.date||i.date===a.date&&i.time>a.time&&i.time>="17")return{swid:n,accessToken:o}}}catch(e){console.error(e)}throw new Qn(this.storageKey)}setData(e){this.storage.setItem(this.storageKey,JSON.stringify(e))}deleteData(){this.storage.removeItem(this.storageKey)}}const Kn="modulepreload",ht={},Xn="/bg1/",mt=function(e,n){return!n||n.length===0?e():Promise.all(n.map(o=>{if(o=`${Xn}${o}`,o in ht)return;ht[o]=!0;const r=o.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${i}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":Kn,r||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),r)return new Promise((c,u)=>{a.addEventListener("load",c),a.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())},Zn=8e3;async function pe(t,e={}){const{params:n,data:o,timeout:r=Zn,...i}=e;e=i,e.referrer||(e.referrer=""),e.credentials||(e.credentials="omit"),e.cache||(e.cache="no-store"),e.headers={"User-Agent":"Mozilla/5.0",...e.headers||{}},n&&Object.keys(n).length>0&&(t+=(t.includes("?")?"&":"?")+Object.entries(n).filter(([,f])=>f!=="").map(f=>f.map(encodeURIComponent).join("=")).join("&")),o&&(e.method||(e.method="POST"),e.headers={...e.headers,"Content-Type":"application/json"},e.body=JSON.stringify(o));const a=new AbortController;e.signal=a.signal;const c=setTimeout(()=>a.abort(),r);let u;try{u=await fetch(t,e)}catch(f){return console.error(f),{status:0,data:null}}finally{clearTimeout(c)}return{status:u.status,data:(u.headers.get("Content-Type")||"").startsWith("application/json")?await u.json():{}}}const es={48199:"Mr-Incredible",48200:"Mrs-Incredible",261227:"Nemo",339625:"Russell",339626:"Carl",364907:"Jack-Skellington",431014:"Princess-Tiana",431065:"Darth_Vader",15549505:"Rapunzel",15655408:"Default_SignedIn",15675686:"Crush",15831168:"Wall-E",16453979:"Merida",16726412:"Stormtrooper",16818199:"Violet",16869301:"Jack-Jack",17345357:"R2-D2",17345359:"C-3PO",17532220:"Bruce",17532224:"Green-Alien",17532227:"Kermit",17532228:"Sorcerer-Mickey",17577168:"Elsa",17577169:"Anna",17813977:"Olaf",17888784:"Yoda",18101167:"Captain-Mickey",18368743:"-Nick",18368747:"-Judy",18393706:"-Flash",18403761:"kion",18405224:"-Moana",18405236:"-Elena",19633995:"50th_Mickey",19633996:"50th_Minnie",90003819:"Alice",90003846:"Ariel",90003898:"Belle",90003967:"Buzz",90003976:"Captain-Hook",90004004:"Chesire-Cat",90004017:"Cinderella",90004068:"Daisy",90004076:"Dash",90004104:"Donald",90004228:"Goofy",90004260:"Hamm",90004328:"Princess-Jasmine",90004340:"Jiminy",90004395:"Lady",90004482:"Mickey-Mouse",90004486:"Minnie",90004537:"Mulan",90004605:"Peter-Pan",90004625:"Pluto",90004626:"Pocahontas",90004642:"Princess-Aurora",90004682:"Rex",90004772:"Snow-White",90004778:"Sparky",90004846:"TinkerBell",90004860:"Tramp",90004939:"Zero"},$e="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/90/90/75/dam/",ts=$e+"wdpro-assets/avatars/180x180/RetAvatar_180x180_",ns=$e+"wdpro-assets/avatars/180x180/RetAvatar-180x180",ss=$e+"disney-world/50th-anniversary/avatars/RetAvatar_180x180_",os={"-":ns,5:ss};function we(t){const e=es[t||""];if(!!e)return(os[e[0]]||ts)+e+".png"}function is(t){switch(t){case"./data/dlr.ts":return mt(()=>import("./dlr.js"),[]);case"./data/wdw.ts":return mt(()=>import("./wdw.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const Ce={"https://disneyworld.disney.go.com":"WDW","https://disneyland.disney.go.com":"DLR"},rs={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"};function as(t){return t in Ce}class Kt extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}const ls=new Set(["ACTIVITY","DINING"]),cs=new Set(["FLEX","OTHER","STANDARD","DAS","FDS"]),H=t=>t.split(";")[0];class Oe{constructor(e){this.maxPartySize=12,this.onUnauthorized=()=>{},this.partyIds=new Set,this.guestCache=new Map,this.listeners={bookingChange:new Set},this._primaryGuestId="",this.updateTracker=this.bookings,this.convertGuest=n=>{const{id:o,firstName:r,lastName:i,characterId:a,...c}=n,u=`${r} ${i}`.trim();if(!this.guestCache.has(o))switch(n.ineligibleReason){case"INVALID_PARK_ADMISSION":case"PARK_RESERVATION_NEEDED":case"GENIE_PLUS_NEEDED":n.primary&&this.cacheGuest(o,u,a);break;default:this.cacheGuest(o,u,a)}const f=we(a);return this.partyIds.size>0&&!this.partyIds.has(o)&&(c.ineligibleReason="NOT_IN_PARTY",delete c.eligibleAfter),{...c,id:o,name:u,avatarImageUrl:f}},this.origin=e.origin,this.authStore=e.authStore,this.data=e.data,this.parkMap=Object.fromEntries(this.parks.map(n=>[n.id,n])),this.tracker=e.tracker||new us}static async load(e){const n=Ce[e.origin].toLowerCase(),o=(await is(`./data/${n}.ts`)).default;return new Oe({...e,data:o})}get resort(){return Ce[this.origin]}get parks(){return this.data.parks}setPartyIds(e){this.partyIds=new Set(e)}async experiences(e){var a,c;await this.primaryGuestId();const n=await this.request({path:`/tipboard-vas/api/v1/parks/${encodeURIComponent(e.id)}/experiences`,params:{eligibilityGuestIds:[...this.guestCache.keys()].join(",")}});this.nextBookTime=(c=(((a=n.eligibility)==null?void 0:a.flexEligibilityWindows)||[]).sort((u,f)=>u.time.time.localeCompare(f.time.time))[0])==null?void 0:c.time.time;const o=this.nextDropTime(e),r=(this.data.pdts[e.id]||[]).indexOf(o||""),i=1<<r;return n.availableExperiences.filter(u=>u.id in this.data.experiences).map(u=>{const{pdtMask:f=0,...l}=this.data.experiences[u.id];return{...u,...l,park:e,booked:this.tracker.booked(u),drop:!!(i&f)}})}async guests(e){e||(e={id:"0",park:{id:"0"}});const n=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:e.id,parkId:e.park.id}});this._primaryGuestId=n.primaryGuestId;const o=n.ineligibleGuests.map(this.convertGuest),r=n.guests.map(this.convertGuest).filter(i=>!("ineligibleReason"in i)||o.push(i)&&!1);return o.sort((i,a)=>{const c=+!i.primary-+!a.primary||i.name.localeCompare(a.name);return i.eligibleAfter||a.eligibleAfter?(i.eligibleAfter||"99").localeCompare(a.eligibleAfter||"99")||c:i.ineligibleReason===a.ineligibleReason?c:i.ineligibleReason==="NOT_IN_PARTY"?1:a.ineligibleReason==="NOT_IN_PARTY"||i.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?-1:a.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?1:c}),{eligible:r,ineligible:o}}async primaryGuestId(e){return this._primaryGuestId||await this.guests(e),this._primaryGuestId}async offer({experience:e,guests:n}){const o=await this.request({path:"/ea-vas/api/v2/products/flex/offers",method:"POST",data:{guestIds:n.map(l=>l.id),ineligibleGuests:[],primaryGuestId:await this.primaryGuestId(e),parkId:e.park.id,experienceId:e.id,selectedTime:e.flex.nextAvailableTime},userId:!1}),{id:r,date:i,startTime:a,endTime:c,status:u,changeStatus:f}=o.offer;return{id:r,start:{date:i,time:a},end:{date:i,time:c},active:u==="ACTIVE",changed:f!=="NONE",guests:{eligible:(o.eligibleGuests||[]).map(this.convertGuest),ineligible:(o.ineligibleGuests||[]).map(this.convertGuest)}}}async cancelOffer(e){await this.request({path:`/ea-vas/api/v1/offers/${encodeURIComponent(e.id)}`,method:"DELETE",params:{productType:"FLEX"},userId:!1})}async book(e){var c;const{singleExperienceDetails:{experienceId:n,parkId:o},entitlements:r,startDateTime:i,endDateTime:a}=await this.request({path:"/ea-vas/api/v1/products/flex/bookings",method:"POST",userId:!1,data:{offerId:e.id},key:"booking"});return this.updateTracker(),{type:"LL",subtype:"G+",...this.getExperience(n,o),bookingId:(c=r[0])==null?void 0:c.id,start:ft(i),end:ft(a),cancellable:!0,rebookable:!0,guests:r.map(u=>{const f=this.guestCache.get(u.guestId);return{id:u.guestId,name:(f==null?void 0:f.name)||"",avatarImageUrl:we(f==null?void 0:f.characterId),entitlementId:u.id}})}}async cancelBooking(e){const o=e.map(r=>r.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${o}`,method:"DELETE",userId:!1})}async bookings(){const{swid:e}=this.authStore.getData(),n=new Date(Date.now()),o=L(n).date,r=rs[this.resort],{items:i=[],assets:a={},profiles:c={}}=await this.request({path:`/plan/${r}/api/v1/itinerary-items/${e}?item-types=FASTPASS&item-types=DINING&item-types=ACTIVITY`,params:{destination:this.resort,fields:"items,profiles,assets","guest-locators":e+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":o,"end-date":L(new Date(n.getTime()).setDate(n.getDate()+1)).date,"show-friends":"false"},userId:!1}),u=d=>{const{name:m,avatarId:T,type:_}=c[d.id];return{id:H(d.id),name:`${m.firstName} ${m.lastName}`.trim(),avatarImageUrl:we(T),..._==="transactional"&&{transactional:!0}}},f=new Date(n);f.setMinutes(f.getMinutes()-30);const l=d=>{const m=a[d.asset],_=a[m.facility].location;if(!_)return;const g=this.parkMap[H(_)]||{id:_,name:a[_].name},v=new Date(d.startDateTime);return v<f?void 0:{type:"RES",subtype:d.type,id:H(d.asset),park:g,name:m.name,start:L(v),end:void 0,cancellable:!1,rebookable:!1,guests:d.guests.map(u).sort((k,E)=>+(E.id===this._primaryGuestId)-+(k.id===this._primaryGuestId)||+!E.transactional-+!k.transactional||k.name.localeCompare(E.name)),bookingId:d.id}},p=d=>{var v;if(!cs.has(d.kind))return;const m=a[d.facility],T=H(m.location),_={FLEX:"G+",STANDARD:"ILL",DAS:"DAS",FDS:"DAS",OTHER:"OTHER"};let g={type:"LL",subtype:d.multipleExperiences?"MULTI":_[d.kind],...this.getExperience(H(d.facility),T,m.name),start:{date:d.displayStartDate,time:d.displayStartTime},end:{date:d.displayEndDate,time:d.displayEndTime},cancellable:d.cancellable&&d.kind==="FLEX",rebookable:!1,guests:d.guests.map(b=>({...u(b),entitlementId:b.entitlementId,...b.redemptionsRemaining!==void 0&&{redemptions:b.redemptionsRemaining}})),bookingId:(v=d.guests[0])==null?void 0:v.entitlementId};if(d.multipleExperiences){const b=d.assets.find(k=>k.original);b&&(g={...g,...this.getExperience(H(b.content),H(a[b.content].location))}),g.choices=d.assets.filter(k=>!k.excluded&&!k.original).map(({content:k})=>{const{name:E,location:y}=a[k];return this.getExperience(H(k),H(y),E)}).sort((k,E)=>k.name.localeCompare(E.name))}return g},h=i.map(d=>{if(d.type==="FASTPASS")return p(d);if(d.type&&ls.has(d.type))return l(d)}).filter(d=>!!d&&(d.start.date||o)===o);return this.tracker.update(h,this),h}nextDropTime(e){var o,r;const n=L().time.slice(0,5);return(r=(o=this.data.pdts)==null?void 0:o[e.id])==null?void 0:r.find(i=>i>=n)}logOut(){this.authStore.deleteData(),this.onUnauthorized()}getExperience(e,n,o){var r;return{id:e,name:((r=this.data.experiences[e])==null?void 0:r.name)||o,park:this.parkMap[n]}}cacheGuest(e,n,o){this.guestCache.set(e,{name:n,characterId:o})}async request(e){var u;const{swid:n,accessToken:o}=this.authStore.getData(),r=this.origin+e.path,i={...e.params};((u=e.userId)==null||u)&&(i.userId=n);const{status:a,data:c}=await pe(r,{method:e.method||"GET",params:i,data:e.data,headers:{Authorization:`BEARER ${o}`,"x-user-id":n}});if(a===401)setTimeout(()=>this.logOut());else{const{key:f}=e;if(String(a)[0]==="2"&&(!f||c[f]))return f?c[f]:c}throw new Kt({status:a,data:c})}}const pt="bg1.genie.bookings";class us{constructor(){this.entitlementIds=[],this.mostRecent=new Map,this.expToPark=new Map,this.bookedExpIds=new Set;const{date:e=L().date,entitlementIds:n=[],mostRecent:o={},expToPark:r={},bookedExpIds:i=[]}=JSON.parse(localStorage.getItem(pt)||"{}");this.date=e,this.entitlementIds=n,this.mostRecent=new Map(Object.entries(o)),this.expToPark=new Map(Object.entries(r)),this.bookedExpIds=new Set(i),this.checkDate()}booked(e){return this.bookedExpIds.has(e.id)}async update(e,n){this.checkDate();const o=e.filter(u=>u.type==="LL"&&u.cancellable),r=new Map,i=new Set(this.entitlementIds);this.entitlementIds=o.map(u=>u.guests.map(({id:f,entitlementId:l})=>(i.has(l)||r.set(f,r.has(f)?"":l),l))).flat(1),this.mostRecent=new Map([...this.mostRecent,...r]);const a=new Set(this.mostRecent.values());for(const u of o)u.guests.some(f=>!a.has(f.entitlementId))&&this.bookedExpIds.add(u.id);const c=this.expToPark;this.expToPark=new Map(o.map(u=>[u.id,u.park.id]));for(const[u,f]of c){if(this.expToPark.has(u))continue;const{ineligible:l}=await n.guests({id:u,park:{id:f}}),p=l.some(h=>h.ineligibleReason==="EXPERIENCE_LIMIT_REACHED");this.bookedExpIds[p?"add":"delete"](u)}localStorage.setItem(pt,JSON.stringify({date:this.date,entitlementIds:this.entitlementIds,mostRecent:Object.fromEntries(this.mostRecent),expToPark:Object.fromEntries(this.expToPark),bookedExpIds:[...this.bookedExpIds]}));for(const u of e)u.rebookable=u.cancellable&&u.guests.every(f=>this.mostRecent.get(f.id)===f.entitlementId)}checkDate(){const e=L().date;this.date!==e&&(this.date=e,this.entitlementIds=[],this.mostRecent=new Map,this.expToPark=new Map,this.bookedExpIds=new Set)}}const Xt={"https://vqguest-svc-wdw.wdprapps.disney.com":"WDW","https://vqguest-svc.wdprapps.disney.com":"DLR"};function ds(t){return t in Xt}const fs=t=>t.sort((e,n)=>+n.primary-+e.primary||+n.preselected-+e.preselected||e.name.localeCompare(n.name));class ue extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}class hs{constructor(e){this.onUnauthorized=()=>{},this.origin=e.origin,this.authStore=e.authStore}get resort(){return Xt[this.origin]}url(e){return`${this.origin}/application/v1/guest/${e}`}async getQueues(){return(await pe(this.url("getQueues"))).data.queues.map(({queueId:e,...n})=>({...n,id:e}))}async getQueue(e){const n=(await this.getQueues()).find(o=>o.id===e.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(e){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:e.id}});return fs(n.guests.map(({guestId:o,firstName:r,lastName:i,isPrimaryGuest:a,isPreselected:c,...u})=>({...u,id:o,name:`${r} ${i}`.trim(),primary:!!a,preselected:!!c})))}async joinQueue(e,n){const o=n.map(a=>a.id),{status:r,data:i}=await this.post({resource:"joinQueue",data:{queueId:e.id,guestIds:o}});if(i.responseStatus==="OK"){const a=i.positions.find(c=>c.queueId===e.id&&c.guestIds.length>0&&o.some(u=>c.guestIds.includes(u)));if(!a)throw new ue({status:r,data:i});return{boardingGroup:a.boardingGroup,conflicts:{},closed:!1}}else if(i.responseStatus==="INVALID_GUEST"||i.responseStatus==="CLOSED_QUEUE"){const a=i.responseStatus==="CLOSED_QUEUE",c=new Set,u={};for(const p of i.conflicts)for(const h of p.guestIds){const d=n.find(m=>m.id===h);!d||(u[d.id]=p.conflictType,c.add(h))}const f=n.filter(p=>!c.has(p.id));if(a||f.length===0)return{boardingGroup:null,conflicts:u,closed:a};const l=await this.joinQueue(e,f);return l.conflicts={...u,...l.conflicts},l}else throw new ue({status:r,data:i})}logOut(){this.authStore.deleteData(),this.onUnauthorized()}async post(e){const{status:n,data:o}=await pe(this.url(e.resource),{method:"POST",headers:{Authorization:`BEARER ${this.authStore.getData().accessToken}`},data:e.data});if(n===401&&setTimeout(()=>this.logOut()),!n||n===401||n>=500)throw new ue({status:n,data:o});return{status:n,data:o}}}const Zt=K({resort:"WDW",onUnauthorized:()=>{},logOut:()=>null}),ms=Zt.Provider,Me=()=>Z(Zt),ge={bg:"bg-blue-500",text:"text-blue-500"},en=K(ge),ps=en.Provider,Y=()=>Z(en),_s={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function D(t){const{type:e,className:n,...o}=t;let r=`${_s[e||"normal"]} ${n||""}`;const{bg:i}=Y();return r.includes(" bg-")||(r+=` ${i} text-white`),s("button",{className:`${r} inline-flex items-center justify-center min-w-[36px] rounded-lg px-2 font-semibold disabled:opacity-50`,...o})}function O({onClick:t,disabled:e,children:n}){return s("div",{className:"mb-20"},s("div",{className:"fixed bottom-0 left-0 w-full px-5 pb-5 text-center"},s(D,{className:"max-w-2xl mx-auto shadow-[0px_4px_8px_-1px_#0005]",type:"full",onClick:t,disabled:e},n)))}function gs({title:t,children:e}){const{bg:n,text:o}=Y();function r(i){return Jt(i)?i.type===S?On.map(i.props.children,r):zn(i,{className:`bg-white bg-opacity-90 ${o} ${i.props.className||""}`}):i}return s("div",{className:`flex justify-end gap-x-2 gap-y-1 min-h-[52px] px-3 py-2 text-lg text-white ${n}`},s("h1",{className:"flex-1 self-center py-0.5 text-xl font-semibold overflow-hidden whitespace-nowrap"},t),r(e))}function ie(t){const{children:e,className:n,...o}=t,r={outer:"",inner:"",...typeof n=="string"?{inner:n}:n};return r.outer.match(/\bz-/)||(r.outer+=" z-10"),s("div",{className:`${r.outer} fixed inset-0`,...o},s("div",{className:`${r.inner} max-w-2xl min-h-full mx-auto`},e))}function G({heading:t,buttons:e,className:n,theme:o,containerRef:r,children:i,...a}){return s(ps,{value:o||ge},s(ie,{className:{outer:`bg-white text-black text-base ${n||""}`,inner:"flex flex-col max-w-2xl h-full"},...a},s(gs,{title:t},e),s("div",{ref:r,className:"flex-1 overflow-auto px-3 pb-3"},i)))}const ys="bg1.disclaimer.accepted",bs={bg:"bg-red-600",text:"text-red-600"};function vs(){const t=localStorage,e=ys,[n,o]=N(!!t.getItem(e));return C(()=>{n&&t.setItem(e,"1")},[n,t,e]),n?null:s(ks,{onAccept:()=>o(!0)})}function ks({onAccept:t}){return s(G,{heading:"Warning!",theme:bs},s("p",null,'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'),s(O,{onClick:t},"Accept"))}const ws="17e2767256f";function xs(t){return"deferredUuid"in t&&t.deferredUuid!==void 0}class Ns{constructor(e,n,o,r=!1){this.iframe=e,this.resort=o,this.logging=r,this.handlers={},this.handshakeAcked=!1,this.onMessage=i=>{if(i.source!==this.iframe.contentWindow||i.data==="inner.loaded")return;const a=JSON.parse(i.data);this.logging&&console.log("Message:",a);const c=a.type==="message"?a.eventName:a.type,u=this.handlers[c],f=u?u("data"in a?a.data:null):void 0;xs(a)&&this.send({type:"deferred",action:"resolve",deferredUuid:a.deferredUuid,data:f!=null?f:{}})},this.on("handshake",()=>{this.handshakeAcked||(this.handshakeAcked=!0,this.send({type:"handshakeAck"}),this.logging&&this.sendMessage("setLogLevel",{level:"log"}),this.sendMessage("workflow.execute",{name:"login"}))}),this.on("lightbox.hide",()=>this.open()),this.on("session.dateOfBirth.read",()=>this.open()),this.on("session.loggedin",({token:i})=>{n({swid:i.swid,accessToken:i.access_token,expires:new Date(i.exp)})})}open(){addEventListener("message",this.onMessage),this.iframe.src=this.authPageUrl,this.handshakeAcked=!1}close(){removeEventListener("message",this.onMessage)}on(e,n){this.handlers[e]=n}sendMessage(e,n){this.send({type:"message",eventName:e,data:n})}send(e){var n;(n=this.iframe.contentWindow)==null||n.postMessage(JSON.stringify({...e,name:"lightbox-client-window"}),this.authPageUrl)}get authPageUrl(){return`https://cdn.registerdisney.go.com/v2/TPR-${this.resort}-LBSDK.IOS-PROD/en-US?include=l10n,config,html,js&buildId=${ws}`}}function Ss({resort:t,onLogin:e}){const n=q(null);return C(()=>{if(!n.current)return;const o=new Ns(n.current,e,t);return o.open(),()=>o.close()},[t,e,n]),s("iframe",{title:"Disney Login Form",ref:n,className:"fixed top-0 left-0 w-full h-full border-0"})}function Ts({client:t,authStore:e,children:n}){const[o,r]=N("Blank"),i=vs();C(()=>{t.onUnauthorized=()=>r("LoginForm")},[t]),C(()=>{function c(){if(!(document.hidden||o==="LoginForm"))try{e.getData(),r("Client")}catch{return r("LoginForm")}}return c(),document.addEventListener("visibilitychange",c),()=>{document.removeEventListener("visibilitychange",c)}},[e,o]);const a={Blank:s("div",null),LoginForm:s(Ss,{resort:t.resort,onLogin:c=>{e.setData(c),r("Client")}}),Client:n};return s(ms,{value:t},i||a[o])}const F=Me,tn=K(void 0),Es=tn.Provider,Is=()=>Z(tn),nn=K({current:null,begin:()=>null,end:()=>null}),Cs=nn.Provider,re=()=>Z(nn);async function Rs(t={}){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(o=>{e(o)},o=>{n(o)},t)})}const Ps={maximumAge:15e3,timeout:2e3};function As(t){const[e,n]=N(),o=U(()=>{t(async()=>{try{const{coords:r}=await Rs(Ps);n(i=>i&&r.latitude===i[0]&&r.longitude===i[1]?i:[r.latitude,r.longitude])}catch{n(void 0)}})},[t]);return[e,o]}const Ds=3e3,Ls={alert:"bg-yellow-200",error:"bg-red-200"};function ye(){const[,t]=N(0),[e,n]=N(""),[o,r]=N("alert"),i=U((c,u)=>{n(c),r(u||"alert"),t(f=>(clearTimeout(f),c?self.setTimeout(()=>{n("")},Ds):f))},[]);return[s($s,{message:e,type:o}),i]}function $s({message:t,type:e}){return t?s("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${Ls[e]} text-gray-800`},t):null}function J({children:t,className:e,title:n}){return e||(e=""),e.match(/\bw-\S+\s*/)||(e+=" w-4"),e.match(/\bh-\S+\s*/)||(e+=" h-auto"),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:e,role:"img"},n&&s("title",null,n),t)}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ge({className:t}){return s(J,{className:t},s("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"}))}async function sn(t){return new Promise(e=>{setTimeout(e,t)})}function Os(){const[t,e]=N(0),n=U(async(r,i=500)=>{e(c=>c+1);const a=sn(i);try{await r()}finally{await a,e(c=>c-1)}},[]);return[t>0?s(on,null):null,n]}function on(){const{bg:t}=Y();return s(ie,{className:"flex items-center bg-white bg-opacity-75"},s("div",{className:"w-[50px] mx-auto"},s("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${t}`},s(Ge,{className:"animate-spin w-full text-white"}))))}function Be(){const[t,e]=Os(),n=!!t,[o,r]=ye();return{loadData:U(async(c,u)=>{const f={error:"Unknown error occurred",request:"Network request failed",...u};r("");let l=()=>null;const p=new Promise(d=>{l=()=>d(null)});async function h(...d){await p,r(...d)}await e(async()=>{try{await c(h)}catch(d){if(d instanceof Kt){const{status:m}=d.response;h(m in f?f[m]:f.request,"error")}else console.error(d),h(f.error,"error")}}),l()},[e,r]),loaderElem:s(S,null,o,t),isLoading:n}}const Ms=6e4,Gs=30,Bs=60,_t="bg1.genie.tipBoard.starred",Us=(t,e)=>+!t.lp-+!e.lp,Fs=(t,e)=>(t.priority||1/0)-(e.priority||1/0),Hs=(t,e)=>(t.sort||1/0)-(e.sort||1/0),xe=(t,e)=>(e.standby.waitTime||-1)-(t.standby.waitTime||-1),Ne=(t,e)=>{var n,o;return(((n=t==null?void 0:t.flex)==null?void 0:n.nextAvailableTime)||"").localeCompare(((o=e==null?void 0:e.flex)==null?void 0:o.nextAvailableTime)||"")},Ws=(t,e)=>t.name.toLowerCase().localeCompare(e.name.toLowerCase()),js=(t,e)=>t.land.sort-e.land.sort,gt=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)),zs=(t,e,n)=>t.geo===e.geo?0:t.geo?e.geo?n?gt(t.geo,n)-gt(e.geo,n):0:-1:1;function Ys(t,e){const{n,s:o,e:r,w:i}=t.geo,[a,c]=e;return a<n&&a>o&&c<r&&c>i}function yt(t){const[e,n]=t.split(":").map(Number);return e*60+n}const Vs={priority:(t,e)=>Us(t,e)||Fs(t,e)||xe(t,e)||Ne(t,e),standby:(t,e)=>xe(t,e)||Ne(t,e),soonest:(t,e)=>Ne(t,e)||xe(t,e),nearby:(t,e,n)=>zs(t,e,n),aToZ:()=>0,land:(t,e)=>js(t,e)||Hs(t,e)};function Js({park:t,sortType:e,plusOnly:n}){const o=F(),{loadData:r,loaderElem:i,isLoading:a}=Be(),[c,u]=As(r),[f,l]=N([]),[{refreshing:p},h]=N({refreshing:!1,lastRefresh:0}),[d,m]=N(new Set);C(()=>{o.updateTracker()},[o]);const T=U((g=!0)=>{h(v=>{if(!g){if(Date.now()-v.lastRefresh<Ms)return v;o.updateTracker()}return{refreshing:!0,lastRefresh:v.lastRefresh}})},[o]);Ee(()=>{l([]),T(!0)},[t,T]),Ee(()=>{!p||(h({refreshing:!1,lastRefresh:Date.now()}),r(async()=>{e==="nearby"&&u();const g=await o.experiences(t),v=yt(L().time);l(g.map(b=>{var y;const k=b.standby.waitTime||0,E=(y=b==null?void 0:b.flex)==null?void 0:y.nextAvailableTime;return{...b,lp:!!E&&k>=Gs&&yt(E)-v<=Math.min(Bs,(4-Math.trunc(b.priority||4))/3*k),starred:d.has(b.id)}}))}))},[o,r,t,p,e,d,u]),C(()=>{e==="nearby"&&u()},[e,u]),C(()=>{try{const g=JSON.parse(localStorage.getItem(_t)||"[]"),v=new Set(g);m(v),l(b=>b.map(k=>({...k,starred:v.has(k.id)})))}catch(g){console.error(g)}},[]);function _(g){const{id:v}=g;g.starred=!g.starred,g.starred?d.add(v):d.delete(v),m(new Set(d)),localStorage.setItem(_t,JSON.stringify([...d]))}return{experiences:f.filter(g=>(!n||!!g.flex)&&(n||g.standby.available||g.standby.unavailableReason==="TEMPORARILY_DOWN")).sort((g,v)=>{var b,k;return n&&(+!g.starred-+!v.starred||Number((b=v==null?void 0:v.flex)==null?void 0:b.available)-Number((k=g==null?void 0:g.flex)==null?void 0:k.available))||Vs[e==="nearby"&&!(c&&Ys(t,c))?"priority":e](g,v,c)||Ws(g,v)}),refresh:T,toggleStar:_,isLoading:a,loaderElem:i}}/**
 * Clock icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function rn(t){return s(J,{...t},s("path",{d:"M10.293 11.707l-3.293-3.293v-4.414h2v3.586l2.707 2.707zM8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14c-3.314 0-6-2.686-6-6s2.686-6 6-6c3.314 0 6 2.686 6 6s-2.686 6-6 6z"}))}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Re(t){return s(J,{...t},s("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"}))}/**
 * Cog icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Qs(t){return s(J,{...t},s("path",{d:"M14.59 9.535c-0.839-1.454-0.335-3.317 1.127-4.164l-1.572-2.723c-0.449 0.263-0.972 0.414-1.529 0.414-1.68 0-3.042-1.371-3.042-3.062h-3.145c0.004 0.522-0.126 1.051-0.406 1.535-0.839 1.454-2.706 1.948-4.17 1.106l-1.572 2.723c0.453 0.257 0.845 0.634 1.123 1.117 0.838 1.452 0.336 3.311-1.12 4.16l1.572 2.723c0.448-0.261 0.967-0.41 1.522-0.41 1.675 0 3.033 1.362 3.042 3.046h3.145c-0.001-0.517 0.129-1.040 0.406-1.519 0.838-1.452 2.7-1.947 4.163-1.11l1.572-2.723c-0.45-0.257-0.839-0.633-1.116-1.113zM8 11.24c-1.789 0-3.24-1.45-3.24-3.24s1.45-3.24 3.24-3.24c1.789 0 3.24 1.45 3.24 3.24s-1.45 3.24-3.24 3.24z"}))}const qs="_SELECT_RADIO_BUTTON_";function bt(t){const{options:e,value:n,onChange:o,...r}=t,[i,a]=N(!1),[c,u]=N(0),f=q(null),l=q(null);Ee(()=>{var k;if((k=e[0])!=null&&k.icon)return;const _=f.current,g=_==null?void 0:_.firstChild;if(!g)return;const v=g.nodeValue;if(!v)return;let b=0;for(const E of e)g.nodeValue=E.text,b=Math.max(_.offsetWidth,b);g.nodeValue=v,u(b)},[e]);const p=()=>{var _;return(_=l.current)==null?void 0:_.querySelector("input:checked")};C(()=>{var g;if(!i)return;(g=p())==null||g.focus();const _=v=>{var b;(b=l.current)!=null&&b.contains(v.target)||a(!1)};return addEventListener("focusin",_),()=>removeEventListener("focusin",_)},[i]);const h=()=>{const _=p();_&&o(_.value),a(!1)},{icon:d,text:m}=e.find(_=>_.value===n)||e[0];let T=!1;return s(S,null,s(D,{...r,onClick:()=>a(!0)},d||s("span",{style:{minWidth:`${c}px`},ref:f},m),s(J,{className:"w-2.5 ml-2"},s("path",{d:"m6.8273 12.401-5.6333-7.7812a1.0212 1.0212 117.05 0 1 0.82716-1.62l11.958-2e-7a1.0212 1.0212 62.952 0 1 0.82714 1.62l-1.6438 2.2705a79984 79984 125.9 0 0-2.3456 3.2401l-1.6437 2.2706a1.4479 1.4479 180 0 1-2.3456 4.4e-5z"}))),i&&s(ie,{className:{outer:"bg-black bg-opacity-75",inner:"flex items-center justify-center h-full"},onClick:_=>{var v;const g=_.target;if(!((v=l.current)!=null&&v.contains(g)))return a(!1);if(g.tagName==="INPUT"&&!T)return h();T=!1},onKeyDown:({key:_})=>{["Enter"," "].includes(_)?h():_.startsWith("Arrow")&&(T=!0)},"data-testid":"select-shade"},s("ul",{className:"overflow-auto min-w-[50%] max-h-[90%] rounded-lg bg-white text-black",ref:l},e.map(_=>s("li",{className:"border-t-2 first:border-0 border-gray-300",key:_.value},s("label",{className:"flex flex-row items-center px-4 py-3"},s("input",{type:"radio",name:qs,defaultChecked:_.value===n,value:_.value,className:"w-4 h-4 mr-2.5"})," ",_.icon&&s("span",{"aria-hidden":"true",className:"mr-2.5"},_.icon)," ",_.text))))))}/**
 * Arrow down icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function vt(t){return s(J,{...t},s("path",{d:"M8 15.5l7.5-7.5h-4.5v-8h-6v8h-4.5z"}))}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ks(t){return s(J,{...t},s("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"}))}function Ue({heading:t,onClose:e,children:n}){return s(ie,{className:{outer:"bg-black bg-opacity-75",inner:"p-2 flex items-center justify-center h-full"},onClick:e},s("div",{className:"flex flex-col max-h-[90%] rounded-lg px-3 py-4 bg-white",onClick:o=>o.stopPropagation()},s("h2",{className:"mt-0"},t),s("div",{className:"flex-1 overflow-auto"},n),s("div",{className:"pt-4"},s(D,{type:"full",onClick:e},"Close"))))}const an=K({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),Xs=an.Provider,Fe=()=>Z(an),Zs="https://bg1.joelface.com/ping",kt="bg1.ping.date";async function ln(){const{date:t}=L();if(localStorage.getItem(kt)===t)return;const{status:n}=await pe(Zs,{method:"POST"});n===204&&localStorage.setItem(kt,t)}function $({guests:t,selectable:e,conflicts:n}){return t.length===0?null:s("ul",{className:"mt-2"},t.map(o=>{var r;return s("li",{key:o.id,className:"px-3 py-1"},s("label",{className:"flex items-center"},e&&s("input",{type:"checkbox",checked:e.isSelected(o),onChange:()=>e.onToggle(o),className:"mr-3"}),s("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white"},o.avatarImageUrl?s("img",{src:o.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):s("span",{"aria-hidden":"true"},o.name[0])),s("span",{className:"leading-tight"},o.name,s("br",null),(n==null?void 0:n[o.id])&&s("span",{className:"text-xs font-semibold text-red-700 uppercase"},(r=n[o.id])==null?void 0:r.replace(/_/g," ")))))}))}function He(t){return s("div",{className:"mt-4 text-lg"},t.end?"Arrive by":"Reservation at",":"," ",s("span",{className:"ml-0.5 font-semibold"},qt(t)))}function eo({booking:t,onClose:e}){const n=F(),[o,r]=N(new Set),{loadData:i,loaderElem:a}=Be(),{guests:c}=t,u=o.size===0,f=o.size===c.length;function l(){i(async()=>{u||await n.cancelBooking([...o]),e(c.filter(d=>!o.has(d)))})}const{name:p,park:h}=t;return s(G,{heading:"Your Lightning Lane",theme:h.theme},s("h2",null,p),s("div",null,h.name),s(He,{...t}),s("div",{className:"ml-3"},s("label",{className:"flex items-center py-4"},s("input",{type:"checkbox",checked:f,onChange:()=>r(new Set(f?[]:c))}),s("span",{className:"ml-3"},"Select All"))),!u&&s("div",{className:"mb-4"},s("h3",null,"Cancel These Guests"),s($,{guests:c.filter(d=>o.has(d)),selectable:{isSelected:()=>!0,onToggle:d=>{const m=new Set(o);m.delete(d),r(m)}}})),!f&&s("div",null,s("h3",null,"Select Guests to Cancel"),s($,{guests:c.filter(d=>!o.has(d)),selectable:{isSelected:()=>!1,onToggle:d=>r(new Set(o).add(d))}})),s(O,{onClick:l},u?"Back":"Cancel "+(f?"Reservation":"Guests")),a)}function cn({booking:t,onClose:e,isNew:n}){var v;const o=F(),{name:r,park:i,choices:a,type:c}=t,u=c==="LL",f=Is()||i,l=re(),[p,h]=N(u?t.guests:void 0),[d,m]=N(!1);if(d&&u&&p)return s(eo,{booking:{...t,guests:p},onClose:b=>{m(!1),b.length>0?h(b):e(b)}});const T=new Map([[f,[]],...o.parks.map(b=>[b,[]])]);for(const b of a||[])(v=T.get(b.park))==null||v.push(b);const _=[...T.keys()],g=(a?_.length===1?_[0]:{theme:ge}:i).theme;return s(G,{heading:"Your "+(u?t.subtype==="DAS"?"DAS Return Time":"Lightning Lane":"Reservation"),theme:g,buttons:t.rebookable&&s(D,{onClick:()=>l.begin(t)},"Rebook")},a?s("h2",null,"Multiple Experiences"):s(S,null,s("h2",null,r),s("div",null,i.name)),s(He,{...t}),a&&s(S,null,s("p",null,s("b",null,r)," was temporarily unavailable during your return time. You may redeem this Lightning Lane at one of these replacement experiences:"),[...T].filter(([,b])=>b.length>0).map(([b,k=[]])=>{var E;return s("div",{key:b.id,className:`mt-4 rounded ${((E=b.theme)==null?void 0:E.bg)||""}`},s("h3",{className:"mt-0 p-1 text-white text-center"},b.name),s("ul",{className:"list-disc py-2 pl-8 bg-white bg-opacity-90"},k.map(y=>s("li",{key:y.id},y.name))))})),s("div",{className:"flex mt-4"},s("h3",{className:"inline mt-0"},"Your Party"),t.cancellable&&s(D,{type:"small",onClick:()=>m(!0),className:"ml-3"},"Cancel")),s($,{guests:p||t.guests,conflicts:p&&Object.fromEntries(p.filter(b=>{var k;return((k=b.redemptions)!=null?k:1)!==1}).map(b=>[b.id,`Redemptions left: ${b.redemptions}`]))}),s(O,{onClick:()=>e(p)},n?"Done":"Back"))}function un({children:t}){return s("p",{className:"border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100"},t)}function dn(){const{ineligible:t}=Fe();return s($,{guests:t,conflicts:Object.fromEntries(t.map(e=>[e.id,e.eligibleAfter?`TOO EARLY (${V(e.eligibleAfter)})`:e.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function We({buttonText:t,onSubmit:e}){const{eligible:n,ineligible:o,selected:r,setSelected:i}=Fe(),[a,c]=N(),[u,f]=ye(),{maxPartySize:l}=F();return a?s(S,null,s("h3",null,"Choose Your Party"),s($,{guests:n,selectable:{isSelected:h=>a.has(h),onToggle:h=>c(d=>{f(""),d=new Set(d);const m=d.has(h)?"delete":"add";return m==="add"&&d.size>=l?f(`Maximum party size: ${l}`):d[m](h),d})}}),o.length>0&&s(S,null,s("h3",null,"Ineligible Guests"),s(dn,null)),s(O,{disabled:a.size===0,onClick:()=>{i([...a]),c(void 0)}},"Confirm Party"),u):s(S,null,n.length>l&&r.length===l&&s(un,null,"Party size restricted"),s("div",{className:"mt-4"},s("h3",{className:"inline mt-0"},"Your Party"),s("span",null,s(D,{type:"small",onClick:()=>c(new Set(r)),className:"ml-3"},"Edit"))),s($,{guests:r}),s(O,{onClick:e},t))}function to({offer:t,onBook:e}){const n=re();return s(S,null,n.current&&s(un,null,"Rebooking resets the two hour timer"),s(He,{...t}),t.changed&&s("div",{className:"text-sm"},s("strong",null,"Note:")," Return time has been changed"),s(We,{buttonText:`${n.current?"Rebook":"Book"} Lightning Lane`,onSubmit:e}))}const wt="https://widget.time.is/t.js";function no(){if([...document.scripts].some(e=>e.src===wt))return;const t=document.createElement("script");t.src=wt,t.onload=fn,document.head.appendChild(t)}const de={};function fn(){"time_is_widget"in self&&self.time_is_widget.init(de)}function so(t){no(),de[t]||(de[t]={}),fn()}function hn(t,e){const n=document.getElementById(t);if(!n||n.firstElementChild)return e();n.textContent=L().time,setTimeout(()=>hn(t,e),100)}function oo({id:t,onSync:e}){return C(()=>{so(t),hn(t,e)},[t,e]),s("time",{id:t})}const io={WDW:"Orlando_z161",DLR:"Anaheim_z14e"},ro=5e3;function mn({resort:t,time:e,label:n}){const o=io[t],[r,i]=N(null);C(()=>{setTimeout(()=>i(c=>c||!1),ro)},[]);const a=U(()=>i(!0),[]);return s("table",{className:"mt-4 mx-auto text-gray-500"},s("tbody",null,s(xt,{heading:n,time:s("time",null,e||"--:--:--")}),s(xt,{heading:s("a",{href:`https://time.is/${o.split("_")[0]}`,id:"time_is_link",target:"_blank",rel:"noreferrer"},"Current time"),time:s(S,null,s(oo,{id:o,onSync:a}),r===!1&&s("span",{className:"text-sm font-sans font-semibold text-red-600"}," ","(unsynced)"))})))}function xt({heading:t,time:e}){return s("tr",null,s("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase"},t,":"),s("td",{className:"text-xl font-mono leading-tight"},"\uFEFF",e))}function ao({startTime:t,onRefresh:e}){return s(S,null,t&&s(mn,{resort:"WDW",time:t,label:"Booking start"}),s("h3",{className:"mt-4"},"Not Available Yet"),t?s("p",null,"At"," ",s("time",{dateTime:t,className:"font-semibold"},V(t)),", tap the ",s("span",{className:"font-semibold"},"Check Availability")," ","button below to start booking this Lightning Lane."):s("p",null,"Sorry, but you can't make a Lightning Lane reservation for this attraction yet."),s(We,{buttonText:"Check Availability",onSubmit:e}))}function lo({onClose:t}){const{ineligible:e}=Fe(),{eligibleAfter:n}=e[0]||{},o=re();return s(S,null,n&&s("div",{className:"mt-4 border-2 border-green-600 rounded p-1 uppercase font-semibold text-center text-green-600 bg-green-100"},"Eligible at ",V(n)),o.current?s(S,null,s("h3",null,"Unable to Rebook"),s("p",null,"Your current reservation cannot be rebooked to this experience due to the following conflicts:")):s(S,null,s("h3",null,"No Eligible Guests"),s("p",null,"No one in your party is currently eligible for this Lightning Lane.")),s(dn,null),s(O,{onClick:t},"Back"))}function co({onRefresh:t}){return s(S,null,s("h3",null,"No Guests Found"),s("p",null,"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."),s(O,{onClick:t},"Try Again"))}function uo({onClose:t}){return s(S,null,s("h3",null,"No Reservations Available"),s("p",null,"There aren't enough reservation slots available for your entire party. If only part of your group wishes to go on this attraction, edit your party to check again. Otherwise, go back to the tip board and select another attraction."),s(We,{buttonText:"Back",onSubmit:t}))}function pn({booking:t,button:e,badge:n}){return s("div",{className:"flex items-center gap-x-3"},s("div",{className:"flex-1 min-w-0"},s("div",{className:"flex items-center gap-x-2 text-gray-500 text-sm font-semibold uppercase"},n,t.subtype==="DAS"&&s(S,null,s("span",{className:"px-1 rounded bg-gray-400 text-white"},"DAS")," "),qt(t)),s("div",{className:"text-lg font-semibold leading-tight truncate"},t.choices?"Multiple Experiences":t.name)),e&&s("div",null,e))}function _n(){const t=re(),e=Y();return t.current?s("div",{className:`sticky top-0 -mx-3 pb-1 ${e.bg}`},s("div",{className:"pb-3 bg-white"},s("div",{className:`pb-1 ${e.bg} text-white text-sm font-semibold uppercase text-center`},"Rebooking"),s("div",{className:"mt-2 px-3"},s(pn,{booking:t.current,button:s(D,{type:"small",onClick:()=>t.end(!0)},"Keep")})))):null}function fo({onClose:t}){const e=F(),n=ge,[o,r]=N(),[i,a]=N(),[c,u]=N(!1);function f(p){!i||(a(void 0),p&&r(h=>{if(!!h)return p.length>0?i.guests=p:h.splice(h.indexOf(i),1),h}))}C(()=>{u(!0),e.bookings().then(p=>r(p))},[e]);function l(){u(!1),setTimeout(t,300)}return i?s(cn,{booking:i,onClose:f}):s(S,null,s(ie,{onClick:l,"data-testid":"panel-shade",className:{inner:"bg-black bg-opacity-75"}}),s(G,{heading:"Your Day",buttons:s(D,{onClick:l},"Close"),className:`top-auto ${c?"h-[60%]":"h-0"} duration-200 ease-linear`},o&&o.length>0?s("ul",null,(o||[]).map(p=>s("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",key:p.bookingId},s(pn,{booking:p,button:s(D,{type:"small",onClick:()=>a(p)},"More"),badge:p.rebookable&&s("span",{title:"Rebookable",className:`inline-block w-2.5 h-2.5 rounded-full ${n.bg}`})})))):s("div",{className:"mt-4 text-sm font-semibold text-center uppercase  text-gray-500"},o&&"No current reservations")))}function gn({onOpen:t,onClose:e,...n}){const[o,r]=N(),i=t||r,a=e||(()=>r(void 0));return s(S,null,s(D,{...n,onClick:()=>i(s(fo,{onClose:a})),title:"Your Day"},s(rn,null)),o)}function ho({experience:t,onClose:e}){const n=F(),o=re(),[r,i]=N(),[a,c]=N(!t.flex.available&&t.flex.enrollmentStartTime!==void 0),[u,f]=N(a?null:void 0),[l,p]=N(),{loadData:h,loaderElem:d}=Be();async function m(){if(!u||!r)return;let k=null;await h(async()=>{const E=new Set(r.selected.map(x=>x.id));o.current&&await n.cancelBooking(o.current.guests.filter(x=>E.has(x.id)));try{k=await n.book(u)}finally{o.end()}const y=k.guests.filter(x=>!E.has(x.id));y.length>0&&(await n.cancelBooking(y),k.guests=k.guests.filter(x=>E.has(x.id))),ln()},{410:"Offer expired"}),k&&p(k)}function T(){h(async k=>{var x;const y=(await n.experiences(t.park)).find(A=>A.id===t.id);(x=y==null?void 0:y.flex)!=null&&x.available?(c(!1),f(void 0)):k("Reservations not open yet")})}function _(){u&&n.cancelOffer(u),e()}const g=U(()=>{h(async()=>{try{let k=await n.guests(t);const E=o.current;if(E){const y=new Set(E.guests.map(A=>A.id)),x=[...k.eligible,...k.ineligible].filter(A=>y.has(A.id)&&!(A.ineligibleReason==="TOO_EARLY"||A.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"&&t.id===E.id));k=x.length>0?{eligible:[],ineligible:x}:{eligible:E.guests,ineligible:[]}}i({...k,selected:k.eligible.slice(0,n.maxPartySize),setSelected:y=>i(x=>{if(!x)return x;const A=new Set(x.selected);return c(B=>(B||f(I=>I===null||y.some(R=>!A.has(R))?void 0:I),B)),{...x,selected:y}})})}catch(k){throw i({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),k}})},[n,t,o,h]);C(()=>{r||g()},[r,g]);const v=U(k=>{!r||r.selected.length===0||h(async()=>{try{const E=await n.offer({experience:t,guests:r.selected}),{ineligible:y}=E.guests;if(y.length>0){const x=new Set(y.map(B=>B.id)),A=B=>!x.has(B.id);i({...r,eligible:r.eligible.filter(A),ineligible:[...y,...r.ineligible],selected:r.selected.filter(A)})}E.active&&(u&&(E.changed=!1),f(E))}catch(E){throw k||f(null),E}},{410:u?"No reservations available":""})},[n,t,r,u,h]);if(C(()=>{u===void 0&&v()},[u,v]),l)return s(cn,{booking:l,onClose:e,isNew:!0});const b=(r==null?void 0:r.eligible.length)===0&&(r==null?void 0:r.ineligible.length)===0;return s(G,{heading:"Lightning Lane",theme:t.park.theme,buttons:s(S,null,s(gn,null),r&&(a||u||b)&&s(D,{onClick:_},"Cancel"),!a&&u!==void 0&&s(D,{onClick:v,title:"Refresh Offer"},s(Ge,null)))},s(_n,null),s("h2",null,t.name),s("div",null,t.park.name),s(Xs,{value:r||{eligible:[],ineligible:[],selected:[],setSelected:()=>null}},(r==null?void 0:r.eligible.length)===0?b?s(co,{onRefresh:g}):s(lo,{onClose:e}):!r||u===void 0?s("div",null):a?s(ao,{startTime:t.flex.enrollmentStartTime,onRefresh:T}):u===null?s(uo,{onClose:e}):s(to,{offer:u,onBook:m})),d)}function je({label:t,children:e}){return s("div",{className:"flex items-center flex-1 whitespace-nowrap"},s("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500"},t)," ",e)}function mo({experience:t,onClick:e}){const{flex:n}=t;return s(je,{label:"Genie+"},s("span",null,s(D,{onClick:()=>e(t)},n.nextAvailableTime?V(n.nextAvailableTime):"none")))}function yn({children:t}){return s("div",{className:"mt-8 flex justify-center"},s("div",null,s("h2",{className:"mt-0 pl-1 text-gray-500 text-sm leading-tight uppercase"},"Symbols"),s("div",{className:"border-2 border-gray-500 rounded px-2 py-0.5 bg-gray-100"},s("table",null,s("tbody",null,t)))))}function _e({sym:t,def:e,onInfo:n}){return s("tr",null,s("th",{className:"py-0.5 text-center font-bold"},t),s("td",{className:"pl-3 py-0.5"},e),n&&s("td",{className:"pl-3 py-0.5"},s(D,{type:"small",onClick:n},"Info")))}const bn="bg1.genie.partyIds";function vn(){const t=JSON.parse(localStorage.getItem(bn)||"[]");return Array.isArray(t)?t:[]}function po(){const t=F();C(()=>t.setPartyIds(vn()),[t])}function _o({onClose:t}){const e=F(),[n,o]=N(!0),[r,i]=N(),[a,c]=N(()=>{const h=new Set(vn());return o(h.size===0),h});function u(){const h=[...a];localStorage.setItem(bn,JSON.stringify(h)),e.setPartyIds(h),t()}C(()=>{e.guests().then(h=>{i([...h.eligible,...h.ineligible].sort((d,m)=>+!d.primary-+!m.primary||d.name.localeCompare(m.name)))})},[e]),C(()=>{n&&c(new Set)},[n]);const f=r==null?void 0:r.filter(h=>a.has(h.id)),l=r==null?void 0:r.filter(h=>!a.has(h.id)),p=h=>s("li",null,s("label",{className:"flex items-center mt-2"},s("input",{type:"radio",name:"auto",onChange:()=>o(h.auto),checked:n===h.auto,className:"mr-2"})," ",h.children));return s(G,{heading:"Party Selection",buttons:s(D,{onClick:t},"Cancel")},s("p",null,"By default, all eligible guests (up to a maximum of 12) are automatically selected when you book a Lightning Lane. If you would like to limit who you book for, you can manually select your party here."),s("ul",null,s(p,{auto:!0},"Book for all eligible guests"),s(p,{auto:!1},"Only book for selected guests")),n?null:(r==null?void 0:r.length)===0?s("p",{className:"text-red-700"},"No guests to select"):f&&l?s(S,null,f.length>0&&s(S,null,s("h3",null,"Your Party"),s($,{guests:f,selectable:{isSelected:()=>!0,onToggle:h=>{const d=new Set(a);d.delete(h.id),c(d)}}})),l.length>0&&s(S,null,s("h3",null,"Add to Your Party"),s($,{guests:l,selectable:{isSelected:()=>!1,onToggle:h=>{const d=new Set(a);d.add(h.id),c(d)}}}))):s(on,null),s(O,{disabled:!n&&a.size===0,onClick:u},"Save"))}function go({experience:{type:t,standby:e}}){return e.displayNextShowTime||t==="ENTERTAINMENT"&&!e.waitTime?s(bo,{standby:e}):s(yo,{standby:e})}const yo=({standby:t})=>s(je,{label:"Standby"},t.available?s(wn,{time:t.waitTime!==void 0?t.waitTime+" min":"now"}):s(xn,{text:"down"})),bo=({standby:t})=>s(je,{label:s(S,null,"Next ",s("span",{className:"hidden xs:inline"},"Show"))},t.displayNextShowTime?s(wn,{time:t.displayNextShowTime}):s(xn,{text:"none"})),kn="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",wn=({time:t})=>s("span",{className:`${kn} border-gray-500 text-gray-500 bg-gray-100`},t),xn=({text:t})=>s("span",{className:`${kn} border-red-600 text-red-600 bg-red-100`},t);function vo({bookTime:t,dropTime:e}){const n=Y();return!t&&!e?null:s("div",{className:`flex justify-center gap-x-10 -mx-3 px-3 pb-1 ${n.bg} text-white text-sm font-semibold uppercase text-center`},s(Nt,{label:"Book",time:t}),s(Nt,{label:"Drop",time:e}))}function Nt({label:t,time:e}){if(!e)return null;e=e.slice(0,5);const n=L().time.slice(0,5);return s("div",null,t,":"," ",s("time",{dateTime:e,className:"whitespace-nowrap"},e>n?V(e):"now"))}const St=t=>t.booked&&!t.starred;function ko({experiences:t,refresh:e,toggleStar:n,showModal:o}){po();const r=F(),i=Y(),a=t[0],c=a&&a.flex.enrollmentStartTime,u=a&&r.nextDropTime(a.park),f=()=>o(s(xo,{onClose:()=>o(null)})),l=()=>o(s(No,{dropTime:u,onClose:()=>o(null)})),p=m=>s("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",key:m.id+(m.starred?"*":"")},s("div",{className:"flex items-center gap-x-2 mt-2"},s(wo,{experience:m,toggleStar:n}),s("h3",{className:"flex-1 mt-0 text-lg font-semibold leading-tight truncate"},m.name),m.lp?s(Tt,{name:"Lightning Pick",icon:Re,onClick:f}):u&&m.drop?s(Tt,{name:"Upcoming Drop",icon:vt,onClick:l}):null),m.flex.preexistingPlan&&s("div",{className:"mt-2 border-2 border-green-600 rounded p-1 text-sm uppercase font-semibold text-center text-green-600 bg-green-100"},"Lightning Lane Booked"),s("div",{className:"flex flex-wrap gap-1.5 mt-2"},s(go,{experience:m}),s(mo,{experience:m,onClick:T=>o(s(ho,{experience:T,onClose:()=>{o(null),e(!1)}}))}))),h=t.filter(m=>!St(m)),d=t.filter(St).sort((m,T)=>m.name.localeCompare(T.name));return s(S,null,s(_n,null),s(vo,{bookTime:c||r.nextBookTime,dropTime:u}),s("ul",{"data-testid":"unbooked"},h.map(p)),d.length>0&&s(S,null,s("h2",{className:`-mx-3 px-3 py-1 text-sm uppercase text-center ${i.bg} text-white`},"Previously Booked"),s("ul",{"data-testid":"booked"},d.map(p))),s(yn,null,s(_e,{sym:s(Re,{className:i.text}),def:"Lightning Pick",onInfo:f}),s(_e,{sym:s(vt,{className:i.text}),def:"Upcoming Drop",onInfo:l})))}function Tt({name:t,icon:e,onClick:n}){const o=Y();return s("button",{title:`${t} (more info)`,className:`-mx-2 px-2 ${o.text}`,onClick:n},s(e,null))}function wo({experience:t,toggleStar:e}){const n=Y();return s("button",{title:`${t.starred?"Unfavorite":"Favorite"}`,className:"-m-2 p-2",onClick:()=>e(t)},s(Ks,{className:t.starred?n.text:"text-gray-300"}))}function xo(t){return s(Ue,{heading:"Lightning Pick",...t},s("p",null,"When an attraction with a long wait has a Lightning Lane return time in the near future, it's highlighted as a Lightning Pick. Book these quick before they're gone!"))}function No({dropTime:t,onClose:e}){return s(Ue,{heading:"Upcoming Drop",onClose:e},s("p",null,"This attraction may be part of the"," ",t?s("time",{dateTime:t,className:"font-semibold"},V(t)):"next"," ","drop of additional Lightning Lane inventory, with earlier return times than what's currently being offered. Availability varies but is always limited, so be sure you're ready to book when the drop time arrives!"))}function Nn({type:t}){const e=Me();return s(D,{type:t,onClick:()=>e.logOut()},"Log Out")}const So={party:_o};function To({onClose:t}){const[e,n]=N(),o=U(()=>n(void 0),[]);if(e){const r=So[e];return s(r,{onClose:o})}return s(G,{heading:"Settings"},s("ul",{className:"mt-4"},s(Et,{button:s(D,{onClick:()=>n("party")},"Select Party"),desc:"BG1's automatic party selection works great for most people, but manually specifying your party may be useful for larger groups or other special situations."}),s(Et,{button:s(Nn,null),desc:"You should only need to use this if you logged in with the wrong account."})),s(O,{onClick:t},"Close"))}function Et({button:t,desc:e}){return s("li",null,s("div",{className:"text-center"},t),s("p",{className:"mt-2"},e))}function Eo({experiences:t,showModal:e}){const n=r=>{var i;e(s(Ue,{heading:r.name,onClose:()=>e(null)},s("h3",{className:"w-[75vw] mt-2 text-gray-500 text-sm font-semibold uppercase"},"Upcoming ",r.type==="CHARACTER"?"Appearances":"Shows"),s("ul",{className:"list-disc mt-2 pl-6"},!!r.standby.displayNextShowTime&&s("li",null,r.standby.displayNextShowTime),(i=r.displayAdditionalShowTimes)==null?void 0:i.map(a=>s("li",{key:a},a)))))},o=new Map;return t.forEach(r=>{var i,a;o.has(r.land)||o.set(r.land,{ATTRACTION:[],ENTERTAINMENT:[],CHARACTER:[]}),(a=(i=o.get(r.land))==null?void 0:i[r.type])==null||a.push(r)}),s(S,null,[...o].map(([r,i])=>s("div",{key:r.name},s("h2",{className:`pr-1 ${r.theme.text} text-sm font-semibold text-right uppercase`},r.name),s("div",{className:"rounded overflow-hidden"},s(Se,{title:"Attractions",land:r,experiences:i.ATTRACTION,onInfoClick:n}),s(Se,{title:"Entertainment",land:r,experiences:i.ENTERTAINMENT,onInfoClick:n}),s(Se,{title:"Characters",land:r,experiences:i.CHARACTER,onInfoClick:n})))),s(yn,null,s(_e,{sym:"*",def:"No listed wait/show time"}),s(_e,{sym:"\u274C",def:"Temporarily down"})))}function Se({title:t,land:e,experiences:n,onInfoClick:o}){return n.length===0?null:s("div",{className:`${e.theme.bg}`,"data-testid":`${e.name}-${t}`},s("h3",{className:"mt-0 py-1 text-white text-xs font-semibold text-center uppercase"},t),s("table",{className:"w-full bg-white bg-opacity-90 leading-snug"},s("tbody",null,n.map(r=>{var i;return s("tr",{className:"group",key:r.id},s("td",{className:`${r.standby.displayNextShowTime?"min-w-[5.625rem]":"min-w-[2.75rem]"} px-2 py-0.5 group-first:pt-1 group-last:pb-1 ${e.theme.bg} bg-opacity-10 ${e.theme.text} font-bold text-center uppercase whitespace-nowrap`},r.standby.displayNextShowTime?r.displayAdditionalShowTimes&&r.displayAdditionalShowTimes.length>1?s("button",{onClick:()=>o(r),className:"underline"},r.standby.displayNextShowTime):r.standby.displayNextShowTime:r.standby.available?(i=r.standby.waitTime)!=null?i:"*":"\u274C"),s("td",{className:"w-full px-1 pl-2 py-0.5 group-first:pt-1 group-last:pb-1"},r.name))}))))}const It="bg1.genie.tipBoard.park",Io=[{value:"priority",text:"Priority"},{value:"nearby",text:"Nearby"},{value:"standby",text:"Standby"},{value:"soonest",text:"Soonest"},{value:"aToZ",text:"A to Z"}],Sn={"Genie+":{title:s(S,null,"G",s("span",{className:"hidden xs:inline"},"enie"),"+"),component:ko,plusOnly:!0},Times:{title:"Times",component:Eo,sortType:"land"}},Tn={name:"Genie+",...Sn["Genie+"]},En=K({...Tn,change:()=>{}});function Co(){var E;const{parks:t}=F(),[e,n]=N(()=>{const{id:y=t[0].id,date:x=""}=JSON.parse(sessionStorage.getItem(It)||"{}")||{};return x===L().date&&t.find(A=>A.id===y)||t[0]}),[o,r]=N(()=>({...Tn,change:y=>{r(x=>{var A,B;return y!==x.name&&(a(!0),b.current[x.name]=(B=(A=v.current)==null?void 0:A.scrollTop)!=null?B:0,x={...Sn[y],name:y,change:x.change}),x})}})),[i,a]=N(!0),[c,u]=N("priority"),{experiences:f,refresh:l,toggleStar:p,isLoading:h,loaderElem:d}=Js({park:e,sortType:(E=o.sortType)!=null?E:c,plusOnly:!!o.plusOnly}),[m,T]=N(),[_,g]=N(()=>({current:null,begin:y=>{g({..._,current:y}),o.change("Genie+"),n(y.park),T(null)},end:(y=!1)=>{g(x=>x.current?{...x,current:null}:x),y&&T(null)}})),v=q(null),b=q({});C(()=>{if(h)return;const y=()=>{document.hidden||l(!1)};return document.addEventListener("visibilitychange",y),()=>{document.removeEventListener("visibilitychange",y)}},[l,h]),C(()=>{var y,x;a(!1),(x=v.current)==null||x.scroll(0,(y=b.current[o.name])!=null?y:0)},[o.name]),C(()=>{h||a(!1)},[h]),C(()=>a(!0),[e]),C(()=>{var y;(y=v.current)==null||y.scroll(0,0)},[e,c,_]),C(()=>{b.current={},sessionStorage.setItem(It,JSON.stringify({id:e.id,date:L().date}))},[e]);const k=De(()=>t.map(y=>({value:y.id,icon:y.icon,text:y.name})),[t]);return s(Cs,{value:_},s(G,{heading:o.title,theme:e.theme,buttons:s(S,null,o.sortType===void 0&&s(bt,{options:Io,value:c,onChange:u,title:"Sort By"}),s(bt,{options:k,value:e.id,onChange:y=>n(t.find(x=>x.id===y)),title:"Park"}),s(gn,{onOpen:T,onClose:()=>T(null)}),s(D,{onClick:l,title:"Refresh Times"},s(Ge,null))),containerRef:v},s("div",{"aria-hidden":!!m,className:`${i&&"invisible"} mb-14`},s(o.component,{experiences:f,refresh:l,toggleStar:p,showModal:T})),!m&&d,s(Es,{value:e},m),s("div",{className:`fixed bottom-0 left-0 w-full ${e.theme.bg} text-white font-semibold`},s("div",{className:"flex items-center justify-center"},s(En.Provider,{value:o},s(Ct,{name:"Genie+",icon:Re}),s(Ct,{name:"Times",icon:rn})),s("button",{className:"absolute top-0 right-0 h-full px-3",onClick:()=>T(s(To,{onClose:()=>T(null)})),title:"Settings"},s(Qs,null))))))}function Ct({name:t,icon:e}){const n=Z(En);return s("button",{className:`flex items-center gap-x-2 border-b-4 ${t===n.name?"border-white":"border-transparent"} px-3 pt-3 pb-2`,onClick:()=>n.change(t)},s(e,null),t)}const Ro=Me,Po={success:5e3,failure:1e3};function Ao({guests:t,result:e,onDone:n}){const{boardingGroup:o,conflicts:r}=e,i=t.filter(f=>!(f.id in r)),a=t.filter(f=>f.id in r),[c,u]=N(!1);return C(()=>{setTimeout(()=>u(!0),Po[o?"success":"failure"])},[o]),s(S,null,o!==null?s(S,null,s("h2",{className:"mt-5 text-xl"},"Congratulations! \u{1F389}"),s("p",null,"You joined the virtual queue!"),s("p",{className:"text-lg font-semibold"},"Boarding Group: ",o),s($,{guests:i}),Object.keys(r).length>0&&s(S,null,s("p",{className:"font-semibold"},"These guests could not join:"),s($,{guests:a,conflicts:r})),s("p",null,"Refer to the My Disney Experience app for return time and other information.")):s(S,null,s("h2",{className:"mt-5 text-xl"},"Sorry!"),s("p",null,"A boarding group could not be obtained."),s($,{guests:a,conflicts:r})),c&&s(O,{onClick:n},"Done"))}function Do({guests:t,party:e,onToggle:n,onConfirm:o}){return s(S,null,s("div",{className:"mt-5"},s("h2",{className:"inline mr-3 text-xl"},"Choose Your Party"),s(Nn,{type:"small"})),t?t.length>0?s($,{guests:t,selectable:{isSelected:r=>e.has(r),onToggle:n}}):s("p",null,"No guests available"):s("p",null,"Loading guests\u2026"),s(O,{disabled:e.size===0,onClick:o},"Confirm Party"))}function Lo({queue:t}){return s(S,null,t.howToEnterMessage.split(`

`).map((e,n)=>s("p",{key:n},e)))}const $o=999;function Oo({guests:t,joinQueue:e,onEdit:n}){const[o,r]=N(!1),[i,a]=ye();async function c(){r(!0),a("");const u=sn($o);try{await e()||a("Queue not open yet")}catch(f){a("Error: try again","error"),f instanceof ue||console.error(f)}finally{await u,r(!1)}}return s(S,null,s("div",{className:"mt-4"},s("h2",{className:"inline mr-3 text-xl"},"Your Party"),s(D,{type:"small",onClick:n},"Edit")),s($,{guests:t}),s(O,{disabled:o,onClick:c},"Join Virtual Queue"),i)}function Mo({queue:t,queues:e,onChange:n}){e||(e=[]);const{bg:o}=Y(),r=`block w-full ${o} text-white text-xl font-semibold`;return s(S,null,e.length<=1?s("span",{className:`${r} px-1 truncate`},t.name):s("select",{className:`${r} pr-1`,value:t.id,onChange:i=>n?n(i.currentTarget.value):null},e.map(i=>s("option",{key:i.id,value:i.id,className:"text-base font-normal"},i.name))))}const Rt=t=>t.categoryContentId==="attraction";function Go(){const t=Ro(),[e,n]=N(),[o,r]=N(null),[i,a]=N(),[c,u]=N(new Set),[f,l]=N({boardingGroup:null,conflicts:{},closed:!0}),[p,h]=N(!1),[d,m]=N("ChooseParty"),[T,_]=ye(),g=q(null),v=U(async()=>{_(""),h(!0);const I=(await t.getQueues()).filter(R=>R.isAcceptingJoins||R.isAcceptingPartyCreation).sort((R,M)=>+Rt(M)-+Rt(R)||R.name.localeCompare(M.name));h(!1),n(R=>(R&&I.length===0&&_("No queues available"),I))},[t,_]);C(()=>{v();const I=()=>{document.hidden||v()};return document.addEventListener("visibilitychange",I),()=>{document.removeEventListener("visibilitychange",I)}},[v]),C(()=>{r(I=>{const R=I&&(e==null?void 0:e.find(M=>M.id===I.id));return R||(a(void 0),e&&e.length>0?e[0]:null)})},[e]),C(()=>{if(i||!o)return;let I=!1;return(async()=>{const R=await t.getLinkedGuests(o);I||(a(R),u(new Set(R.filter(M=>M.preselected))))})(),()=>{I=!0}},[t,o,i]),C(()=>{var I;(I=g.current)==null||I.scroll(0,0)},[d]);function b(I){const R=new Set(c);R[R.has(I)?"delete":"add"](I);const M=Number(o==null?void 0:o.maxPartySize);M>0&&R.size>M?_(`Maximum party size: ${M}`):(u(R),_(""))}function k(I){const R=e==null?void 0:e.find(M=>M.id===I);R&&(r(R),a(void 0))}async function E(){if(!o||!(await t.getQueue(o)).isAcceptingJoins)return!1;const I=await t.joinQueue(o,[...c]);return l(I),m("BGResult"),I.boardingGroup!==null&&ln(),!0}if((e==null?void 0:e.length)===0)return s(G,{heading:"No Active Queues"},s("p",null,"You can't join any virtual queues just yet. Check back within an hour of the queue opening time, or tap the Refresh button to check again."),s(O,{disabled:p,onClick:v},"Refresh"),T);if(!o)return s("div",null);const y=(i||[]).filter(I=>c.has(I)),x=s(mn,{resort:t.resort,time:o.nextScheduledOpenTime,label:"Next queue opening"}),A=s(Mo,{queue:o,queues:d==="ChooseParty"?e:[],onChange:k});return{ChooseParty:s(G,{heading:A,containerRef:g},s(Lo,{queue:o}),x,s(Do,{guests:i,party:c,onToggle:b,onConfirm:()=>m("JoinQueue")}),T),JoinQueue:s(G,{heading:A},x,s(Oo,{guests:y,onEdit:()=>m("ChooseParty"),joinQueue:E})),BGResult:s(G,{heading:A},s(Ao,{guests:y,result:f,onDone:()=>m("ChooseParty")}))}[d]}const Pe=new qn("bg1.auth");ds(origin)?Pt(new hs({origin,authStore:Pe}),Go):as(origin)?Oe.load({origin,authStore:Pe}).then(t=>Pt(t,Co)):location.href="https://joelface.github.io/bg1/start.html";async function Pt(t,e){Jn({WDW:"America/New_York",DLR:"America/Los_Angeles"}[t.resort]),document.title="BG1",Uo(),Bo(),Fo().render(s(Ts,{client:t,authStore:Pe},s(e,null)))}function Bo(){document.body.addEventListener("click",()=>null)}function Uo(){const t=document.createElement("meta");t.name="viewport",t.content="width=device-width, initial-scale=1, maximum-scale=1",document.head.appendChild(t)}function Fo(){const t=document.createElement("div");return t.id="app",document.body.appendChild(t),Vn(t)}
