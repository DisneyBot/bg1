var fn=Object.defineProperty,mn=Object.defineProperties;var hn=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var Ue=(t,e,n)=>e in t?fn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,T=(t,e)=>{for(var n in e||(e={}))Fe.call(e,n)&&Ue(t,n,e[n]);if(te)for(var n of te(e))He.call(e,n)&&Ue(t,n,e[n]);return t},O=(t,e)=>mn(t,hn(e));var H=(t,e)=>{var n={};for(var i in t)Fe.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&te)for(var i of te(t))e.indexOf(i)<0&&He.call(t,i)&&(n[i]=t[i]);return n};var fe,g,Nt,K,St,We,Et,le={},Tt=[],pn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function J(t,e){for(var n in e)t[n]=e[n];return t}function Ct(t){var e=t.parentNode;e&&e.removeChild(t)}function o(t,e,n){var i,r,s,a={};for(s in e)s=="key"?i=e[s]:s=="ref"?r=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?fe.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)a[s]===void 0&&(a[s]=t.defaultProps[s]);return oe(t,a,i,r,null)}function oe(t,e,n,i,r){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r==null?++Nt:r};return r==null&&g.vnode!=null&&g.vnode(s),s}function k(t){return t.children}function W(t,e){this.props=t,this.context=e}function q(t,e){if(e==null)return t.__?q(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?q(t):null}function It(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return It(t)}}function Ne(t){(!t.__d&&(t.__d=!0)&&K.push(t)&&!ce.__r++||We!==g.debounceRendering)&&((We=g.debounceRendering)||St)(ce)}function ce(){for(var t;ce.__r=K.length;)t=K.sort(function(e,n){return e.__v.__b-n.__v.__b}),K=[],t.some(function(e){var n,i,r,s,a,c;e.__d&&(a=(s=(n=e).__v).__e,(c=n.__P)&&(i=[],(r=J({},s)).__v=s.__v+1,Ce(c,s,r,n.__n,c.ownerSVGElement!==void 0,s.__h!=null?[a]:null,i,a==null?q(s):a,s.__h),Lt(i,s),s.__e!=a&&It(s)))})}function Pt(t,e,n,i,r,s,a,c,d,u){var l,m,f,_,p,P,v,b=i&&i.__k||Tt,x=b.length;for(n.__k=[],l=0;l<e.length;l++)if((_=n.__k[l]=(_=e[l])==null||typeof _=="boolean"?null:typeof _=="string"||typeof _=="number"||typeof _=="bigint"?oe(null,_,null,null,_):Array.isArray(_)?oe(k,{children:_},null,null,null):_.__b>0?oe(_.type,_.props,_.key,null,_.__v):_)!=null){if(_.__=n,_.__b=n.__b+1,(f=b[l])===null||f&&_.key==f.key&&_.type===f.type)b[l]=void 0;else for(m=0;m<x;m++){if((f=b[m])&&_.key==f.key&&_.type===f.type){b[m]=void 0;break}f=null}Ce(t,_,f=f||le,r,s,a,c,d,u),p=_.__e,(m=_.ref)&&f.ref!=m&&(v||(v=[]),f.ref&&v.push(f.ref,null,_),v.push(m,_.__c||p,_)),p!=null?(P==null&&(P=p),typeof _.type=="function"&&_.__k===f.__k?_.__d=d=Rt(_,d,t):d=At(t,_,f,b,p,d),typeof n.type=="function"&&(n.__d=d)):d&&f.__e==d&&d.parentNode!=t&&(d=q(f))}for(n.__e=P,l=x;l--;)b[l]!=null&&(typeof n.type=="function"&&b[l].__e!=null&&b[l].__e==n.__d&&(n.__d=q(i,l+1)),$t(b[l],b[l]));if(v)for(l=0;l<v.length;l++)Dt(v[l],v[++l],v[++l])}function Rt(t,e,n){for(var i,r=t.__k,s=0;r&&s<r.length;s++)(i=r[s])&&(i.__=t,e=typeof i.type=="function"?Rt(i,e,n):At(n,i,i,r,i.__e,e));return e}function ue(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){ue(n,e)}):e.push(t)),e}function At(t,e,n,i,r,s){var a,c,d;if(e.__d!==void 0)a=e.__d,e.__d=void 0;else if(n==null||r!=s||r.parentNode==null)e:if(s==null||s.parentNode!==t)t.appendChild(r),a=null;else{for(c=s,d=0;(c=c.nextSibling)&&d<i.length;d+=2)if(c==r)break e;t.insertBefore(r,s),a=s}return a!==void 0?a:r.nextSibling}function gn(t,e,n,i,r){var s;for(s in n)s==="children"||s==="key"||s in e||de(t,s,null,n[s],i);for(s in e)r&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||n[s]===e[s]||de(t,s,e[s],n[s],i)}function je(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=n==null?"":typeof n!="number"||pn.test(e)?n:n+"px"}function de(t,e,n,i,r){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||je(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||je(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i||t.addEventListener(e,s?Ye:ze,s):t.removeEventListener(e,s?Ye:ze,s);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n==null?"":n;break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,n):t.removeAttribute(e))}}function ze(t){this.l[t.type+!1](g.event?g.event(t):t)}function Ye(t){this.l[t.type+!0](g.event?g.event(t):t)}function Ce(t,e,n,i,r,s,a,c,d){var u,l,m,f,_,p,P,v,b,x,A,L,E,N=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(d=n.__h,c=e.__e=n.__e,e.__h=null,s=[c]),(u=g.__b)&&u(e);try{e:if(typeof N=="function"){if(v=e.props,b=(u=N.contextType)&&i[u.__c],x=u?b?b.props.value:u.__:i,n.__c?P=(l=e.__c=n.__c).__=l.__E:("prototype"in N&&N.prototype.render?e.__c=l=new N(v,x):(e.__c=l=new W(v,x),l.constructor=N,l.render=bn),b&&b.sub(l),l.props=v,l.state||(l.state={}),l.context=x,l.__n=i,m=l.__d=!0,l.__h=[]),l.__s==null&&(l.__s=l.state),N.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=J({},l.__s)),J(l.__s,N.getDerivedStateFromProps(v,l.__s))),f=l.props,_=l.state,m)N.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(N.getDerivedStateFromProps==null&&v!==f&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(v,x),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(v,l.__s,x)===!1||e.__v===n.__v){l.props=v,l.state=l.__s,e.__v!==n.__v&&(l.__d=!1),l.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(C){C&&(C.__=e)}),l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(v,l.__s,x),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(f,_,p)})}if(l.context=x,l.props=v,l.__v=e,l.__P=t,A=g.__r,L=0,"prototype"in N&&N.prototype.render)l.state=l.__s,l.__d=!1,A&&A(e),u=l.render(l.props,l.state,l.context);else do l.__d=!1,A&&A(e),u=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++L<25);l.state=l.__s,l.getChildContext!=null&&(i=J(J({},i),l.getChildContext())),m||l.getSnapshotBeforeUpdate==null||(p=l.getSnapshotBeforeUpdate(f,_)),E=u!=null&&u.type===k&&u.key==null?u.props.children:u,Pt(t,Array.isArray(E)?E:[E],e,n,i,r,s,a,c,d),l.base=e.__e,e.__h=null,l.__h.length&&a.push(l),P&&(l.__E=l.__=null),l.__e=!1}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=yn(n.__e,e,n,i,r,s,a,d);(u=g.diffed)&&u(e)}catch(C){e.__v=null,(d||s!=null)&&(e.__e=c,e.__h=!!d,s[s.indexOf(c)]=null),g.__e(C,e,n)}}function Lt(t,e){g.__c&&g.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(i){i.call(n)})}catch(i){g.__e(i,n.__v)}})}function yn(t,e,n,i,r,s,a,c){var d,u,l,m=n.props,f=e.props,_=e.type,p=0;if(_==="svg"&&(r=!0),s!=null){for(;p<s.length;p++)if((d=s[p])&&"setAttribute"in d==!!_&&(_?d.localName===_:d.nodeType===3)){t=d,s[p]=null;break}}if(t==null){if(_===null)return document.createTextNode(f);t=r?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,f.is&&f),s=null,c=!1}if(_===null)m===f||c&&t.data===f||(t.data=f);else{if(s=s&&fe.call(t.childNodes),u=(m=n.props||le).dangerouslySetInnerHTML,l=f.dangerouslySetInnerHTML,!c){if(s!=null)for(m={},p=0;p<t.attributes.length;p++)m[t.attributes[p].name]=t.attributes[p].value;(l||u)&&(l&&(u&&l.__html==u.__html||l.__html===t.innerHTML)||(t.innerHTML=l&&l.__html||""))}if(gn(t,f,m,r,c),l)e.__k=[];else if(p=e.props.children,Pt(t,Array.isArray(p)?p:[p],e,n,i,r&&_!=="foreignObject",s,a,s?s[0]:n.__k&&q(n,0),c),s!=null)for(p=s.length;p--;)s[p]!=null&&Ct(s[p]);c||("value"in f&&(p=f.value)!==void 0&&(p!==t.value||_==="progress"&&!p||_==="option"&&p!==m.value)&&de(t,"value",p,m.value,!1),"checked"in f&&(p=f.checked)!==void 0&&p!==t.checked&&de(t,"checked",p,m.checked,!1))}return t}function Dt(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(i){g.__e(i,n)}}function $t(t,e,n){var i,r;if(g.unmount&&g.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||Dt(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){g.__e(s,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&$t(i[r],e,typeof t.type!="function");n||t.__e==null||Ct(t.__e),t.__e=t.__d=void 0}function bn(t,e,n){return this.constructor(t,n)}function Ot(t,e,n){var i,r,s;g.__&&g.__(t,e),r=(i=typeof n=="function")?null:n&&n.__k||e.__k,s=[],Ce(e,t=(!i&&n||e).__k=o(k,null,[t]),r||le,le,e.ownerSVGElement!==void 0,!i&&n?[n]:r?null:e.firstChild?fe.call(e.childNodes):null,s,!i&&n?n:r?r.__e:e.firstChild,i),Lt(s,t)}function me(t,e){var n={__c:e="__cC"+Et++,__:t,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,s;return this.getChildContext||(r=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&r.some(Ne)},this.sub=function(a){r.push(a);var c=a.componentWillUnmount;a.componentWillUnmount=function(){r.splice(r.indexOf(a),1),c&&c.call(a)}}),i.children}};return n.Provider.__=n.Consumer.contextType=n}fe=Tt.slice,g={__e:function(t,e,n,i){for(var r,s,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),a=r.__d),a)return r.__E=r}catch(c){t=c}throw t}},Nt=0,W.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=J({},this.state),typeof t=="function"&&(t=t(J({},n),this.props)),t&&J(n,t),t!=null&&this.__v&&(e&&this.__h.push(e),Ne(this))},W.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ne(this))},W.prototype.render=k,K=[],St=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ce.__r=0,Et=0;var Z,D,ve,Qe,V=0,Mt=[],Je=g.__b,qe=g.__r,Ke=g.diffed,Ve=g.__c,Ze=g.unmount;function he(t,e){g.__h&&g.__h(D,t,V||e),V=0;var n=D.__H||(D.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function w(t){return V=1,vn(Ut,t)}function vn(t,e,n){var i=he(Z++,2);return i.t=t,i.__c||(i.__=[n?n(e):Ut(void 0,e),function(r){var s=i.t(i.__[0],r);i.__[0]!==s&&(i.__=[s,i.__[1]],i.__c.setState({}))}],i.__c=D),i.__}function R(t,e){var n=he(Z++,3);!g.__s&&Gt(n.__H,e)&&(n.__=t,n.u=e,D.__H.__h.push(n))}function Ie(t){return V=5,Bt(function(){return{current:t}},[])}function Bt(t,e){var n=he(Z++,7);return Gt(n.__H,e)?(n.o=t(),n.u=e,n.__h=t,n.o):n.__}function j(t,e){return V=8,Bt(function(){return t},e)}function pe(t){var e=D.context[t.__c],n=he(Z++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(D)),e.props.value):t.__}function wn(){for(var t;t=Mt.shift();)if(t.__P)try{t.__H.__h.forEach(se),t.__H.__h.forEach(Se),t.__H.__h=[]}catch(e){t.__H.__h=[],g.__e(e,t.__v)}}g.__b=function(t){D=null,Je&&Je(t)},g.__r=function(t){qe&&qe(t),Z=0;var e=(D=t.__c).__H;e&&(ve===D?(e.__h=[],D.__h=[],e.__.forEach(function(n){n.o=n.u=void 0})):(e.__.forEach(function(n){n.u&&(n.__H=n.u),n.o&&(n.__=n.o),n.o=n.u=void 0}),e.__h.forEach(se),e.__h.forEach(Se),e.__h=[])),ve=D},g.diffed=function(t){Ke&&Ke(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(Mt.push(e)!==1&&Qe===g.requestAnimationFrame||((Qe=g.requestAnimationFrame)||function(n){var i,r=function(){clearTimeout(s),Xe&&cancelAnimationFrame(i),setTimeout(n)},s=setTimeout(r,100);Xe&&(i=requestAnimationFrame(r))})(wn)),D=null,ve=null},g.__c=function(t,e){e.some(function(n){try{n.__H&&n.__H.__.forEach(function(i){i.u&&(i.__H=i.u),i.o&&(i.__=i.o),i.o=i.u=void 0}),n.__h.forEach(se),n.__h=n.__h.filter(function(i){return!i.__||Se(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],g.__e(i,n.__v)}}),Ve&&Ve(t,e)},g.unmount=function(t){Ze&&Ze(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{se(i)}catch(r){e=r}}),e&&g.__e(e,n.__v))};var Xe=typeof requestAnimationFrame=="function";function se(t){var e=D,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),D=e}function Se(t){var e=D;t.__c=t.__(),D=e}function Gt(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}function Ut(t,e){return typeof e=="function"?e(t):e}function kn(t,e){for(var n in e)t[n]=e[n];return t}function et(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var i in e)if(i!=="__source"&&t[i]!==e[i])return!0;return!1}function tt(t){this.props=t}(tt.prototype=new W).isPureReactComponent=!0,tt.prototype.shouldComponentUpdate=function(t,e){return et(this.props,t)||et(this.state,e)};var nt=g.__b;g.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),nt&&nt(t)};var xn=g.__e;g.__e=function(t,e,n,i){if(t.then){for(var r,s=e;s=s.__;)if((r=s.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}xn(t,e,n,i)};var it=g.unmount;function we(){this.__u=0,this.t=null,this.__b=null}function Ft(t){var e=t.__.__c;return e&&e.__e&&e.__e(t)}function ne(){this.u=null,this.o=null}g.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),it&&it(t)},(we.prototype=new W).__c=function(t,e){var n=e.__c,i=this;i.t==null&&(i.t=[]),i.t.push(n);var r=Ft(i.__v),s=!1,a=function(){s||(s=!0,n.__R=null,r?r(c):c())};n.__R=a;var c=function(){if(!--i.__u){if(i.state.__e){var u=i.state.__e;i.__v.__k[0]=function m(f,_,p){return f&&(f.__v=null,f.__k=f.__k&&f.__k.map(function(P){return m(P,_,p)}),f.__c&&f.__c.__P===_&&(f.__e&&p.insertBefore(f.__e,f.__d),f.__c.__e=!0,f.__c.__P=p)),f}(u,u.__c.__P,u.__c.__O)}var l;for(i.setState({__e:i.__b=null});l=i.t.pop();)l.forceUpdate()}},d=e.__h===!0;i.__u++||d||i.setState({__e:i.__b=i.__v.__k[0]}),t.then(a,a)},we.prototype.componentWillUnmount=function(){this.t=[]},we.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=function s(a,c,d){return a&&(a.__c&&a.__c.__H&&(a.__c.__H.__.forEach(function(u){typeof u.__c=="function"&&u.__c()}),a.__c.__H=null),(a=kn({},a)).__c!=null&&(a.__c.__P===d&&(a.__c.__P=c),a.__c=null),a.__k=a.__k&&a.__k.map(function(u){return s(u,c,d)})),a}(this.__b,n,i.__O=i.__P)}this.__b=null}var r=e.__e&&o(k,null,t.fallback);return r&&(r.__h=null),[o(k,null,e.__e?null:t.children),r]};var ot=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};(ne.prototype=new W).__e=function(t){var e=this,n=Ft(e.__v),i=e.o.get(t);return i[0]++,function(r){var s=function(){e.props.revealOrder?(i.push(r),ot(e,t,i)):r()};n?n(s):s()}},ne.prototype.render=function(t){this.u=null,this.o=new Map;var e=ue(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},ne.prototype.componentDidUpdate=ne.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){ot(t,n,e)})};var Nn=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,Sn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,En=typeof document!="undefined",Tn=function(t){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};function Cn(t,e,n){return e.__k==null&&(e.textContent=""),Ot(t,e),typeof n=="function"&&n(),t?t.__c:null}W.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(W.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var st=g.event;function In(){}function Pn(){return this.cancelBubble}function Rn(){return this.defaultPrevented}g.event=function(t){return st&&(t=st(t)),t.persist=In,t.isPropagationStopped=Pn,t.isDefaultPrevented=Rn,t.nativeEvent=t};var rt={configurable:!0,get:function(){return this.class}},at=g.vnode;g.vnode=function(t){var e=t.type,n=t.props,i=n;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var s in i={},n){var a=n[s];En&&s==="children"&&e==="noscript"||s==="value"&&"defaultValue"in n&&a==null||(s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&a===!0?a="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!Tn(n.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():r&&Sn.test(s)?s=s.replace(/[A-Z0-9]/,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput/i.test(s)&&(s=s.toLowerCase(),i[s]&&(s="oninputCapture")),i[s]=a)}e=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=ue(n.children).forEach(function(c){c.props.selected=i.value.indexOf(c.props.value)!=-1})),e=="select"&&i.defaultValue!=null&&(i.value=ue(n.children).forEach(function(c){c.props.selected=i.multiple?i.defaultValue.indexOf(c.props.value)!=-1:i.defaultValue==c.props.value})),t.props=i,n.class!=n.className&&(rt.enumerable="className"in n,n.className!=null&&(i.class=n.className),Object.defineProperty(i,"className",rt))}t.$$typeof=Nn,at&&at(t)};var lt=g.__r;g.__r=function(t){lt&&lt(t),t.__c};function An(t){return!!t.__k&&(Ot(null,t),!0)}function Ln(t){return{render(e){Cn(e,t)},unmount(){An(t)}}}let Ht="America/New_York";function Dn(t){Ht=t}function M(t){t=new Date(t||Date.now());const e={},n="2-digit";return Intl.DateTimeFormat("en-US",{timeZone:Ht,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n}).formatToParts(t).forEach(i=>e[i.type]=i.value),{date:`${e.year}-${e.month}-${e.day}`,time:`${e.hour}:${e.minute}:${e.second}`}}function z(t){const e=t.split(":").map(Number),n=e[0]>=12?"PM":"AM";return e[0]=e[0]%12||12,e.map(i=>String(i).padStart(2,"0")).join(":").replace(/:00$/,"").replace(/^0/,"")+" "+n}class $n extends Error{constructor(e){super(`Auth data "${e}" missing or expired`),this.name="ReauthNeeded"}}class On{constructor(e,n=localStorage){this.storageKey=e,this.storage=n}getData(){try{const e=this.storage.getItem(this.storageKey);if(e){const{swid:n,accessToken:i,expires:r}=JSON.parse(e),s=M(new Date(r)),a=M();if(s.date>a.date||s.date===a.date&&s.time>a.time&&s.time>="17")return{swid:n,accessToken:i}}}catch(e){console.error(e)}throw new $n(this.storageKey)}setData(e){this.storage.setItem(this.storageKey,JSON.stringify(e))}deleteData(){this.storage.removeItem(this.storageKey)}}const Mn="modulepreload",ct={},Bn="/bg1/",ut=function(e,n){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=`${Bn}${i}`,i in ct)return;ct[i]=!0;const r=i.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":Mn,r||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),r)return new Promise((c,d)=>{a.addEventListener("load",c),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())},Gn=8e3;async function _e(t,e={}){const u=e,{params:n,data:i,timeout:r=Gn}=u;e=H(u,["params","data","timeout"]),e.referrer||(e.referrer=""),e.credentials||(e.credentials="omit"),e.cache||(e.cache="no-store"),e.headers=T({"User-Agent":"Mozilla/5.0"},e.headers||{}),n&&(t+="?"+Object.entries(n).filter(([,l])=>l!=="").map(l=>l.map(encodeURIComponent).join("=")).join("&")),i&&(e.method||(e.method="POST"),e.headers=O(T({},e.headers),{"Content-Type":"application/json"}),e.body=JSON.stringify(i));const a=new AbortController;e.signal=a.signal;const c=setTimeout(()=>a.abort(),r);let d;try{d=await fetch(t,e)}catch(l){return console.error(l),{status:0,data:null}}finally{clearTimeout(c)}return{status:d.status,data:(d.headers.get("Content-Type")||"").startsWith("application/json")?await d.json():{}}}function Un(t){switch(t){case"./data/dlr.ts":return ut(()=>import("./dlr.js"),[]);case"./data/wdw.ts":return ut(()=>import("./wdw.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const Ee={"https://disneyworld.disney.go.com":"WDW","https://disneyland.disney.go.com":"DLR"},Fn={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"};function Hn(t){return t in Ee}class Wt extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}const ie=t=>t.split(";")[0];class Pe{constructor(e){this.maxPartySize=12,this.onUnauthorized=()=>{},this.guestNames=new Map,this._primaryGuestId="",this.origin=e.origin,this.authStore=e.authStore,this.data=e.data,this.bookingStack=new Wn}static async load(e){const n=(await Un(`./data/${Ee[e.origin].toLocaleLowerCase()}.ts`)).default;return new Pe(O(T({},e),{data:n}))}get resort(){return Ee[this.origin]}get parks(){return this.data.parks}async plusExperiences(e){return(await this.request({path:`/tipboard-vas/api/v1/parks/${encodeURIComponent(e.id)}/experiences`,key:"availableExperiences"})).filter(i=>!!i.flex&&i.id in this.data.experiences).map(i=>T(T({},i),this.data.experiences[i.id]))}async guests(e){const n=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:e.experience.id,parkId:e.park.id}});this._primaryGuestId=n.primaryGuestId;const i=u=>{var l=u,{firstName:a,lastName:c}=l,d=H(l,["firstName","lastName"]);return O(T({},d),{name:`${a} ${c}`.trim()})},r=n.ineligibleGuests.map(i),s=n.guests.map(i).filter(a=>"ineligibleReason"in a?(r.push(a),!1):!0);return[...s,...r].forEach(a=>{this.guestNames.has(a.id)||this.guestNames.set(a.id,a.name)}),s.sort((a,c)=>a.name.localeCompare(c.name)),r.sort((a,c)=>{const d=a.name.localeCompare(c.name);return a.eligibleAfter||c.eligibleAfter?(a.eligibleAfter||"99").localeCompare(c.eligibleAfter||"99")||d:a.ineligibleReason===c.ineligibleReason?d:a.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?-1:c.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?1:d}),{eligible:s,ineligible:r}}async primaryGuestId(e){return this._primaryGuestId||await this.guests(e),this._primaryGuestId}async offer({experience:e,park:n,guests:i}){const{id:r,date:s,startTime:a,endTime:c,changeStatus:d}=await this.request({path:"/ea-vas/api/v1/products/flex/offers",method:"POST",data:{productType:"FLEX",guestIds:i.map(u=>u.id),primaryGuestId:await this.primaryGuestId({experience:e,park:n}),parkId:n.id,experienceId:e.id,selectedTime:e.flex.nextAvailableTime},key:"offer"});return{id:r,start:{date:s,time:a},end:{date:s,time:c},changeStatus:d}}async cancelOffer(e){await this.request({path:`/ea-vas/api/v1/offers/${encodeURIComponent(e.id)}`,method:"DELETE",params:{productType:"FLEX"},userId:!1})}async book(e){const{singleExperienceDetails:{experienceId:n,parkId:i},entitlements:r,startDateTime:s,endDateTime:a}=await this.request({path:"/ea-vas/api/v1/products/flex/bookings",method:"POST",userId:!1,data:{offerId:e.id},key:"booking"});return this.bookings(),{experience:{id:n,name:this.data.experiences[n].name},park:this.data.parks.find(c=>c.id===i),start:M(s),end:M(a),cancellable:!0,guests:r.map(c=>({id:c.guestId,name:this.guestNames.get(c.guestId)||"",entitlementId:c.id}))}}async cancelBooking(e){const i=e.map(r=>r.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${i}`,method:"DELETE",userId:!1})}async bookings(){const{swid:e}=this.authStore.getData(),n=new Date(Date.now()),i=Fn[this.resort],{items:r=[],assets:s={},profiles:a={}}=await this.request({path:`/plan/${i}/api/v1/itinerary-items/${e}`,params:{destination:this.resort,fields:"items,profiles,assets","item-types":"FASTPASS","guest-locators":e+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":M(n).date,"end-date":M(new Date(n.getTime()).setDate(n.getDate()+1)).date,"show-friends":"false"},userId:!1}),c=Object.fromEntries(this.parks.map(m=>[m.id,m])),d=M(new Date(n.getTime()).setMinutes(n.getMinutes()-15)),u=new Set(["FLEX","OTHER"]),l=r.filter(m=>m.type==="FASTPASS"&&u.has(m.kind)).filter(m=>(m.displayEndDate||"9999")>d.date||m.displayEndDate===d.date&&(m.displayEndTime||"24")>=d.time).map(m=>{const f=ie(m.facility),_=s[m.facility],{name:p}=this.data.experiences[f]||_,P=ie(_.location),v={experience:{id:f,name:p},park:c[P],start:{date:m.displayStartDate,time:m.displayStartTime},end:{date:m.displayEndDate,time:m.displayEndTime},cancellable:m.cancellable,guests:m.guests.map(b=>{const{name:x}=a[b.id];return T({id:ie(b.id),entitlementId:b.entitlementId,name:`${x.firstName} ${x.lastName}`.trim()},b.redemptionsRemaining!==void 0&&{redemptions:b.redemptionsRemaining})})};return m.multipleExperiences&&(v.experience={id:"",name:"Multiple Experiences"},v.choices=m.assets.filter(b=>!b.excluded&&!b.original).map(({content:b})=>{const x=ie(b),{name:A}=this.data.experiences[x]||s[b];return{id:x,name:A}}).sort((b,x)=>b.name.localeCompare(x.name))),v}).sort((m,f)=>((m.start.date||"0000-00-00")+(m.start.time||"")).localeCompare((f.start.date||"0000-00-00")+(f.start.time||"")));return this.bookingStack.update(l),l}isRebookable(e){return this.bookingStack.isRebookable(e)}pdt(e){var i;const n=M().time.slice(0,5);return(i=this.data.pdts[e.id])==null?void 0:i.find(r=>r>=n)}logOut(){this.authStore.deleteData(),this.onUnauthorized()}async request(e){var d;const{swid:n,accessToken:i}=this.authStore.getData(),r=this.origin+e.path,s=T({},e.params);((d=e.userId)==null||d)&&(s.userId=n);const{status:a,data:c}=await _e(r,{method:e.method||"GET",params:s,data:e.data,headers:{Authorization:`BEARER ${i}`}});if(a===401)setTimeout(()=>this.logOut());else{const{key:u}=e;if(String(a)[0]==="2"&&(!u||c[u]))return u?c[u]:c}throw new Wt({status:a,data:c})}}const dt="bg1.genie.bookings";class Wn{constructor(e=!0){if(this.entitlementIds=[],this.mostRecent=new Map,!e)return;const{entitlementIds:n=[],mostRecent:i={}}=JSON.parse(localStorage.getItem(dt)||"{}");this.entitlementIds=n,this.mostRecent=new Map(Object.entries(i))}isRebookable(e){return e.guests.every(n=>this.mostRecent.get(n.id)===n.entitlementId)}update(e){const n=new Map,i=new Set(this.entitlementIds);this.entitlementIds=e.filter(({cancellable:r})=>r).map(r=>r.guests.map(({id:s,entitlementId:a})=>(this.entitlementIds.push(a),i.has(a)||n.set(s,n.has(s)?"":a),a))).flat(1),this.mostRecent=new Map([...this.mostRecent,...n]),n.size>0&&localStorage.setItem(dt,JSON.stringify({entitlementIds:this.entitlementIds,mostRecent:Object.fromEntries(this.mostRecent)}))}}const jt={"https://vqguest-svc-wdw.wdprapps.disney.com":"WDW","https://vqguest-svc.wdprapps.disney.com":"DLR"};function jn(t){return t in jt}function zn(t){return t.sort((e,n)=>e.isPrimaryGuest!==n.isPrimaryGuest?Number(n.isPrimaryGuest)-Number(e.isPrimaryGuest):e.isPreselected!==n.isPreselected?Number(n.isPreselected)-Number(e.isPreselected):e.name.localeCompare(n.name))}class re extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}class Yn{constructor(e){this.onUnauthorized=()=>{},this.origin=e.origin,this.authStore=e.authStore}get resort(){return jt[this.origin]}url(e){return`${this.origin}/application/v1/guest/${e}`}async getQueues(){return(await _e(this.url("getQueues"))).data.queues.map(i=>{var r=i,{queueId:e}=r,n=H(r,["queueId"]);return O(T({},n),{id:e})})}async getQueue(e){const n=(await this.getQueues()).find(i=>i.id===e.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(e){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:e.id}});return zn(n.guests.map(c=>{var d=c,{guestId:i,firstName:r,lastName:s}=d,a=H(d,["guestId","firstName","lastName"]);return O(T({},a),{id:i,name:`${r} ${s}`.trim()})}))}async joinQueue(e,n){const i=n.map(a=>a.id),{status:r,data:s}=await this.post({resource:"joinQueue",data:{queueId:e.id,guestIds:i}});if(s.responseStatus==="OK"){const a=s.positions.find(c=>c.queueId===e.id&&c.guestIds.length>0&&i.some(d=>c.guestIds.includes(d)));if(!a)throw new re({status:r,data:s});return{boardingGroup:a.boardingGroup,conflicts:{},closed:!1}}else if(s.responseStatus==="INVALID_GUEST"||s.responseStatus==="CLOSED_QUEUE"){const a=s.responseStatus==="CLOSED_QUEUE",c=new Set,d={};for(const m of s.conflicts)for(const f of m.guestIds){const _=n.find(p=>p.id===f);!_||(d[_.id]=m.conflictType,c.add(f))}const u=n.filter(m=>!c.has(m.id));if(a||u.length===0)return{boardingGroup:null,conflicts:d,closed:a};const l=await this.joinQueue(e,u);return l.conflicts=T(T({},d),l.conflicts),l}else throw new re({status:r,data:s})}logOut(){this.authStore.deleteData(),this.onUnauthorized()}async post(e){const{status:n,data:i}=await _e(this.url(e.resource),{method:"POST",headers:{Authorization:`BEARER ${this.authStore.getData().accessToken}`},data:e.data});if(n===401&&setTimeout(()=>this.logOut()),!n||n===401||n>=500)throw new re({status:n,data:i});return{status:n,data:i}}}const zt=me({resort:"WDW",onUnauthorized:()=>{},logOut:()=>null}),Qn=zt.Provider,ge=()=>pe(zt),Yt={bg:"bg-blue-500"},Qt=me(Yt),Jn=Qt.Provider,Y=()=>pe(Qt),qn={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function $(t){const a=t,{type:e,className:n}=a,i=H(a,["type","className"]),r=(n||"")+" "+qn[e||"normal"],{bg:s}=Y();return o("button",T({className:`${r} border-2 border-white rounded-lg px-2 ${s} text-white font-semibold disabled:opacity-50`},i))}function G({onClick:t,disabled:e,href:n,children:i}){return o("div",{className:"mb-20"},o("div",{className:"fixed bottom-0 left-0 w-full bg-white bg-opacity-75 text-center"},o("a",{href:n,className:"block max-w-2xl mx-auto px-3 pb-5"},o($,{type:"full",onClick:t,disabled:e},i))))}function Kn({title:t,children:e}){const{bg:n}=Y();return o("div",{className:`flex justify-end gap-x-2 gap-y-1 min-h-[52px] px-3 py-2 font-semibold text-white ${n}`},o("h1",{className:"flex-1 self-center py-0.5 text-xl overflow-hidden whitespace-nowrap"},t),e)}function ye(t){const s=t,{children:e,className:n}=s,i=H(s,["children","className"]),r=T({outer:"",inner:""},typeof n=="string"?{inner:n}:n);return o("div",T({className:`${r.outer} fixed inset-0`},i),o("div",{className:`${r.inner} max-w-2xl min-h-full mx-auto`},e))}function F(c){var d=c,{heading:t,buttons:e,className:n,theme:i,containerRef:r,children:s}=d,a=H(d,["heading","buttons","className","theme","containerRef","children"]);return o(Jn,{value:i||Yt},o(ye,T({className:{outer:`bg-white ${n||""}`,inner:"flex flex-col max-w-2xl h-full"}},a),o(Kn,{title:t},e),o("div",{ref:r,className:"flex-1 overflow-auto px-3 pb-3"},s)))}const Vn="bg1.disclaimer.accepted",Zn={bg:"bg-red-600"};function Xn(){const t=localStorage,e=Vn,[n,i]=w(!!t.getItem(e));return R(()=>{n&&t.setItem(e,"1")},[n,t,e]),n?null:o(ei,{onAccept:()=>i(!0)})}function ei({onAccept:t}){return o(F,{heading:"Warning!",theme:Zn},o("p",null,'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'),o(G,{onClick:t},"Accept"))}const ti="17e2767256f";function ni(t){return"deferredUuid"in t&&t.deferredUuid!==void 0}class ii{constructor(e,n,i,r=!1){this.iframe=e,this.resort=i,this.logging=r,this.handlers={},this.handshakeAcked=!1,this.onMessage=s=>{if(s.source!==this.iframe.contentWindow||s.data==="inner.loaded")return;const a=JSON.parse(s.data);this.logging&&console.log("Message:",a);const c=a.type==="message"?a.eventName:a.type,d=this.handlers[c],u=d?d("data"in a?a.data:null):void 0;ni(a)&&this.send({type:"deferred",action:"resolve",deferredUuid:a.deferredUuid,data:u!=null?u:{}})},this.on("handshake",()=>{this.handshakeAcked||(this.handshakeAcked=!0,this.send({type:"handshakeAck"}),this.logging&&this.sendMessage("setLogLevel",{level:"log"}),this.sendMessage("workflow.execute",{name:"login"}))}),this.on("lightbox.hide",()=>this.open()),this.on("session.dateOfBirth.read",()=>this.open()),this.on("session.loggedin",({token:s})=>{n({swid:s.swid,accessToken:s.access_token,expires:new Date(s.exp)})})}open(){addEventListener("message",this.onMessage),this.iframe.src=this.authPageUrl,this.handshakeAcked=!1}close(){removeEventListener("message",this.onMessage)}on(e,n){this.handlers[e]=n}sendMessage(e,n){this.send({type:"message",eventName:e,data:n})}send(e){var n;(n=this.iframe.contentWindow)==null||n.postMessage(JSON.stringify(O(T({},e),{name:"lightbox-client-window"})),this.authPageUrl)}get authPageUrl(){return`https://cdn.registerdisney.go.com/v2/TPR-${this.resort}-LBSDK.IOS-PROD/en-US?include=l10n,config,html,js&buildId=${ti}`}}function oi({resort:t,onLogin:e}){const n=Ie(null);return R(()=>{if(!n.current)return;const i=new ii(n.current,e,t);return i.open(),()=>i.close()},[t,e,n]),o("iframe",{title:"Disney Login Form",ref:n,className:"fixed top-0 left-0 w-full h-full border-0"})}function si({authStore:t,children:e}){const[n,i]=w("Blank"),r=Xn(),s=ge();R(()=>{s.onUnauthorized=()=>i("LoginForm")},[s]),R(()=>{function c(){if(!(document.hidden||n==="LoginForm"))try{t.getData(),i("Client")}catch{return i("LoginForm")}}return c(),document.addEventListener("visibilitychange",c),()=>{document.removeEventListener("visibilitychange",c)}},[t,n]);const a={Blank:o("div",null),LoginForm:o(oi,{resort:s.resort,onLogin:c=>{t.setData(c),i("Client")}}),Client:e};return o(k,null,r||a[n])}const X=ge,Jt=me({current:null,begin:()=>null,end:()=>null}),ri=Jt.Provider,ee=()=>pe(Jt),ai=3e3,li={alert:"bg-yellow-200",error:"bg-red-200"};function be(){const[,t]=w(0),[e,n]=w(""),[i,r]=w("alert"),s=j((c,d)=>{n(c),r(d||"alert"),t(u=>(clearTimeout(u),c?self.setTimeout(()=>{n("")},ai):u))},[]);return[o(ci,{message:e,type:i}),s]}function ci({message:t,type:e}){return t?o("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${li[e]} text-gray-800`},t):null}function Re({children:t,className:e}){return e||(e=""),e.match(/\bw-\S+\s*/)||(e+=" w-4"),e.match(/\bh-\S+\s*/)||(e+=" h-auto"),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:e},t)}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ae({className:t}){return o(Re,{className:t},o("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"}))}async function qt(t){return new Promise(e=>{setTimeout(e,t)})}function ui(){const[t,e]=w(0),n=j(async(r,s=500)=>{e(c=>c+1);const a=qt(s);try{await r()}finally{await a,e(c=>c-1)}},[]);return[t>0?o(di,null):null,n]}function di(){const{bg:t}=Y();return o(ye,{className:"flex items-center bg-white bg-opacity-75"},o("div",{className:"w-[50px] mx-auto"},o("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${t}`},o(Ae,{className:"animate-spin w-full text-white"}))))}function Le(){const[t,e]=ui(),n=!!t,[i,r]=be();return{loadData:j(async(c,d)=>{const u=T({error:"Unknown error occurred",request:"Network request failed"},d);r("");let l=()=>null;const m=new Promise(_=>{l=()=>_(null)});async function f(..._){await m,r(..._)}await e(async()=>{try{await c(f)}catch(_){if(_ instanceof Wt){const{status:p}=_.response;f(p in u?u[p]:u.request,"error")}else console.error(_),f(u.error,"error")}}),l()},[e,r]),loaderElem:o(k,null,i,t),isLoading:n}}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function _t({className:t}){return o(Re,{className:t},o("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"}))}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function _i({className:t}){return o(Re,{className:t},o("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"}))}function Kt(){const t=ge();return o($,{type:"small",onClick:()=>t.logOut()},"Log Out")}function ft(t){const r=t,{className:e}=r,n=H(r,["className"]),{bg:i}=Y();return o("select",T({className:`${e||""} border-2 border-white rounded-lg px-1 ${i} font-semibold disabled:opacity-50`},n))}const Vt=me({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),fi=Vt.Provider,De=()=>pe(Vt),mi="https://bg1.joelface.com/ping",mt="bg1.ping.date";async function Zt(){const{date:t}=M();if(localStorage.getItem(mt)===t)return;const{status:n}=await _e(mi,{method:"POST"});n===204&&localStorage.setItem(mt,t)}function B({guests:t,selectable:e,conflicts:n}){return t.length===0?null:o("ul",{className:"mt-2"},t.map(i=>{var r;return o("li",{key:i.id,className:"px-3 py-1"},o("label",{className:"flex items-center"},e&&o("input",{type:"checkbox",checked:e.isSelected(i),onChange:()=>e.onToggle(i),className:"mr-3"}),o("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white"},i.avatarImageUrl?o("img",{src:i.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):o("span",{"aria-hidden":"true"},i.name[0])),o("span",{className:"leading-tight"},i.name,o("br",null),(n==null?void 0:n[i.id])&&o("span",{className:"text-xs font-semibold text-red-700 uppercase"},(r=n[i.id])==null?void 0:r.replace(/_/g," ")))))}))}function $e({times:t}){return o("div",{className:"mt-4 text-lg"},"Arrive by:"," ",o("span",{className:"ml-0.5 font-semibold"},t.start.time?o("time",null,z(t.start.time)):"Park Open"," - ",t.end.time?o("time",null,z(t.end.time)):"Park Close"))}function hi({booking:t,onClose:e}){const n=X(),[i,r]=w(new Set),{loadData:s,loaderElem:a}=Le(),{guests:c}=t,d=i.size===0,u=i.size===c.length;function l(){s(async()=>{d||await n.cancelBooking([...i]),e(c.filter(m=>!i.has(m)))})}return o(F,{heading:"Your Lightning Lane",theme:t.park.theme},o("h2",null,t.experience.name),o("div",null,t.park.name),o($e,{times:t}),o("div",{className:"ml-3"},o("label",{className:"flex items-center py-4"},o("input",{type:"checkbox",checked:u,onChange:()=>r(new Set(u?[]:c))}),o("span",{className:"ml-3"},"Select All"))),d?null:o("div",{className:"mb-4"},o("h3",null,"Cancel These Guests"),o(B,{guests:c.filter(m=>i.has(m)),selectable:{isSelected:()=>!0,onToggle:m=>{const f=new Set(i);f.delete(m),r(f)}}})),u?null:o("div",null,o("h3",null,"Select Guests to Cancel"),o(B,{guests:c.filter(m=>!i.has(m)),selectable:{isSelected:()=>!1,onToggle:m=>r(new Set(i).add(m))}})),o(G,{onClick:l},d?"Back":"Cancel "+(u?"Reservation":"Guests")),a)}function Xt({booking:t,onClose:e,isRebookable:n,isNew:i}){const r=ee(),[s,a]=w(t.guests),[c,d]=w(!1);return c?o(hi,{booking:O(T({},t),{guests:s}),onClose:u=>{d(!1),u.length>0?a(u):e(u)}}):o(F,{heading:"Your Lightning Lane",theme:t.park.theme,buttons:n&&o($,{onClick:()=>r.begin(t)},"Rebook")},o("h2",null,t.experience.name),o("div",null,t.park.name),o($e,{times:t}),t.choices&&o(k,null,o("p",null,"An experience you booked was temporarily unavailable during your return time. You may redeem this Lightning Lane at one of these replacement experiences:"),o("ul",{className:"list-disc mt-2 pl-8"},t.choices.map(u=>o("li",{key:u.id},u.name)))),o("div",{className:"flex mt-4"},o("h3",{className:"inline mt-0"},"Your Party"),t.cancellable&&o($,{type:"small",onClick:()=>d(!0),className:"ml-3"},"Cancel")),o(B,{guests:s,conflicts:Object.fromEntries(s.filter(u=>u.redemptions!==void 0).map(u=>[u.id,`Redemptions left: ${u.redemptions}`]))}),o(G,{onClick:()=>e(s)},i?"Done":"Back"))}function en({children:t}){return o("p",{className:"border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100"},t)}function tn(){const{ineligible:t}=De();return o(B,{guests:t,conflicts:Object.fromEntries(t.map(e=>[e.id,e.eligibleAfter?`TOO EARLY (${z(e.eligibleAfter)})`:e.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function Oe({buttonText:t,onSubmit:e}){const{eligible:n,ineligible:i,selected:r,setSelected:s}=De(),[a,c]=w(),[d,u]=be(),{maxPartySize:l}=X();return a?o(k,null,o("h3",null,"Choose Your Party"),o(B,{guests:n,selectable:{isSelected:f=>a.has(f),onToggle:f=>c(_=>{u(""),_=new Set(_);const p=_.has(f)?"delete":"add";return p==="add"&&_.size>=l?u(`Maximum party size: ${l}`):_[p](f),_})}}),i.length>0&&o(k,null,o("h3",null,"Ineligible Guests"),o(tn,null)),o(G,{disabled:a.size===0,onClick:()=>{s([...a]),c(void 0)}},"Confirm Party"),d):o(k,null,n.length>l&&r.length===l&&o(en,null,"Party size restricted"),o("div",{className:"mt-4"},o("h3",{className:"inline mt-0"},"Your Party"),o("span",null,o($,{type:"small",onClick:()=>c(new Set(r)),className:"ml-3"},"Edit"))),o(B,{guests:r}),o(G,{onClick:e},t))}function pi({offer:t,onBook:e}){const n=ee();return o(k,null,n.current&&o(en,null,"Rebooking resets the two hour timer"),o($e,{times:t}),t.changeStatus==="PARK_HOPPING"&&o("div",{className:"text-sm"},o("strong",null,"Note:")," Time changed due to park hopping"),o(Oe,{buttonText:`${n.current?"Rebook":"Book"} Lightning Lane`,onSubmit:e}))}const ht="https://widget.time.is/t.js";function gi(){if([...document.scripts].some(e=>e.src===ht))return;const t=document.createElement("script");t.src=ht,t.onload=nn,document.head.appendChild(t)}const ae={};function nn(){"time_is_widget"in self&&self.time_is_widget.init(ae)}function yi(t){gi(),ae[t]||(ae[t]={}),nn()}function on(t,e){const n=document.getElementById(t);if(!n||n.firstElementChild)return e();n.textContent=M().time,setTimeout(()=>on(t,e),100)}function bi({id:t,onSync:e}){return R(()=>{yi(t),on(t,e)},[t,e]),o("time",{id:t})}const vi={WDW:"Orlando_z161",DLR:"Anaheim_z14e"},wi=5e3;function sn({resort:t,time:e,label:n}){const i=vi[t],[r,s]=w(null);R(()=>{setTimeout(()=>s(c=>c||!1),wi)},[]);const a=j(()=>s(!0),[]);return o("table",{className:"mt-4 mx-auto text-gray-500"},o("tbody",null,o(pt,{heading:n,time:o("time",null,e||"--:--:--")}),o(pt,{heading:o("a",{href:`https://time.is/${i.split("_")[0]}`,id:"time_is_link",target:"_blank",rel:"noreferrer"},"Current time"),time:o(k,null,o(bi,{id:i,onSync:a}),r===!1&&o("span",{className:"text-sm font-sans font-semibold text-red-600"}," ","(unsynced)"))})))}function pt({heading:t,time:e}){return o("tr",null,o("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase"},t,":"),o("td",{className:"text-xl font-mono leading-tight"},"\uFEFF",e))}function ki({startTime:t,onRefresh:e}){return o(k,null,t&&o(sn,{resort:"WDW",time:t,label:"Booking start"}),o("h3",{className:"mt-4"},"Not Available Yet"),t?o("p",null,"At"," ",o("time",{dateTime:t,className:"font-semibold"},z(t)),", tap the ",o("span",{className:"font-semibold"},"Check Availability")," ","button below to start booking this Lightning Lane."):o("p",null,"Sorry, but you can't make a Lightning Lane reservation for this attraction yet."),o(Oe,{buttonText:"Check Availability",onSubmit:e}))}function xi({onClose:t}){const{ineligible:e}=De(),{eligibleAfter:n}=e[0]||{},i=ee();return o(k,null,n&&o("div",{className:"mt-4 border-2 border-green-600 rounded p-1 uppercase font-semibold text-center text-green-600 bg-green-100"},"Eligible at ",z(n)),i.current?o(k,null,o("h3",null,"Unable to Rebook"),o("p",null,"Your current reservation cannot be rebooked to this experience due to the following conflicts:")):o(k,null,o("h3",null,"No Eligible Guests"),o("p",null,"No one in your party is currently eligible for this Lightning Lane.")),o(tn,null),o(G,{onClick:t},"Back"))}function Ni({onRefresh:t}){return o(k,null,o("h3",null,"No Guests Found"),o("p",null,"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."),o(G,{onClick:t},"Try Again"))}function Si({onClose:t}){return o(k,null,o("h3",null,"No Reservations Available"),o("p",null,"There aren't enough reservation slots available for your entire party. If only part of your group wishes to go on this attraction, edit your party to check again. Otherwise, go back to the tip board and select another attraction."),o(Oe,{buttonText:"Back",onSubmit:t}))}function rn({booking:t,button:e,badge:n}){return o("div",{className:"flex items-center gap-x-3"},n,o("div",{className:"flex-1 min-w-0"},o("div",{className:"text-gray-500 text-sm font-semibold uppercase"},t.start.time?o("time",null,z(t.start.time)):o("span",null,"open")," - ",t.end.time?o("time",null,z(t.end.time)):o("span",null,"close")),o("div",{className:"text-lg font-semibold leading-tight truncate"},t.experience.name)),e&&o("div",null,e))}function an(){const t=ee(),e=Y();return t.current?o("div",{className:`sticky top-0 -mx-3 pb-1 ${e.bg}`},o("div",{className:"pb-3 bg-white"},o("div",{className:`py-1.5 ${e.bg} text-white text-sm font-semibold uppercase text-center`},"Rebooking"),o("div",{className:"mt-2 px-3"},o(rn,{booking:t.current,button:o($,{type:"small",onClick:()=>t.end(!0)},"Keep")})))):null}function Ei({experience:t,park:e,onClose:n}){const i=X(),r=ee(),[s,a]=w(),[c,d]=w(t.flex.available),[u,l]=w(c?void 0:null),[m,f]=w(),{loadData:_,loaderElem:p}=Le();async function P(){if(!u||!s)return;let E=null;await _(async()=>{const N=new Set(s.selected.map(S=>S.id));r.current&&await i.cancelBooking(r.current.guests.filter(S=>N.has(S.id)));try{E=await i.book(u)}finally{r.end()}const C=E.guests.filter(S=>!N.has(S.id));C.length>0&&(await i.cancelBooking(C),E.guests=E.guests.filter(S=>N.has(S.id))),Zt()},{410:"Offer expired"}),E&&f(E)}function v(){_(async E=>{const C=(await i.plusExperiences(e)).find(S=>S.id===t.id);C!=null&&C.flex.available?(d(!0),l(void 0)):E("Reservations not open yet")})}function b(){u&&i.cancelOffer(u),n()}const x=j(()=>{_(async()=>{try{let E=await i.guests({experience:t,park:e});const N=r.current;if(N){const C=new Set(N.guests.map(U=>U.id)),S=[...E.eligible,...E.ineligible].filter(U=>C.has(U.id)&&!(U.ineligibleReason==="TOO_EARLY"||U.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"&&t.id===N.experience.id));E=S.length>0?{eligible:[],ineligible:S}:{eligible:N.guests,ineligible:[]}}a(O(T({},E),{selected:E.eligible.slice(0,i.maxPartySize),setSelected:C=>a(S=>{if(!S)return S;const U=new Set(S.selected);return l(h=>h===null||C.some(y=>!U.has(y))?void 0:h),O(T({},S),{selected:C})})}))}catch(E){throw a({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),E}})},[i,t,e,r,_]);R(()=>{s||x()},[s,x]);const A=j(E=>{!s||s.selected.length===0||_(async()=>{try{l(await i.offer({experience:t,park:e,guests:s.selected}))}catch(N){throw E||l(null),N}},{410:u?"No reservations available":""})},[i,t,e,s,u,_]);if(R(()=>{u===void 0&&A()},[u,A]),m)return o(Xt,{booking:m,onClose:n,isNew:!0});const L=(s==null?void 0:s.eligible.length)===0&&(s==null?void 0:s.ineligible.length)===0;return o(F,{heading:"Lightning Lane",theme:e.theme,buttons:o(k,null,s&&(!c||u||L)&&o($,{onClick:b},"Cancel"),c&&u!==void 0&&o($,{onClick:A,title:"Refresh Offer"},o(Ae,null)))},o(an,null),o("h2",null,t.name),o("div",null,e.name),o(fi,{value:s||{eligible:[],ineligible:[],selected:[],setSelected:()=>null}},(s==null?void 0:s.eligible.length)===0?L?o(Ni,{onRefresh:x}):o(xi,{onClose:n}):!s||u===void 0?o("div",null):c?u===null?o(Si,{onClose:n}):o(pi,{offer:u,onBook:P}):o(ki,{startTime:t.flex.enrollmentStartTime,onRefresh:v})),p)}function Ti({onClose:t}){const e=X(),n=Y(),[i,r]=w(),[s,a]=w(),[c,d]=w(!1);function u(m){!s||(r(f=>{if(!!f)return m.length>0?s.guests=m:f.splice(f.indexOf(s),1),f}),a(void 0))}R(()=>{d(!0),e.bookings().then(m=>r(m))},[e]);function l(){d(!1),setTimeout(t,300)}return s?o(Xt,{booking:s,onClose:u,isRebookable:e.isRebookable(s)}):o(k,null,o(ye,{onClick:l,"data-testid":"panel-shade",className:"bg-black bg-opacity-75"}),o(F,{heading:"Your Lightning Lanes",buttons:o($,{onClick:l},"Close"),className:`top-auto max-h-[50%] ${c?"h-[275px]":"h-0"} duration-200 ease-linear`},i&&i.length>0?o("ul",null,(i||[]).map(m=>{var f;return o("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",key:(f=m.guests[0])==null?void 0:f.entitlementId},o(rn,{booking:m,button:o($,{type:"small",onClick:()=>a(m)},"More"),badge:e.isRebookable(m)&&o("div",{title:"Rebookable",className:`w-2.5 h-2.5 rounded-full ${n.bg}`})}))})):o("div",{className:"mt-4 text-sm font-semibold text-center uppercase  text-gray-500"},i&&"No current reservations")))}function Me({label:t,children:e}){return o("div",{className:"flex items-center flex-1 whitespace-nowrap"},o("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500"},t)," ",e)}function Ci({experience:t,onClick:e}){const{flex:n}=t;return o(Me,{label:"Genie+"},n.nextAvailableTime?o("span",null,o($,{onClick:()=>e(t)},z(n.nextAvailableTime))):o("span",{className:"inline-block border-2 border-gray-500 rounded px-1.5 py-0.5 font-semibold text-gray-500 bg-gray-100"},"none"))}function Ii({experience:{type:t,standby:e}}){return e.displayNextShowTime||t==="ENTERTAINMENT"&&!e.waitTime?o(Ri,{standby:e}):o(Pi,{standby:e})}const Pi=({standby:t})=>o(Me,{label:"Standby"},t.available?o(cn,{time:t.waitTime!==void 0?t.waitTime+" min":"now"}):o(un,{text:"down"})),Ri=({standby:t})=>o(Me,{label:o(k,null,"Next ",o("span",{className:"hidden xs:inline"},"Show"))},t.displayNextShowTime?o(cn,{time:t.displayNextShowTime}):o(un,{text:"none"})),ln="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",cn=({time:t})=>o("span",{className:`${ln} border-gray-500 text-gray-500 bg-gray-100`},t),un=({text:t})=>o("span",{className:`${ln} border-red-600 text-red-600 bg-red-100`},t);function gt({label:t,time:e}){const n=Y();return o("div",{className:`-mx-3 px-3 pb-1 ${n.bg} text-white text-sm font-semibold uppercase text-center`},t,": ",o("time",null,z(e)))}async function Ai(t={}){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(i=>{e(i)},i=>{n(i)},t)})}const Li={maximumAge:15e3,timeout:2e3};function Di(t){const[e,n]=w(),i=j(()=>{t(async()=>{try{const{coords:r}=await Ai(Li);n([r.latitude,r.longitude])}catch{n(void 0)}})},[t]);return[e,i]}const $i=6e4,Oi=30,Mi=60,yt="bg1.genie.tipBoard.park",bt="bg1.genie.tipBoard.starred",Bi=(t,e)=>+e.lp-+t.lp,Gi=(t,e)=>(t.priority||1/0)-(e.priority||1/0),ke=(t,e)=>(e.standby.waitTime||-1)-(t.standby.waitTime||-1),xe=(t,e)=>(t.flex.nextAvailableTime||"").localeCompare(e.flex.nextAvailableTime||""),Ui=(t,e)=>t.name.toLowerCase().localeCompare(e.name.toLowerCase()),vt=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)),Fi=(t,e,n)=>n?vt(t.geo,n)-vt(e.geo,n):0;function Hi(t,e){const{n,s:i,e:r,w:s}=t.geo,[a,c]=e;return a<n&&a>i&&c<r&&c>s}function wt(t){const[e,n]=t.split(":").map(Number);return e*60+n}const Wi={priority:(t,e)=>Bi(t,e)||Gi(t,e)||ke(t,e)||xe(t,e),standby:(t,e)=>ke(t,e)||xe(t,e),soonest:(t,e)=>xe(t,e)||ke(t,e),nearby:(t,e,n)=>Fi(t,e,n),aToZ:()=>0};function ji(){const t=X(),{parks:e}=t,[n,i]=w(()=>{const{id:h=e[0].id,date:y=""}=JSON.parse(sessionStorage.getItem(yt)||"{}")||{};return y===M().date&&e.find(I=>I.id===h)||e[0]}),[r,s]=w([]),[a,c]=w(),d=()=>c(void 0),[u,l]=w("priority"),{loadData:m,loaderElem:f,isLoading:_}=Le(),[,p]=w(0),[P,v]=w(()=>({current:null,begin:h=>{v(O(T({},P),{current:h})),i(h.park),d()},end:(h=!1)=>{v(y=>y.current?O(T({},y),{current:null}):y),h&&d()}})),b=Ie(null),x=r.length>0&&!r[0].flex.available?r[0].flex.enrollmentStartTime:void 0,A=r.length>0?t.pdt(n):void 0,[L,E]=w(()=>{let h=[];try{h=JSON.parse(localStorage.getItem(bt)||"[]")}catch(y){console.error(y)}return new Set(h)}),[N,C]=Di(m);R(()=>{u==="nearby"&&C()},[u,C]);const S=j((h=!0)=>{p(y=>!h&&Date.now()-y<$i?y:(m(async()=>{l(Q=>(Q==="nearby"&&C(),Q));const I=await t.plusExperiences(n),dn=wt(M().time);s(I.map(Q=>{const Be=Q.standby.waitTime||0,Ge=Q.flex.nextAvailableTime;if(!Ge)return O(T({},Q),{lp:!1});const _n=wt(Ge)-dn;return O(T({},Q),{lp:Be>=Oi&&_n<=Math.min(Mi,(4-Math.trunc(Q.priority||4))/3*Be)})}))}),Date.now()))},[t,n,m,C]);R(()=>{s([]),S()},[S]),R(()=>{if(_||a)return;const h=()=>{document.hidden||S(!1)};return document.addEventListener("visibilitychange",h),()=>{document.removeEventListener("visibilitychange",h)}},[a,S,_]),R(()=>{var h;(h=b.current)==null||h.scroll(0,0)},[n,u,P]),R(()=>{sessionStorage.setItem(yt,JSON.stringify({id:n.id,date:M().date}))},[n]);function U(h){const I=h.currentTarget.getAttribute("data-id");!I||(L.has(I)?L.delete(I):L.add(I),localStorage.setItem(bt,JSON.stringify([...L])),E(new Set([...L])))}return o(ri,{value:P},o(F,{heading:o(k,null,"G",o("span",{className:"hidden xs:inline"},"enie"),"+"),theme:n.theme,buttons:o(k,null,o($,{onClick:()=>c(o(Ti,{onClose:d})),title:"Your Lightning Lanes"},o(_t,null)),o(ft,{value:n.id,onChange:h=>{i(e.find(y=>y.id===h.currentTarget.value))},title:"Park"},e.map(h=>o("option",{value:h.id,title:h.name,key:h.id},h.abbr))),o(ft,{value:u,onChange:h=>l(h.currentTarget.value),title:"Sort By"},o("option",{value:"priority"},"Priority"),o("option",{value:"nearby"},"Nearby"),o("option",{value:"standby"},"Standby"),o("option",{value:"soonest"},"Soonest"),o("option",{value:"aToZ"},"A to Z")),o($,{onClick:S,title:"Refresh Tip Board"},o(Ae,null))),containerRef:b},o("div",{"aria-hidden":!!a},o(an,null),x?o(gt,{label:"Booking start",time:x}):A?o(gt,{label:"Next drop",time:A}):null,o("ul",null,r.sort((h,y)=>+L.has(y.id)-+L.has(h.id)||+y.flex.available-+h.flex.available||Wi[u==="nearby"&&!(N&&Hi(n,N))?"priority":u](h,y,N)||Ui(h,y)).map(h=>o("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",key:h.id+(L.has(h.id)?"*":"")},o("div",{className:"flex items-center gap-x-2 mt-2"},o(zi,{experience:h,starred:L,onClick:U}),o("h2",{className:"flex-1 mt-0 text-lg leading-tight truncate"},h.name),h.lp&&o("button",{title:"Lightning Pick",className:"px-2",onClick:()=>c(o(Yi,{onClose:d}))},o(_t,{className:`text${n.theme.bg.slice(2)}`}))),h.flex.preexistingPlan&&o("div",{className:"mt-2 border-2 border-green-600 rounded p-1 text-sm uppercase font-semibold text-center text-green-600 bg-green-100"},"Lightning Lane Booked"),o("div",{className:"flex flex-wrap gap-1.5 mt-2"},o(Ii,{experience:h}),o(Ci,{experience:h,onClick:y=>c(o(Ei,{experience:y,park:n,onClose:()=>{d(),S(!1)}}))}))))),!_&&o("div",{className:"mt-12 text-center"},o(Kt,null)),f)),a)}function zi({experience:t,starred:e,onClick:n}){const i=Y();return o("div",{className:"w-4 h-6"},o("button",{"data-id":t.id,title:"Favorite",className:"-translate-x-2 -translate-y-2 p-2",onClick:n},o(_i,{className:e.has(t.id)?"text"+i.bg.slice(2):"text-gray-300"})))}function Yi({onClose:t}){return o(ye,{className:{outer:"bg-black bg-opacity-75",inner:"p-2 flex items-center justify-center"},onClick:t},o("div",{className:"rounded-lg px-3 py-4 bg-white",onClick:e=>e.stopPropagation()},o("h2",{className:"mt-0"},"Lightning Pick"),o("p",null,"When an attraction with a long wait has a Lightning Lane return time in the near future, it's highlighted as a Lightning Pick. Book these quick before they're gone!"),o("div",null,o($,{type:"full",onClick:t},"Close"))))}const Qi=ge,Ji={success:5e3,failure:1e3};function qi({guests:t,result:e,onDone:n}){const{boardingGroup:i,conflicts:r}=e,s=t.filter(u=>!(u.id in r)),a=t.filter(u=>u.id in r),[c,d]=w(!0);return R(()=>{setTimeout(()=>d(!1),Ji[i?"success":"failure"])},[i]),o(k,null,i?o(k,null,o("h2",{className:"mt-5 text-xl"},"Boarding Group: ",i),o(B,{guests:s}),Object.keys(r).length>0&&o(k,null,o("p",{className:"font-semibold"},"These guests could not join:"),o(B,{guests:a,conflicts:r})),o("p",null,"Refer to the My Disney Experience app for return time and other information.")):o(k,null,o("h2",{className:"mt-5 text-xl"},"Sorry!"),o("p",null,"A boarding group could not be obtained."),o(B,{guests:a,conflicts:r})),c?null:o(G,{onClick:n},"Done"))}function Ki({guests:t,party:e,onToggle:n,onConfirm:i}){return o(k,null,o("div",{className:"mt-5"},o("h2",{className:"inline mr-3 text-xl"},"Choose Your Party"),o(Kt,null)),t?t.length>0?o(B,{guests:t,selectable:{isSelected:r=>e.has(r),onToggle:n}}):o("p",null,"No guests available"):o("p",null,"Loading guests\u2026"),o(G,{disabled:e.size===0,onClick:i},"Confirm Party"))}function Vi({queue:t}){return o(k,null,t.howToEnterMessage.split(`

`).map((e,n)=>o("p",{key:n},e)))}const Zi=999;function Xi({guests:t,joinQueue:e,onEdit:n}){const[i,r]=w(!1),[s,a]=be();async function c(){r(!0),a("");const d=qt(Zi);try{await e()||a("Queue not open yet")}catch(u){a("Error: try again","error"),u instanceof re||console.error(u)}finally{await d,r(!1)}}return o(k,null,o("div",{className:"mt-4"},o("h2",{className:"inline mr-3 text-xl"},"Your Party"),o($,{type:"small",onClick:n},"Edit")),o(B,{guests:t}),o(G,{disabled:i,onClick:c},"Join Boarding Group"),s)}function eo({queue:t,queues:e,onChange:n}){e||(e=[]);const{bg:i}=Y(),r=`block w-full ${i} text-white text-xl font-semibold`;return o(k,null,e.length<=1?o("span",{className:`${r} px-1 truncate`},t.name):o("select",{className:`${r} pr-1`,value:t.id,onChange:s=>n?n(s.currentTarget.value):null},e.map(s=>o("option",{key:s.id,value:s.id,className:"text-base font-normal"},s.name))))}const kt=t=>t.categoryContentId==="attraction";function to(){const t=Qi(),[e,n]=w(),[i,r]=w(null),[s,a]=w(),[c,d]=w(new Set),[u,l]=w({boardingGroup:null,conflicts:{},closed:!0}),[m,f]=w(!1),[_,p]=w("ChooseParty"),[P,v]=be(),b=Ie(null),x=j(async()=>{v(""),f(!0);const h=(await t.getQueues()).filter(y=>y.isAcceptingJoins||y.isAcceptingPartyCreation).sort((y,I)=>+kt(I)-+kt(y)||y.name.localeCompare(I.name));f(!1),n(y=>(y&&h.length===0&&v("No queues available"),h))},[t,v]);R(()=>{x();const h=()=>{document.hidden||x()};return document.addEventListener("visibilitychange",h),()=>{document.removeEventListener("visibilitychange",h)}},[x]),R(()=>{r(h=>{const y=h&&(e==null?void 0:e.find(I=>I.id===h.id));return y||(a(void 0),e&&e.length>0?e[0]:null)})},[e]),R(()=>{if(s||!i)return;let h=!1;return(async()=>{const y=await t.getLinkedGuests(i);h||(a(y),d(new Set(y.filter(I=>I.isPreselected))))})(),()=>{h=!0}},[t,i,s]),R(()=>{var h;(h=b.current)==null||h.scroll(0,0)},[_]);function A(h){const y=new Set(c);y[y.has(h)?"delete":"add"](h);const I=Number(i==null?void 0:i.maxPartySize);I>0&&y.size>I?v(`Maximum party size: ${I}`):(d(y),v(""))}function L(h){const y=e==null?void 0:e.find(I=>I.id===h);y&&(r(y),a(void 0))}async function E(){if(!i||!(await t.getQueue(i)).isAcceptingJoins)return!1;const h=await t.joinQueue(i,[...c]);return l(h),p("BGResult"),h.boardingGroup!==null&&Zt(),!0}if((e==null?void 0:e.length)===0)return o(F,{heading:"No Active Queues"},o("p",null,"You can't join any virtual queues just yet. Check back within an hour of the queue opening time, or tap the Refresh button to check again."),o(G,{disabled:m,onClick:x},"Refresh"),P);if(!i)return o("div",null);const N=(s||[]).filter(h=>c.has(h)),C=o(sn,{resort:t.resort,time:i.nextScheduledOpenTime,label:"Next queue opening"}),S=o(eo,{queue:i,queues:_==="ChooseParty"?e:[],onChange:L});return{ChooseParty:o(F,{heading:S,containerRef:b},o(Vi,{queue:i}),C,o(Ki,{guests:s,party:c,onToggle:A,onConfirm:()=>p("JoinQueue")}),P),JoinQueue:o(F,{heading:S},C,o(Xi,{guests:N,onEdit:()=>p("ChooseParty"),joinQueue:E})),BGResult:o(F,{heading:S},o(qi,{guests:N,result:u,onDone:()=>p("ChooseParty")}))}[_]}const Te=new On("bg1.auth");jn(origin)?xt(new Yn({origin,authStore:Te}),to):Hn(origin)?Pe.load({origin,authStore:Te}).then(t=>xt(t,ji)):location.href="https://joelface.github.io/bg1/start.html";async function xt(t,e){document.head.innerHTML+=`
    <meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>BG1</title>
  `,document.body.innerHTML="<div id=app><div>",Dn({WDW:"America/New_York",DLR:"America/Los_Angeles"}[t.resort]);const n=document.getElementById("app");if(!n)return;Ln(n).render(o(Qn,{value:t},o(si,{authStore:Te},o(e,null)))),no()}function no(){document.body.addEventListener("click",()=>null)}
