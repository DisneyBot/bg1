var se,v,Rt,te,Ve,Pt,pe={},Dt=[],wn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function H(t,e){for(var n in e)t[n]=e[n];return t}function At(t){var e=t.parentNode;e&&e.removeChild(t)}function o(t,e,n){var i,r,s,a={};for(s in e)s=="key"?i=e[s]:s=="ref"?r=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?se.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)a[s]===void 0&&(a[s]=t.defaultProps[s]);return ne(t,a,i,r,null)}function ne(t,e,n,i,r){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r==null?++Rt:r};return r==null&&v.vnode!=null&&v.vnode(s),s}function N(t){return t.children}function z(t,e){this.props=t,this.context=e}function K(t,e){if(e==null)return t.__?K(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?K(t):null}function Lt(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Lt(t)}}function Ie(t){(!t.__d&&(t.__d=!0)&&te.push(t)&&!ge.__r++||Ve!==v.debounceRendering)&&((Ve=v.debounceRendering)||setTimeout)(ge)}function ge(){for(var t;ge.__r=te.length;)t=te.sort(function(e,n){return e.__v.__b-n.__v.__b}),te=[],t.some(function(e){var n,i,r,s,a,c;e.__d&&(a=(s=(n=e).__v).__e,(c=n.__P)&&(i=[],(r=H({},s)).__v=s.__v+1,Ae(c,s,r,n.__n,c.ownerSVGElement!==void 0,s.__h!=null?[a]:null,i,a==null?K(s):a,s.__h),Bt(i,s),s.__e!=a&&Lt(s)))})}function $t(t,e,n,i,r,s,a,c,f,d){var l,m,u,_,p,E,h,y=i&&i.__k||Dt,b=y.length;for(n.__k=[],l=0;l<e.length;l++)if((_=n.__k[l]=(_=e[l])==null||typeof _=="boolean"?null:typeof _=="string"||typeof _=="number"||typeof _=="bigint"?ne(null,_,null,null,_):Array.isArray(_)?ne(N,{children:_},null,null,null):_.__b>0?ne(_.type,_.props,_.key,null,_.__v):_)!=null){if(_.__=n,_.__b=n.__b+1,(u=y[l])===null||u&&_.key==u.key&&_.type===u.type)y[l]=void 0;else for(m=0;m<b;m++){if((u=y[m])&&_.key==u.key&&_.type===u.type){y[m]=void 0;break}u=null}Ae(t,_,u=u||pe,r,s,a,c,f,d),p=_.__e,(m=_.ref)&&u.ref!=m&&(h||(h=[]),u.ref&&h.push(u.ref,null,_),h.push(m,_.__c||p,_)),p!=null?(E==null&&(E=p),typeof _.type=="function"&&_.__k===u.__k?_.__d=f=Ot(_,f,t):f=Mt(t,_,u,y,p,f),typeof n.type=="function"&&(n.__d=f)):f&&u.__e==f&&f.parentNode!=t&&(f=K(u))}for(n.__e=E,l=b;l--;)y[l]!=null&&(typeof n.type=="function"&&y[l].__e!=null&&y[l].__e==n.__d&&(n.__d=K(i,l+1)),Ut(y[l],y[l]));if(h)for(l=0;l<h.length;l++)Gt(h[l],h[++l],h[++l])}function Ot(t,e,n){for(var i,r=t.__k,s=0;r&&s<r.length;s++)(i=r[s])&&(i.__=t,e=typeof i.type=="function"?Ot(i,e,n):Mt(n,i,i,r,i.__e,e));return e}function j(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){j(n,e)}):e.push(t)),e}function Mt(t,e,n,i,r,s){var a,c,f;if(e.__d!==void 0)a=e.__d,e.__d=void 0;else if(n==null||r!=s||r.parentNode==null)e:if(s==null||s.parentNode!==t)t.appendChild(r),a=null;else{for(c=s,f=0;(c=c.nextSibling)&&f<i.length;f+=2)if(c==r)break e;t.insertBefore(r,s),a=s}return a!==void 0?a:r.nextSibling}function xn(t,e,n,i,r){var s;for(s in n)s==="children"||s==="key"||s in e||ye(t,s,null,n[s],i);for(s in e)r&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||n[s]===e[s]||ye(t,s,e[s],n[s],i)}function Je(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=n==null?"":typeof n!="number"||wn.test(e)?n:n+"px"}function ye(t,e,n,i,r){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||Je(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||Je(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i||t.addEventListener(e,s?qe:Qe,s):t.removeEventListener(e,s?qe:Qe,s);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n==null?"":n;break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,n):t.removeAttribute(e))}}function Qe(t){this.l[t.type+!1](v.event?v.event(t):t)}function qe(t){this.l[t.type+!0](v.event?v.event(t):t)}function Ae(t,e,n,i,r,s,a,c,f){var d,l,m,u,_,p,E,h,y,b,T,g,C,x=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(f=n.__h,c=e.__e=n.__e,e.__h=null,s=[c]),(d=v.__b)&&d(e);try{e:if(typeof x=="function"){if(h=e.props,y=(d=x.contextType)&&i[d.__c],b=d?y?y.props.value:d.__:i,n.__c?E=(l=e.__c=n.__c).__=l.__E:("prototype"in x&&x.prototype.render?e.__c=l=new x(h,b):(e.__c=l=new z(h,b),l.constructor=x,l.render=En),y&&y.sub(l),l.props=h,l.state||(l.state={}),l.context=b,l.__n=i,m=l.__d=!0,l.__h=[]),l.__s==null&&(l.__s=l.state),x.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=H({},l.__s)),H(l.__s,x.getDerivedStateFromProps(h,l.__s))),u=l.props,_=l.state,m)x.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(x.getDerivedStateFromProps==null&&h!==u&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(h,b),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(h,l.__s,b)===!1||e.__v===n.__v){l.props=h,l.state=l.__s,e.__v!==n.__v&&(l.__d=!1),l.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(S){S&&(S.__=e)}),l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(h,l.__s,b),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(u,_,p)})}if(l.context=b,l.props=h,l.__v=e,l.__P=t,T=v.__r,g=0,"prototype"in x&&x.prototype.render)l.state=l.__s,l.__d=!1,T&&T(e),d=l.render(l.props,l.state,l.context);else do l.__d=!1,T&&T(e),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++g<25);l.state=l.__s,l.getChildContext!=null&&(i=H(H({},i),l.getChildContext())),m||l.getSnapshotBeforeUpdate==null||(p=l.getSnapshotBeforeUpdate(u,_)),C=d!=null&&d.type===N&&d.key==null?d.props.children:d,$t(t,Array.isArray(C)?C:[C],e,n,i,r,s,a,c,f),l.base=e.__e,e.__h=null,l.__h.length&&a.push(l),E&&(l.__E=l.__=null),l.__e=!1}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Nn(n.__e,e,n,i,r,s,a,f);(d=v.diffed)&&d(e)}catch(S){e.__v=null,(f||s!=null)&&(e.__e=c,e.__h=!!f,s[s.indexOf(c)]=null),v.__e(S,e,n)}}function Bt(t,e){v.__c&&v.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(i){i.call(n)})}catch(i){v.__e(i,n.__v)}})}function Nn(t,e,n,i,r,s,a,c){var f,d,l,m=n.props,u=e.props,_=e.type,p=0;if(_==="svg"&&(r=!0),s!=null){for(;p<s.length;p++)if((f=s[p])&&"setAttribute"in f==!!_&&(_?f.localName===_:f.nodeType===3)){t=f,s[p]=null;break}}if(t==null){if(_===null)return document.createTextNode(u);t=r?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,u.is&&u),s=null,c=!1}if(_===null)m===u||c&&t.data===u||(t.data=u);else{if(s=s&&se.call(t.childNodes),d=(m=n.props||pe).dangerouslySetInnerHTML,l=u.dangerouslySetInnerHTML,!c){if(s!=null)for(m={},p=0;p<t.attributes.length;p++)m[t.attributes[p].name]=t.attributes[p].value;(l||d)&&(l&&(d&&l.__html==d.__html||l.__html===t.innerHTML)||(t.innerHTML=l&&l.__html||""))}if(xn(t,u,m,r,c),l)e.__k=[];else if(p=e.props.children,$t(t,Array.isArray(p)?p:[p],e,n,i,r&&_!=="foreignObject",s,a,s?s[0]:n.__k&&K(n,0),c),s!=null)for(p=s.length;p--;)s[p]!=null&&At(s[p]);c||("value"in u&&(p=u.value)!==void 0&&(p!==t.value||_==="progress"&&!p||_==="option"&&p!==m.value)&&ye(t,"value",p,m.value,!1),"checked"in u&&(p=u.checked)!==void 0&&p!==t.checked&&ye(t,"checked",p,m.checked,!1))}return t}function Gt(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(i){v.__e(i,n)}}function Ut(t,e,n){var i,r;if(v.unmount&&v.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||Gt(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){v.__e(s,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&Ut(i[r],e,typeof t.type!="function");n||t.__e==null||At(t.__e),t.__e=t.__d=void 0}function En(t,e,n){return this.constructor(t,n)}function Wt(t,e,n){var i,r,s;v.__&&v.__(t,e),r=(i=typeof n=="function")?null:n&&n.__k||e.__k,s=[],Ae(e,t=(!i&&n||e).__k=o(N,null,[t]),r||pe,pe,e.ownerSVGElement!==void 0,!i&&n?[n]:r?null:e.firstChild?se.call(e.childNodes):null,s,!i&&n?n:r?r.__e:e.firstChild,i),Bt(s,t)}function Sn(t,e,n){var i,r,s,a=H({},t.props);for(s in e)s=="key"?i=e[s]:s=="ref"?r=e[s]:a[s]=e[s];return arguments.length>2&&(a.children=arguments.length>3?se.call(arguments,2):n),ne(t.type,a,i||t.key,r||t.ref,null)}function re(t,e){var n={__c:e="__cC"+Pt++,__:t,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,s;return this.getChildContext||(r=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&r.some(Ie)},this.sub=function(a){r.push(a);var c=a.componentWillUnmount;a.componentWillUnmount=function(){r.splice(r.indexOf(a),1),c&&c.call(a)}}),i.children}};return n.Provider.__=n.Consumer.contextType=n}se=Dt.slice,v={__e:function(t,e,n,i){for(var r,s,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),a=r.__d),a)return r.__E=r}catch(c){t=c}throw t}},Rt=0,z.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=H({},this.state),typeof t=="function"&&(t=t(H({},n),this.props)),t&&H(n,t),t!=null&&this.__v&&(e&&this.__h.push(e),Ie(this))},z.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ie(this))},z.prototype.render=N,te=[],ge.__r=0,Pt=0;var Z,P,xe,Ke,ie=0,Ft=[],fe=[],Ze=v.__b,Xe=v.__r,et=v.diffed,tt=v.__c,nt=v.unmount;function ae(t,e){v.__h&&v.__h(P,t,ie||e),ie=0;var n=P.__H||(P.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:fe}),n.__[t]}function w(t){return ie=1,Tn(Ht,t)}function Tn(t,e,n){var i=ae(Z++,2);if(i.t=t,!i.__c&&(i.__=[n?n(e):Ht(void 0,e),function(s){var a=i.__N?i.__N[0]:i.__[0],c=i.t(a,s);a!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=P,!P.u)){P.u=!0;var r=P.shouldComponentUpdate;P.shouldComponentUpdate=function(s,a,c){if(!i.__c.__H)return!0;var f=i.__c.__H.__.filter(function(l){return l.__c});if(f.every(function(l){return!l.__N}))return!r||r.call(this,s,a,c);var d=!1;return f.forEach(function(l){if(l.__N){var m=l.__[0];l.__=l.__N,l.__N=void 0,m!==l.__[0]&&(d=!0)}}),!!d&&(!r||r.call(this,s,a,c))}}return i.__N||i.__}function L(t,e){var n=ae(Z++,3);!v.__s&&$e(n.__H,e)&&(n.__=t,n.i=e,P.__H.__h.push(n))}function Cn(t,e){var n=ae(Z++,4);!v.__s&&$e(n.__H,e)&&(n.__=t,n.i=e,P.__h.push(n))}function oe(t){return ie=5,Le(function(){return{current:t}},[])}function Le(t,e){var n=ae(Z++,7);return $e(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function Y(t,e){return ie=8,Le(function(){return t},e)}function le(t){var e=P.context[t.__c],n=ae(Z++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(P)),e.props.value):t.__}function In(){for(var t;t=Ft.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(_e),t.__H.__h.forEach(Re),t.__H.__h=[]}catch(e){t.__H.__h=[],v.__e(e,t.__v)}}v.__b=function(t){P=null,Ze&&Ze(t)},v.__r=function(t){Xe&&Xe(t),Z=0;var e=(P=t.__c).__H;e&&(xe===P?(e.__h=[],P.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=fe,n.__N=n.i=void 0})):(e.__h.forEach(_e),e.__h.forEach(Re),e.__h=[])),xe=P},v.diffed=function(t){et&&et(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ft.push(e)!==1&&Ke===v.requestAnimationFrame||((Ke=v.requestAnimationFrame)||function(n){var i,r=function(){clearTimeout(s),it&&cancelAnimationFrame(i),setTimeout(n)},s=setTimeout(r,100);it&&(i=requestAnimationFrame(r))})(In)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==fe&&(n.__=n.__V),n.i=void 0,n.__V=fe})),xe=P=null},v.__c=function(t,e){e.some(function(n){try{n.__h.forEach(_e),n.__h=n.__h.filter(function(i){return!i.__||Re(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],v.__e(i,n.__v)}}),tt&&tt(t,e)},v.unmount=function(t){nt&&nt(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{_e(i)}catch(r){e=r}}),e&&v.__e(e,n.__v))};var it=typeof requestAnimationFrame=="function";function _e(t){var e=P,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),P=e}function Re(t){var e=P;t.__c=t.__(),P=e}function $e(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}function Ht(t,e){return typeof e=="function"?e(t):e}function Rn(t,e){for(var n in e)t[n]=e[n];return t}function ot(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var i in e)if(i!=="__source"&&t[i]!==e[i])return!0;return!1}function st(t){this.props=t}(st.prototype=new z).isPureReactComponent=!0,st.prototype.shouldComponentUpdate=function(t,e){return ot(this.props,t)||ot(this.state,e)};var rt=v.__b;v.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),rt&&rt(t)};var at=function(t,e){return t==null?null:j(j(t).map(e))},Pn={map:at,forEach:at,count:function(t){return t?j(t).length:0},only:function(t){var e=j(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:j},Dn=v.__e;v.__e=function(t,e,n,i){if(t.then){for(var r,s=e;s=s.__;)if((r=s.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}Dn(t,e,n,i)};var lt=v.unmount;function Ne(){this.__u=0,this.t=null,this.__b=null}function zt(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function de(){this.u=null,this.o=null}v.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),lt&&lt(t)},(Ne.prototype=new z).__c=function(t,e){var n=e.__c,i=this;i.t==null&&(i.t=[]),i.t.push(n);var r=zt(i.__v),s=!1,a=function(){s||(s=!0,n.__R=null,r?r(c):c())};n.__R=a;var c=function(){if(!--i.__u){if(i.state.__a){var d=i.state.__a;i.__v.__k[0]=function m(u,_,p){return u&&(u.__v=null,u.__k=u.__k&&u.__k.map(function(E){return m(E,_,p)}),u.__c&&u.__c.__P===_&&(u.__e&&p.insertBefore(u.__e,u.__d),u.__c.__e=!0,u.__c.__P=p)),u}(d,d.__c.__P,d.__c.__O)}var l;for(i.setState({__a:i.__b=null});l=i.t.pop();)l.forceUpdate()}},f=e.__h===!0;i.__u++||f||i.setState({__a:i.__b=i.__v.__k[0]}),t.then(a,a)},Ne.prototype.componentWillUnmount=function(){this.t=[]},Ne.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=function s(a,c,f){return a&&(a.__c&&a.__c.__H&&(a.__c.__H.__.forEach(function(d){typeof d.__c=="function"&&d.__c()}),a.__c.__H=null),(a=Rn({},a)).__c!=null&&(a.__c.__P===f&&(a.__c.__P=c),a.__c=null),a.__k=a.__k&&a.__k.map(function(d){return s(d,c,f)})),a}(this.__b,n,i.__O=i.__P)}this.__b=null}var r=e.__a&&o(N,null,t.fallback);return r&&(r.__h=null),[o(N,null,e.__a?null:t.children),r]};var ct=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};(de.prototype=new z).__a=function(t){var e=this,n=zt(e.__v),i=e.o.get(t);return i[0]++,function(r){var s=function(){e.props.revealOrder?(i.push(r),ct(e,t,i)):r()};n?n(s):s()}},de.prototype.render=function(t){this.u=null,this.o=new Map;var e=j(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},de.prototype.componentDidUpdate=de.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){ct(t,n,e)})};var jt=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,An=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ln=typeof document!="undefined",$n=function(t){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};function On(t,e,n){return e.__k==null&&(e.textContent=""),Wt(t,e),typeof n=="function"&&n(),t?t.__c:null}z.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(z.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var ut=v.event;function Mn(){}function Bn(){return this.cancelBubble}function Gn(){return this.defaultPrevented}v.event=function(t){return ut&&(t=ut(t)),t.persist=Mn,t.isPropagationStopped=Bn,t.isDefaultPrevented=Gn,t.nativeEvent=t};var dt={configurable:!0,get:function(){return this.class}},ft=v.vnode;v.vnode=function(t){var e=t.type,n=t.props,i=n;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var s in i={},n){var a=n[s];Ln&&s==="children"&&e==="noscript"||s==="value"&&"defaultValue"in n&&a==null||(s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&a===!0?a="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!$n(n.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():r&&An.test(s)?s=s.replace(/[A-Z0-9]/g,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput$/i.test(s)&&(s=s.toLowerCase(),i[s]&&(s="oninputCapture")),i[s]=a)}e=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=j(n.children).forEach(function(c){c.props.selected=i.value.indexOf(c.props.value)!=-1})),e=="select"&&i.defaultValue!=null&&(i.value=j(n.children).forEach(function(c){c.props.selected=i.multiple?i.defaultValue.indexOf(c.props.value)!=-1:i.defaultValue==c.props.value})),t.props=i,n.class!=n.className&&(dt.enumerable="className"in n,n.className!=null&&(i.class=n.className),Object.defineProperty(i,"className",dt))}t.$$typeof=jt,ft&&ft(t)};var _t=v.__r;v.__r=function(t){_t&&_t(t),t.__c};function Yt(t){return!!t&&t.$$typeof===jt}function Un(t){return Yt(t)?Sn.apply(null,arguments):t}function Wn(t){return!!t.__k&&(Wt(null,t),!0)}function Fn(t){return{render(e){On(e,t)},unmount(){Wn(t)}}}let Vt="America/New_York";function Hn(t){Vt=t}function M(t){t=new Date(t||Date.now());const e={},n="2-digit";return Intl.DateTimeFormat("en-US",{timeZone:Vt,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n}).formatToParts(t).forEach(i=>e[i.type]=i.value),{date:`${e.year}-${e.month}-${e.day}`,time:`${e.hour}:${e.minute}:${e.second}`}}function Q(t){const e=t.split(":").slice(0,2).map(Number),n=e[0]>=12?"PM":"AM";return e[0]=e[0]%12||12,e.map(i=>String(i).padStart(2,"0")).join(":").replace(/^0/,"")+" "+n}function ht(t){const[e,n]=t.slice(0,19).split("T");return{date:e,time:n}}function Jt({start:t,end:e}){if(!e)return Ee(t);const n=M().date,i=(t.date||"")<n?"Park Open":Ee(t,"Park Open"),r=Ee(e,"Park Close");return`${i} - ${r}`}function Ee({date:t,time:e}={},n=""){const i=M();return t&&t!==i.date?new Date(t+"T00:00").toLocaleString("en-US",{month:"short",day:"numeric"})+(e?", "+Q(e):""):e?Q(e):n}class zn extends Error{constructor(e){super(`Auth data "${e}" missing or expired`),this.name="ReauthNeeded"}}class jn{constructor(e,n=localStorage){this.storageKey=e,this.storage=n}getData(){try{const e=this.storage.getItem(this.storageKey);if(e){const{swid:n,accessToken:i,expires:r}=JSON.parse(e),s=M(new Date(r)),a=M();if(s.date>a.date||s.date===a.date&&s.time>a.time&&s.time>="17")return{swid:n,accessToken:i}}}catch(e){console.error(e)}throw new zn(this.storageKey)}setData(e){this.storage.setItem(this.storageKey,JSON.stringify(e))}deleteData(){this.storage.removeItem(this.storageKey)}}const Yn="modulepreload",mt={},Vn="/bg1/",pt=function(e,n){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=`${Vn}${i}`,i in mt)return;mt[i]=!0;const r=i.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":Yn,r||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),r)return new Promise((c,f)=>{a.addEventListener("load",c),a.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())},Jn=8e3;async function ve(t,e={}){const{params:n,data:i,timeout:r=Jn,...s}=e;e=s,e.referrer||(e.referrer=""),e.credentials||(e.credentials="omit"),e.cache||(e.cache="no-store"),e.headers={"User-Agent":"Mozilla/5.0",...e.headers||{}},n&&Object.keys(n).length>0&&(t+=(t.includes("?")?"&":"?")+Object.entries(n).filter(([,d])=>d!=="").map(d=>d.map(encodeURIComponent).join("=")).join("&")),i&&(e.method||(e.method="POST"),e.headers={...e.headers,"Content-Type":"application/json"},e.body=JSON.stringify(i));const a=new AbortController;e.signal=a.signal;const c=setTimeout(()=>a.abort(),r);let f;try{f=await fetch(t,e)}catch(d){return console.error(d),{status:0,data:null}}finally{clearTimeout(c)}return{status:f.status,data:(f.headers.get("Content-Type")||"").startsWith("application/json")?await f.json():{}}}const Qn={48199:"Mr-Incredible",48200:"Mrs-Incredible",261227:"Nemo",339625:"Russell",339626:"Carl",364907:"Jack-Skellington",431014:"Princess-Tiana",431065:"Darth_Vader",15549505:"Rapunzel",15655408:"Default_SignedIn",15675686:"Crush",15831168:"Wall-E",16453979:"Merida",16726412:"Stormtrooper",16818199:"Violet",16869301:"Jack-Jack",17345357:"R2-D2",17345359:"C-3PO",17532220:"Bruce",17532224:"Green-Alien",17532227:"Kermit",17532228:"Sorcerer-Mickey",17577168:"Elsa",17577169:"Anna",17813977:"Olaf",17888784:"Yoda",18101167:"Captain-Mickey",18368743:"-Nick",18368747:"-Judy",18393706:"-Flash",18403761:"kion",18405224:"-Moana",18405236:"-Elena",19633995:"50th_Mickey",19633996:"50th_Minnie",90003819:"Alice",90003846:"Ariel",90003898:"Belle",90003967:"Buzz",90003976:"Captain-Hook",90004004:"Chesire-Cat",90004017:"Cinderella",90004068:"Daisy",90004076:"Dash",90004104:"Donald",90004228:"Goofy",90004260:"Hamm",90004328:"Princess-Jasmine",90004340:"Jiminy",90004395:"Lady",90004482:"Mickey-Mouse",90004486:"Minnie",90004537:"Mulan",90004605:"Peter-Pan",90004625:"Pluto",90004626:"Pocahontas",90004642:"Princess-Aurora",90004682:"Rex",90004772:"Snow-White",90004778:"Sparky",90004846:"TinkerBell",90004860:"Tramp",90004939:"Zero"},Oe="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/90/90/75/dam/",qn=Oe+"wdpro-assets/avatars/180x180/RetAvatar_180x180_",Kn=Oe+"wdpro-assets/avatars/180x180/RetAvatar-180x180",Zn=Oe+"disney-world/50th-anniversary/avatars/RetAvatar_180x180_",Xn={"-":Kn,5:Zn};function Se(t){const e=Qn[t||""];if(!!e)return(Xn[e[0]]||qn)+e+".png"}function ei(t){switch(t){case"./data/dlr.ts":return pt(()=>import("./dlr.js"),[]);case"./data/wdw.ts":return pt(()=>import("./wdw.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const Pe={"https://disneyworld.disney.go.com":"WDW","https://disneyland.disney.go.com":"DLR"},ti={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"};function ni(t){return t in Pe}class Qt extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}const ii=new Set(["ACTIVITY","DINING"]),oi=new Set(["FLEX","OTHER","STANDARD"]),F=t=>t.split(";")[0];class Me{constructor(e){this.maxPartySize=12,this.onUnauthorized=()=>{},this.guestCache=new Map,this.listeners={bookingChange:new Set},this._primaryGuestId="",this.convertGuest=n=>{const{id:i,firstName:r,lastName:s,characterId:a,...c}=n,f=`${r} ${s}`.trim();if(!this.guestCache.has(i))switch(n.ineligibleReason){case"INVALID_PARK_ADMISSION":case"PARK_RESERVATION_NEEDED":case"GENIE_PLUS_NEEDED":n.primary&&this.cacheGuest(i,f,a);break;default:this.cacheGuest(i,f,a)}const d=Se(a);return{...c,id:i,name:f,avatarImageUrl:d}},this.origin=e.origin,this.authStore=e.authStore,this.data=e.data,this.parkMap=Object.fromEntries(this.parks.map(n=>[n.id,n])),this.bookingStack=new si}static async load(e){const n=Pe[e.origin].toLowerCase(),i=(await ei(`./data/${n}.ts`)).default;return new Me({...e,data:i})}get resort(){return Pe[this.origin]}get parks(){return this.data.parks}async experiences(e){var c,f;await this.primaryGuestId();const n=await this.request({path:`/tipboard-vas/api/v1/parks/${encodeURIComponent(e.id)}/experiences`,params:{eligibilityGuestIds:[...this.guestCache.keys()].join(",")}}),i=(f=(((c=n.eligibility)==null?void 0:c.flexEligibilityWindows)||[]).sort((d,l)=>d.time.time.localeCompare(l.time.time))[0])==null?void 0:f.time.time,r=this.nextDropTime(e),s=(this.data.pdts[e.id]||[]).indexOf(r||""),a=1<<s;return{plus:n.availableExperiences.filter(d=>!!d.flex&&d.id in this.data.experiences).map(d=>{const{pdtMask:l=0,...m}=this.data.experiences[d.id];return{...d,...m,park:e,drop:!!(a&l)}}),nextBookTime:i}}async guests(e){e||(e={id:"0",park:{id:"0"}});const n=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:e.id,parkId:e.park.id}});this._primaryGuestId=n.primaryGuestId;const i=n.ineligibleGuests.map(this.convertGuest),r=n.guests.map(this.convertGuest).filter(s=>!("ineligibleReason"in s)||i.push(s)&&!1);return i.sort((s,a)=>{const c=+!s.primary-+!a.primary||s.name.localeCompare(a.name);return s.eligibleAfter||a.eligibleAfter?(s.eligibleAfter||"99").localeCompare(a.eligibleAfter||"99")||c:s.ineligibleReason===a.ineligibleReason?c:s.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?-1:a.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?1:c}),{eligible:r,ineligible:i}}async primaryGuestId(e){return this._primaryGuestId||await this.guests(e),this._primaryGuestId}async offer({experience:e,guests:n}){const i=await this.request({path:"/ea-vas/api/v2/products/flex/offers",method:"POST",data:{guestIds:n.map(l=>l.id),ineligibleGuests:[],primaryGuestId:await this.primaryGuestId(e),parkId:e.park.id,experienceId:e.id,selectedTime:e.flex.nextAvailableTime},userId:!1}),{id:r,date:s,startTime:a,endTime:c,status:f,changeStatus:d}=i.offer;return{id:r,start:{date:s,time:a},end:{date:s,time:c},active:f==="ACTIVE",changed:d!=="NONE",guests:{eligible:(i.eligibleGuests||[]).map(this.convertGuest),ineligible:(i.ineligibleGuests||[]).map(this.convertGuest)}}}async cancelOffer(e){await this.request({path:`/ea-vas/api/v1/offers/${encodeURIComponent(e.id)}`,method:"DELETE",params:{productType:"FLEX"},userId:!1})}async book(e){var c;const{singleExperienceDetails:{experienceId:n,parkId:i},entitlements:r,startDateTime:s,endDateTime:a}=await this.request({path:"/ea-vas/api/v1/products/flex/bookings",method:"POST",userId:!1,data:{offerId:e.id},key:"booking"});return this.bookings(),{type:"LL",...this.getExperience(n,i),bookingId:(c=r[0])==null?void 0:c.id,start:ht(s),end:ht(a),cancellable:!0,guests:r.map(f=>{const d=this.guestCache.get(f.guestId);return{id:f.guestId,name:(d==null?void 0:d.name)||"",avatarImageUrl:Se(d==null?void 0:d.characterId),entitlementId:f.id}})}}async cancelBooking(e){const i=e.map(r=>r.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${i}`,method:"DELETE",userId:!1})}async bookings(){const{swid:e}=this.authStore.getData(),n=new Date(Date.now()),i=ti[this.resort],{items:r=[],assets:s={},profiles:a={}}=await this.request({path:`/plan/${i}/api/v1/itinerary-items/${e}?item-types=FASTPASS&item-types=DINING&item-types=ACTIVITY`,params:{destination:this.resort,fields:"items,profiles,assets","guest-locators":e+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":M(n).date,"end-date":M(new Date(n.getTime()).setDate(n.getDate()+1)).date,"show-friends":"false"},userId:!1}),c=u=>{const{name:_,avatarId:p,type:E}=a[u.id];return{id:F(u.id),name:`${_.firstName} ${_.lastName}`.trim(),avatarImageUrl:Se(p),...E==="transactional"&&{transactional:!0}}},f=new Date(n);f.setMinutes(f.getMinutes()-30);const d=u=>{const _=s[u.asset],E=s[_.facility].location;if(!E)return;const h=this.parkMap[F(E)]||{id:E,name:s[E].name},y=new Date(u.startDateTime);return y<f?void 0:{type:"RES",id:F(u.asset),park:h,name:_.name,start:M(y),end:void 0,cancellable:!1,guests:u.guests.map(c).sort((T,g)=>+(g.id===this._primaryGuestId)-+(T.id===this._primaryGuestId)||+!g.transactional-+!T.transactional||T.name.localeCompare(g.name)),bookingId:u.id}},l=u=>{var h;if(!oi.has(u.kind))return;const _=s[u.facility],p=F(_.location);let E={type:"LL",...this.getExperience(F(u.facility),p,_.name),start:{date:u.displayStartDate,time:u.displayStartTime},end:{date:u.displayEndDate,time:u.displayEndTime},cancellable:u.cancellable,guests:u.guests.map(y=>({...c(y),entitlementId:y.entitlementId,...y.redemptionsRemaining!==void 0&&{redemptions:y.redemptionsRemaining}})),bookingId:(h=u.guests[0])==null?void 0:h.entitlementId};if(u.multipleExperiences){const y=u.assets.find(b=>b.original);y&&(E={...E,...this.getExperience(F(y.content),F(s[y.content].location))}),E.choices=u.assets.filter(b=>!b.excluded&&!b.original).map(({content:b})=>{const{name:T,location:g}=s[b];return this.getExperience(F(b),F(g),T)}).sort((b,T)=>b.name.localeCompare(T.name))}return E},m=r.map(u=>{if(u.type==="FASTPASS")return l(u);if(u.type&&ii.has(u.type))return d(u)}).filter(u=>!!u);return this.bookingStack.update(m),m}isRebookable(e){return this.bookingStack.isRebookable(e)}nextDropTime(e){var i,r;const n=M().time.slice(0,5);return(r=(i=this.data.pdts)==null?void 0:i[e.id])==null?void 0:r.find(s=>s>=n)}logOut(){this.authStore.deleteData(),this.onUnauthorized()}getExperience(e,n,i){var r;return{id:e,name:((r=this.data.experiences[e])==null?void 0:r.name)||i,park:this.parkMap[n]}}cacheGuest(e,n,i){this.guestCache.set(e,{name:n,characterId:i})}async request(e){var f;const{swid:n,accessToken:i}=this.authStore.getData(),r=this.origin+e.path,s={...e.params};((f=e.userId)==null||f)&&(s.userId=n);const{status:a,data:c}=await ve(r,{method:e.method||"GET",params:s,data:e.data,headers:{Authorization:`BEARER ${i}`,"x-user-id":n}});if(a===401)setTimeout(()=>this.logOut());else{const{key:d}=e;if(String(a)[0]==="2"&&(!d||c[d]))return d?c[d]:c}throw new Qt({status:a,data:c})}}const gt="bg1.genie.bookings";class si{constructor(e=!0){if(this.entitlementIds=[],this.mostRecent=new Map,!e)return;const{entitlementIds:n=[],mostRecent:i={}}=JSON.parse(localStorage.getItem(gt)||"{}");this.entitlementIds=n,this.mostRecent=new Map(Object.entries(i))}isRebookable(e){return e.cancellable&&e.guests.every(n=>this.mostRecent.get(n.id)===n.entitlementId)}update(e){const n=new Map,i=new Set(this.entitlementIds);this.entitlementIds=e.filter(r=>r.cancellable).map(r=>r.guests.map(({id:s,entitlementId:a})=>(this.entitlementIds.push(a),i.has(a)||n.set(s,n.has(s)?"":a),a))).flat(1),this.mostRecent=new Map([...this.mostRecent,...n]),n.size>0&&localStorage.setItem(gt,JSON.stringify({entitlementIds:this.entitlementIds,mostRecent:Object.fromEntries(this.mostRecent)}))}}const qt={"https://vqguest-svc-wdw.wdprapps.disney.com":"WDW","https://vqguest-svc.wdprapps.disney.com":"DLR"};function ri(t){return t in qt}const ai=t=>t.sort((e,n)=>+!e.isPrimaryGuest-+!n.isPrimaryGuest||+!e.isPreselected-+!n.isPreselected||e.name.localeCompare(n.name));class he extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}class li{constructor(e){this.onUnauthorized=()=>{},this.origin=e.origin,this.authStore=e.authStore}get resort(){return qt[this.origin]}url(e){return`${this.origin}/application/v1/guest/${e}`}async getQueues(){return(await ve(this.url("getQueues"))).data.queues.map(({queueId:e,...n})=>({...n,id:e}))}async getQueue(e){const n=(await this.getQueues()).find(i=>i.id===e.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(e){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:e.id}});return ai(n.guests.map(({guestId:i,firstName:r,lastName:s,...a})=>({...a,id:i,name:`${r} ${s}`.trim()})))}async joinQueue(e,n){const i=n.map(a=>a.id),{status:r,data:s}=await this.post({resource:"joinQueue",data:{queueId:e.id,guestIds:i}});if(s.responseStatus==="OK"){const a=s.positions.find(c=>c.queueId===e.id&&c.guestIds.length>0&&i.some(f=>c.guestIds.includes(f)));if(!a)throw new he({status:r,data:s});return{boardingGroup:a.boardingGroup,conflicts:{},closed:!1}}else if(s.responseStatus==="INVALID_GUEST"||s.responseStatus==="CLOSED_QUEUE"){const a=s.responseStatus==="CLOSED_QUEUE",c=new Set,f={};for(const m of s.conflicts)for(const u of m.guestIds){const _=n.find(p=>p.id===u);!_||(f[_.id]=m.conflictType,c.add(u))}const d=n.filter(m=>!c.has(m.id));if(a||d.length===0)return{boardingGroup:null,conflicts:f,closed:a};const l=await this.joinQueue(e,d);return l.conflicts={...f,...l.conflicts},l}else throw new he({status:r,data:s})}logOut(){this.authStore.deleteData(),this.onUnauthorized()}async post(e){const{status:n,data:i}=await ve(this.url(e.resource),{method:"POST",headers:{Authorization:`BEARER ${this.authStore.getData().accessToken}`},data:e.data});if(n===401&&setTimeout(()=>this.logOut()),!n||n===401||n>=500)throw new he({status:n,data:i});return{status:n,data:i}}}const Kt=re({resort:"WDW",onUnauthorized:()=>{},logOut:()=>null}),ci=Kt.Provider,be=()=>le(Kt),ke={bg:"bg-blue-500",text:"text-blue-500"},Zt=re(ke),ui=Zt.Provider,q=()=>le(Zt),di={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function O(t){const{type:e,className:n,...i}=t;let r=`${di[e||"normal"]} ${n||""}`;const{bg:s}=q();return r.includes(" bg-")||(r+=` ${s} text-white`),o("button",{className:`${r} inline-flex items-center justify-center min-w-[36px] rounded-lg px-2 font-semibold disabled:opacity-50`,...i})}function G({onClick:t,disabled:e,children:n}){return o("div",{className:"mb-20"},o("div",{className:"fixed bottom-0 left-0 w-full px-5 pb-5 text-center"},o(O,{className:"max-w-2xl mx-auto shadow-[0px_4px_8px_-1px_#0005]",type:"full",onClick:t,disabled:e},n)))}function fi({title:t,children:e}){const{bg:n,text:i}=q();function r(s){return Yt(s)?s.type===N?Pn.map(s.props.children,r):Un(s,{className:`bg-[#ffffffe6] ${i} ${s.props.className||""}`}):s}return o("div",{className:`flex justify-end gap-x-2 gap-y-1 min-h-[52px] px-3 py-2 text-lg text-white ${n}`},o("h1",{className:"flex-1 self-center py-0.5 text-xl font-semibold overflow-hidden whitespace-nowrap"},t),r(e))}function ce(t){const{children:e,className:n,...i}=t,r={outer:"",inner:"",...typeof n=="string"?{inner:n}:n};return r.outer.match(/\bz-/)||(r.outer+=" z-10"),o("div",{className:`${r.outer} fixed inset-0`,...i},o("div",{className:`${r.inner} max-w-2xl min-h-full mx-auto`},e))}function U({heading:t,buttons:e,className:n,theme:i,containerRef:r,children:s,...a}){return o(ui,{value:i||ke},o(ce,{className:{outer:`bg-white text-black text-base ${n||""}`,inner:"flex flex-col max-w-2xl h-full"},...a},o(fi,{title:t},e),o("div",{ref:r,className:"flex-1 overflow-auto px-3 pb-3"},s)))}const _i="bg1.disclaimer.accepted",hi={bg:"bg-red-600",text:"text-red-600"};function mi(){const t=localStorage,e=_i,[n,i]=w(!!t.getItem(e));return L(()=>{n&&t.setItem(e,"1")},[n,t,e]),n?null:o(pi,{onAccept:()=>i(!0)})}function pi({onAccept:t}){return o(U,{heading:"Warning!",theme:hi},o("p",null,'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'),o(G,{onClick:t},"Accept"))}const gi="17e2767256f";function yi(t){return"deferredUuid"in t&&t.deferredUuid!==void 0}class vi{constructor(e,n,i,r=!1){this.iframe=e,this.resort=i,this.logging=r,this.handlers={},this.handshakeAcked=!1,this.onMessage=s=>{if(s.source!==this.iframe.contentWindow||s.data==="inner.loaded")return;const a=JSON.parse(s.data);this.logging&&console.log("Message:",a);const c=a.type==="message"?a.eventName:a.type,f=this.handlers[c],d=f?f("data"in a?a.data:null):void 0;yi(a)&&this.send({type:"deferred",action:"resolve",deferredUuid:a.deferredUuid,data:d!=null?d:{}})},this.on("handshake",()=>{this.handshakeAcked||(this.handshakeAcked=!0,this.send({type:"handshakeAck"}),this.logging&&this.sendMessage("setLogLevel",{level:"log"}),this.sendMessage("workflow.execute",{name:"login"}))}),this.on("lightbox.hide",()=>this.open()),this.on("session.dateOfBirth.read",()=>this.open()),this.on("session.loggedin",({token:s})=>{n({swid:s.swid,accessToken:s.access_token,expires:new Date(s.exp)})})}open(){addEventListener("message",this.onMessage),this.iframe.src=this.authPageUrl,this.handshakeAcked=!1}close(){removeEventListener("message",this.onMessage)}on(e,n){this.handlers[e]=n}sendMessage(e,n){this.send({type:"message",eventName:e,data:n})}send(e){var n;(n=this.iframe.contentWindow)==null||n.postMessage(JSON.stringify({...e,name:"lightbox-client-window"}),this.authPageUrl)}get authPageUrl(){return`https://cdn.registerdisney.go.com/v2/TPR-${this.resort}-LBSDK.IOS-PROD/en-US?include=l10n,config,html,js&buildId=${gi}`}}function bi({resort:t,onLogin:e}){const n=oe(null);return L(()=>{if(!n.current)return;const i=new vi(n.current,e,t);return i.open(),()=>i.close()},[t,e,n]),o("iframe",{title:"Disney Login Form",ref:n,className:"fixed top-0 left-0 w-full h-full border-0"})}function ki({authStore:t,children:e}){const[n,i]=w("Blank"),r=mi(),s=be();L(()=>{s.onUnauthorized=()=>i("LoginForm")},[s]),L(()=>{function c(){if(!(document.hidden||n==="LoginForm"))try{t.getData(),i("Client")}catch{return i("LoginForm")}}return c(),document.addEventListener("visibilitychange",c),()=>{document.removeEventListener("visibilitychange",c)}},[t,n]);const a={Blank:o("div",null),LoginForm:o(bi,{resort:s.resort,onLogin:c=>{t.setData(c),i("Client")}}),Client:e};return o(N,null,r||a[n])}const X=be,Xt=re(void 0),wi=Xt.Provider,xi=()=>le(Xt),en=re({current:null,begin:()=>null,end:()=>null}),Ni=en.Provider,ue=()=>le(en);async function Ei(t={}){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(i=>{e(i)},i=>{n(i)},t)})}const Si={maximumAge:15e3,timeout:2e3};function Ti(t){const[e,n]=w(),i=Y(()=>{t(async()=>{try{const{coords:r}=await Ei(Si);n([r.latitude,r.longitude])}catch{n(void 0)}})},[t]);return[e,i]}const Ci=3e3,Ii={alert:"bg-yellow-200",error:"bg-red-200"};function we(){const[,t]=w(0),[e,n]=w(""),[i,r]=w("alert"),s=Y((c,f)=>{n(c),r(f||"alert"),t(d=>(clearTimeout(d),c?self.setTimeout(()=>{n("")},Ci):d))},[]);return[o(Ri,{message:e,type:i}),s]}function Ri({message:t,type:e}){return t?o("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${Ii[e]} text-gray-800`},t):null}function ee({children:t,className:e,title:n}){return e||(e=""),e.match(/\bw-\S+\s*/)||(e+=" w-4"),e.match(/\bh-\S+\s*/)||(e+=" h-auto"),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:e,role:"img"},n&&o("title",null,n),t)}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Be({className:t}){return o(ee,{className:t},o("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"}))}async function tn(t){return new Promise(e=>{setTimeout(e,t)})}function Pi(){const[t,e]=w(0),n=Y(async(r,s=500)=>{e(c=>c+1);const a=tn(s);try{await r()}finally{await a,e(c=>c-1)}},[]);return[t>0?o(Di,null):null,n]}function Di(){const{bg:t}=q();return o(ce,{className:"flex items-center bg-white bg-opacity-75"},o("div",{className:"w-[50px] mx-auto"},o("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${t}`},o(Be,{className:"animate-spin w-full text-white"}))))}function Ge(){const[t,e]=Pi(),n=!!t,[i,r]=we();return{loadData:Y(async(c,f)=>{const d={error:"Unknown error occurred",request:"Network request failed",...f};r("");let l=()=>null;const m=new Promise(_=>{l=()=>_(null)});async function u(..._){await m,r(..._)}await e(async()=>{try{await c(u)}catch(_){if(_ instanceof Qt){const{status:p}=_.response;u(p in d?d[p]:d.request,"error")}else console.error(_),u(d.error,"error")}}),l()},[e,r]),loaderElem:o(N,null,i,t),isLoading:n}}/**
 * Arrow down icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ai(t){return o(ee,{...t},o("path",{d:"M8 15.5l7.5-7.5h-4.5v-8h-6v8h-4.5z"}))}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Li(t){return o(ee,{...t},o("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"}))}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function $i(t){return o(ee,{...t},o("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"}))}function nn(){const t=be();return o(O,{type:"small",onClick:()=>t.logOut()},"Log Out")}function on({heading:t,onClose:e,children:n}){return o(ce,{className:{outer:"bg-black bg-opacity-75",inner:"p-2 flex items-center justify-center h-full"},onClick:e},o("div",{className:"flex flex-col max-h-[90%] rounded-lg px-3 py-4 bg-white",onClick:i=>i.stopPropagation()},o("h2",{className:"mt-0"},t),o("div",{className:"flex-1 overflow-auto"},n),o("div",{className:"pt-4"},o(O,{type:"full",onClick:e},"Close"))))}const Oi="_SELECT_RADIO_BUTTON_";function yt(t){const{options:e,value:n,onChange:i,...r}=t,[s,a]=w(!1),[c,f]=w(0),d=oe(null),l=oe(null);Cn(()=>{var g;if((g=e[0])!=null&&g.icon)return;const h=d.current,y=h==null?void 0:h.firstChild;if(!y)return;const b=y.nodeValue;if(!b)return;let T=0;for(const C of e)y.nodeValue=C.text,T=Math.max(h.offsetWidth,T);y.nodeValue=b,f(T)},[e]);const m=()=>{var h;return(h=l.current)==null?void 0:h.querySelector("input:checked")};L(()=>{var y;if(!s)return;(y=m())==null||y.focus();const h=b=>{var T;(T=l.current)!=null&&T.contains(b.target)||a(!1)};return addEventListener("focusin",h),()=>removeEventListener("focusin",h)},[s]);const u=()=>{const h=m();h&&i(h.value),a(!1)},{icon:_,text:p}=e.find(h=>h.value===n)||e[0];let E=!1;return o(N,null,o(O,{...r,onClick:()=>a(!0)},_||o("span",{style:{minWidth:`${c}px`},ref:d},p),o(ee,{className:"w-2.5 ml-2"},o("path",{d:"m6.8273 12.401-5.6333-7.7812a1.0212 1.0212 117.05 0 1 0.82716-1.62l11.958-2e-7a1.0212 1.0212 62.952 0 1 0.82714 1.62l-1.6438 2.2705a79984 79984 125.9 0 0-2.3456 3.2401l-1.6437 2.2706a1.4479 1.4479 180 0 1-2.3456 4.4e-5z"}))),s&&o(ce,{className:{outer:"bg-black bg-opacity-75",inner:"flex items-center justify-center h-full"},onClick:h=>{var b;const y=h.target;if(!((b=l.current)!=null&&b.contains(y)))return a(!1);if(y.tagName==="INPUT"&&!E)return u();E=!1},onKeyDown:({key:h})=>{["Enter"," "].includes(h)?u():h.startsWith("Arrow")&&(E=!0)},"data-testid":"select-shade"},o("ul",{className:"overflow-auto min-w-[50%] max-h-[90%] rounded-lg bg-white text-black",ref:l},e.map(h=>o("li",{className:"border-t-2 first:border-0 border-gray-300",key:h.value},o("label",{className:"flex flex-row items-center px-4 py-3"},o("input",{type:"radio",name:Oi,defaultChecked:h.value===n,value:h.value,className:"w-4 h-4 mr-2.5"})," ",h.icon&&o("span",{"aria-hidden":"true",className:"mr-2.5"},h.icon)," ",h.text))))))}const sn=re({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),Mi=sn.Provider,Ue=()=>le(sn),Bi="https://bg1.joelface.com/ping",vt="bg1.ping.date";async function rn(){const{date:t}=M();if(localStorage.getItem(vt)===t)return;const{status:n}=await ve(Bi,{method:"POST"});n===204&&localStorage.setItem(vt,t)}function B({guests:t,selectable:e,conflicts:n}){return t.length===0?null:o("ul",{className:"mt-2"},t.map(i=>{var r;return o("li",{key:i.id,className:"px-3 py-1"},o("label",{className:"flex items-center"},e&&o("input",{type:"checkbox",checked:e.isSelected(i),onChange:()=>e.onToggle(i),className:"mr-3"}),o("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white"},i.avatarImageUrl?o("img",{src:i.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):o("span",{"aria-hidden":"true"},i.name[0])),o("span",{className:"leading-tight"},i.name,o("br",null),(n==null?void 0:n[i.id])&&o("span",{className:"text-xs font-semibold text-red-700 uppercase"},(r=n[i.id])==null?void 0:r.replace(/_/g," ")))))}))}function We(t){return o("div",{className:"mt-4 text-lg"},t.end?"Arrive by":"Reservation at",":"," ",o("span",{className:"ml-0.5 font-semibold"},Jt(t)))}function Gi({booking:t,onClose:e}){const n=X(),[i,r]=w(new Set),{loadData:s,loaderElem:a}=Ge(),{guests:c}=t,f=i.size===0,d=i.size===c.length;function l(){s(async()=>{f||await n.cancelBooking([...i]),e(c.filter(_=>!i.has(_)))})}const{name:m,park:u}=t;return o(U,{heading:"Your Lightning Lane",theme:u.theme},o("h2",null,m),o("div",null,u.name),o(We,{...t}),o("div",{className:"ml-3"},o("label",{className:"flex items-center py-4"},o("input",{type:"checkbox",checked:d,onChange:()=>r(new Set(d?[]:c))}),o("span",{className:"ml-3"},"Select All"))),f?null:o("div",{className:"mb-4"},o("h3",null,"Cancel These Guests"),o(B,{guests:c.filter(_=>i.has(_)),selectable:{isSelected:()=>!0,onToggle:_=>{const p=new Set(i);p.delete(_),r(p)}}})),d?null:o("div",null,o("h3",null,"Select Guests to Cancel"),o(B,{guests:c.filter(_=>!i.has(_)),selectable:{isSelected:()=>!1,onToggle:_=>r(new Set(i).add(_))}})),o(G,{onClick:l},f?"Back":"Cancel "+(d?"Reservation":"Guests")),a)}function an({booking:t,onClose:e,isRebookable:n,isNew:i}){var T;const r=X(),{name:s,park:a,choices:c,type:f}=t,d=f==="LL",l=xi()||a,m=ue(),[u,_]=w(d?t.guests:void 0),[p,E]=w(!1);if(p&&d&&u)return o(Gi,{booking:{...t,guests:u},onClose:g=>{E(!1),g.length>0?_(g):e(g)}});const h=new Map([[l,[]],...r.parks.map(g=>[g,[]])]);for(const g of c||[])(T=h.get(g.park))==null||T.push(g);const y=[...h.keys()],b=(c?y.length===1?y[0]:{theme:ke}:a).theme;return o(U,{heading:d?"Your Lightning Lane":"Your Reservation",theme:b,buttons:n&&d&&o(O,{onClick:()=>m.begin(t)},"Rebook")},c?o("h2",null,"Multiple Experiences"):o(N,null,o("h2",null,s),o("div",null,a.name)),o(We,{...t}),c&&o(N,null,o("p",null,o("b",null,s)," was temporarily unavailable during your return time. You may redeem this Lightning Lane at one of these replacement experiences:"),[...h].filter(([,g])=>g.length>0).map(([g,C=[]])=>{var x;return o("div",{key:g.id,className:`mt-4 rounded ${((x=g.theme)==null?void 0:x.bg)||""}`},o("h3",{className:"mt-0 p-1 text-white text-center"},g.name),o("ul",{className:"list-disc py-2 pl-8 bg-white bg-opacity-90"},C.map(S=>o("li",{key:S.id},S.name))))})),o("div",{className:"flex mt-4"},o("h3",{className:"inline mt-0"},"Your Party"),t.cancellable&&o(O,{type:"small",onClick:()=>E(!0),className:"ml-3"},"Cancel")),o(B,{guests:u||t.guests,conflicts:u&&Object.fromEntries(u.filter(g=>g.redemptions!==void 0).map(g=>[g.id,`Redemptions left: ${g.redemptions}`]))}),o(G,{onClick:()=>e(u)},i?"Done":"Back"))}function ln({children:t}){return o("p",{className:"border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100"},t)}function cn(){const{ineligible:t}=Ue();return o(B,{guests:t,conflicts:Object.fromEntries(t.map(e=>[e.id,e.eligibleAfter?`TOO EARLY (${Q(e.eligibleAfter)})`:e.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function Fe({buttonText:t,onSubmit:e}){const{eligible:n,ineligible:i,selected:r,setSelected:s}=Ue(),[a,c]=w(),[f,d]=we(),{maxPartySize:l}=X();return a?o(N,null,o("h3",null,"Choose Your Party"),o(B,{guests:n,selectable:{isSelected:u=>a.has(u),onToggle:u=>c(_=>{d(""),_=new Set(_);const p=_.has(u)?"delete":"add";return p==="add"&&_.size>=l?d(`Maximum party size: ${l}`):_[p](u),_})}}),i.length>0&&o(N,null,o("h3",null,"Ineligible Guests"),o(cn,null)),o(G,{disabled:a.size===0,onClick:()=>{s([...a]),c(void 0)}},"Confirm Party"),f):o(N,null,n.length>l&&r.length===l&&o(ln,null,"Party size restricted"),o("div",{className:"mt-4"},o("h3",{className:"inline mt-0"},"Your Party"),o("span",null,o(O,{type:"small",onClick:()=>c(new Set(r)),className:"ml-3"},"Edit"))),o(B,{guests:r}),o(G,{onClick:e},t))}function Ui({offer:t,onBook:e}){const n=ue();return o(N,null,n.current&&o(ln,null,"Rebooking resets the two hour timer"),o(We,{...t}),t.changed&&o("div",{className:"text-sm"},o("strong",null,"Note:")," Return time has been changed"),o(Fe,{buttonText:`${n.current?"Rebook":"Book"} Lightning Lane`,onSubmit:e}))}const bt="https://widget.time.is/t.js";function Wi(){if([...document.scripts].some(e=>e.src===bt))return;const t=document.createElement("script");t.src=bt,t.onload=un,document.head.appendChild(t)}const me={};function un(){"time_is_widget"in self&&self.time_is_widget.init(me)}function Fi(t){Wi(),me[t]||(me[t]={}),un()}function dn(t,e){const n=document.getElementById(t);if(!n||n.firstElementChild)return e();n.textContent=M().time,setTimeout(()=>dn(t,e),100)}function Hi({id:t,onSync:e}){return L(()=>{Fi(t),dn(t,e)},[t,e]),o("time",{id:t})}const zi={WDW:"Orlando_z161",DLR:"Anaheim_z14e"},ji=5e3;function fn({resort:t,time:e,label:n}){const i=zi[t],[r,s]=w(null);L(()=>{setTimeout(()=>s(c=>c||!1),ji)},[]);const a=Y(()=>s(!0),[]);return o("table",{className:"mt-4 mx-auto text-gray-500"},o("tbody",null,o(kt,{heading:n,time:o("time",null,e||"--:--:--")}),o(kt,{heading:o("a",{href:`https://time.is/${i.split("_")[0]}`,id:"time_is_link",target:"_blank",rel:"noreferrer"},"Current time"),time:o(N,null,o(Hi,{id:i,onSync:a}),r===!1&&o("span",{className:"text-sm font-sans font-semibold text-red-600"}," ","(unsynced)"))})))}function kt({heading:t,time:e}){return o("tr",null,o("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase"},t,":"),o("td",{className:"text-xl font-mono leading-tight"},"\uFEFF",e))}function Yi({startTime:t,onRefresh:e}){return o(N,null,t&&o(fn,{resort:"WDW",time:t,label:"Booking start"}),o("h3",{className:"mt-4"},"Not Available Yet"),t?o("p",null,"At"," ",o("time",{dateTime:t,className:"font-semibold"},Q(t)),", tap the ",o("span",{className:"font-semibold"},"Check Availability")," ","button below to start booking this Lightning Lane."):o("p",null,"Sorry, but you can't make a Lightning Lane reservation for this attraction yet."),o(Fe,{buttonText:"Check Availability",onSubmit:e}))}function Vi({onClose:t}){const{ineligible:e}=Ue(),{eligibleAfter:n}=e[0]||{},i=ue();return o(N,null,n&&o("div",{className:"mt-4 border-2 border-green-600 rounded p-1 uppercase font-semibold text-center text-green-600 bg-green-100"},"Eligible at ",Q(n)),i.current?o(N,null,o("h3",null,"Unable to Rebook"),o("p",null,"Your current reservation cannot be rebooked to this experience due to the following conflicts:")):o(N,null,o("h3",null,"No Eligible Guests"),o("p",null,"No one in your party is currently eligible for this Lightning Lane.")),o(cn,null),o(G,{onClick:t},"Back"))}function Ji({onRefresh:t}){return o(N,null,o("h3",null,"No Guests Found"),o("p",null,"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."),o(G,{onClick:t},"Try Again"))}function Qi({onClose:t}){return o(N,null,o("h3",null,"No Reservations Available"),o("p",null,"There aren't enough reservation slots available for your entire party. If only part of your group wishes to go on this attraction, edit your party to check again. Otherwise, go back to the tip board and select another attraction."),o(Fe,{buttonText:"Back",onSubmit:t}))}function _n({booking:t,button:e,badge:n}){return o("div",{className:"flex items-center gap-x-3"},n,o("div",{className:"flex-1 min-w-0"},o("div",{className:"text-gray-500 text-sm font-semibold uppercase"},Jt(t)),o("div",{className:"text-lg font-semibold leading-tight truncate"},t.choices?"Multiple Experiences":t.name)),e&&o("div",null,e))}function hn(){const t=ue(),e=q();return t.current?o("div",{className:`sticky top-0 -mx-3 pb-1 ${e.bg}`},o("div",{className:"pb-3 bg-white"},o("div",{className:`pb-1 ${e.bg} text-white text-sm font-semibold uppercase text-center`},"Rebooking"),o("div",{className:"mt-2 px-3"},o(_n,{booking:t.current,button:o(O,{type:"small",onClick:()=>t.end(!0)},"Keep")})))):null}/**
 * Clock icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function qi(t){return o(ee,{...t},o("path",{d:"M10.293 11.707l-3.293-3.293v-4.414h2v3.586l2.707 2.707zM8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14c-3.314 0-6-2.686-6-6s2.686-6 6-6c3.314 0 6 2.686 6 6s-2.686 6-6 6z"}))}function Ki({onClose:t}){const e=X(),n=ke,[i,r]=w(),[s,a]=w(),[c,f]=w(!1);function d(m){!s||(a(void 0),m&&r(u=>{if(!!u)return m.length>0?s.guests=m:u.splice(u.indexOf(s),1),u}))}L(()=>{f(!0),e.bookings().then(m=>r(m))},[e]);function l(){f(!1),setTimeout(t,300)}return s?o(an,{booking:s,onClose:d,isRebookable:e.isRebookable(s)}):o(N,null,o(ce,{onClick:l,"data-testid":"panel-shade",className:{inner:"bg-black bg-opacity-75"}}),o(U,{heading:"Your Day",buttons:o(O,{onClick:l},"Close"),className:`top-auto ${c?"h-[60%]":"h-0"} duration-200 ease-linear`},i&&i.length>0?o("ul",null,(i||[]).map(m=>o("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",key:m.bookingId},o(_n,{booking:m,button:o(O,{type:"small",onClick:()=>a(m)},"More"),badge:e.isRebookable(m)&&o("div",{title:"Rebookable",className:`w-2.5 h-2.5 rounded-full ${n.bg}`})})))):o("div",{className:"mt-4 text-sm font-semibold text-center uppercase  text-gray-500"},i&&"No current reservations")))}function mn({onOpen:t,onClose:e,...n}){const[i,r]=w(),s=t||r,a=e||(()=>r(void 0));return o(N,null,o(O,{...n,onClick:()=>s(o(Ki,{onClose:a})),title:"Your Day"},o(qi,null)),i)}function Zi({experience:t,onClose:e}){const n=X(),i=ue(),[r,s]=w(),[a,c]=w(!t.flex.available&&t.flex.enrollmentStartTime!==void 0),[f,d]=w(a?null:void 0),[l,m]=w(),{loadData:u,loaderElem:_}=Ge();async function p(){if(!f||!r)return;let g=null;await u(async()=>{const C=new Set(r.selected.map(S=>S.id));i.current&&await n.cancelBooking(i.current.guests.filter(S=>C.has(S.id)));try{g=await n.book(f)}finally{i.end()}const x=g.guests.filter(S=>!C.has(S.id));x.length>0&&(await n.cancelBooking(x),g.guests=g.guests.filter(S=>C.has(S.id))),rn()},{410:"Offer expired"}),g&&m(g)}function E(){u(async g=>{const{plus:C}=await n.experiences(t.park),x=C.find(S=>S.id===t.id);x!=null&&x.flex.available?(c(!1),d(void 0)):g("Reservations not open yet")})}function h(){f&&n.cancelOffer(f),e()}const y=Y(()=>{u(async()=>{try{let g=await n.guests(t);const C=i.current;if(C){const x=new Set(C.guests.map(D=>D.id)),S=[...g.eligible,...g.ineligible].filter(D=>x.has(D.id)&&!(D.ineligibleReason==="TOO_EARLY"||D.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"&&t.id===C.id));g=S.length>0?{eligible:[],ineligible:S}:{eligible:C.guests,ineligible:[]}}s({...g,selected:g.eligible.slice(0,n.maxPartySize),setSelected:x=>s(S=>{if(!S)return S;const D=new Set(S.selected);return d(W=>W===null||x.some(I=>!D.has(I))?void 0:W),{...S,selected:x}})})}catch(g){throw s({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),g}})},[n,t,i,u]);L(()=>{r||y()},[r,y]);const b=Y(g=>{!r||r.selected.length===0||u(async()=>{try{const C=await n.offer({experience:t,guests:r.selected}),{ineligible:x}=C.guests;if(x.length>0){const S=new Set(x.map(W=>W.id)),D=W=>!S.has(W.id);s({...r,eligible:r.eligible.filter(D),ineligible:[...x,...r.ineligible],selected:r.selected.filter(D)})}C.active&&(f&&(C.changed=!1),d(C))}catch(C){throw g||d(null),C}},{410:f?"No reservations available":""})},[n,t,r,f,u]);if(L(()=>{f===void 0&&b()},[f,b]),l)return o(an,{booking:l,onClose:e,isNew:!0});const T=(r==null?void 0:r.eligible.length)===0&&(r==null?void 0:r.ineligible.length)===0;return o(U,{heading:"Lightning Lane",theme:t.park.theme,buttons:o(N,null,o(mn,null),r&&(a||f||T)&&o(O,{onClick:h},"Cancel"),!a&&f!==void 0&&o(O,{onClick:b,title:"Refresh Offer"},o(Be,null)))},o(hn,null),o("h2",null,t.name),o("div",null,t.park.name),o(Mi,{value:r||{eligible:[],ineligible:[],selected:[],setSelected:()=>null}},(r==null?void 0:r.eligible.length)===0?T?o(Ji,{onRefresh:y}):o(Vi,{onClose:e}):!r||f===void 0?o("div",null):a?o(Yi,{startTime:t.flex.enrollmentStartTime,onRefresh:E}):f===null?o(Qi,{onClose:e}):o(Ui,{offer:f,onBook:p})),_)}function He({label:t,children:e}){return o("div",{className:"flex items-center flex-1 whitespace-nowrap"},o("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500"},t)," ",e)}function Xi({experience:t,onClick:e}){const{flex:n}=t;return o(He,{label:"Genie+"},o("span",null,o(O,{onClick:()=>e(t)},n.nextAvailableTime?Q(n.nextAvailableTime):"none")))}function eo({experience:{type:t,standby:e}}){return e.displayNextShowTime||t==="ENTERTAINMENT"&&!e.waitTime?o(no,{standby:e}):o(to,{standby:e})}const to=({standby:t})=>o(He,{label:"Standby"},t.available?o(gn,{time:t.waitTime!==void 0?t.waitTime+" min":"now"}):o(yn,{text:"down"})),no=({standby:t})=>o(He,{label:o(N,null,"Next ",o("span",{className:"hidden xs:inline"},"Show"))},t.displayNextShowTime?o(gn,{time:t.displayNextShowTime}):o(yn,{text:"none"})),pn="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",gn=({time:t})=>o("span",{className:`${pn} border-gray-500 text-gray-500 bg-gray-100`},t),yn=({text:t})=>o("span",{className:`${pn} border-red-600 text-red-600 bg-red-100`},t);function io({bookTime:t,dropTime:e}){const n=q();return!t&&!e?null:o("div",{className:`flex justify-center gap-x-10 -mx-3 px-3 pb-1 ${n.bg} text-white text-sm font-semibold uppercase text-center`},o(wt,{label:"Book",time:t}),o(wt,{label:"Drop",time:e}))}function wt({label:t,time:e}){if(!e)return null;e=e.slice(0,5);const n=M().time.slice(0,5);return o("div",null,t,":"," ",o("time",{dateTime:e,className:"whitespace-nowrap"},e>n?Q(e):"now"))}const oo=6e4,so=30,ro=60,xt="bg1.genie.tipBoard.park",Nt="bg1.genie.tipBoard.starred",ao=(t,e)=>+e.lp-+t.lp,lo=(t,e)=>(t.priority||1/0)-(e.priority||1/0),Te=(t,e)=>(e.standby.waitTime||-1)-(t.standby.waitTime||-1),Ce=(t,e)=>(t.flex.nextAvailableTime||"").localeCompare(e.flex.nextAvailableTime||""),co=(t,e)=>t.name.toLowerCase().localeCompare(e.name.toLowerCase()),Et=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)),uo=(t,e,n)=>n?Et(t.geo,n)-Et(e.geo,n):0;function fo(t,e){const{n,s:i,e:r,w:s}=t.geo,[a,c]=e;return a<n&&a>i&&c<r&&c>s}function St(t){const[e,n]=t.split(":").map(Number);return e*60+n}const _o={priority:(t,e)=>ao(t,e)||lo(t,e)||Te(t,e)||Ce(t,e),standby:(t,e)=>Te(t,e)||Ce(t,e),soonest:(t,e)=>Ce(t,e)||Te(t,e),nearby:(t,e,n)=>uo(t,e,n),aToZ:()=>0},ho=[{value:"priority",text:"Priority"},{value:"nearby",text:"Nearby"},{value:"standby",text:"Standby"},{value:"soonest",text:"Soonest"},{value:"aToZ",text:"A to Z"}];function mo(){var ze;const t=X(),{parks:e}=t,[n,i]=w(()=>{const{id:k=e[0].id,date:A=""}=JSON.parse(sessionStorage.getItem(xt)||"{}")||{};return A===M().date&&e.find(V=>V.id===k)||e[0]}),[r,s]=w([]),[a,c]=w(),[f,d]=w(),l=()=>d(void 0),[m,u]=w("priority"),{loadData:_,loaderElem:p,isLoading:E}=Ge(),[,h]=w(0),[y,b]=w(()=>({current:null,begin:k=>{b({...y,current:k}),i(k.park),l()},end:(k=!1)=>{b(A=>A.current?{...A,current:null}:A),k&&l()}})),T=oe(null),[g,C]=w(()=>{let k=[];try{k=JSON.parse(localStorage.getItem(Nt)||"[]")}catch(A){console.error(A)}return new Set(k)}),[x,S]=Ti(_);L(()=>{m==="nearby"&&S()},[m,S]);const D=Y((k=!0)=>{h(A=>!k&&Date.now()-A<oo?A:(_(async()=>{u(J=>(J==="nearby"&&S(),J));const{plus:V,nextBookTime:vn}=await t.experiences(n);c(vn);const bn=St(M().time);s(V.map(J=>{const je=J.standby.waitTime||0,Ye=J.flex.nextAvailableTime;if(!Ye)return{...J,lp:!1};const kn=St(Ye)-bn;return{...J,lp:je>=so&&kn<=Math.min(ro,(4-Math.trunc(J.priority||4))/3*je)}}))}),Date.now()))},[t,n,_,S]);L(()=>{s([]),D()},[D]),L(()=>{if(E||f)return;const k=()=>{document.hidden||D(!1)};return document.addEventListener("visibilitychange",k),()=>{document.removeEventListener("visibilitychange",k)}},[f,D,E]),L(()=>{var k;(k=T.current)==null||k.scroll(0,0)},[n,m,y]),L(()=>{sessionStorage.setItem(xt,JSON.stringify({id:n.id,date:M().date}))},[n]);function W(k){const V=k.currentTarget.getAttribute("data-id");!V||(g.has(V)?g.delete(V):g.add(V),localStorage.setItem(Nt,JSON.stringify([...g])),C(new Set([...g])))}const I=Le(()=>e.map(k=>({value:k.id,icon:k.icon,text:k.name})),[e]),R=(ze=r==null?void 0:r[0])==null?void 0:ze.flex.enrollmentStartTime,$=t.nextDropTime(n);return o(Ni,{value:y},o(U,{heading:o(N,null,"G",o("span",{className:"hidden xs:inline"},"enie"),"+"),theme:n.theme,buttons:o(N,null,o(mn,{onOpen:d,onClose:l}),o(yt,{options:I,value:n.id,onChange:k=>i(e.find(A=>A.id===k)),title:"Park"}),o(yt,{options:ho,value:m,onChange:u,title:"Sort By"}),o(O,{onClick:D,title:"Refresh Tip Board"},o(Be,null))),containerRef:T},o("div",{"aria-hidden":!!f},o(hn,null),o(io,{bookTime:R||a,dropTime:$}),o("ul",null,r.sort((k,A)=>+g.has(A.id)-+g.has(k.id)||+A.flex.available-+k.flex.available||_o[m==="nearby"&&!(x&&fo(n,x))?"priority":m](k,A,x)||co(k,A)).map(k=>o("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",key:k.id+(g.has(k.id)?"*":"")},o("div",{className:"flex items-center gap-x-2 mt-2"},o(po,{experience:k,starred:g,onClick:W}),o("h2",{className:"flex-1 mt-0 text-lg leading-tight truncate"},k.name),k.lp?o(Tt,{name:"Lightning Pick",icon:Li,onClick:()=>d(o(go,{onClose:l}))}):$&&k.drop?o(Tt,{name:"Upcoming Drop",icon:Ai,onClick:()=>d(o(yo,{dropTime:$,onClose:l}))}):null),k.flex.preexistingPlan&&o("div",{className:"mt-2 border-2 border-green-600 rounded p-1 text-sm uppercase font-semibold text-center text-green-600 bg-green-100"},"Lightning Lane Booked"),o("div",{className:"flex flex-wrap gap-1.5 mt-2"},o(eo,{experience:k}),o(Xi,{experience:k,onClick:A=>d(o(Zi,{experience:A,onClose:()=>{l(),D(!1)}}))}))))),!E&&o("div",{className:"mt-12 text-center"},o(nn,null)),p)),o(wi,{value:n},f))}function Tt({name:t,icon:e,onClick:n}){const i=q();return o("button",{title:`${t} (more info)`,className:`-mx-2 px-2 ${i.text}`,onClick:n},o(e,null))}function po({experience:t,starred:e,onClick:n}){const i=q();return o("button",{"data-id":t.id,title:"Favorite",className:"-m-2 p-2",onClick:n},o($i,{className:e.has(t.id)?i.text:"text-gray-300"}))}function go(t){return o(on,{heading:"Lightning Pick",...t},o("p",null,"When an attraction with a long wait has a Lightning Lane return time in the near future, it's highlighted as a Lightning Pick. Book these quick before they're gone!"))}function yo({dropTime:t,onClose:e}){return o(on,{heading:"Upcoming Drop",onClose:e},o("p",null,"This attraction may be part of the"," ",o("time",{dateTime:t,className:"font-semibold"},Q(t))," ","drop of additional Lightning Lane inventory with earlier return times than what's currently being offered. Availability varies but is always limited, so be sure you're ready to book when the drop time arrives!"))}const vo=be,bo={success:5e3,failure:1e3};function ko({guests:t,result:e,onDone:n}){const{boardingGroup:i,conflicts:r}=e,s=t.filter(d=>!(d.id in r)),a=t.filter(d=>d.id in r),[c,f]=w(!0);return L(()=>{setTimeout(()=>f(!1),bo[i?"success":"failure"])},[i]),o(N,null,i?o(N,null,o("h2",{className:"mt-5 text-xl"},"Boarding Group: ",i),o(B,{guests:s}),Object.keys(r).length>0&&o(N,null,o("p",{className:"font-semibold"},"These guests could not join:"),o(B,{guests:a,conflicts:r})),o("p",null,"Refer to the My Disney Experience app for return time and other information.")):o(N,null,o("h2",{className:"mt-5 text-xl"},"Sorry!"),o("p",null,"A boarding group could not be obtained."),o(B,{guests:a,conflicts:r})),c?null:o(G,{onClick:n},"Done"))}function wo({guests:t,party:e,onToggle:n,onConfirm:i}){return o(N,null,o("div",{className:"mt-5"},o("h2",{className:"inline mr-3 text-xl"},"Choose Your Party"),o(nn,null)),t?t.length>0?o(B,{guests:t,selectable:{isSelected:r=>e.has(r),onToggle:n}}):o("p",null,"No guests available"):o("p",null,"Loading guests\u2026"),o(G,{disabled:e.size===0,onClick:i},"Confirm Party"))}function xo({queue:t}){return o(N,null,t.howToEnterMessage.split(`

`).map((e,n)=>o("p",{key:n},e)))}const No=999;function Eo({guests:t,joinQueue:e,onEdit:n}){const[i,r]=w(!1),[s,a]=we();async function c(){r(!0),a("");const f=tn(No);try{await e()||a("Queue not open yet")}catch(d){a("Error: try again","error"),d instanceof he||console.error(d)}finally{await f,r(!1)}}return o(N,null,o("div",{className:"mt-4"},o("h2",{className:"inline mr-3 text-xl"},"Your Party"),o(O,{type:"small",onClick:n},"Edit")),o(B,{guests:t}),o(G,{disabled:i,onClick:c},"Join Virtual Queue"),s)}function So({queue:t,queues:e,onChange:n}){e||(e=[]);const{bg:i}=q(),r=`block w-full ${i} text-white text-xl font-semibold`;return o(N,null,e.length<=1?o("span",{className:`${r} px-1 truncate`},t.name):o("select",{className:`${r} pr-1`,value:t.id,onChange:s=>n?n(s.currentTarget.value):null},e.map(s=>o("option",{key:s.id,value:s.id,className:"text-base font-normal"},s.name))))}const Ct=t=>t.categoryContentId==="attraction";function To(){const t=vo(),[e,n]=w(),[i,r]=w(null),[s,a]=w(),[c,f]=w(new Set),[d,l]=w({boardingGroup:null,conflicts:{},closed:!0}),[m,u]=w(!1),[_,p]=w("ChooseParty"),[E,h]=we(),y=oe(null),b=Y(async()=>{h(""),u(!0);const I=(await t.getQueues()).filter(R=>R.isAcceptingJoins||R.isAcceptingPartyCreation).sort((R,$)=>+Ct($)-+Ct(R)||R.name.localeCompare($.name));u(!1),n(R=>(R&&I.length===0&&h("No queues available"),I))},[t,h]);L(()=>{b();const I=()=>{document.hidden||b()};return document.addEventListener("visibilitychange",I),()=>{document.removeEventListener("visibilitychange",I)}},[b]),L(()=>{r(I=>{const R=I&&(e==null?void 0:e.find($=>$.id===I.id));return R||(a(void 0),e&&e.length>0?e[0]:null)})},[e]),L(()=>{if(s||!i)return;let I=!1;return(async()=>{const R=await t.getLinkedGuests(i);I||(a(R),f(new Set(R.filter($=>$.isPreselected))))})(),()=>{I=!0}},[t,i,s]),L(()=>{var I;(I=y.current)==null||I.scroll(0,0)},[_]);function T(I){const R=new Set(c);R[R.has(I)?"delete":"add"](I);const $=Number(i==null?void 0:i.maxPartySize);$>0&&R.size>$?h(`Maximum party size: ${$}`):(f(R),h(""))}function g(I){const R=e==null?void 0:e.find($=>$.id===I);R&&(r(R),a(void 0))}async function C(){if(!i||!(await t.getQueue(i)).isAcceptingJoins)return!1;const I=await t.joinQueue(i,[...c]);return l(I),p("BGResult"),I.boardingGroup!==null&&rn(),!0}if((e==null?void 0:e.length)===0)return o(U,{heading:"No Active Queues"},o("p",null,"You can't join any virtual queues just yet. Check back within an hour of the queue opening time, or tap the Refresh button to check again."),o(G,{disabled:m,onClick:b},"Refresh"),E);if(!i)return o("div",null);const x=(s||[]).filter(I=>c.has(I)),S=o(fn,{resort:t.resort,time:i.nextScheduledOpenTime,label:"Next queue opening"}),D=o(So,{queue:i,queues:_==="ChooseParty"?e:[],onChange:g});return{ChooseParty:o(U,{heading:D,containerRef:y},o(xo,{queue:i}),S,o(wo,{guests:s,party:c,onToggle:T,onConfirm:()=>p("JoinQueue")}),E),JoinQueue:o(U,{heading:D},S,o(Eo,{guests:x,onEdit:()=>p("ChooseParty"),joinQueue:C})),BGResult:o(U,{heading:D},o(ko,{guests:x,result:d,onDone:()=>p("ChooseParty")}))}[_]}const De=new jn("bg1.auth");ri(origin)?It(new li({origin,authStore:De}),To):ni(origin)?Me.load({origin,authStore:De}).then(t=>It(t,mo)):location.href="https://joelface.github.io/bg1/start.html";async function It(t,e){Hn({WDW:"America/New_York",DLR:"America/Los_Angeles"}[t.resort]),document.title="BG1",Io(),Co(),Ro().render(o(ci,{value:t},o(ki,{authStore:De},o(e,null))))}function Co(){document.body.addEventListener("click",()=>null)}function Io(){const t=document.createElement("meta");t.name="viewport",t.content="width=device-width, initial-scale=1, maximum-scale=1",document.head.appendChild(t)}function Ro(){const t=document.createElement("div");return t.id="app",document.body.appendChild(t),Fn(t)}
