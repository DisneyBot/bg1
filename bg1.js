var bn=Object.defineProperty,kn=Object.defineProperties;var wn=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var Ye=(t,e,n)=>e in t?bn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,T=(t,e)=>{for(var n in e||(e={}))Je.call(e,n)&&Ye(t,n,e[n]);if(le)for(var n of le(e))Qe.call(e,n)&&Ye(t,n,e[n]);return t},$=(t,e)=>kn(t,wn(e));var F=(t,e)=>{var n={};for(var o in t)Je.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&le)for(var o of le(t))e.indexOf(o)<0&&Qe.call(t,o)&&(n[o]=t[o]);return n};var oe,y,Pt,X,Rt,Ve,At,me={},Lt=[],xn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function H(t,e){for(var n in e)t[n]=e[n];return t}function Dt(t){var e=t.parentNode;e&&e.removeChild(t)}function s(t,e,n){var o,r,i,a={};for(i in e)i=="key"?o=e[i]:i=="ref"?r=e[i]:a[i]=e[i];if(arguments.length>2&&(a.children=arguments.length>3?oe.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)a[i]===void 0&&(a[i]=t.defaultProps[i]);return ee(t,a,o,r,null)}function ee(t,e,n,o,r){var i={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r==null?++Pt:r};return r==null&&y.vnode!=null&&y.vnode(i),i}function w(t){return t.children}function j(t,e){this.props=t,this.context=e}function K(t,e){if(e==null)return t.__?K(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?K(t):null}function $t(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return $t(t)}}function Te(t){(!t.__d&&(t.__d=!0)&&X.push(t)&&!he.__r++||Ve!==y.debounceRendering)&&((Ve=y.debounceRendering)||Rt)(he)}function he(){for(var t;he.__r=X.length;)t=X.sort(function(e,n){return e.__v.__b-n.__v.__b}),X=[],t.some(function(e){var n,o,r,i,a,c;e.__d&&(a=(i=(n=e).__v).__e,(c=n.__P)&&(o=[],(r=H({},i)).__v=i.__v+1,Ae(c,i,r,n.__n,c.ownerSVGElement!==void 0,i.__h!=null?[a]:null,o,a==null?K(i):a,i.__h),Ut(o,i),i.__e!=a&&$t(i)))})}function Ot(t,e,n,o,r,i,a,c,d,u){var l,m,_,f,g,A,b,h=o&&o.__k||Lt,v=h.length;for(n.__k=[],l=0;l<e.length;l++)if((f=n.__k[l]=(f=e[l])==null||typeof f=="boolean"?null:typeof f=="string"||typeof f=="number"||typeof f=="bigint"?ee(null,f,null,null,f):Array.isArray(f)?ee(w,{children:f},null,null,null):f.__b>0?ee(f.type,f.props,f.key,null,f.__v):f)!=null){if(f.__=n,f.__b=n.__b+1,(_=h[l])===null||_&&f.key==_.key&&f.type===_.type)h[l]=void 0;else for(m=0;m<v;m++){if((_=h[m])&&f.key==_.key&&f.type===_.type){h[m]=void 0;break}_=null}Ae(t,f,_=_||me,r,i,a,c,d,u),g=f.__e,(m=f.ref)&&_.ref!=m&&(b||(b=[]),_.ref&&b.push(_.ref,null,f),b.push(m,f.__c||g,f)),g!=null?(A==null&&(A=g),typeof f.type=="function"&&f.__k===_.__k?f.__d=d=Mt(f,d,t):d=Bt(t,f,_,h,g,d),typeof n.type=="function"&&(n.__d=d)):d&&_.__e==d&&d.parentNode!=t&&(d=K(_))}for(n.__e=A,l=v;l--;)h[l]!=null&&(typeof n.type=="function"&&h[l].__e!=null&&h[l].__e==n.__d&&(n.__d=K(o,l+1)),Ft(h[l],h[l]));if(b)for(l=0;l<b.length;l++)Gt(b[l],b[++l],b[++l])}function Mt(t,e,n){for(var o,r=t.__k,i=0;r&&i<r.length;i++)(o=r[i])&&(o.__=t,e=typeof o.type=="function"?Mt(o,e,n):Bt(n,o,o,r,o.__e,e));return e}function z(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){z(n,e)}):e.push(t)),e}function Bt(t,e,n,o,r,i){var a,c,d;if(e.__d!==void 0)a=e.__d,e.__d=void 0;else if(n==null||r!=i||r.parentNode==null)e:if(i==null||i.parentNode!==t)t.appendChild(r),a=null;else{for(c=i,d=0;(c=c.nextSibling)&&d<o.length;d+=2)if(c==r)break e;t.insertBefore(r,i),a=i}return a!==void 0?a:r.nextSibling}function Nn(t,e,n,o,r){var i;for(i in n)i==="children"||i==="key"||i in e||pe(t,i,null,n[i],o);for(i in e)r&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||n[i]===e[i]||pe(t,i,e[i],n[i],o)}function qe(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=n==null?"":typeof n!="number"||xn.test(e)?n:n+"px"}function pe(t,e,n,o,r){var i;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||qe(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||qe(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?o||t.addEventListener(e,i?Ze:Ke,i):t.removeEventListener(e,i?Ze:Ke,i);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n==null?"":n;break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,n):t.removeAttribute(e))}}function Ke(t){this.l[t.type+!1](y.event?y.event(t):t)}function Ze(t){this.l[t.type+!0](y.event?y.event(t):t)}function Ae(t,e,n,o,r,i,a,c,d){var u,l,m,_,f,g,A,b,h,v,I,P,S,x=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(d=n.__h,c=e.__e=n.__e,e.__h=null,i=[c]),(u=y.__b)&&u(e);try{e:if(typeof x=="function"){if(b=e.props,h=(u=x.contextType)&&o[u.__c],v=u?h?h.props.value:u.__:o,n.__c?A=(l=e.__c=n.__c).__=l.__E:("prototype"in x&&x.prototype.render?e.__c=l=new x(b,v):(e.__c=l=new j(b,v),l.constructor=x,l.render=En),h&&h.sub(l),l.props=b,l.state||(l.state={}),l.context=v,l.__n=o,m=l.__d=!0,l.__h=[]),l.__s==null&&(l.__s=l.state),x.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=H({},l.__s)),H(l.__s,x.getDerivedStateFromProps(b,l.__s))),_=l.props,f=l.state,m)x.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(x.getDerivedStateFromProps==null&&b!==_&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(b,v),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(b,l.__s,v)===!1||e.__v===n.__v){l.props=b,l.state=l.__s,e.__v!==n.__v&&(l.__d=!1),l.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(R){R&&(R.__=e)}),l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(b,l.__s,v),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(_,f,g)})}if(l.context=v,l.props=b,l.__v=e,l.__P=t,I=y.__r,P=0,"prototype"in x&&x.prototype.render)l.state=l.__s,l.__d=!1,I&&I(e),u=l.render(l.props,l.state,l.context);else do l.__d=!1,I&&I(e),u=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++P<25);l.state=l.__s,l.getChildContext!=null&&(o=H(H({},o),l.getChildContext())),m||l.getSnapshotBeforeUpdate==null||(g=l.getSnapshotBeforeUpdate(_,f)),S=u!=null&&u.type===w&&u.key==null?u.props.children:u,Ot(t,Array.isArray(S)?S:[S],e,n,o,r,i,a,c,d),l.base=e.__e,e.__h=null,l.__h.length&&a.push(l),A&&(l.__E=l.__=null),l.__e=!1}else i==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Sn(n.__e,e,n,o,r,i,a,d);(u=y.diffed)&&u(e)}catch(R){e.__v=null,(d||i!=null)&&(e.__e=c,e.__h=!!d,i[i.indexOf(c)]=null),y.__e(R,e,n)}}function Ut(t,e){y.__c&&y.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(o){o.call(n)})}catch(o){y.__e(o,n.__v)}})}function Sn(t,e,n,o,r,i,a,c){var d,u,l,m=n.props,_=e.props,f=e.type,g=0;if(f==="svg"&&(r=!0),i!=null){for(;g<i.length;g++)if((d=i[g])&&"setAttribute"in d==!!f&&(f?d.localName===f:d.nodeType===3)){t=d,i[g]=null;break}}if(t==null){if(f===null)return document.createTextNode(_);t=r?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,_.is&&_),i=null,c=!1}if(f===null)m===_||c&&t.data===_||(t.data=_);else{if(i=i&&oe.call(t.childNodes),u=(m=n.props||me).dangerouslySetInnerHTML,l=_.dangerouslySetInnerHTML,!c){if(i!=null)for(m={},g=0;g<t.attributes.length;g++)m[t.attributes[g].name]=t.attributes[g].value;(l||u)&&(l&&(u&&l.__html==u.__html||l.__html===t.innerHTML)||(t.innerHTML=l&&l.__html||""))}if(Nn(t,_,m,r,c),l)e.__k=[];else if(g=e.props.children,Ot(t,Array.isArray(g)?g:[g],e,n,o,r&&f!=="foreignObject",i,a,i?i[0]:n.__k&&K(n,0),c),i!=null)for(g=i.length;g--;)i[g]!=null&&Dt(i[g]);c||("value"in _&&(g=_.value)!==void 0&&(g!==t.value||f==="progress"&&!g||f==="option"&&g!==m.value)&&pe(t,"value",g,m.value,!1),"checked"in _&&(g=_.checked)!==void 0&&g!==t.checked&&pe(t,"checked",g,m.checked,!1))}return t}function Gt(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(o){y.__e(o,n)}}function Ft(t,e,n){var o,r;if(y.unmount&&y.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Gt(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){y.__e(i,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&Ft(o[r],e,typeof t.type!="function");n||t.__e==null||Dt(t.__e),t.__e=t.__d=void 0}function En(t,e,n){return this.constructor(t,n)}function Wt(t,e,n){var o,r,i;y.__&&y.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,i=[],Ae(e,t=(!o&&n||e).__k=s(w,null,[t]),r||me,me,e.ownerSVGElement!==void 0,!o&&n?[n]:r?null:e.firstChild?oe.call(e.childNodes):null,i,!o&&n?n:r?r.__e:e.firstChild,o),Ut(i,t)}function Cn(t,e,n){var o,r,i,a=H({},t.props);for(i in e)i=="key"?o=e[i]:i=="ref"?r=e[i]:a[i]=e[i];return arguments.length>2&&(a.children=arguments.length>3?oe.call(arguments,2):n),ee(t.type,a,o||t.key,r||t.ref,null)}function ye(t,e){var n={__c:e="__cC"+At++,__:t,Consumer:function(o,r){return o.children(r)},Provider:function(o){var r,i;return this.getChildContext||(r=[],(i={})[e]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&r.some(Te)},this.sub=function(a){r.push(a);var c=a.componentWillUnmount;a.componentWillUnmount=function(){r.splice(r.indexOf(a),1),c&&c.call(a)}}),o.children}};return n.Provider.__=n.Consumer.contextType=n}oe=Lt.slice,y={__e:function(t,e,n,o){for(var r,i,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((i=r.constructor)&&i.getDerivedStateFromError!=null&&(r.setState(i.getDerivedStateFromError(t)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),a=r.__d),a)return r.__E=r}catch(c){t=c}throw t}},Pt=0,j.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=H({},this.state),typeof t=="function"&&(t=t(H({},n),this.props)),t&&H(n,t),t!=null&&this.__v&&(e&&this.__h.push(e),Te(this))},j.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Te(this))},j.prototype.render=w,X=[],Rt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,he.__r=0,At=0;var Z,D,xe,Xe,te=0,Ht=[],et=y.__b,tt=y.__r,nt=y.diffed,ot=y.__c,st=y.unmount;function se(t,e){y.__h&&y.__h(D,t,te||e),te=0;var n=D.__H||(D.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function k(t){return te=1,Tn(jt,t)}function Tn(t,e,n){var o=se(Z++,2);return o.t=t,o.__c||(o.__=[n?n(e):jt(void 0,e),function(r){var i=o.t(o.__[0],r);o.__[0]!==i&&(o.__=[i,o.__[1]],o.__c.setState({}))}],o.__c=D),o.__}function L(t,e){var n=se(Z++,3);!y.__s&&De(n.__H,e)&&(n.__=t,n.u=e,D.__H.__h.push(n))}function In(t,e){var n=se(Z++,4);!y.__s&&De(n.__H,e)&&(n.__=t,n.u=e,D.__h.push(n))}function ne(t){return te=5,Le(function(){return{current:t}},[])}function Le(t,e){var n=se(Z++,7);return De(n.__H,e)?(n.o=t(),n.u=e,n.__h=t,n.o):n.__}function Y(t,e){return te=8,Le(function(){return t},e)}function ve(t){var e=D.context[t.__c],n=se(Z++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(D)),e.props.value):t.__}function Pn(){for(var t;t=Ht.shift();)if(t.__P)try{t.__H.__h.forEach(de),t.__H.__h.forEach(Ie),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){D=null,et&&et(t)},y.__r=function(t){tt&&tt(t),Z=0;var e=(D=t.__c).__H;e&&(xe===D?(e.__h=[],D.__h=[],e.__.forEach(function(n){n.o=n.u=void 0})):(e.__.forEach(function(n){n.u&&(n.__H=n.u),n.o&&(n.__=n.o),n.o=n.u=void 0}),e.__h.forEach(de),e.__h.forEach(Ie),e.__h=[])),xe=D},y.diffed=function(t){nt&&nt(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(Ht.push(e)!==1&&Xe===y.requestAnimationFrame||((Xe=y.requestAnimationFrame)||function(n){var o,r=function(){clearTimeout(i),it&&cancelAnimationFrame(o),setTimeout(n)},i=setTimeout(r,100);it&&(o=requestAnimationFrame(r))})(Pn)),D=null,xe=null},y.__c=function(t,e){e.some(function(n){try{n.__H&&n.__H.__.forEach(function(o){o.u&&(o.__H=o.u),o.o&&(o.__=o.o),o.o=o.u=void 0}),n.__h.forEach(de),n.__h=n.__h.filter(function(o){return!o.__||Ie(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),ot&&ot(t,e)},y.unmount=function(t){st&&st(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{de(o)}catch(r){e=r}}),e&&y.__e(e,n.__v))};var it=typeof requestAnimationFrame=="function";function de(t){var e=D,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),D=e}function Ie(t){var e=D;t.__c=t.__(),D=e}function De(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function jt(t,e){return typeof e=="function"?e(t):e}function Rn(t,e){for(var n in e)t[n]=e[n];return t}function rt(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var o in e)if(o!=="__source"&&t[o]!==e[o])return!0;return!1}function at(t){this.props=t}(at.prototype=new j).isPureReactComponent=!0,at.prototype.shouldComponentUpdate=function(t,e){return rt(this.props,t)||rt(this.state,e)};var lt=y.__b;y.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),lt&&lt(t)};var ct=function(t,e){return t==null?null:z(z(t).map(e))},An={map:ct,forEach:ct,count:function(t){return t?z(t).length:0},only:function(t){var e=z(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:z},Ln=y.__e;y.__e=function(t,e,n,o){if(t.then){for(var r,i=e;i=i.__;)if((r=i.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}Ln(t,e,n,o)};var ut=y.unmount;function Ne(){this.__u=0,this.t=null,this.__b=null}function zt(t){var e=t.__.__c;return e&&e.__e&&e.__e(t)}function ce(){this.u=null,this.o=null}y.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),ut&&ut(t)},(Ne.prototype=new j).__c=function(t,e){var n=e.__c,o=this;o.t==null&&(o.t=[]),o.t.push(n);var r=zt(o.__v),i=!1,a=function(){i||(i=!0,n.__R=null,r?r(c):c())};n.__R=a;var c=function(){if(!--o.__u){if(o.state.__e){var u=o.state.__e;o.__v.__k[0]=function m(_,f,g){return _&&(_.__v=null,_.__k=_.__k&&_.__k.map(function(A){return m(A,f,g)}),_.__c&&_.__c.__P===f&&(_.__e&&g.insertBefore(_.__e,_.__d),_.__c.__e=!0,_.__c.__P=g)),_}(u,u.__c.__P,u.__c.__O)}var l;for(o.setState({__e:o.__b=null});l=o.t.pop();)l.forceUpdate()}},d=e.__h===!0;o.__u++||d||o.setState({__e:o.__b=o.__v.__k[0]}),t.then(a,a)},Ne.prototype.componentWillUnmount=function(){this.t=[]},Ne.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=function i(a,c,d){return a&&(a.__c&&a.__c.__H&&(a.__c.__H.__.forEach(function(u){typeof u.__c=="function"&&u.__c()}),a.__c.__H=null),(a=Rn({},a)).__c!=null&&(a.__c.__P===d&&(a.__c.__P=c),a.__c=null),a.__k=a.__k&&a.__k.map(function(u){return i(u,c,d)})),a}(this.__b,n,o.__O=o.__P)}this.__b=null}var r=e.__e&&s(w,null,t.fallback);return r&&(r.__h=null),[s(w,null,e.__e?null:t.children),r]};var dt=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};(ce.prototype=new j).__e=function(t){var e=this,n=zt(e.__v),o=e.o.get(t);return o[0]++,function(r){var i=function(){e.props.revealOrder?(o.push(r),dt(e,t,o)):r()};n?n(i):i()}},ce.prototype.render=function(t){this.u=null,this.o=new Map;var e=z(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},ce.prototype.componentDidUpdate=ce.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){dt(t,n,e)})};var Yt=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,Dn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,$n=typeof document!="undefined",On=function(t){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};function Mn(t,e,n){return e.__k==null&&(e.textContent=""),Wt(t,e),typeof n=="function"&&n(),t?t.__c:null}j.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(j.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var ft=y.event;function Bn(){}function Un(){return this.cancelBubble}function Gn(){return this.defaultPrevented}y.event=function(t){return ft&&(t=ft(t)),t.persist=Bn,t.isPropagationStopped=Un,t.isDefaultPrevented=Gn,t.nativeEvent=t};var _t={configurable:!0,get:function(){return this.class}},mt=y.vnode;y.vnode=function(t){var e=t.type,n=t.props,o=n;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var i in o={},n){var a=n[i];$n&&i==="children"&&e==="noscript"||i==="value"&&"defaultValue"in n&&a==null||(i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&a===!0?a="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+e)&&!On(n.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():r&&Dn.test(i)?i=i.replace(/[A-Z0-9]/,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput/i.test(i)&&(i=i.toLowerCase(),o[i]&&(i="oninputCapture")),o[i]=a)}e=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=z(n.children).forEach(function(c){c.props.selected=o.value.indexOf(c.props.value)!=-1})),e=="select"&&o.defaultValue!=null&&(o.value=z(n.children).forEach(function(c){c.props.selected=o.multiple?o.defaultValue.indexOf(c.props.value)!=-1:o.defaultValue==c.props.value})),t.props=o,n.class!=n.className&&(_t.enumerable="className"in n,n.className!=null&&(o.class=n.className),Object.defineProperty(o,"className",_t))}t.$$typeof=Yt,mt&&mt(t)};var ht=y.__r;y.__r=function(t){ht&&ht(t),t.__c};function Jt(t){return!!t&&t.$$typeof===Yt}function Fn(t){return Jt(t)?Cn.apply(null,arguments):t}function Wn(t){return!!t.__k&&(Wt(null,t),!0)}function Hn(t){return{render(e){Mn(e,t)},unmount(){Wn(t)}}}let Qt="America/New_York";function jn(t){Qt=t}function M(t){t=new Date(t||Date.now());const e={},n="2-digit";return Intl.DateTimeFormat("en-US",{timeZone:Qt,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n}).formatToParts(t).forEach(o=>e[o.type]=o.value),{date:`${e.year}-${e.month}-${e.day}`,time:`${e.hour}:${e.minute}:${e.second}`}}function J(t){const e=t.split(":").map(Number),n=e[0]>=12?"PM":"AM";return e[0]=e[0]%12||12,e.map(o=>String(o).padStart(2,"0")).join(":").replace(/:00$/,"").replace(/^0/,"")+" "+n}class zn extends Error{constructor(e){super(`Auth data "${e}" missing or expired`),this.name="ReauthNeeded"}}class Yn{constructor(e,n=localStorage){this.storageKey=e,this.storage=n}getData(){try{const e=this.storage.getItem(this.storageKey);if(e){const{swid:n,accessToken:o,expires:r}=JSON.parse(e),i=M(new Date(r)),a=M();if(i.date>a.date||i.date===a.date&&i.time>a.time&&i.time>="17")return{swid:n,accessToken:o}}}catch(e){console.error(e)}throw new zn(this.storageKey)}setData(e){this.storage.setItem(this.storageKey,JSON.stringify(e))}deleteData(){this.storage.removeItem(this.storageKey)}}const Jn="modulepreload",pt={},Qn="/bg1/",gt=function(e,n){return!n||n.length===0?e():Promise.all(n.map(o=>{if(o=`${Qn}${o}`,o in pt)return;pt[o]=!0;const r=o.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${i}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":Jn,r||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),r)return new Promise((c,d)=>{a.addEventListener("load",c),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())},Vn=8e3;async function ge(t,e={}){const u=e,{params:n,data:o,timeout:r=Vn}=u;e=F(u,["params","data","timeout"]),e.referrer||(e.referrer=""),e.credentials||(e.credentials="omit"),e.cache||(e.cache="no-store"),e.headers=T({"User-Agent":"Mozilla/5.0"},e.headers||{}),n&&(t+="?"+Object.entries(n).filter(([,l])=>l!=="").map(l=>l.map(encodeURIComponent).join("=")).join("&")),o&&(e.method||(e.method="POST"),e.headers=$(T({},e.headers),{"Content-Type":"application/json"}),e.body=JSON.stringify(o));const a=new AbortController;e.signal=a.signal;const c=setTimeout(()=>a.abort(),r);let d;try{d=await fetch(t,e)}catch(l){return console.error(l),{status:0,data:null}}finally{clearTimeout(c)}return{status:d.status,data:(d.headers.get("Content-Type")||"").startsWith("application/json")?await d.json():{}}}const qn={48199:"Mr-Incredible",48200:"Mrs-Incredible",261227:"Nemo",339625:"Russell",339626:"Carl",364907:"Jack-Skellington",431014:"Princess-Tiana",431065:"Darth_Vader",15549505:"Rapunzel",15655408:"Default_SignedIn",15675686:"Crush",15831168:"Wall-E",16453979:"Merida",16726412:"Stormtrooper",16818199:"Violet",16869301:"Jack-Jack",17345357:"R2-D2",17345359:"C-3PO",17532220:"Bruce",17532224:"Green-Alien",17532227:"Kermit",17532228:"Sorcerer-Mickey",17577168:"Elsa",17577169:"Anna",17813977:"Olaf",17888784:"Yoda",18101167:"Captain-Mickey",18368743:"-Nick",18368747:"-Judy",18393706:"-Flash",18403761:"kion",18405224:"-Moana",18405236:"-Elena",19633995:"50th_Mickey",19633996:"50th_Minnie",90003819:"Alice",90003846:"Ariel",90003898:"Belle",90003967:"Buzz",90003976:"Captain-Hook",90004004:"Chesire-Cat",90004017:"Cinderella",90004068:"Daisy",90004076:"Dash",90004104:"Donald",90004228:"Goofy",90004260:"Hamm",90004328:"Princess-Jasmine",90004340:"Jiminy",90004395:"Lady",90004482:"Mickey-Mouse",90004486:"Minnie",90004537:"Mulan",90004605:"Peter-Pan",90004625:"Pluto",90004626:"Pocahontas",90004642:"Princess-Aurora",90004682:"Rex",90004772:"Snow-White",90004778:"Sparky",90004846:"TinkerBell",90004860:"Tramp",90004939:"Zero"},$e="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/90/90/75/dam/",Kn=$e+"wdpro-assets/avatars/180x180/RetAvatar_180x180_",Zn=$e+"wdpro-assets/avatars/180x180/RetAvatar-180x180",Xn=$e+"disney-world/50th-anniversary/avatars/RetAvatar_180x180_",eo={"-":Zn,5:Xn};function Se(t){const e=qn[t||""];if(!!e)return(eo[e[0]]||Kn)+e+".png"}function to(t){switch(t){case"./data/dlr.ts":return gt(()=>import("./dlr.js"),[]);case"./data/wdw.ts":return gt(()=>import("./wdw.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const Pe={"https://disneyworld.disney.go.com":"WDW","https://disneyland.disney.go.com":"DLR"},no={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"};function oo(t){return t in Pe}class Vt extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}const ue=t=>t.split(";")[0];class Oe{constructor(e){this.maxPartySize=12,this.onUnauthorized=()=>{},this.guestCache=new Map,this._primaryGuestId="",this.origin=e.origin,this.authStore=e.authStore,this.data=e.data,this.bookingStack=new so}static async load(e){const n=Pe[e.origin].toLowerCase(),o=(await to(`./data/${n}.ts`)).default;return new Oe($(T({},e),{data:o}))}get resort(){return Pe[this.origin]}get parks(){return this.data.parks}async plusExperiences(e){return(await this.request({path:`/tipboard-vas/api/v1/parks/${encodeURIComponent(e.id)}/experiences`,key:"availableExperiences"})).filter(o=>!!o.flex&&o.id in this.data.experiences).map(o=>T(T({},o),this.data.experiences[o.id]))}async guests(e){e||(e={experience:{id:"0"},park:{id:"0"}});const n=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:e.experience.id,parkId:e.park.id}});this._primaryGuestId=n.primaryGuestId;const o=m=>{var _=m,{id:a,firstName:c,lastName:d,characterId:u}=_,l=F(_,["id","firstName","lastName","characterId"]);const f=`${c} ${d}`.trim();this.guestCache.has(a)||this.guestCache.set(a,{name:f,characterId:u});const g=Se(u);return $(T({},l),{id:a,name:f,avatarImageUrl:g})},r=n.ineligibleGuests.map(o),i=n.guests.map(o).filter(a=>!("ineligibleReason"in a)||r.push(a)&&!1);return r.sort((a,c)=>{const d=+!a.primary-+!c.primary||a.name.localeCompare(c.name);return a.eligibleAfter||c.eligibleAfter?(a.eligibleAfter||"99").localeCompare(c.eligibleAfter||"99")||d:a.ineligibleReason===c.ineligibleReason?d:a.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?-1:c.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?1:d}),{eligible:i,ineligible:r}}async primaryGuestId(e){return this._primaryGuestId||await this.guests(e),this._primaryGuestId}async offer({experience:e,park:n,guests:o}){const{id:r,date:i,startTime:a,endTime:c,changeStatus:d}=await this.request({path:"/ea-vas/api/v1/products/flex/offers",method:"POST",data:{productType:"FLEX",guestIds:o.map(u=>u.id),primaryGuestId:await this.primaryGuestId({experience:e,park:n}),parkId:n.id,experienceId:e.id,selectedTime:e.flex.nextAvailableTime},key:"offer"});return{id:r,start:{date:i,time:a},end:{date:i,time:c},changeStatus:d}}async cancelOffer(e){await this.request({path:`/ea-vas/api/v1/offers/${encodeURIComponent(e.id)}`,method:"DELETE",params:{productType:"FLEX"},userId:!1})}async book(e){const{singleExperienceDetails:{experienceId:n,parkId:o},entitlements:r,startDateTime:i,endDateTime:a}=await this.request({path:"/ea-vas/api/v1/products/flex/bookings",method:"POST",userId:!1,data:{offerId:e.id},key:"booking"});return this.bookings(),{experience:{id:n,name:this.data.experiences[n].name},park:this.data.parks.find(c=>c.id===o),start:M(i),end:M(a),cancellable:!0,guests:r.map(c=>{const d=this.guestCache.get(c.guestId);return{id:c.guestId,name:(d==null?void 0:d.name)||"",avatarImageUrl:Se(d==null?void 0:d.characterId),entitlementId:c.id}})}}async cancelBooking(e){const o=e.map(r=>r.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${o}`,method:"DELETE",userId:!1})}async bookings(){const{swid:e}=this.authStore.getData(),n=new Date(Date.now()),o=no[this.resort],{items:r=[],assets:i={},profiles:a={}}=await this.request({path:`/plan/${o}/api/v1/itinerary-items/${e}`,params:{destination:this.resort,fields:"items,profiles,assets","item-types":"FASTPASS","guest-locators":e+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":M(n).date,"end-date":M(new Date(n.getTime()).setDate(n.getDate()+1)).date,"show-friends":"false"},userId:!1}),c=Object.fromEntries(this.parks.map(m=>[m.id,m])),d=M(new Date(n.getTime()).setMinutes(n.getMinutes()-15)),u=new Set(["FLEX","OTHER"]),l=r.filter(m=>m.type==="FASTPASS"&&u.has(m.kind)).filter(m=>(m.displayEndDate||"9999")>d.date||m.displayEndDate===d.date&&(m.displayEndTime||"24")>=d.time).map(m=>{const _=ue(m.facility),f=i[m.facility],{name:g}=this.data.experiences[_]||f,A=ue(f.location),b={experience:{id:_,name:g},park:c[A],start:{date:m.displayStartDate,time:m.displayStartTime},end:{date:m.displayEndDate,time:m.displayEndTime},cancellable:m.cancellable,guests:m.guests.map(h=>{const{name:v,avatarId:I}=a[h.id],P=ue(h.id);return T({id:P,entitlementId:h.entitlementId,name:`${v.firstName} ${v.lastName}`.trim(),avatarImageUrl:Se(I)},h.redemptionsRemaining!==void 0&&{redemptions:h.redemptionsRemaining})})};return m.multipleExperiences&&(b.experience={id:"",name:"Multiple Experiences"},b.choices=m.assets.filter(h=>!h.excluded&&!h.original).map(({content:h})=>{const v=ue(h),{name:I}=this.data.experiences[v]||i[h];return{id:v,name:I}}).sort((h,v)=>h.name.localeCompare(v.name))),b}).sort((m,_)=>((m.start.date||"0000-00-00")+(m.start.time||"")).localeCompare((_.start.date||"0000-00-00")+(_.start.time||"")));return this.bookingStack.update(l),l}isRebookable(e){return this.bookingStack.isRebookable(e)}pdt(e){var o;const n=M().time.slice(0,5);return(o=this.data.pdts[e.id])==null?void 0:o.find(r=>r>=n)}logOut(){this.authStore.deleteData(),this.onUnauthorized()}async request(e){var d;const{swid:n,accessToken:o}=this.authStore.getData(),r=this.origin+e.path,i=T({},e.params);((d=e.userId)==null||d)&&(i.userId=n);const{status:a,data:c}=await ge(r,{method:e.method||"GET",params:i,data:e.data,headers:{Authorization:`BEARER ${o}`}});if(a===401)setTimeout(()=>this.logOut());else{const{key:u}=e;if(String(a)[0]==="2"&&(!u||c[u]))return u?c[u]:c}throw new Vt({status:a,data:c})}}const yt="bg1.genie.bookings";class so{constructor(e=!0){if(this.entitlementIds=[],this.mostRecent=new Map,!e)return;const{entitlementIds:n=[],mostRecent:o={}}=JSON.parse(localStorage.getItem(yt)||"{}");this.entitlementIds=n,this.mostRecent=new Map(Object.entries(o))}isRebookable(e){return e.guests.every(n=>this.mostRecent.get(n.id)===n.entitlementId)}update(e){const n=new Map,o=new Set(this.entitlementIds);this.entitlementIds=e.filter(({cancellable:r})=>r).map(r=>r.guests.map(({id:i,entitlementId:a})=>(this.entitlementIds.push(a),o.has(a)||n.set(i,n.has(i)?"":a),a))).flat(1),this.mostRecent=new Map([...this.mostRecent,...n]),n.size>0&&localStorage.setItem(yt,JSON.stringify({entitlementIds:this.entitlementIds,mostRecent:Object.fromEntries(this.mostRecent)}))}}const qt={"https://vqguest-svc-wdw.wdprapps.disney.com":"WDW","https://vqguest-svc.wdprapps.disney.com":"DLR"};function io(t){return t in qt}const ro=t=>t.sort((e,n)=>+!e.isPrimaryGuest-+!n.isPrimaryGuest||+!e.isPreselected-+!n.isPreselected||e.name.localeCompare(n.name));class fe extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}class ao{constructor(e){this.onUnauthorized=()=>{},this.origin=e.origin,this.authStore=e.authStore}get resort(){return qt[this.origin]}url(e){return`${this.origin}/application/v1/guest/${e}`}async getQueues(){return(await ge(this.url("getQueues"))).data.queues.map(o=>{var r=o,{queueId:e}=r,n=F(r,["queueId"]);return $(T({},n),{id:e})})}async getQueue(e){const n=(await this.getQueues()).find(o=>o.id===e.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(e){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:e.id}});return ro(n.guests.map(c=>{var d=c,{guestId:o,firstName:r,lastName:i}=d,a=F(d,["guestId","firstName","lastName"]);return $(T({},a),{id:o,name:`${r} ${i}`.trim()})}))}async joinQueue(e,n){const o=n.map(a=>a.id),{status:r,data:i}=await this.post({resource:"joinQueue",data:{queueId:e.id,guestIds:o}});if(i.responseStatus==="OK"){const a=i.positions.find(c=>c.queueId===e.id&&c.guestIds.length>0&&o.some(d=>c.guestIds.includes(d)));if(!a)throw new fe({status:r,data:i});return{boardingGroup:a.boardingGroup,conflicts:{},closed:!1}}else if(i.responseStatus==="INVALID_GUEST"||i.responseStatus==="CLOSED_QUEUE"){const a=i.responseStatus==="CLOSED_QUEUE",c=new Set,d={};for(const m of i.conflicts)for(const _ of m.guestIds){const f=n.find(g=>g.id===_);!f||(d[f.id]=m.conflictType,c.add(_))}const u=n.filter(m=>!c.has(m.id));if(a||u.length===0)return{boardingGroup:null,conflicts:d,closed:a};const l=await this.joinQueue(e,u);return l.conflicts=T(T({},d),l.conflicts),l}else throw new fe({status:r,data:i})}logOut(){this.authStore.deleteData(),this.onUnauthorized()}async post(e){const{status:n,data:o}=await ge(this.url(e.resource),{method:"POST",headers:{Authorization:`BEARER ${this.authStore.getData().accessToken}`},data:e.data});if(n===401&&setTimeout(()=>this.logOut()),!n||n===401||n>=500)throw new fe({status:n,data:o});return{status:n,data:o}}}const Kt=ye({resort:"WDW",onUnauthorized:()=>{},logOut:()=>null}),lo=Kt.Provider,be=()=>ve(Kt),Me={bg:"bg-blue-500"},Zt=ye(Me),co=Zt.Provider,q=()=>ve(Zt),uo={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function O(t){const a=t,{type:e,className:n}=a,o=F(a,["type","className"]);let r=`${uo[e||"normal"]} ${n||""}`;const{bg:i}=q();return r.includes(" bg-")||(r+=` ${i} text-white`),s("button",T({className:`${r} inline-flex items-center justify-center min-w-[36px] rounded-lg px-2 font-semibold disabled:opacity-50`},o))}function U({onClick:t,disabled:e,href:n,children:o}){return s("div",{className:"mb-20"},s("div",{className:"fixed bottom-0 left-0 w-full bg-white bg-opacity-75 text-center"},s("a",{href:n,className:"block max-w-2xl mx-auto px-3 pb-5"},s(O,{type:"full",onClick:t,disabled:e},o))))}function fo({title:t,children:e}){const{bg:n}=q();function o(r){return Jt(r)?r.type===w?An.map(r.props.children,o):Fn(r,{className:`bg-[#ffffffe6] text${n.slice(2)} ${r.props.className||""}`}):r}return s("div",{className:`flex justify-end gap-x-2 gap-y-1 min-h-[52px] px-3 py-2 text-lg text-white ${n}`},s("h1",{className:"flex-1 self-center py-0.5 text-xl font-semibold overflow-hidden whitespace-nowrap"},t),o(e))}function ie(t){const i=t,{children:e,className:n}=i,o=F(i,["children","className"]),r=T({outer:"",inner:""},typeof n=="string"?{inner:n}:n);return r.outer.match(/\bz-/)||(r.outer+=" z-10"),s("div",T({className:`${r.outer} fixed inset-0`},o),s("div",{className:`${r.inner} max-w-2xl min-h-full mx-auto`},e))}function W(c){var d=c,{heading:t,buttons:e,className:n,theme:o,containerRef:r,children:i}=d,a=F(d,["heading","buttons","className","theme","containerRef","children"]);return s(co,{value:o||Me},s(ie,T({className:{outer:`bg-white text-black text-base ${n||""}`,inner:"flex flex-col max-w-2xl h-full"}},a),s(fo,{title:t},e),s("div",{ref:r,className:"flex-1 overflow-auto px-3 pb-3"},i)))}const _o="bg1.disclaimer.accepted",mo={bg:"bg-red-600"};function ho(){const t=localStorage,e=_o,[n,o]=k(!!t.getItem(e));return L(()=>{n&&t.setItem(e,"1")},[n,t,e]),n?null:s(po,{onAccept:()=>o(!0)})}function po({onAccept:t}){return s(W,{heading:"Warning!",theme:mo},s("p",null,'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'),s(U,{onClick:t},"Accept"))}const go="17e2767256f";function yo(t){return"deferredUuid"in t&&t.deferredUuid!==void 0}class vo{constructor(e,n,o,r=!1){this.iframe=e,this.resort=o,this.logging=r,this.handlers={},this.handshakeAcked=!1,this.onMessage=i=>{if(i.source!==this.iframe.contentWindow||i.data==="inner.loaded")return;const a=JSON.parse(i.data);this.logging&&console.log("Message:",a);const c=a.type==="message"?a.eventName:a.type,d=this.handlers[c],u=d?d("data"in a?a.data:null):void 0;yo(a)&&this.send({type:"deferred",action:"resolve",deferredUuid:a.deferredUuid,data:u!=null?u:{}})},this.on("handshake",()=>{this.handshakeAcked||(this.handshakeAcked=!0,this.send({type:"handshakeAck"}),this.logging&&this.sendMessage("setLogLevel",{level:"log"}),this.sendMessage("workflow.execute",{name:"login"}))}),this.on("lightbox.hide",()=>this.open()),this.on("session.dateOfBirth.read",()=>this.open()),this.on("session.loggedin",({token:i})=>{n({swid:i.swid,accessToken:i.access_token,expires:new Date(i.exp)})})}open(){addEventListener("message",this.onMessage),this.iframe.src=this.authPageUrl,this.handshakeAcked=!1}close(){removeEventListener("message",this.onMessage)}on(e,n){this.handlers[e]=n}sendMessage(e,n){this.send({type:"message",eventName:e,data:n})}send(e){var n;(n=this.iframe.contentWindow)==null||n.postMessage(JSON.stringify($(T({},e),{name:"lightbox-client-window"})),this.authPageUrl)}get authPageUrl(){return`https://cdn.registerdisney.go.com/v2/TPR-${this.resort}-LBSDK.IOS-PROD/en-US?include=l10n,config,html,js&buildId=${go}`}}function bo({resort:t,onLogin:e}){const n=ne(null);return L(()=>{if(!n.current)return;const o=new vo(n.current,e,t);return o.open(),()=>o.close()},[t,e,n]),s("iframe",{title:"Disney Login Form",ref:n,className:"fixed top-0 left-0 w-full h-full border-0"})}function ko({authStore:t,children:e}){const[n,o]=k("Blank"),r=ho(),i=be();L(()=>{i.onUnauthorized=()=>o("LoginForm")},[i]),L(()=>{function c(){if(!(document.hidden||n==="LoginForm"))try{t.getData(),o("Client")}catch{return o("LoginForm")}}return c(),document.addEventListener("visibilitychange",c),()=>{document.removeEventListener("visibilitychange",c)}},[t,n]);const a={Blank:s("div",null),LoginForm:s(bo,{resort:i.resort,onLogin:c=>{t.setData(c),o("Client")}}),Client:e};return s(w,null,r||a[n])}const re=be,Xt=ye({current:null,begin:()=>null,end:()=>null}),wo=Xt.Provider,ae=()=>ve(Xt),xo=3e3,No={alert:"bg-yellow-200",error:"bg-red-200"};function ke(){const[,t]=k(0),[e,n]=k(""),[o,r]=k("alert"),i=Y((c,d)=>{n(c),r(d||"alert"),t(u=>(clearTimeout(u),c?self.setTimeout(()=>{n("")},xo):u))},[]);return[s(So,{message:e,type:o}),i]}function So({message:t,type:e}){return t?s("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${No[e]} text-gray-800`},t):null}function we({children:t,className:e}){return e||(e=""),e.match(/\bw-\S+\s*/)||(e+=" w-4"),e.match(/\bh-\S+\s*/)||(e+=" h-auto"),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:e},t)}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Be({className:t}){return s(we,{className:t},s("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"}))}async function en(t){return new Promise(e=>{setTimeout(e,t)})}function Eo(){const[t,e]=k(0),n=Y(async(r,i=500)=>{e(c=>c+1);const a=en(i);try{await r()}finally{await a,e(c=>c-1)}},[]);return[t>0?s(Co,null):null,n]}function Co(){const{bg:t}=q();return s(ie,{className:"flex items-center bg-white bg-opacity-75"},s("div",{className:"w-[50px] mx-auto"},s("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${t}`},s(Be,{className:"animate-spin w-full text-white"}))))}function Ue(){const[t,e]=Eo(),n=!!t,[o,r]=ke();return{loadData:Y(async(c,d)=>{const u=T({error:"Unknown error occurred",request:"Network request failed"},d);r("");let l=()=>null;const m=new Promise(f=>{l=()=>f(null)});async function _(...f){await m,r(...f)}await e(async()=>{try{await c(_)}catch(f){if(f instanceof Vt){const{status:g}=f.response;_(g in u?u[g]:u.request,"error")}else console.error(f),_(u.error,"error")}}),l()},[e,r]),loaderElem:s(w,null,o,t),isLoading:n}}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function tn({className:t}){return s(we,{className:t},s("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"}))}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function To({className:t}){return s(we,{className:t},s("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"}))}function nn(){const t=be();return s(O,{type:"small",onClick:()=>t.logOut()},"Log Out")}const Io="_SELECT_RADIO_BUTTON_";function vt(t){const b=t,{options:e,value:n,onChange:o}=b,r=F(b,["options","value","onChange"]),[i,a]=k(!1),[c,d]=k(0),u=ne(null),l=ne(null);In(()=>{var S;if((S=e[0])!=null&&S.icon)return;const h=u.current,v=h==null?void 0:h.firstChild;if(!v)return;const I=v.nodeValue;if(!I)return;let P=0;for(const x of e)v.nodeValue=x.text,P=Math.max(h.offsetWidth,P);v.nodeValue=I,d(P)},[e]);const m=()=>{var h;return(h=l.current)==null?void 0:h.querySelector("input:checked")};L(()=>{var v;if(!i)return;(v=m())==null||v.focus();const h=I=>{var P;(P=l.current)!=null&&P.contains(I.target)||a(!1)};return addEventListener("focusin",h),()=>removeEventListener("focusin",h)},[i]);const _=()=>{const h=m();h&&o(h.value),a(!1)},{icon:f,text:g}=e.find(h=>h.value===n)||e[0];let A=!1;return s(w,null,s(O,$(T({},r),{onClick:()=>a(!0)}),f||s("span",{style:{minWidth:`${c}px`},ref:u},g),s(we,{className:"w-2.5 ml-2"},s("path",{d:"m6.8273 12.401-5.6333-7.7812a1.0212 1.0212 117.05 0 1 0.82716-1.62l11.958-2e-7a1.0212 1.0212 62.952 0 1 0.82714 1.62l-1.6438 2.2705a79984 79984 125.9 0 0-2.3456 3.2401l-1.6437 2.2706a1.4479 1.4479 180 0 1-2.3456 4.4e-5z"}))),i&&s(ie,{className:{outer:"bg-black bg-opacity-75",inner:"flex items-center justify-center h-full"},onClick:h=>{var I;const v=h.target;if(!((I=l.current)!=null&&I.contains(v)))return a(!1);if(v.tagName==="INPUT"&&!A)return _();A=!1},onKeyDown:({key:h})=>{["Enter"," "].includes(h)?_():h.startsWith("Arrow")&&(A=!0)},"data-testid":"select-shade"},s("ul",{className:"overflow-auto min-w-[50%] max-h-[90%] rounded-lg bg-white text-black",ref:l},e.map(h=>s("li",{className:"border-t-2 first:border-0 border-gray-300",key:h.value},s("label",{className:"flex flex-row items-center px-4 py-3"},s("input",{type:"radio",name:Io,defaultChecked:h.value===n,value:h.value,className:"w-4 h-4 mr-2.5"})," ",h.icon&&s("span",{"aria-hidden":"true",className:"mr-2.5"},h.icon)," ",h.text))))))}const on=ye({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),Po=on.Provider,Ge=()=>ve(on),Ro="https://bg1.joelface.com/ping",bt="bg1.ping.date";async function sn(){const{date:t}=M();if(localStorage.getItem(bt)===t)return;const{status:n}=await ge(Ro,{method:"POST"});n===204&&localStorage.setItem(bt,t)}function B({guests:t,selectable:e,conflicts:n}){return t.length===0?null:s("ul",{className:"mt-2"},t.map(o=>{var r;return s("li",{key:o.id,className:"px-3 py-1"},s("label",{className:"flex items-center"},e&&s("input",{type:"checkbox",checked:e.isSelected(o),onChange:()=>e.onToggle(o),className:"mr-3"}),s("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white"},o.avatarImageUrl?s("img",{src:o.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):s("span",{"aria-hidden":"true"},o.name[0])),s("span",{className:"leading-tight"},o.name,s("br",null),(n==null?void 0:n[o.id])&&s("span",{className:"text-xs font-semibold text-red-700 uppercase"},(r=n[o.id])==null?void 0:r.replace(/_/g," ")))))}))}function Fe({times:t}){return s("div",{className:"mt-4 text-lg"},"Arrive by:"," ",s("span",{className:"ml-0.5 font-semibold"},t.start.time?s("time",null,J(t.start.time)):"Park Open"," - ",t.end.time?s("time",null,J(t.end.time)):"Park Close"))}function Ao({booking:t,onClose:e}){const n=re(),[o,r]=k(new Set),{loadData:i,loaderElem:a}=Ue(),{guests:c}=t,d=o.size===0,u=o.size===c.length;function l(){i(async()=>{d||await n.cancelBooking([...o]),e(c.filter(m=>!o.has(m)))})}return s(W,{heading:"Your Lightning Lane",theme:t.park.theme},s("h2",null,t.experience.name),s("div",null,t.park.name),s(Fe,{times:t}),s("div",{className:"ml-3"},s("label",{className:"flex items-center py-4"},s("input",{type:"checkbox",checked:u,onChange:()=>r(new Set(u?[]:c))}),s("span",{className:"ml-3"},"Select All"))),d?null:s("div",{className:"mb-4"},s("h3",null,"Cancel These Guests"),s(B,{guests:c.filter(m=>o.has(m)),selectable:{isSelected:()=>!0,onToggle:m=>{const _=new Set(o);_.delete(m),r(_)}}})),u?null:s("div",null,s("h3",null,"Select Guests to Cancel"),s(B,{guests:c.filter(m=>!o.has(m)),selectable:{isSelected:()=>!1,onToggle:m=>r(new Set(o).add(m))}})),s(U,{onClick:l},d?"Back":"Cancel "+(u?"Reservation":"Guests")),a)}function rn({booking:t,onClose:e,isRebookable:n,isNew:o}){const r=ae(),[i,a]=k(t.guests),[c,d]=k(!1);return c?s(Ao,{booking:$(T({},t),{guests:i}),onClose:u=>{d(!1),u.length>0?a(u):e(u)}}):s(W,{heading:"Your Lightning Lane",theme:t.park.theme,buttons:n&&s(O,{onClick:()=>r.begin(t)},"Rebook")},s("h2",null,t.experience.name),s("div",null,t.park.name),s(Fe,{times:t}),t.choices&&s(w,null,s("p",null,"An experience you booked was temporarily unavailable during your return time. You may redeem this Lightning Lane at one of these replacement experiences:"),s("ul",{className:"list-disc mt-2 pl-8"},t.choices.map(u=>s("li",{key:u.id},u.name)))),s("div",{className:"flex mt-4"},s("h3",{className:"inline mt-0"},"Your Party"),t.cancellable&&s(O,{type:"small",onClick:()=>d(!0),className:"ml-3"},"Cancel")),s(B,{guests:i,conflicts:Object.fromEntries(i.filter(u=>u.redemptions!==void 0).map(u=>[u.id,`Redemptions left: ${u.redemptions}`]))}),s(U,{onClick:()=>e(i)},o?"Done":"Back"))}function an({children:t}){return s("p",{className:"border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100"},t)}function ln(){const{ineligible:t}=Ge();return s(B,{guests:t,conflicts:Object.fromEntries(t.map(e=>[e.id,e.eligibleAfter?`TOO EARLY (${J(e.eligibleAfter)})`:e.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function We({buttonText:t,onSubmit:e}){const{eligible:n,ineligible:o,selected:r,setSelected:i}=Ge(),[a,c]=k(),[d,u]=ke(),{maxPartySize:l}=re();return a?s(w,null,s("h3",null,"Choose Your Party"),s(B,{guests:n,selectable:{isSelected:_=>a.has(_),onToggle:_=>c(f=>{u(""),f=new Set(f);const g=f.has(_)?"delete":"add";return g==="add"&&f.size>=l?u(`Maximum party size: ${l}`):f[g](_),f})}}),o.length>0&&s(w,null,s("h3",null,"Ineligible Guests"),s(ln,null)),s(U,{disabled:a.size===0,onClick:()=>{i([...a]),c(void 0)}},"Confirm Party"),d):s(w,null,n.length>l&&r.length===l&&s(an,null,"Party size restricted"),s("div",{className:"mt-4"},s("h3",{className:"inline mt-0"},"Your Party"),s("span",null,s(O,{type:"small",onClick:()=>c(new Set(r)),className:"ml-3"},"Edit"))),s(B,{guests:r}),s(U,{onClick:e},t))}function Lo({offer:t,onBook:e}){const n=ae();return s(w,null,n.current&&s(an,null,"Rebooking resets the two hour timer"),s(Fe,{times:t}),t.changeStatus==="PARK_HOPPING"&&s("div",{className:"text-sm"},s("strong",null,"Note:")," Time changed due to park hopping"),s(We,{buttonText:`${n.current?"Rebook":"Book"} Lightning Lane`,onSubmit:e}))}const kt="https://widget.time.is/t.js";function Do(){if([...document.scripts].some(e=>e.src===kt))return;const t=document.createElement("script");t.src=kt,t.onload=cn,document.head.appendChild(t)}const _e={};function cn(){"time_is_widget"in self&&self.time_is_widget.init(_e)}function $o(t){Do(),_e[t]||(_e[t]={}),cn()}function un(t,e){const n=document.getElementById(t);if(!n||n.firstElementChild)return e();n.textContent=M().time,setTimeout(()=>un(t,e),100)}function Oo({id:t,onSync:e}){return L(()=>{$o(t),un(t,e)},[t,e]),s("time",{id:t})}const Mo={WDW:"Orlando_z161",DLR:"Anaheim_z14e"},Bo=5e3;function dn({resort:t,time:e,label:n}){const o=Mo[t],[r,i]=k(null);L(()=>{setTimeout(()=>i(c=>c||!1),Bo)},[]);const a=Y(()=>i(!0),[]);return s("table",{className:"mt-4 mx-auto text-gray-500"},s("tbody",null,s(wt,{heading:n,time:s("time",null,e||"--:--:--")}),s(wt,{heading:s("a",{href:`https://time.is/${o.split("_")[0]}`,id:"time_is_link",target:"_blank",rel:"noreferrer"},"Current time"),time:s(w,null,s(Oo,{id:o,onSync:a}),r===!1&&s("span",{className:"text-sm font-sans font-semibold text-red-600"}," ","(unsynced)"))})))}function wt({heading:t,time:e}){return s("tr",null,s("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase"},t,":"),s("td",{className:"text-xl font-mono leading-tight"},"\uFEFF",e))}function Uo({startTime:t,onRefresh:e}){return s(w,null,t&&s(dn,{resort:"WDW",time:t,label:"Booking start"}),s("h3",{className:"mt-4"},"Not Available Yet"),t?s("p",null,"At"," ",s("time",{dateTime:t,className:"font-semibold"},J(t)),", tap the ",s("span",{className:"font-semibold"},"Check Availability")," ","button below to start booking this Lightning Lane."):s("p",null,"Sorry, but you can't make a Lightning Lane reservation for this attraction yet."),s(We,{buttonText:"Check Availability",onSubmit:e}))}function Go({onClose:t}){const{ineligible:e}=Ge(),{eligibleAfter:n}=e[0]||{},o=ae();return s(w,null,n&&s("div",{className:"mt-4 border-2 border-green-600 rounded p-1 uppercase font-semibold text-center text-green-600 bg-green-100"},"Eligible at ",J(n)),o.current?s(w,null,s("h3",null,"Unable to Rebook"),s("p",null,"Your current reservation cannot be rebooked to this experience due to the following conflicts:")):s(w,null,s("h3",null,"No Eligible Guests"),s("p",null,"No one in your party is currently eligible for this Lightning Lane.")),s(ln,null),s(U,{onClick:t},"Back"))}function Fo({onRefresh:t}){return s(w,null,s("h3",null,"No Guests Found"),s("p",null,"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."),s(U,{onClick:t},"Try Again"))}function Wo({onClose:t}){return s(w,null,s("h3",null,"No Reservations Available"),s("p",null,"There aren't enough reservation slots available for your entire party. If only part of your group wishes to go on this attraction, edit your party to check again. Otherwise, go back to the tip board and select another attraction."),s(We,{buttonText:"Back",onSubmit:t}))}function fn({booking:t,button:e,badge:n}){return s("div",{className:"flex items-center gap-x-3"},n,s("div",{className:"flex-1 min-w-0"},s("div",{className:"text-gray-500 text-sm font-semibold uppercase"},t.start.time?s("time",null,J(t.start.time)):s("span",null,"open")," - ",t.end.time?s("time",null,J(t.end.time)):s("span",null,"close")),s("div",{className:"text-lg font-semibold leading-tight truncate"},t.experience.name)),e&&s("div",null,e))}function _n(){const t=ae(),e=q();return t.current?s("div",{className:`sticky top-0 -mx-3 pb-1 ${e.bg}`},s("div",{className:"pb-3 bg-white"},s("div",{className:`pb-1 ${e.bg} text-white text-sm font-semibold uppercase text-center`},"Rebooking"),s("div",{className:"mt-2 px-3"},s(fn,{booking:t.current,button:s(O,{type:"small",onClick:()=>t.end(!0)},"Keep")})))):null}function Ho({onClose:t}){const e=re(),n=Me,[o,r]=k(),[i,a]=k(),[c,d]=k(!1);function u(m){!i||(r(_=>{if(!!_)return m.length>0?i.guests=m:_.splice(_.indexOf(i),1),_}),a(void 0))}L(()=>{d(!0),e.bookings().then(m=>r(m))},[e]);function l(){d(!1),setTimeout(t,300)}return i?s(rn,{booking:i,onClose:u,isRebookable:e.isRebookable(i)}):s(w,null,s(ie,{onClick:l,"data-testid":"panel-shade",className:{inner:"bg-black bg-opacity-75"}}),s(W,{heading:"Your Lightning Lanes",buttons:s(O,{onClick:l},"Close"),className:`top-auto max-h-[50%] ${c?"h-[275px]":"h-0"} duration-200 ease-linear`},o&&o.length>0?s("ul",null,(o||[]).map(m=>{var _;return s("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",key:(_=m.guests[0])==null?void 0:_.entitlementId},s(fn,{booking:m,button:s(O,{type:"small",onClick:()=>a(m)},"More"),badge:e.isRebookable(m)&&s("div",{title:"Rebookable",className:`w-2.5 h-2.5 rounded-full ${n.bg}`})}))})):s("div",{className:"mt-4 text-sm font-semibold text-center uppercase  text-gray-500"},o&&"No current reservations")))}function mn(o){var r=o,{onOpen:t,onClose:e}=r,n=F(r,["onOpen","onClose"]);const[i,a]=k(),c=t||a,d=e||(()=>a(void 0));return s(w,null,s(O,$(T({},n),{onClick:()=>c(s(Ho,{onClose:d})),title:"Your Lightning Lanes"}),s(tn,null)),i)}function jo({experience:t,park:e,onClose:n}){const o=re(),r=ae(),[i,a]=k(),[c,d]=k(!t.flex.available&&t.flex.enrollmentStartTime!==void 0),[u,l]=k(c?null:void 0),[m,_]=k(),{loadData:f,loaderElem:g}=Ue();async function A(){if(!u||!i)return;let S=null;await f(async()=>{const x=new Set(i.selected.map(C=>C.id));r.current&&await o.cancelBooking(r.current.guests.filter(C=>x.has(C.id)));try{S=await o.book(u)}finally{r.end()}const R=S.guests.filter(C=>!x.has(C.id));R.length>0&&(await o.cancelBooking(R),S.guests=S.guests.filter(C=>x.has(C.id))),sn()},{410:"Offer expired"}),S&&_(S)}function b(){f(async S=>{const R=(await o.plusExperiences(e)).find(C=>C.id===t.id);R!=null&&R.flex.available?(d(!1),l(void 0)):S("Reservations not open yet")})}function h(){u&&o.cancelOffer(u),n()}const v=Y(()=>{f(async()=>{try{let S=await o.guests({experience:t,park:e});const x=r.current;if(x){const R=new Set(x.guests.map(G=>G.id)),C=[...S.eligible,...S.ineligible].filter(G=>R.has(G.id)&&!(G.ineligibleReason==="TOO_EARLY"||G.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"&&t.id===x.experience.id));S=C.length>0?{eligible:[],ineligible:C}:{eligible:x.guests,ineligible:[]}}a($(T({},S),{selected:S.eligible.slice(0,o.maxPartySize),setSelected:R=>a(C=>{if(!C)return C;const G=new Set(C.selected);return l(E=>E===null||R.some(p=>!G.has(p))?void 0:E),$(T({},C),{selected:R})})}))}catch(S){throw a({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),S}})},[o,t,e,r,f]);L(()=>{i||v()},[i,v]);const I=Y(S=>{!i||i.selected.length===0||f(async()=>{try{l(await o.offer({experience:t,park:e,guests:i.selected}))}catch(x){throw S||l(null),x}},{410:u?"No reservations available":""})},[o,t,e,i,u,f]);if(L(()=>{u===void 0&&I()},[u,I]),m)return s(rn,{booking:m,onClose:n,isNew:!0});const P=(i==null?void 0:i.eligible.length)===0&&(i==null?void 0:i.ineligible.length)===0;return s(W,{heading:"Lightning Lane",theme:e.theme,buttons:s(w,null,s(mn,null),i&&(c||u||P)&&s(O,{onClick:h},"Cancel"),!c&&u!==void 0&&s(O,{onClick:I,title:"Refresh Offer"},s(Be,null)))},s(_n,null),s("h2",null,t.name),s("div",null,e.name),s(Po,{value:i||{eligible:[],ineligible:[],selected:[],setSelected:()=>null}},(i==null?void 0:i.eligible.length)===0?P?s(Fo,{onRefresh:v}):s(Go,{onClose:n}):!i||u===void 0?s("div",null):c?s(Uo,{startTime:t.flex.enrollmentStartTime,onRefresh:b}):u===null?s(Wo,{onClose:n}):s(Lo,{offer:u,onBook:A})),g)}function He({label:t,children:e}){return s("div",{className:"flex items-center flex-1 whitespace-nowrap"},s("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500"},t)," ",e)}function zo({experience:t,onClick:e}){const{flex:n}=t;return s(He,{label:"Genie+"},s("span",null,s(O,{onClick:()=>e(t)},n.nextAvailableTime?J(n.nextAvailableTime):"none")))}function Yo({experience:{type:t,standby:e}}){return e.displayNextShowTime||t==="ENTERTAINMENT"&&!e.waitTime?s(Qo,{standby:e}):s(Jo,{standby:e})}const Jo=({standby:t})=>s(He,{label:"Standby"},t.available?s(pn,{time:t.waitTime!==void 0?t.waitTime+" min":"now"}):s(gn,{text:"down"})),Qo=({standby:t})=>s(He,{label:s(w,null,"Next ",s("span",{className:"hidden xs:inline"},"Show"))},t.displayNextShowTime?s(pn,{time:t.displayNextShowTime}):s(gn,{text:"none"})),hn="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",pn=({time:t})=>s("span",{className:`${hn} border-gray-500 text-gray-500 bg-gray-100`},t),gn=({text:t})=>s("span",{className:`${hn} border-red-600 text-red-600 bg-red-100`},t);function xt({label:t,time:e}){const n=q();return s("div",{className:`-mx-3 px-3 pb-1 ${n.bg} text-white text-sm font-semibold uppercase text-center`},t,": ",s("time",null,J(e)))}async function Vo(t={}){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(o=>{e(o)},o=>{n(o)},t)})}const qo={maximumAge:15e3,timeout:2e3};function Ko(t){const[e,n]=k(),o=Y(()=>{t(async()=>{try{const{coords:r}=await Vo(qo);n([r.latitude,r.longitude])}catch{n(void 0)}})},[t]);return[e,o]}const Zo=6e4,Xo=30,es=60,Nt="bg1.genie.tipBoard.park",St="bg1.genie.tipBoard.starred",ts=(t,e)=>+e.lp-+t.lp,ns=(t,e)=>(t.priority||1/0)-(e.priority||1/0),Ee=(t,e)=>(e.standby.waitTime||-1)-(t.standby.waitTime||-1),Ce=(t,e)=>(t.flex.nextAvailableTime||"").localeCompare(e.flex.nextAvailableTime||""),os=(t,e)=>t.name.toLowerCase().localeCompare(e.name.toLowerCase()),Et=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)),ss=(t,e,n)=>n?Et(t.geo,n)-Et(e.geo,n):0;function is(t,e){const{n,s:o,e:r,w:i}=t.geo,[a,c]=e;return a<n&&a>o&&c<r&&c>i}function Ct(t){const[e,n]=t.split(":").map(Number);return e*60+n}const rs={priority:(t,e)=>ts(t,e)||ns(t,e)||Ee(t,e)||Ce(t,e),standby:(t,e)=>Ee(t,e)||Ce(t,e),soonest:(t,e)=>Ce(t,e)||Ee(t,e),nearby:(t,e,n)=>ss(t,e,n),aToZ:()=>0},as=[{value:"priority",text:"Priority"},{value:"nearby",text:"Nearby"},{value:"standby",text:"Standby"},{value:"soonest",text:"Soonest"},{value:"aToZ",text:"A to Z"}];function ls(){const t=re(),{parks:e}=t,[n,o]=k(()=>{const{id:p=e[0].id,date:N=""}=JSON.parse(sessionStorage.getItem(Nt)||"{}")||{};return N===M().date&&e.find(Q=>Q.id===p)||e[0]}),[r,i]=k([]),[a,c]=k(),d=()=>c(void 0),[u,l]=k("priority"),{loadData:m,loaderElem:_,isLoading:f}=Ue(),[,g]=k(0),[A,b]=k(()=>({current:null,begin:p=>{b($(T({},A),{current:p})),o(p.park),d()},end:(p=!1)=>{b(N=>N.current?$(T({},N),{current:null}):N),p&&d()}})),h=ne(null),v=r.length>0&&!r[0].flex.available?r[0].flex.enrollmentStartTime:void 0,I=r.length>0?t.pdt(n):void 0,[P,S]=k(()=>{let p=[];try{p=JSON.parse(localStorage.getItem(St)||"[]")}catch(N){console.error(N)}return new Set(p)}),[x,R]=Ko(m);L(()=>{u==="nearby"&&R()},[u,R]);const C=Y((p=!0)=>{g(N=>!p&&Date.now()-N<Zo?N:(m(async()=>{l(V=>(V==="nearby"&&R(),V));const Q=await t.plusExperiences(n),yn=Ct(M().time);i(Q.map(V=>{const je=V.standby.waitTime||0,ze=V.flex.nextAvailableTime;if(!ze)return $(T({},V),{lp:!1});const vn=Ct(ze)-yn;return $(T({},V),{lp:je>=Xo&&vn<=Math.min(es,(4-Math.trunc(V.priority||4))/3*je)})}))}),Date.now()))},[t,n,m,R]);L(()=>{i([]),C()},[C]),L(()=>{if(f||a)return;const p=()=>{document.hidden||C(!1)};return document.addEventListener("visibilitychange",p),()=>{document.removeEventListener("visibilitychange",p)}},[a,C,f]),L(()=>{var p;(p=h.current)==null||p.scroll(0,0)},[n,u,A]),L(()=>{sessionStorage.setItem(Nt,JSON.stringify({id:n.id,date:M().date}))},[n]);function G(p){const Q=p.currentTarget.getAttribute("data-id");!Q||(P.has(Q)?P.delete(Q):P.add(Q),localStorage.setItem(St,JSON.stringify([...P])),S(new Set([...P])))}const E=Le(()=>e.map(p=>({value:p.id,icon:p.icon,text:p.name})),[e]);return s(wo,{value:A},s(W,{heading:s(w,null,"G",s("span",{className:"hidden xs:inline"},"enie"),"+"),theme:n.theme,buttons:s(w,null,s(mn,{onOpen:c,onClose:d}),s(vt,{options:E,value:n.id,onChange:p=>o(e.find(N=>N.id===p)),title:"Park"}),s(vt,{options:as,value:u,onChange:l,title:"Sort By"}),s(O,{onClick:C,title:"Refresh Tip Board"},s(Be,null))),containerRef:h},s("div",{"aria-hidden":!!a},s(_n,null),v?s(xt,{label:"Booking start",time:v}):I?s(xt,{label:"Next drop",time:I}):null,s("ul",null,r.sort((p,N)=>+P.has(N.id)-+P.has(p.id)||+N.flex.available-+p.flex.available||rs[u==="nearby"&&!(x&&is(n,x))?"priority":u](p,N,x)||os(p,N)).map(p=>s("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",key:p.id+(P.has(p.id)?"*":"")},s("div",{className:"flex items-center gap-x-2 mt-2"},s(cs,{experience:p,starred:P,onClick:G}),s("h2",{className:"flex-1 mt-0 text-lg leading-tight truncate"},p.name),p.lp&&s("button",{title:"Lightning Pick",className:"px-2",onClick:()=>c(s(us,{onClose:d}))},s(tn,{className:`text${n.theme.bg.slice(2)}`}))),p.flex.preexistingPlan&&s("div",{className:"mt-2 border-2 border-green-600 rounded p-1 text-sm uppercase font-semibold text-center text-green-600 bg-green-100"},"Lightning Lane Booked"),s("div",{className:"flex flex-wrap gap-1.5 mt-2"},s(Yo,{experience:p}),s(zo,{experience:p,onClick:N=>c(s(jo,{experience:N,park:n,onClose:()=>{d(),C(!1)}}))}))))),!f&&s("div",{className:"mt-12 text-center"},s(nn,null)),_)),a)}function cs({experience:t,starred:e,onClick:n}){const o=q();return s("div",{className:"w-4 h-6"},s("button",{"data-id":t.id,title:"Favorite",className:"-m-2 p-2",onClick:n},s(To,{className:e.has(t.id)?"text"+o.bg.slice(2):"text-gray-300"})))}function us({onClose:t}){return s(ie,{className:{outer:"bg-black bg-opacity-75",inner:"p-2 flex items-center justify-center"},onClick:t},s("div",{className:"rounded-lg px-3 py-4 bg-white",onClick:e=>e.stopPropagation()},s("h2",{className:"mt-0"},"Lightning Pick"),s("p",null,"When an attraction with a long wait has a Lightning Lane return time in the near future, it's highlighted as a Lightning Pick. Book these quick before they're gone!"),s("div",null,s(O,{type:"full",onClick:t},"Close"))))}const ds=be,fs={success:5e3,failure:1e3};function _s({guests:t,result:e,onDone:n}){const{boardingGroup:o,conflicts:r}=e,i=t.filter(u=>!(u.id in r)),a=t.filter(u=>u.id in r),[c,d]=k(!0);return L(()=>{setTimeout(()=>d(!1),fs[o?"success":"failure"])},[o]),s(w,null,o?s(w,null,s("h2",{className:"mt-5 text-xl"},"Boarding Group: ",o),s(B,{guests:i}),Object.keys(r).length>0&&s(w,null,s("p",{className:"font-semibold"},"These guests could not join:"),s(B,{guests:a,conflicts:r})),s("p",null,"Refer to the My Disney Experience app for return time and other information.")):s(w,null,s("h2",{className:"mt-5 text-xl"},"Sorry!"),s("p",null,"A boarding group could not be obtained."),s(B,{guests:a,conflicts:r})),c?null:s(U,{onClick:n},"Done"))}function ms({guests:t,party:e,onToggle:n,onConfirm:o}){return s(w,null,s("div",{className:"mt-5"},s("h2",{className:"inline mr-3 text-xl"},"Choose Your Party"),s(nn,null)),t?t.length>0?s(B,{guests:t,selectable:{isSelected:r=>e.has(r),onToggle:n}}):s("p",null,"No guests available"):s("p",null,"Loading guests\u2026"),s(U,{disabled:e.size===0,onClick:o},"Confirm Party"))}function hs({queue:t}){return s(w,null,t.howToEnterMessage.split(`

`).map((e,n)=>s("p",{key:n},e)))}const ps=999;function gs({guests:t,joinQueue:e,onEdit:n}){const[o,r]=k(!1),[i,a]=ke();async function c(){r(!0),a("");const d=en(ps);try{await e()||a("Queue not open yet")}catch(u){a("Error: try again","error"),u instanceof fe||console.error(u)}finally{await d,r(!1)}}return s(w,null,s("div",{className:"mt-4"},s("h2",{className:"inline mr-3 text-xl"},"Your Party"),s(O,{type:"small",onClick:n},"Edit")),s(B,{guests:t}),s(U,{disabled:o,onClick:c},"Join Boarding Group"),i)}function ys({queue:t,queues:e,onChange:n}){e||(e=[]);const{bg:o}=q(),r=`block w-full ${o} text-white text-xl font-semibold`;return s(w,null,e.length<=1?s("span",{className:`${r} px-1 truncate`},t.name):s("select",{className:`${r} pr-1`,value:t.id,onChange:i=>n?n(i.currentTarget.value):null},e.map(i=>s("option",{key:i.id,value:i.id,className:"text-base font-normal"},i.name))))}const Tt=t=>t.categoryContentId==="attraction";function vs(){const t=ds(),[e,n]=k(),[o,r]=k(null),[i,a]=k(),[c,d]=k(new Set),[u,l]=k({boardingGroup:null,conflicts:{},closed:!0}),[m,_]=k(!1),[f,g]=k("ChooseParty"),[A,b]=ke(),h=ne(null),v=Y(async()=>{b(""),_(!0);const E=(await t.getQueues()).filter(p=>p.isAcceptingJoins||p.isAcceptingPartyCreation).sort((p,N)=>+Tt(N)-+Tt(p)||p.name.localeCompare(N.name));_(!1),n(p=>(p&&E.length===0&&b("No queues available"),E))},[t,b]);L(()=>{v();const E=()=>{document.hidden||v()};return document.addEventListener("visibilitychange",E),()=>{document.removeEventListener("visibilitychange",E)}},[v]),L(()=>{r(E=>{const p=E&&(e==null?void 0:e.find(N=>N.id===E.id));return p||(a(void 0),e&&e.length>0?e[0]:null)})},[e]),L(()=>{if(i||!o)return;let E=!1;return(async()=>{const p=await t.getLinkedGuests(o);E||(a(p),d(new Set(p.filter(N=>N.isPreselected))))})(),()=>{E=!0}},[t,o,i]),L(()=>{var E;(E=h.current)==null||E.scroll(0,0)},[f]);function I(E){const p=new Set(c);p[p.has(E)?"delete":"add"](E);const N=Number(o==null?void 0:o.maxPartySize);N>0&&p.size>N?b(`Maximum party size: ${N}`):(d(p),b(""))}function P(E){const p=e==null?void 0:e.find(N=>N.id===E);p&&(r(p),a(void 0))}async function S(){if(!o||!(await t.getQueue(o)).isAcceptingJoins)return!1;const E=await t.joinQueue(o,[...c]);return l(E),g("BGResult"),E.boardingGroup!==null&&sn(),!0}if((e==null?void 0:e.length)===0)return s(W,{heading:"No Active Queues"},s("p",null,"You can't join any virtual queues just yet. Check back within an hour of the queue opening time, or tap the Refresh button to check again."),s(U,{disabled:m,onClick:v},"Refresh"),A);if(!o)return s("div",null);const x=(i||[]).filter(E=>c.has(E)),R=s(dn,{resort:t.resort,time:o.nextScheduledOpenTime,label:"Next queue opening"}),C=s(ys,{queue:o,queues:f==="ChooseParty"?e:[],onChange:P});return{ChooseParty:s(W,{heading:C,containerRef:h},s(hs,{queue:o}),R,s(ms,{guests:i,party:c,onToggle:I,onConfirm:()=>g("JoinQueue")}),A),JoinQueue:s(W,{heading:C},R,s(gs,{guests:x,onEdit:()=>g("ChooseParty"),joinQueue:S})),BGResult:s(W,{heading:C},s(_s,{guests:x,result:u,onDone:()=>g("ChooseParty")}))}[f]}const Re=new Yn("bg1.auth");io(origin)?It(new ao({origin,authStore:Re}),vs):oo(origin)?Oe.load({origin,authStore:Re}).then(t=>It(t,ls)):location.href="https://joelface.github.io/bg1/start.html";async function It(t,e){jn({WDW:"America/New_York",DLR:"America/Los_Angeles"}[t.resort]),document.title="BG1",ks(),bs(),ws().render(s(lo,{value:t},s(ko,{authStore:Re},s(e,null))))}function bs(){document.body.addEventListener("click",()=>null)}function ks(){const t=document.createElement("meta");t.name="viewport",t.content="width=device-width, initial-scale=1, maximum-scale=1",document.head.appendChild(t)}function ws(){const t=document.createElement("div");return t.id="app",document.body.appendChild(t),Hn(t)}
