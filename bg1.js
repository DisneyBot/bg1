var an=Object.defineProperty,ln=Object.defineProperties;var cn=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var Ge=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var Me=(t,e,n)=>e in t?an(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S=(t,e)=>{for(var n in e||(e={}))Ge.call(e,n)&&Me(t,n,e[n]);if(te)for(var n of te(e))Ue.call(e,n)&&Me(t,n,e[n]);return t},O=(t,e)=>ln(t,cn(e));var H=(t,e)=>{var n={};for(var i in t)Ge.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&te)for(var i of te(t))e.indexOf(i)<0&&Ue.call(t,i)&&(n[i]=t[i]);return n};var _e,g,bt,K,wt,Fe,xt,le={},kt=[],un=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function z(t,e){for(var n in e)t[n]=e[n];return t}function Nt(t){var e=t.parentNode;e&&e.removeChild(t)}function s(t,e,n){var i,r,o,a={};for(o in e)o=="key"?i=e[o]:o=="ref"?r=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?_e.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)a[o]===void 0&&(a[o]=t.defaultProps[o]);return se(t,a,i,r,null)}function se(t,e,n,i,r){var o={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r==null?++bt:r};return r==null&&g.vnode!=null&&g.vnode(o),o}function k(t){return t.children}function W(t,e){this.props=t,this.context=e}function J(t,e){if(e==null)return t.__?J(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?J(t):null}function St(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return St(t)}}function we(t){(!t.__d&&(t.__d=!0)&&K.push(t)&&!ce.__r++||Fe!==g.debounceRendering)&&((Fe=g.debounceRendering)||wt)(ce)}function ce(){for(var t;ce.__r=K.length;)t=K.sort(function(e,n){return e.__v.__b-n.__v.__b}),K=[],t.some(function(e){var n,i,r,o,a,c;e.__d&&(a=(o=(n=e).__v).__e,(c=n.__P)&&(i=[],(r=z({},o)).__v=o.__v+1,Ee(c,o,r,n.__n,c.ownerSVGElement!==void 0,o.__h!=null?[a]:null,i,a==null?J(o):a,o.__h),It(i,o),o.__e!=a&&St(o)))})}function Et(t,e,n,i,r,o,a,c,d,u){var l,f,m,_,p,R,b,v=i&&i.__k||kt,N=v.length;for(n.__k=[],l=0;l<e.length;l++)if((_=n.__k[l]=(_=e[l])==null||typeof _=="boolean"?null:typeof _=="string"||typeof _=="number"||typeof _=="bigint"?se(null,_,null,null,_):Array.isArray(_)?se(k,{children:_},null,null,null):_.__b>0?se(_.type,_.props,_.key,null,_.__v):_)!=null){if(_.__=n,_.__b=n.__b+1,(m=v[l])===null||m&&_.key==m.key&&_.type===m.type)v[l]=void 0;else for(f=0;f<N;f++){if((m=v[f])&&_.key==m.key&&_.type===m.type){v[f]=void 0;break}m=null}Ee(t,_,m=m||le,r,o,a,c,d,u),p=_.__e,(f=_.ref)&&m.ref!=f&&(b||(b=[]),m.ref&&b.push(m.ref,null,_),b.push(f,_.__c||p,_)),p!=null?(R==null&&(R=p),typeof _.type=="function"&&_.__k===m.__k?_.__d=d=Tt(_,d,t):d=Ct(t,_,m,v,p,d),typeof n.type=="function"&&(n.__d=d)):d&&m.__e==d&&d.parentNode!=t&&(d=J(m))}for(n.__e=R,l=N;l--;)v[l]!=null&&(typeof n.type=="function"&&v[l].__e!=null&&v[l].__e==n.__d&&(n.__d=J(i,l+1)),Rt(v[l],v[l]));if(b)for(l=0;l<b.length;l++)Pt(b[l],b[++l],b[++l])}function Tt(t,e,n){for(var i,r=t.__k,o=0;r&&o<r.length;o++)(i=r[o])&&(i.__=t,e=typeof i.type=="function"?Tt(i,e,n):Ct(n,i,i,r,i.__e,e));return e}function ue(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){ue(n,e)}):e.push(t)),e}function Ct(t,e,n,i,r,o){var a,c,d;if(e.__d!==void 0)a=e.__d,e.__d=void 0;else if(n==null||r!=o||r.parentNode==null)e:if(o==null||o.parentNode!==t)t.appendChild(r),a=null;else{for(c=o,d=0;(c=c.nextSibling)&&d<i.length;d+=2)if(c==r)break e;t.insertBefore(r,o),a=o}return a!==void 0?a:r.nextSibling}function dn(t,e,n,i,r){var o;for(o in n)o==="children"||o==="key"||o in e||de(t,o,null,n[o],i);for(o in e)r&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||n[o]===e[o]||de(t,o,e[o],n[o],i)}function He(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=n==null?"":typeof n!="number"||un.test(e)?n:n+"px"}function de(t,e,n,i,r){var o;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||He(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||He(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?i||t.addEventListener(e,o?je:We,o):t.removeEventListener(e,o?je:We,o);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n==null?"":n;break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,n):t.removeAttribute(e))}}function We(t){this.l[t.type+!1](g.event?g.event(t):t)}function je(t){this.l[t.type+!0](g.event?g.event(t):t)}function Ee(t,e,n,i,r,o,a,c,d){var u,l,f,m,_,p,R,b,v,N,L,C=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(d=n.__h,c=e.__e=n.__e,e.__h=null,o=[c]),(u=g.__b)&&u(e);try{e:if(typeof C=="function"){if(b=e.props,v=(u=C.contextType)&&i[u.__c],N=u?v?v.props.value:u.__:i,n.__c?R=(l=e.__c=n.__c).__=l.__E:("prototype"in C&&C.prototype.render?e.__c=l=new C(b,N):(e.__c=l=new W(b,N),l.constructor=C,l.render=fn),v&&v.sub(l),l.props=b,l.state||(l.state={}),l.context=N,l.__n=i,f=l.__d=!0,l.__h=[]),l.__s==null&&(l.__s=l.state),C.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=z({},l.__s)),z(l.__s,C.getDerivedStateFromProps(b,l.__s))),m=l.props,_=l.state,f)C.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(C.getDerivedStateFromProps==null&&b!==m&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(b,N),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(b,l.__s,N)===!1||e.__v===n.__v){l.props=b,l.state=l.__s,e.__v!==n.__v&&(l.__d=!1),l.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(I){I&&(I.__=e)}),l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(b,l.__s,N),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(m,_,p)})}l.context=N,l.props=b,l.state=l.__s,(u=g.__r)&&u(e),l.__d=!1,l.__v=e,l.__P=t,u=l.render(l.props,l.state,l.context),l.state=l.__s,l.getChildContext!=null&&(i=z(z({},i),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(p=l.getSnapshotBeforeUpdate(m,_)),L=u!=null&&u.type===k&&u.key==null?u.props.children:u,Et(t,Array.isArray(L)?L:[L],e,n,i,r,o,a,c,d),l.base=e.__e,e.__h=null,l.__h.length&&a.push(l),R&&(l.__E=l.__=null),l.__e=!1}else o==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=_n(n.__e,e,n,i,r,o,a,d);(u=g.diffed)&&u(e)}catch(I){e.__v=null,(d||o!=null)&&(e.__e=c,e.__h=!!d,o[o.indexOf(c)]=null),g.__e(I,e,n)}}function It(t,e){g.__c&&g.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(i){i.call(n)})}catch(i){g.__e(i,n.__v)}})}function _n(t,e,n,i,r,o,a,c){var d,u,l,f=n.props,m=e.props,_=e.type,p=0;if(_==="svg"&&(r=!0),o!=null){for(;p<o.length;p++)if((d=o[p])&&"setAttribute"in d==!!_&&(_?d.localName===_:d.nodeType===3)){t=d,o[p]=null;break}}if(t==null){if(_===null)return document.createTextNode(m);t=r?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,m.is&&m),o=null,c=!1}if(_===null)f===m||c&&t.data===m||(t.data=m);else{if(o=o&&_e.call(t.childNodes),u=(f=n.props||le).dangerouslySetInnerHTML,l=m.dangerouslySetInnerHTML,!c){if(o!=null)for(f={},p=0;p<t.attributes.length;p++)f[t.attributes[p].name]=t.attributes[p].value;(l||u)&&(l&&(u&&l.__html==u.__html||l.__html===t.innerHTML)||(t.innerHTML=l&&l.__html||""))}if(dn(t,m,f,r,c),l)e.__k=[];else if(p=e.props.children,Et(t,Array.isArray(p)?p:[p],e,n,i,r&&_!=="foreignObject",o,a,o?o[0]:n.__k&&J(n,0),c),o!=null)for(p=o.length;p--;)o[p]!=null&&Nt(o[p]);c||("value"in m&&(p=m.value)!==void 0&&(p!==t.value||_==="progress"&&!p||_==="option"&&p!==f.value)&&de(t,"value",p,f.value,!1),"checked"in m&&(p=m.checked)!==void 0&&p!==t.checked&&de(t,"checked",p,f.checked,!1))}return t}function Pt(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(i){g.__e(i,n)}}function Rt(t,e,n){var i,r;if(g.unmount&&g.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||Pt(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){g.__e(o,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&Rt(i[r],e,typeof t.type!="function");n||t.__e==null||Nt(t.__e),t.__e=t.__d=void 0}function fn(t,e,n){return this.constructor(t,n)}function mn(t,e,n){var i,r,o;g.__&&g.__(t,e),r=(i=typeof n=="function")?null:n&&n.__k||e.__k,o=[],Ee(e,t=(!i&&n||e).__k=s(k,null,[t]),r||le,le,e.ownerSVGElement!==void 0,!i&&n?[n]:r?null:e.firstChild?_e.call(e.childNodes):null,o,!i&&n?n:r?r.__e:e.firstChild,i),It(o,t)}function fe(t,e){var n={__c:e="__cC"+xt++,__:t,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,o;return this.getChildContext||(r=[],(o={})[e]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&r.some(we)},this.sub=function(a){r.push(a);var c=a.componentWillUnmount;a.componentWillUnmount=function(){r.splice(r.indexOf(a),1),c&&c.call(a)}}),i.children}};return n.Provider.__=n.Consumer.contextType=n}_e=kt.slice,g={__e:function(t,e,n,i){for(var r,o,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(t)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),a=r.__d),a)return r.__E=r}catch(c){t=c}throw t}},bt=0,W.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=z({},this.state),typeof t=="function"&&(t=t(z({},n),this.props)),t&&z(n,t),t!=null&&this.__v&&(e&&this.__h.push(e),we(this))},W.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),we(this))},W.prototype.render=k,K=[],wt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ce.__r=0,xt=0;var Z,$,ze,V=0,At=[],Ye=g.__b,Qe=g.__r,Je=g.diffed,qe=g.__c,Ke=g.unmount;function me(t,e){g.__h&&g.__h($,t,V||e),V=0;var n=$.__H||($.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function x(t){return V=1,hn(Ot,t)}function hn(t,e,n){var i=me(Z++,2);return i.t=t,i.__c||(i.__=[n?n(e):Ot(void 0,e),function(r){var o=i.t(i.__[0],r);i.__[0]!==o&&(i.__=[o,i.__[1]],i.__c.setState({}))}],i.__c=$),i.__}function P(t,e){var n=me(Z++,3);!g.__s&&Dt(n.__H,e)&&(n.__=t,n.__H=e,$.__H.__h.push(n))}function Te(t){return V=5,Lt(function(){return{current:t}},[])}function Lt(t,e){var n=me(Z++,7);return Dt(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Q(t,e){return V=8,Lt(function(){return t},e)}function he(t){var e=$.context[t.__c],n=me(Z++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub($)),e.props.value):t.__}function pn(){for(var t;t=At.shift();)if(t.__P)try{t.__H.__h.forEach(oe),t.__H.__h.forEach(xe),t.__H.__h=[]}catch(e){t.__H.__h=[],g.__e(e,t.__v)}}g.__b=function(t){$=null,Ye&&Ye(t)},g.__r=function(t){Qe&&Qe(t),Z=0;var e=($=t.__c).__H;e&&(e.__h.forEach(oe),e.__h.forEach(xe),e.__h=[])},g.diffed=function(t){Je&&Je(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(At.push(e)!==1&&ze===g.requestAnimationFrame||((ze=g.requestAnimationFrame)||function(n){var i,r=function(){clearTimeout(o),Ve&&cancelAnimationFrame(i),setTimeout(n)},o=setTimeout(r,100);Ve&&(i=requestAnimationFrame(r))})(pn)),$=null},g.__c=function(t,e){e.some(function(n){try{n.__h.forEach(oe),n.__h=n.__h.filter(function(i){return!i.__||xe(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],g.__e(i,n.__v)}}),qe&&qe(t,e)},g.unmount=function(t){Ke&&Ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{oe(i)}catch(r){e=r}}),e&&g.__e(e,n.__v))};var Ve=typeof requestAnimationFrame=="function";function oe(t){var e=$,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),$=e}function xe(t){var e=$;t.__c=t.__(),$=e}function Dt(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}function Ot(t,e){return typeof e=="function"?e(t):e}function gn(t,e){for(var n in e)t[n]=e[n];return t}function Ze(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var i in e)if(i!=="__source"&&t[i]!==e[i])return!0;return!1}function Xe(t){this.props=t}(Xe.prototype=new W).isPureReactComponent=!0,Xe.prototype.shouldComponentUpdate=function(t,e){return Ze(this.props,t)||Ze(this.state,e)};var et=g.__b;g.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),et&&et(t)};var yn=g.__e;g.__e=function(t,e,n,i){if(t.then){for(var r,o=e;o=o.__;)if((r=o.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}yn(t,e,n,i)};var tt=g.unmount;function ye(){this.__u=0,this.t=null,this.__b=null}function $t(t){var e=t.__.__c;return e&&e.__e&&e.__e(t)}function ne(){this.u=null,this.o=null}g.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),tt&&tt(t)},(ye.prototype=new W).__c=function(t,e){var n=e.__c,i=this;i.t==null&&(i.t=[]),i.t.push(n);var r=$t(i.__v),o=!1,a=function(){o||(o=!0,n.__R=null,r?r(c):c())};n.__R=a;var c=function(){if(!--i.__u){if(i.state.__e){var u=i.state.__e;i.__v.__k[0]=function f(m,_,p){return m&&(m.__v=null,m.__k=m.__k&&m.__k.map(function(R){return f(R,_,p)}),m.__c&&m.__c.__P===_&&(m.__e&&p.insertBefore(m.__e,m.__d),m.__c.__e=!0,m.__c.__P=p)),m}(u,u.__c.__P,u.__c.__O)}var l;for(i.setState({__e:i.__b=null});l=i.t.pop();)l.forceUpdate()}},d=e.__h===!0;i.__u++||d||i.setState({__e:i.__b=i.__v.__k[0]}),t.then(a,a)},ye.prototype.componentWillUnmount=function(){this.t=[]},ye.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=function o(a,c,d){return a&&(a.__c&&a.__c.__H&&(a.__c.__H.__.forEach(function(u){typeof u.__c=="function"&&u.__c()}),a.__c.__H=null),(a=gn({},a)).__c!=null&&(a.__c.__P===d&&(a.__c.__P=c),a.__c=null),a.__k=a.__k&&a.__k.map(function(u){return o(u,c,d)})),a}(this.__b,n,i.__O=i.__P)}this.__b=null}var r=e.__e&&s(k,null,t.fallback);return r&&(r.__h=null),[s(k,null,e.__e?null:t.children),r]};var nt=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};(ne.prototype=new W).__e=function(t){var e=this,n=$t(e.__v),i=e.o.get(t);return i[0]++,function(r){var o=function(){e.props.revealOrder?(i.push(r),nt(e,t,i)):r()};n?n(o):o()}},ne.prototype.render=function(t){this.u=null,this.o=new Map;var e=ue(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},ne.prototype.componentDidUpdate=ne.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){nt(t,n,e)})};var vn=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,bn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,wn=typeof document!="undefined",xn=function(t){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};function kn(t,e,n){return e.__k==null&&(e.textContent=""),mn(t,e),typeof n=="function"&&n(),t?t.__c:null}W.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(W.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var it=g.event;function Nn(){}function Sn(){return this.cancelBubble}function En(){return this.defaultPrevented}g.event=function(t){return it&&(t=it(t)),t.persist=Nn,t.isPropagationStopped=Sn,t.isDefaultPrevented=En,t.nativeEvent=t};var st={configurable:!0,get:function(){return this.class}},ot=g.vnode;g.vnode=function(t){var e=t.type,n=t.props,i=n;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var o in i={},n){var a=n[o];wn&&o==="children"&&e==="noscript"||o==="value"&&"defaultValue"in n&&a==null||(o==="defaultValue"&&"value"in n&&n.value==null?o="value":o==="download"&&a===!0?a="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+e)&&!xn(n.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():r&&bn.test(o)?o=o.replace(/[A-Z0-9]/,"-$&").toLowerCase():a===null&&(a=void 0),i[o]=a)}e=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=ue(n.children).forEach(function(c){c.props.selected=i.value.indexOf(c.props.value)!=-1})),e=="select"&&i.defaultValue!=null&&(i.value=ue(n.children).forEach(function(c){c.props.selected=i.multiple?i.defaultValue.indexOf(c.props.value)!=-1:i.defaultValue==c.props.value})),t.props=i,n.class!=n.className&&(st.enumerable="className"in n,n.className!=null&&(i.class=n.className),Object.defineProperty(i,"className",st))}t.$$typeof=vn,ot&&ot(t)};var rt=g.__r;g.__r=function(t){rt&&rt(t)};function Tn(t){return{render(e){return kn(e,t)}}}let Bt="America/New_York";function Cn(t){Bt=t}function M(t){t=new Date(t||Date.now());const e={},n="2-digit";return Intl.DateTimeFormat("en-US",{timeZone:Bt,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n}).formatToParts(t).forEach(i=>e[i.type]=i.value),{date:`${e.year}-${e.month}-${e.day}`,time:`${e.hour}:${e.minute}:${e.second}`}}function j(t){const e=t.split(":").map(Number),n=e[0]>=12?"PM":"AM";return e[0]=e[0]%12||12,e.map(i=>String(i).padStart(2,"0")).join(":").replace(/:00$/,"").replace(/^0/,"")+" "+n}class In extends Error{constructor(e){super(`Auth data "${e}" missing or expired`),this.name="ReauthNeeded"}}class Pn{constructor(e,n=localStorage){this.storageKey=e,this.storage=n}getData(){try{const e=this.storage.getItem(this.storageKey);if(e){const{swid:n,accessToken:i,expires:r}=JSON.parse(e),o=M(new Date(r)),a=M();if(o.date>a.date||o.date===a.date&&o.time>a.time&&o.time>="17")return{swid:n,accessToken:i}}}catch(e){console.error(e)}throw new In(this.storageKey)}setData(e){this.storage.setItem(this.storageKey,JSON.stringify(e))}deleteData(){this.storage.removeItem(this.storageKey)}}const Rn="modulepreload",at={},An="/bg1/",lt=function(e,n){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=`${An}${i}`,i in at)return;at[i]=!0;const r=i.endsWith(".css"),o=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":Rn,r||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),r)return new Promise((c,d)=>{a.addEventListener("load",c),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())},Ln=8e3;async function ke(t,e={}){const u=e,{params:n,data:i,timeout:r=Ln}=u;e=H(u,["params","data","timeout"]),e.referrer||(e.referrer=""),e.credentials||(e.credentials="omit"),e.cache||(e.cache="no-store"),e.headers=S({"User-Agent":"Mozilla/5.0"},e.headers||{}),n&&(t+="?"+Object.entries(n).filter(([,l])=>l!=="").map(l=>l.map(encodeURIComponent).join("=")).join("&")),i&&(e.method||(e.method="POST"),e.headers=O(S({},e.headers),{"Content-Type":"application/json"}),e.body=JSON.stringify(i));const a=new AbortController;e.signal=a.signal;const c=setTimeout(()=>a.abort(),r);let d;try{d=await fetch(t,e)}catch(l){return console.error(l),{status:0,data:null}}finally{clearTimeout(c)}return{status:d.status,data:(d.headers.get("Content-Type")||"").startsWith("application/json")?await d.json():{}}}function Dn(t){switch(t){case"./data/dlr.ts":return lt(()=>import("./dlr.js"),[]);case"./data/wdw.ts":return lt(()=>import("./wdw.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const Ne={"https://disneyworld.disney.go.com":"WDW","https://disneyland.disney.go.com":"DLR"},On={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"};function $n(t){return t in Ne}class Mt extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}const ie=t=>t.split(";")[0];class Ce{constructor(e){this.maxPartySize=12,this.onUnauthorized=()=>{},this.guestNames=new Map,this._primaryGuestId="",this.origin=e.origin,this.authStore=e.authStore,this.data=e.data,this.bookingStack=new Bn}static async load(e){const n=(await Dn(`./data/${Ne[e.origin].toLocaleLowerCase()}.ts`)).default;return new Ce(O(S({},e),{data:n}))}get resort(){return Ne[this.origin]}get parks(){return this.data.parks}async plusExperiences(e){return(await this.request({path:`/tipboard-vas/api/v1/parks/${encodeURIComponent(e.id)}/experiences`,key:"availableExperiences"})).map(i=>S(S({},i),this.data.experiences[i.id])).filter(i=>!!(i.name&&i.flex))}async guests(e){const n=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:e.experience.id,parkId:e.park.id}});this._primaryGuestId=n.primaryGuestId;const i=u=>{var l=u,{firstName:a,lastName:c}=l,d=H(l,["firstName","lastName"]);return O(S({},d),{name:`${a} ${c}`.trim()})},r=n.ineligibleGuests.map(i),o=n.guests.map(i).filter(a=>"ineligibleReason"in a?(r.push(a),!1):!0);return[...o,...r].forEach(a=>{this.guestNames.has(a.id)||this.guestNames.set(a.id,a.name)}),o.sort((a,c)=>a.name.localeCompare(c.name)),r.sort((a,c)=>{const d=a.name.localeCompare(c.name);return a.eligibleAfter||c.eligibleAfter?(a.eligibleAfter||"99").localeCompare(c.eligibleAfter||"99")||d:a.ineligibleReason===c.ineligibleReason?d:a.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?-1:c.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?1:d}),{eligible:o,ineligible:r}}async primaryGuestId(e){return this._primaryGuestId||await this.guests(e),this._primaryGuestId}async offer({experience:e,park:n,guests:i}){const{id:r,date:o,startTime:a,endTime:c,changeStatus:d}=await this.request({path:"/ea-vas/api/v1/products/flex/offers",method:"POST",data:{productType:"FLEX",guestIds:i.map(u=>u.id),primaryGuestId:await this.primaryGuestId({experience:e,park:n}),parkId:n.id,experienceId:e.id,selectedTime:e.flex.nextAvailableTime},key:"offer"});return{id:r,start:{date:o,time:a},end:{date:o,time:c},changeStatus:d}}async cancelOffer(e){await this.request({path:`/ea-vas/api/v1/offers/${encodeURIComponent(e.id)}`,method:"DELETE",params:{productType:"FLEX"},userId:!1})}async book(e){const{singleExperienceDetails:{experienceId:n,parkId:i},entitlements:r,startDateTime:o,endDateTime:a}=await this.request({path:"/ea-vas/api/v1/products/flex/bookings",method:"POST",userId:!1,data:{offerId:e.id},key:"booking"});return this.bookings(),{experience:{id:n,name:this.data.experiences[n].name},park:this.data.parks.find(c=>c.id===i),start:M(o),end:M(a),cancellable:!0,guests:r.map(c=>({id:c.guestId,name:this.guestNames.get(c.guestId)||"",entitlementId:c.id}))}}async cancelBooking(e){const i=e.map(r=>r.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${i}`,method:"DELETE",userId:!1})}async bookings(){const{swid:e}=this.authStore.getData(),n=new Date(Date.now()),i=On[this.resort],{items:r=[],assets:o={},profiles:a={}}=await this.request({path:`/plan/${i}/api/v1/itinerary-items/${e}`,params:{destination:this.resort,fields:"items,profiles,assets","item-types":"FASTPASS","guest-locators":e+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":M(n).date,"end-date":M(new Date(n.getTime()).setDate(n.getDate()+1)).date,"show-friends":"false"},userId:!1}),c=Object.fromEntries(this.parks.map(f=>[f.id,f])),d=M(new Date(n.getTime()).setMinutes(n.getMinutes()-15)),u=new Set(["FLEX","OTHER"]),l=r.filter(f=>f.type==="FASTPASS"&&u.has(f.kind)).filter(f=>(!f.displayEndDate||f.displayEndDate>=d.date)&&(!f.displayEndTime||f.displayEndTime>=d.time)).map(f=>{const m=ie(f.facility),_=o[f.facility],{name:p}=this.data.experiences[m]||_,R=ie(_.location),b={experience:{id:m,name:p},park:c[R],start:{date:f.displayStartDate,time:f.displayStartTime},end:{date:f.displayEndDate,time:f.displayEndTime},cancellable:f.cancellable,guests:f.guests.map(v=>{const{name:N}=a[v.id];return S({id:ie(v.id),entitlementId:v.entitlementId,name:`${N.firstName} ${N.lastName}`.trim()},v.redemptionsRemaining!==void 0&&{redemptions:v.redemptionsRemaining})})};return f.multipleExperiences&&(b.experience={id:"",name:"Multiple Experiences"},b.choices=f.assets.filter(v=>!v.excluded&&!v.original).map(({content:v})=>{const N=ie(v),{name:L}=this.data.experiences[N]||o[v];return{id:N,name:L}}).sort((v,N)=>v.name.localeCompare(N.name))),b}).sort((f,m)=>((f.start.date||"0000-00-00")+(f.start.time||"")).localeCompare((m.start.date||"0000-00-00")+(m.start.time||"")));return this.bookingStack.update(l),l}isRebookable(e){return this.bookingStack.isRebookable(e)}pdt(e){var i;const n=M().time.slice(0,5);return(i=this.data.pdts[e.id])==null?void 0:i.find(r=>r>=n)}logOut(){this.authStore.deleteData(),this.onUnauthorized()}async request(e){var d;const{swid:n,accessToken:i}=this.authStore.getData(),r=this.origin+e.path,o=S({},e.params);((d=e.userId)==null||d)&&(o.userId=n);const{status:a,data:c}=await ke(r,{method:e.method||"GET",params:o,data:e.data,headers:{Authorization:`BEARER ${i}`}});if(a===401)setTimeout(()=>this.logOut());else{const{key:u}=e;if(String(a)[0]==="2"&&(!u||c[u]))return u?c[u]:c}throw new Mt({status:a,data:c})}}const ct="bg1.genie.bookings";class Bn{constructor(e=!0){if(this.entitlementIds=[],this.mostRecent=new Map,!e)return;const{entitlementIds:n=[],mostRecent:i={}}=JSON.parse(localStorage.getItem(ct)||"{}");this.entitlementIds=n,this.mostRecent=new Map(Object.entries(i))}isRebookable(e){return e.guests.every(n=>this.mostRecent.get(n.id)===n.entitlementId)}update(e){const n=new Map,i=new Set(this.entitlementIds);this.entitlementIds=e.filter(({cancellable:r})=>r).map(r=>r.guests.map(({id:o,entitlementId:a})=>(this.entitlementIds.push(a),i.has(a)||n.set(o,n.has(o)?"":a),a))).flat(1),this.mostRecent=new Map([...this.mostRecent,...n]),n.size>0&&localStorage.setItem(ct,JSON.stringify({entitlementIds:this.entitlementIds,mostRecent:Object.fromEntries(this.mostRecent)}))}}const Gt={"https://vqguest-svc-wdw.wdprapps.disney.com":"WDW","https://vqguest-svc.wdprapps.disney.com":"DLR"};function Mn(t){return t in Gt}function Gn(t){return t.sort((e,n)=>e.isPrimaryGuest!==n.isPrimaryGuest?Number(n.isPrimaryGuest)-Number(e.isPrimaryGuest):e.isPreselected!==n.isPreselected?Number(n.isPreselected)-Number(e.isPreselected):e.name.localeCompare(n.name))}class re extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}class Un{constructor(e){this.onUnauthorized=()=>{},this.origin=e.origin,this.authStore=e.authStore}get resort(){return Gt[this.origin]}url(e){return`${this.origin}/application/v1/guest/${e}`}async getQueues(){return(await ke(this.url("getQueues"))).data.queues.map(i=>{var r=i,{queueId:e}=r,n=H(r,["queueId"]);return O(S({},n),{id:e})})}async getQueue(e){const n=(await this.getQueues()).find(i=>i.id===e.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(e){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:e.id}});return Gn(n.guests.map(c=>{var d=c,{guestId:i,firstName:r,lastName:o}=d,a=H(d,["guestId","firstName","lastName"]);return O(S({},a),{id:i,name:`${r} ${o}`.trim()})}))}async joinQueue(e,n){const i=n.map(a=>a.id),{status:r,data:o}=await this.post({resource:"joinQueue",data:{queueId:e.id,guestIds:i}});if(o.responseStatus==="OK"){const a=o.positions.find(c=>c.queueId===e.id&&c.guestIds.length>0&&i.some(d=>c.guestIds.includes(d)));if(!a)throw new re({status:r,data:o});return{boardingGroup:a.boardingGroup,conflicts:{},closed:!1}}else if(o.responseStatus==="INVALID_GUEST"||o.responseStatus==="CLOSED_QUEUE"){const a=o.responseStatus==="CLOSED_QUEUE",c=new Set,d={};for(const f of o.conflicts)for(const m of f.guestIds){const _=n.find(p=>p.id===m);!_||(d[_.id]=f.conflictType,c.add(m))}const u=n.filter(f=>!c.has(f.id));if(a||u.length===0)return{boardingGroup:null,conflicts:d,closed:a};const l=await this.joinQueue(e,u);return l.conflicts=S(S({},d),l.conflicts),l}else throw new re({status:r,data:o})}logOut(){this.authStore.deleteData(),this.onUnauthorized()}async post(e){const{status:n,data:i}=await ke(this.url(e.resource),{method:"POST",headers:{Authorization:`BEARER ${this.authStore.getData().accessToken}`},data:e.data});if(n===401&&setTimeout(()=>this.logOut()),!n||n===401||n>=500)throw new re({status:n,data:i});return{status:n,data:i}}}const Ut=fe({resort:"WDW",onUnauthorized:()=>{},logOut:()=>null}),Fn=Ut.Provider,pe=()=>he(Ut),Ft={bg:"bg-blue-500"},Ht=fe(Ft),Hn=Ht.Provider,Y=()=>he(Ht),Wn={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function B(t){const a=t,{type:e,className:n}=a,i=H(a,["type","className"]),r=(n||"")+" "+Wn[e||"normal"],{bg:o}=Y();return s("button",S({className:`${r} border-2 border-white rounded-lg px-2 ${o} text-white font-semibold disabled:opacity-50`},i))}function G({onClick:t,disabled:e,href:n,children:i}){return s("div",{className:"mb-20"},s("div",{className:"fixed bottom-0 left-0 w-full bg-white bg-opacity-75 text-center"},s("a",{href:n,className:"block max-w-2xl mx-auto px-3 pb-5"},s(B,{type:"full",onClick:t,disabled:e},i))))}function jn({title:t,children:e}){const{bg:n}=Y();return s("div",{className:`flex justify-end gap-x-2 gap-y-1 min-h-[52px] px-3 py-2 font-semibold text-white ${n}`},s("h1",{className:"flex-1 self-center py-0.5 text-xl overflow-hidden whitespace-nowrap"},t),e)}function Ie(t){const o=t,{children:e,className:n}=o,i=H(o,["children","className"]),r=S({outer:"",inner:""},typeof n=="string"?{inner:n}:n);return s("div",S({className:`${r.outer} fixed inset-0`},i),s("div",{className:`${r.inner} max-w-2xl min-h-full mx-auto`},e))}function F(c){var d=c,{heading:t,buttons:e,className:n,theme:i,containerRef:r,children:o}=d,a=H(d,["heading","buttons","className","theme","containerRef","children"]);return s(Hn,{value:i||Ft},s(Ie,S({className:{outer:`bg-white ${n||""}`,inner:"flex flex-col max-w-2xl h-full"}},a),s(jn,{title:t},e),s("div",{ref:r,className:"flex-1 overflow-auto px-3 pb-3"},o)))}const zn="bg1.disclaimer.accepted",Yn={bg:"bg-red-600"};function Qn(){const t=localStorage,e=zn,[n,i]=x(!!t.getItem(e));return P(()=>{n&&t.setItem(e,"1")},[n,t,e]),n?null:s(Jn,{onAccept:()=>i(!0)})}function Jn({onAccept:t}){return s(F,{heading:"Warning!",theme:Yn},s("p",null,'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'),s(G,{onClick:t},"Accept"))}const qn="17e2767256f";function Kn(t){return"deferredUuid"in t&&t.deferredUuid!==void 0}class Vn{constructor(e,n,i,r=!1){this.iframe=e,this.resort=i,this.logging=r,this.handlers={},this.handshakeAcked=!1,this.onMessage=o=>{if(o.source!==this.iframe.contentWindow||o.data==="inner.loaded")return;const a=JSON.parse(o.data);this.logging&&console.log("Message:",a);const c=a.type==="message"?a.eventName:a.type,d=this.handlers[c],u=d?d("data"in a?a.data:null):void 0;Kn(a)&&this.send({type:"deferred",action:"resolve",deferredUuid:a.deferredUuid,data:u!=null?u:{}})},this.on("handshake",()=>{this.handshakeAcked||(this.handshakeAcked=!0,this.send({type:"handshakeAck"}),this.logging&&this.sendMessage("setLogLevel",{level:"log"}),this.sendMessage("workflow.execute",{name:"login"}))}),this.on("lightbox.hide",()=>this.open()),this.on("session.dateOfBirth.read",()=>this.open()),this.on("session.loggedin",({token:o})=>{n({swid:o.swid,accessToken:o.access_token,expires:new Date(o.exp)})})}open(){addEventListener("message",this.onMessage),this.iframe.src=this.authPageUrl,this.handshakeAcked=!1}close(){removeEventListener("message",this.onMessage)}on(e,n){this.handlers[e]=n}sendMessage(e,n){this.send({type:"message",eventName:e,data:n})}send(e){var n;(n=this.iframe.contentWindow)==null||n.postMessage(JSON.stringify(O(S({},e),{name:"lightbox-client-window"})),this.authPageUrl)}get authPageUrl(){return`https://cdn.registerdisney.go.com/v2/TPR-${this.resort}-LBSDK.IOS-PROD/en-US?include=l10n,config,html,js&buildId=${qn}`}}function Zn({resort:t,onLogin:e}){const n=Te(null);return P(()=>{if(!n.current)return;const i=new Vn(n.current,e,t);return i.open(),()=>i.close()},[t,e,n]),s("iframe",{title:"Disney Login Form",ref:n,className:"fixed top-0 left-0 w-full h-full border-0"})}function Xn({authStore:t,children:e}){const[n,i]=x("Blank"),r=Qn(),o=pe();P(()=>{o.onUnauthorized=()=>i("LoginForm")},[o]),P(()=>{function c(){if(!(document.hidden||n==="LoginForm"))try{t.getData(),i("Client")}catch{return i("LoginForm")}}return c(),document.addEventListener("visibilitychange",c),()=>{document.removeEventListener("visibilitychange",c)}},[t,n]);const a={Blank:s("div",null),LoginForm:s(Zn,{resort:o.resort,onLogin:c=>{t.setData(c),i("Client")}}),Client:e};return s(k,null,r||a[n])}const X=pe,Wt=fe({current:null,begin:()=>null,end:()=>null}),ei=Wt.Provider,ee=()=>he(Wt),ti=3e3,ni={alert:"bg-yellow-200",error:"bg-red-200"};function ge(){const[,t]=x(0),[e,n]=x(""),[i,r]=x("alert"),o=Q((c,d)=>{n(c),r(d||"alert"),t(u=>(clearTimeout(u),c?self.setTimeout(()=>{n("")},ti):u))},[]);return[s(ii,{message:e,type:i}),o]}function ii({message:t,type:e}){return t?s("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${ni[e]} text-gray-800`},t):null}function Pe({children:t,className:e}){return e||(e=""),e.match(/\bw-\S+\s*/)||(e+=" w-4"),e.match(/\bh-\S+\s*/)||(e+=" h-auto"),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:e},t)}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Re({className:t}){return s(Pe,{className:t},s("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"}))}async function jt(t){return new Promise(e=>{setTimeout(e,t)})}function si(){const[t,e]=x(0),n=Q(async(r,o=500)=>{e(c=>c+1);const a=jt(o);try{await r()}finally{await a,e(c=>c-1)}},[]);return[t>0?s(oi,null):null,n]}function oi(){const{bg:t}=Y();return s(Ie,{className:"flex items-center bg-white bg-opacity-75"},s("div",{className:"w-[50px] mx-auto"},s("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${t}`},s(Re,{className:"animate-spin w-full text-white"}))))}function Ae(){const[t,e]=si(),n=!!t,[i,r]=ge();return{loadData:Q(async(c,d)=>{const u=S({error:"Unknown error occurred",request:"Network request failed"},d);r("");let l=()=>null;const f=new Promise(_=>{l=()=>_(null)});async function m(..._){await f,r(..._)}await e(async()=>{try{await c(m)}catch(_){if(_ instanceof Mt){const{status:p}=_.response;m(p in u?u[p]:u.request,"error")}else console.error(_),m(u.error,"error")}}),l()},[e,r]),loaderElem:s(k,null,i,t),isLoading:n}}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function ut({className:t}){return s(Pe,{className:t},s("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"}))}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function ri({className:t}){return s(Pe,{className:t},s("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"}))}function zt(){const t=pe();return s(B,{type:"small",onClick:()=>t.logOut()},"Log Out")}function dt(t){const r=t,{className:e}=r,n=H(r,["className"]),{bg:i}=Y();return s("select",S({className:`${e||""} border-2 border-white rounded-lg px-1 ${i} font-semibold disabled:opacity-50`},n))}const Yt=fe({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),ai=Yt.Provider,Le=()=>he(Yt);function U({guests:t,selectable:e,conflicts:n}){return t.length===0?null:s("ul",{className:"mt-2"},t.map(i=>{var r;return s("li",{key:i.id,className:"px-3 py-1"},s("label",{className:"flex items-center"},e?s("input",{type:"checkbox",checked:e.isSelected(i),onChange:()=>e.onToggle(i),className:"mr-3"}):null,s("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white"},i.avatarImageUrl?s("img",{src:i.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):s("span",{"aria-hidden":"true"},i.name[0])),s("span",{className:"leading-tight"},i.name,s("br",null),n!=null&&n[i.id]?s("span",{className:"text-xs font-semibold text-red-700 uppercase"},(r=n[i.id])==null?void 0:r.replace(/_/g," ")):null)))}))}function De({times:t}){return s("div",{className:"mt-4 text-lg"},"Arrive by:"," ",s("span",{className:"ml-0.5 font-semibold"},t.start.time?s("time",null,j(t.start.time)):"Park Open"," - ",t.end.time?s("time",null,j(t.end.time)):"Park Close"))}function li({booking:t,onClose:e}){const n=X(),[i,r]=x(new Set),{loadData:o,loaderElem:a}=Ae(),{guests:c}=t,d=i.size===0,u=i.size===c.length;function l(){o(async()=>{d||await n.cancelBooking([...i]),e(c.filter(f=>!i.has(f)))})}return s(F,{heading:"Your Lightning Lane",theme:t.park.theme},s("h2",null,t.experience.name),s("div",null,t.park.name),s(De,{times:t}),s("div",{className:"ml-3"},s("label",{className:"flex items-center py-4"},s("input",{type:"checkbox",checked:u,onChange:()=>r(new Set(u?[]:c))}),s("span",{className:"ml-3"},"Select All"))),d?null:s("div",{className:"mb-4"},s("h3",null,"Cancel These Guests"),s(U,{guests:c.filter(f=>i.has(f)),selectable:{isSelected:()=>!0,onToggle:f=>{const m=new Set(i);m.delete(f),r(m)}}})),u?null:s("div",null,s("h3",null,"Select Guests to Cancel"),s(U,{guests:c.filter(f=>!i.has(f)),selectable:{isSelected:()=>!1,onToggle:f=>r(new Set(i).add(f))}})),s(G,{onClick:l},d?"Back":"Cancel "+(u?"Reservation":"Guests")),a)}function Qt({booking:t,onClose:e,isRebookable:n,isNew:i}){const r=ee(),[o,a]=x(t.guests),[c,d]=x(!1);return c?s(li,{booking:O(S({},t),{guests:o}),onClose:u=>{d(!1),u.length>0?a(u):e(u)}}):s(F,{heading:"Your Lightning Lane",theme:t.park.theme,buttons:n&&s(B,{onClick:()=>r.begin(t)},"Rebook")},s("h2",null,t.experience.name),s("div",null,t.park.name),s(De,{times:t}),t.choices&&s(k,null,s("p",null,"An experience you booked was temporarily unavailable during your return time. You may redeem this Lightning Lane at one of these replacement experiences:"),s("ul",{className:"list-disc mt-2 pl-8"},t.choices.map(u=>s("li",{key:u.id},u.name)))),s("div",{className:"flex mt-4"},s("h3",{className:"inline mt-0"},"Your Party"),t.cancellable&&s(B,{type:"small",onClick:()=>d(!0),className:"ml-3"},"Cancel")),s(U,{guests:o,conflicts:Object.fromEntries(o.filter(u=>u.redemptions!==void 0).map(u=>[u.id,`Redemptions left: ${u.redemptions}`]))}),s(G,{onClick:()=>e(o)},i?"Done":"Back"))}function Jt({children:t}){return s("p",{className:"border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100"},t)}function qt(){const{ineligible:t}=Le();return s(U,{guests:t,conflicts:Object.fromEntries(t.map(e=>[e.id,e.eligibleAfter?`TOO EARLY (${j(e.eligibleAfter)})`:e.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function Kt({buttonText:t,onSubmit:e}){const{eligible:n,ineligible:i,selected:r,setSelected:o}=Le(),[a,c]=x(),[d,u]=ge(),{maxPartySize:l}=X();return a?s(k,null,s("h3",null,"Choose Your Party"),s(U,{guests:n,selectable:{isSelected:m=>a.has(m),onToggle:m=>c(_=>{u(""),_=new Set(_);const p=_.has(m)?"delete":"add";return p==="add"&&_.size>=l?u(`Maximum party size: ${l}`):_[p](m),_})}}),i.length>0&&s(k,null,s("h3",null,"Ineligible Guests"),s(qt,null)),s(G,{disabled:a.size===0,onClick:()=>{o([...a]),c(void 0)}},"Confirm Party"),d):s(k,null,n.length>l&&s(Jt,null,"Party size restricted"),s("div",{className:"mt-4"},s("h3",{className:"inline mt-0"},"Your Party"),s("span",null,s(B,{type:"small",onClick:()=>c(new Set(r)),className:"ml-3"},"Edit"))),s(U,{guests:r}),s(G,{onClick:e},t))}function ci({offer:t,onBook:e}){const n=ee();return s(k,null,n.current&&s(Jt,null,"Rebooking resets the two hour timer"),s(De,{times:t}),t.changeStatus==="PARK_HOPPING"&&s("div",{className:"text-sm"},s("strong",null,"Note:")," Time changed due to park hopping"),s(Kt,{buttonText:`${n.current?"Rebook":"Book"} Lightning Lane`,onSubmit:e}))}const _t="https://widget.time.is/t.js";function ui(){if([...document.scripts].some(e=>e.src===_t))return;const t=document.createElement("script");t.src=_t,t.onload=Vt,document.head.appendChild(t)}const ae={};function Vt(){"time_is_widget"in self&&self.time_is_widget.init(ae)}function di(t){ui(),ae[t]||(ae[t]={}),Vt()}function Zt(t,e){const n=document.getElementById(t);if(!n||n.firstElementChild)return e();n.textContent=M().time,setTimeout(()=>Zt(t,e),100)}function _i({id:t,onSync:e}){return P(()=>{di(t),Zt(t,e)},[t,e]),s("time",{id:t})}const fi={WDW:"Orlando_z161",DLR:"Anaheim_z14e"},mi=5e3;function Xt({resort:t,time:e,label:n}){const i=fi[t],[r,o]=x(null);P(()=>{setTimeout(()=>o(c=>c||!1),mi)},[]);const a=Q(()=>o(!0),[]);return s("table",{className:"mt-4 mx-auto text-gray-500"},s("tbody",null,s(ft,{heading:n,time:s("time",null,e||"--:--:--")}),s(ft,{heading:s("a",{href:`https://time.is/${i.split("_")[0]}`,id:"time_is_link",target:"_blank",rel:"noreferrer"},"Current time"),time:s(k,null,s(_i,{id:i,onSync:a}),r===!1?s("span",{className:"text-sm font-sans font-semibold text-red-600"}," ","(unsynced)"):null)})))}function ft({heading:t,time:e}){return s("tr",null,s("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase"},t,":"),s("td",{className:"text-xl font-mono leading-tight"},"\uFEFF",e))}function hi({startTime:t,onRefresh:e}){return s(k,null,t&&s(Xt,{resort:"WDW",time:t,label:"Booking start"}),s("h3",{className:"mt-4"},"Not Available Yet"),t?s("p",null,"At"," ",s("time",{dateTime:t,className:"font-semibold"},j(t)),", tap the ",s("span",{className:"font-semibold"},"Check Availability")," ","button below to start booking this Lightning Lane."):s("p",null,"Sorry, but you can't make a Lightning Lane reservation for this attraction yet."),s(Kt,{buttonText:"Check Availability",onSubmit:e}))}function pi({onClose:t}){const{ineligible:e}=Le(),{eligibleAfter:n}=e[0]||{},i=ee();return s(k,null,n&&s("div",{className:"mt-4 border-2 border-green-600 rounded p-1 uppercase font-semibold text-center text-green-600 bg-green-100"},"Eligible at ",j(n)),i.current?s(k,null,s("h3",null,"Unable to Rebook"),s("p",null,"Your current reservation cannot be rebooked to this experience due to the following conflicts:")):s(k,null,s("h3",null,"No Eligible Guests"),s("p",null,"No one in your party is currently eligible for this Lightning Lane.")),s(qt,null),s(G,{onClick:t},"Back"))}function gi({onRefresh:t}){return s(k,null,s("h3",null,"No Guests Found"),s("p",null,"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."),s(G,{onClick:t},"Try Again"))}function yi({onClose:t}){return s(k,null,s("h3",null,"No Reservations Available"),s("p",null,"Tap the refresh button above to try again or go back to the tip board and select another attraction."),s(G,{onClick:t},"Back"))}function en({booking:t,button:e}){return s("div",{className:"flex items-center gap-x-2"},s("div",{className:"flex-1 min-w-0"},s("div",{className:"text-gray-500 text-sm font-semibold uppercase"},t.start.time?s("time",null,j(t.start.time)):s("span",null,"open")," - ",t.end.time?s("time",null,j(t.end.time)):s("span",null,"close")),s("div",{className:"text-lg font-semibold leading-tight truncate"},t.experience.name)),e&&s("div",null,e))}function tn(){const t=ee(),e=Y();return t.current?s("div",{className:`sticky top-0 -mx-3 pb-1 ${e.bg}`},s("div",{className:"pb-3 bg-white"},s("div",{className:`py-1.5 ${e.bg} text-white text-sm font-semibold uppercase text-center`},"Rebooking"),s("div",{className:"mt-2 px-3"},s(en,{booking:t.current,button:s(B,{type:"small",onClick:()=>t.end(!0)},"Keep")})))):null}function vi({experience:t,park:e,onClose:n}){var I;const i=X(),r=ee(),[o,a]=x(),[c,d]=x(t.flex.available),[u,l]=x(c?void 0:null),[f,m]=x(),{loadData:_,loaderElem:p,isLoading:R}=Ae();async function b(){if(!u||!o)return;let E=null;await _(async()=>{const T=new Set(o.selected.map(h=>h.id));r.current&&await i.cancelBooking(r.current.guests.filter(h=>T.has(h.id)));try{E=await i.book(u)}finally{r.end()}const A=E.guests.filter(h=>!T.has(h.id));A.length>0&&(await i.cancelBooking(A),E.guests=E.guests.filter(h=>T.has(h.id)))},{410:"Offer expired"}),E&&m(E)}function v(){_(async E=>{const A=(await i.plusExperiences(e)).find(h=>h.id===t.id);A!=null&&A.flex.available?(d(!0),l(void 0)):E("Reservations not open yet")})}function N(){u&&i.cancelOffer(u),n()}function L(){!o||o.eligible.length===0||_(async()=>{const E=await i.offer({experience:t,park:e,guests:o.eligible});l(T=>(T&&i.cancelOffer(T),E))},{410:"No reservations available"})}const C=Q(()=>{_(async()=>{try{let E=await i.guests({experience:t,park:e});const T=r.current;if(T){const A=new Set(T.guests.map(y=>y.id)),h=[...E.eligible,...E.ineligible].filter(y=>A.has(y.id)&&!(y.ineligibleReason==="TOO_EARLY"||y.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"&&t.id===T.experience.id));E=h.length>0?{eligible:[],ineligible:h}:{eligible:T.guests,ineligible:[]}}a(O(S({},E),{selected:E.eligible.slice(0,i.maxPartySize),setSelected:A=>a(h=>{if(!h)return h;const y=new Set(h.selected);return A.some(w=>!y.has(w))&&l(w=>{if(!w)return w;i.cancelOffer(w)}),O(S({},h),{selected:A})})}))}catch(E){throw a({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),E}})},[i,t,e,r,_]);return P(C,[C]),P(()=>{u!==void 0||!o||o.selected.length===0||_(async()=>{try{l(await i.offer({experience:t,park:e,guests:[...o.selected]}))}catch(E){throw l(null),E}},{410:""})},[i,t,e,o,u,_]),f?s(Qt,{booking:f,onClose:n,isNew:!0}):s(F,{heading:"Lightning Lane",theme:e.theme,buttons:s(k,null,(!c||u!==null)&&s(B,{onClick:N},"Cancel"),c&&u!==void 0&&s(B,{onClick:L,title:"Refresh Offer"},s(Re,null)))},s(tn,null),s("h2",null,t.name),s("div",null,e.name),s(ai,{value:o||{eligible:[],ineligible:[],selected:[],setSelected:()=>null}},((I=o==null?void 0:o.eligible)==null?void 0:I.length)===0?R?s("div",null):o.ineligible.length===0?s(gi,{onRefresh:C}):s(pi,{onClose:n}):u===void 0?s("div",null):c?u===null?s(yi,{onClose:n}):s(ci,{offer:u,onBook:b}):s(hi,{startTime:t.flex.enrollmentStartTime,onRefresh:v})),p)}function bi({onClose:t}){const e=X(),[n,i]=x(),[r,o]=x(),[a,c]=x(!1);function d(l){!r||(i(f=>{if(!!f)return l.length>0?r.guests=l:f.splice(f.indexOf(r),1),f}),o(void 0))}P(()=>{c(!0),e.bookings().then(l=>i(l))},[e]);function u(){c(!1),setTimeout(t,300)}return r?s(Qt,{booking:r,onClose:d,isRebookable:e.isRebookable(r)}):s(k,null,s(Ie,{onClick:u,"data-testid":"panel-shade",className:"bg-black bg-opacity-75"}),s(F,{heading:"Your Lightning Lanes",buttons:s(B,{onClick:u},"Close"),className:`top-auto max-h-[50%] ${a?"h-[275px]":"h-0"} duration-200 ease-linear`},n&&n.length>0?s("ul",null,(n||[]).map(l=>{var f;return s("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",key:(f=l.guests[0])==null?void 0:f.entitlementId},s(en,{booking:l,button:s(B,{type:"small",onClick:()=>o(l)},"More")}))})):s("div",{className:"mt-4 text-sm font-semibold text-center uppercase  text-gray-500"},n&&"No current reservations")))}function Oe({label:t,children:e}){return s("div",{className:"flex items-center flex-1 whitespace-nowrap"},s("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500"},t)," ",e)}function wi({experience:t,onClick:e}){const{flex:n}=t;return s(Oe,{label:"Genie+"},n.nextAvailableTime?s("span",null,s(B,{onClick:()=>e(t)},j(n.nextAvailableTime))):s("span",{className:"inline-block border-2 border-gray-500 rounded px-1.5 py-0.5 font-semibold text-gray-500 bg-gray-100"},"none"))}function xi({experience:{type:t,standby:e}}){return e.displayNextShowTime||t==="ENTERTAINMENT"&&!e.waitTime?s(Ni,{standby:e}):s(ki,{standby:e})}const ki=({standby:t})=>s(Oe,{label:"Standby"},t.available?s(sn,{time:t.waitTime!==void 0?t.waitTime+" min":"now"}):s(on,{text:"down"})),Ni=({standby:t})=>s(Oe,{label:s(k,null,"Next ",s("span",{className:"hidden xs:inline"},"Show"))},t.displayNextShowTime?s(sn,{time:t.displayNextShowTime}):s(on,{text:"none"})),nn="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",sn=({time:t})=>s("span",{className:`${nn} border-gray-500 text-gray-500 bg-gray-100`},t),on=({text:t})=>s("span",{className:`${nn} border-red-600 text-red-600 bg-red-100`},t);function mt({label:t,time:e}){const n=Y();return s("div",{className:`-mx-3 px-3 pb-1 ${n.bg} text-white text-sm font-semibold uppercase text-center`},t,": ",s("time",null,j(e)))}const Si=6e4,ht="bg1.genie.tipBoard.park",pt="bg1.genie.tipBoard.starred",Ei=(t,e)=>+e.lp-+t.lp,Ti=(t,e)=>(t.priority||1/0)-(e.priority||1/0),ve=(t,e)=>(e.standby.waitTime||-1)-(t.standby.waitTime||-1),be=(t,e)=>(t.flex.nextAvailableTime||"").localeCompare(e.flex.nextAvailableTime||""),Ci=(t,e)=>t.name.toLowerCase().localeCompare(e.name.toLowerCase());function gt(t){const[e,n]=t.split(":").map(Number);return e*60+n}const Ii={priority:(t,e)=>Ei(t,e)||Ti(t,e)||ve(t,e)||be(t,e),standby:(t,e)=>ve(t,e)||be(t,e),soonest:(t,e)=>be(t,e)||ve(t,e),aToZ:()=>0},Pi=30,Ri=60;function Ai(){const t=X(),{parks:e}=t,[n,i]=x(()=>{const{id:h=e[0].id,date:y=""}=JSON.parse(sessionStorage.getItem(ht)||"{}")||{};return y===M().date&&e.find(w=>w.id===h)||e[0]}),[r,o]=x([]),[a,c]=x(),[d,u]=x(!1),[l,f]=x("priority"),{loadData:m,loaderElem:_,isLoading:p}=Ae(),[,R]=x(0),[b,v]=x(()=>({current:null,begin:h=>{v(O(S({},b),{current:h})),i(h.park),u(!1)},end:(h=!1)=>{v(y=>y.current?O(S({},y),{current:null}):y),h&&c(void 0)}})),N=Te(null),L=r.length>0&&!r[0].flex.available?r[0].flex.enrollmentStartTime:void 0,C=r.length>0?t.pdt(n):void 0,[I,E]=x(()=>{let h=[];try{h=JSON.parse(localStorage.getItem(pt)||"[]")}catch(y){console.error(y)}return new Set(h)}),T=Q((h=!0)=>{R(y=>!h&&Date.now()-y<Si?y:(m(async()=>{const w=await t.plusExperiences(n),D=gt(M().time);o(w.map(q=>{const $e=q.standby.waitTime||0,Be=q.flex.nextAvailableTime;if(!Be)return O(S({},q),{lp:!1});const rn=gt(Be)-D;return O(S({},q),{lp:$e>=Pi&&rn<=Math.min(Ri,(4-Math.trunc(q.priority||4))/3*$e)})}))}),Date.now()))},[t,n,m]);P(()=>{o([]),T()},[T]),P(()=>{if(p||a||d)return;const h=()=>{document.hidden||T(!1)};return document.addEventListener("visibilitychange",h),()=>{document.removeEventListener("visibilitychange",h)}},[a,T,p,d]),P(()=>{var h;(h=N.current)==null||h.scroll(0,0)},[n,l,b]),P(()=>{sessionStorage.setItem(ht,JSON.stringify({id:n.id,date:M().date}))},[n]);function A(h){const w=h.currentTarget.getAttribute("data-id");!w||(I.has(w)?I.delete(w):I.add(w),localStorage.setItem(pt,JSON.stringify([...I])),E(new Set([...I])))}return s(ei,{value:b},s(F,{heading:s(k,null,"G",s("span",{className:"hidden xs:inline"},"enie"),"+"),theme:n.theme,buttons:s(k,null,s(B,{onClick:()=>u(!0),title:"Your Lightning Lanes"},s(ut,null)),s(dt,{value:n.id,onChange:h=>{i(e.find(y=>y.id===h.currentTarget.value))},title:"Park"},e.map(h=>s("option",{value:h.id,title:h.name,key:h.id},h.abbr))),s(dt,{value:l,onChange:h=>f(h.currentTarget.value),title:"Sort By"},s("option",{value:"priority"},"Priority"),s("option",{value:"standby"},"Standby"),s("option",{value:"soonest"},"Soonest"),s("option",{value:"aToZ"},"A to Z")),s(B,{onClick:T,title:"Refresh Tip Board"},s(Re,null))),containerRef:N},s("div",{"aria-hidden":!!(a||d)},s(tn,null),L?s(mt,{label:"Booking start",time:L}):C?s(mt,{label:"Next drop",time:C}):null,s("ul",null,r.sort((h,y)=>+I.has(y.id)-+I.has(h.id)||+y.flex.available-+h.flex.available||Ii[l](h,y)||Ci(h,y)).map(h=>s("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",key:h.id+(I.has(h.id)?"*":"")},s("div",{className:"flex items-center gap-x-2 mt-2"},s(Li,{experience:h,starred:I,onClick:A}),s("h2",{className:"flex-1 mt-0 text-lg leading-tight truncate"},h.name),h.lp&&s("span",{title:"Lightning Pick"},s(ut,{className:`text${n.theme.bg.slice(2)}`}))),h.flex.preexistingPlan?s("div",{className:"mt-2 border-2 border-green-600 rounded p-1 text-sm uppercase font-semibold text-center text-green-600 bg-green-100"},"Lightning Lane Booked"):null,s("div",{className:"flex flex-wrap gap-1.5 mt-2"},s(xi,{experience:h}),s(wi,{experience:h,onClick:c}))))),!p&&s("div",{className:"mt-12 text-center"},s(zt,null)),_)),d&&s(bi,{onClose:()=>u(!1)}),a&&s(vi,{experience:a,park:n,onClose:()=>{T(!1),c(void 0)}}))}function Li({experience:t,starred:e,onClick:n}){const i=Y();return s("div",{className:"relative w-4 h-6"},s("button",{"data-id":t.id,title:"Favorite",className:"absolute -top-2 -left-2 p-2",onClick:n},s(ri,{className:e.has(t.id)?"text"+i.bg.slice(2):"text-gray-300"})))}const Di=pe,Oi={success:5e3,failure:1e3};function $i({guests:t,result:e,onDone:n}){const{boardingGroup:i,conflicts:r}=e,o=t.filter(u=>!(u.id in r)),a=t.filter(u=>u.id in r),[c,d]=x(!0);return P(()=>{setTimeout(()=>d(!1),Oi[i?"success":"failure"])},[i]),s(k,null,i?s(k,null,s("h2",{className:"mt-5 text-xl"},"Boarding Group: ",i),s(U,{guests:o}),Object.keys(r).length>0?s(k,null,s("p",{className:"font-semibold"},"These guests could not join:"),s(U,{guests:a,conflicts:r})):null,s("p",null,"Refer to the My Disney Experience app for return time and other information.")):s(k,null,s("h2",{className:"mt-5 text-xl"},"Sorry!"),s("p",null,"A boarding group could not be obtained."),s(U,{guests:a,conflicts:r})),c?null:s(G,{onClick:n},"Done"))}function Bi({guests:t,party:e,onToggle:n,onConfirm:i}){return s(k,null,s("div",{className:"mt-5"},s("h2",{className:"inline mr-3 text-xl"},"Choose Your Party"),s(zt,null)),t?t.length>0?s(U,{guests:t,selectable:{isSelected:r=>e.has(r),onToggle:n}}):s("p",null,"No guests available"):s("p",null,"Loading guests\u2026"),s(G,{disabled:e.size===0,onClick:i},"Confirm Party"))}function Mi({queue:t}){return s(k,null,t.howToEnterMessage.split(`

`).map((e,n)=>s("p",{key:n},e)))}const Gi=999;function Ui({guests:t,joinQueue:e,onEdit:n}){const[i,r]=x(!1),[o,a]=ge();async function c(){r(!0),a("");const d=jt(Gi);try{await e()||a("Queue not open yet")}catch(u){a("Error: try again","error"),u instanceof re||console.error(u)}finally{await d,r(!1)}}return s(k,null,s("div",{className:"mt-4"},s("h2",{className:"inline mr-3 text-xl"},"Your Party"),s(B,{type:"small",onClick:n},"Edit")),s(U,{guests:t}),s(G,{disabled:i,onClick:c},"Join Boarding Group"),o)}function Fi({queue:t,queues:e,onChange:n}){e||(e=[]);const{bg:i}=Y(),r=`block w-full ${i} text-white text-xl font-semibold`;return s(k,null,e.length<=1?s("span",{className:`${r} px-1 truncate`},t.name):s("select",{className:`${r} pr-1`,value:t.id,onChange:o=>n?n(o.currentTarget.value):null},e.map(o=>s("option",{key:o.id,value:o.id,className:"text-base font-normal"},o.name))))}const yt=t=>t.categoryContentId==="attraction";function Hi(){const t=Di(),[e,n]=x(),[i,r]=x(null),[o,a]=x(),[c,d]=x(new Set),[u,l]=x({boardingGroup:null,conflicts:{},closed:!0}),[f,m]=x(!1),[_,p]=x("ChooseParty"),[R,b]=ge(),v=Te(null),N=Q(async()=>{b(""),m(!0);const y=(await t.getQueues()).filter(w=>w.isAcceptingJoins||w.isAcceptingPartyCreation).sort((w,D)=>+yt(D)-+yt(w)||w.name.localeCompare(D.name));m(!1),n(w=>(w&&y.length===0&&b("No queues available"),y))},[t,b]);P(()=>{N();const y=()=>{document.hidden||N()};return document.addEventListener("visibilitychange",y),()=>{document.removeEventListener("visibilitychange",y)}},[N]),P(()=>{r(y=>{const w=y&&(e==null?void 0:e.find(D=>D.id===y.id));return w||(a(void 0),e&&e.length>0?e[0]:null)})},[e]),P(()=>{if(o||!i)return;let y=!1;return(async()=>{const w=await t.getLinkedGuests(i);y||(a(w),d(new Set(w.filter(D=>D.isPreselected))))})(),()=>{y=!0}},[t,i,o]),P(()=>{var y;(y=v.current)==null||y.scroll(0,0)},[_]);function L(y){const w=new Set(c);w[w.has(y)?"delete":"add"](y);const D=Number(i==null?void 0:i.maxPartySize);D>0&&w.size>D?b(`Maximum party size: ${D}`):(d(w),b(""))}function C(y){const w=e==null?void 0:e.find(D=>D.id===y);w&&(r(w),a(void 0))}async function I(){return!i||!(await t.getQueue(i)).isAcceptingJoins?!1:(l(await t.joinQueue(i,[...c])),p("BGResult"),!0)}if((e==null?void 0:e.length)===0)return s(F,{heading:"No Active Queues"},s("p",null,"You can't join any virtual queues just yet. Check back within an hour of the queue opening time, or tap the Refresh button to check again."),s(G,{disabled:f,onClick:N},"Refresh"),R);if(!i)return s("div",null);const E=(o||[]).filter(y=>c.has(y)),T=s(Xt,{resort:t.resort,time:i.nextScheduledOpenTime,label:"Next queue opening"}),A=s(Fi,{queue:i,queues:_==="ChooseParty"?e:[],onChange:C});return{ChooseParty:s(F,{heading:A,containerRef:v},s(Mi,{queue:i}),T,s(Bi,{guests:o,party:c,onToggle:L,onConfirm:()=>p("JoinQueue")}),R),JoinQueue:s(F,{heading:A},T,s(Ui,{guests:E,onEdit:()=>p("ChooseParty"),joinQueue:I})),BGResult:s(F,{heading:A},s($i,{guests:E,result:u,onDone:()=>p("ChooseParty")}))}[_]}const Se=new Pn("bg1.auth");Mn(origin)?vt(new Un({origin,authStore:Se}),Hi):$n(origin)?Ce.load({origin,authStore:Se}).then(t=>vt(t,Ai)):location.href="https://joelface.github.io/bg1/start.html";async function vt(t,e){document.head.innerHTML+=`
    <meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>BG1</title>
  `,document.body.innerHTML="<div id=app><div>",Cn({WDW:"America/New_York",DLR:"America/Los_Angeles"}[t.resort]);const n=document.getElementById("app");if(!n)return;Tn(n).render(s(Fn,{value:t},s(Xn,{authStore:Se},s(e,null)))),Wi()}function Wi(){document.body.addEventListener("click",()=>null)}
