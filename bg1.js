var Nn=Object.defineProperty,En=Object.defineProperties;var Sn=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var Je=(t,e,n)=>e in t?Nn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S=(t,e)=>{for(var n in e||(e={}))Qe.call(e,n)&&Je(t,n,e[n]);if(ue)for(var n of ue(e))Ve.call(e,n)&&Je(t,n,e[n]);return t},$=(t,e)=>En(t,Sn(e));var G=(t,e)=>{var n={};for(var i in t)Qe.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&ue)for(var i of ue(t))e.indexOf(i)<0&&Ve.call(t,i)&&(n[i]=t[i]);return n};var oe,y,At,te,Dt,qe,$t,pe={},Ot=[],Tn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function z(t,e){for(var n in e)t[n]=e[n];return t}function Mt(t){var e=t.parentNode;e&&e.removeChild(t)}function s(t,e,n){var i,r,o,a={};for(o in e)o=="key"?i=e[o]:o=="ref"?r=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?oe.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)a[o]===void 0&&(a[o]=t.defaultProps[o]);return ne(t,a,i,r,null)}function ne(t,e,n,i,r){var o={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r==null?++At:r};return r==null&&y.vnode!=null&&y.vnode(o),o}function k(t){return t.children}function Y(t,e){this.props=t,this.context=e}function Z(t,e){if(e==null)return t.__?Z(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Z(t):null}function Bt(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Bt(t)}}function Ie(t){(!t.__d&&(t.__d=!0)&&te.push(t)&&!ge.__r++||qe!==y.debounceRendering)&&((qe=y.debounceRendering)||Dt)(ge)}function ge(){for(var t;ge.__r=te.length;)t=te.sort(function(e,n){return e.__v.__b-n.__v.__b}),te=[],t.some(function(e){var n,i,r,o,a,c;e.__d&&(a=(o=(n=e).__v).__e,(c=n.__P)&&(i=[],(r=z({},o)).__v=o.__v+1,Ae(c,o,r,n.__n,c.ownerSVGElement!==void 0,o.__h!=null?[a]:null,i,a==null?Z(o):a,o.__h),Ft(i,o),o.__e!=a&&Bt(o)))})}function Ut(t,e,n,i,r,o,a,c,d,u){var l,_,m,f,p,P,x,h=i&&i.__k||Ot,v=h.length;for(n.__k=[],l=0;l<e.length;l++)if((f=n.__k[l]=(f=e[l])==null||typeof f=="boolean"?null:typeof f=="string"||typeof f=="number"||typeof f=="bigint"?ne(null,f,null,null,f):Array.isArray(f)?ne(k,{children:f},null,null,null):f.__b>0?ne(f.type,f.props,f.key,null,f.__v):f)!=null){if(f.__=n,f.__b=n.__b+1,(m=h[l])===null||m&&f.key==m.key&&f.type===m.type)h[l]=void 0;else for(_=0;_<v;_++){if((m=h[_])&&f.key==m.key&&f.type===m.type){h[_]=void 0;break}m=null}Ae(t,f,m=m||pe,r,o,a,c,d,u),p=f.__e,(_=f.ref)&&m.ref!=_&&(x||(x=[]),m.ref&&x.push(m.ref,null,f),x.push(_,f.__c||p,f)),p!=null?(P==null&&(P=p),typeof f.type=="function"&&f.__k===m.__k?f.__d=d=Gt(f,d,t):d=Wt(t,f,m,h,p,d),typeof n.type=="function"&&(n.__d=d)):d&&m.__e==d&&d.parentNode!=t&&(d=Z(m))}for(n.__e=P,l=v;l--;)h[l]!=null&&(typeof n.type=="function"&&h[l].__e!=null&&h[l].__e==n.__d&&(n.__d=Z(i,l+1)),jt(h[l],h[l]));if(x)for(l=0;l<x.length;l++)Ht(x[l],x[++l],x[++l])}function Gt(t,e,n){for(var i,r=t.__k,o=0;r&&o<r.length;o++)(i=r[o])&&(i.__=t,e=typeof i.type=="function"?Gt(i,e,n):Wt(n,i,i,r,i.__e,e));return e}function J(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){J(n,e)}):e.push(t)),e}function Wt(t,e,n,i,r,o){var a,c,d;if(e.__d!==void 0)a=e.__d,e.__d=void 0;else if(n==null||r!=o||r.parentNode==null)e:if(o==null||o.parentNode!==t)t.appendChild(r),a=null;else{for(c=o,d=0;(c=c.nextSibling)&&d<i.length;d+=2)if(c==r)break e;t.insertBefore(r,o),a=o}return a!==void 0?a:r.nextSibling}function Cn(t,e,n,i,r){var o;for(o in n)o==="children"||o==="key"||o in e||ye(t,o,null,n[o],i);for(o in e)r&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||n[o]===e[o]||ye(t,o,e[o],n[o],i)}function Ke(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=n==null?"":typeof n!="number"||Tn.test(e)?n:n+"px"}function ye(t,e,n,i,r){var o;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||Ke(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||Ke(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?i||t.addEventListener(e,o?Xe:Ze,o):t.removeEventListener(e,o?Xe:Ze,o);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n==null?"":n;break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,n):t.removeAttribute(e))}}function Ze(t){this.l[t.type+!1](y.event?y.event(t):t)}function Xe(t){this.l[t.type+!0](y.event?y.event(t):t)}function Ae(t,e,n,i,r,o,a,c,d){var u,l,_,m,f,p,P,x,h,v,C,A,E,b=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(d=n.__h,c=e.__e=n.__e,e.__h=null,o=[c]),(u=y.__b)&&u(e);try{e:if(typeof b=="function"){if(x=e.props,h=(u=b.contextType)&&i[u.__c],v=u?h?h.props.value:u.__:i,n.__c?P=(l=e.__c=n.__c).__=l.__E:("prototype"in b&&b.prototype.render?e.__c=l=new b(x,v):(e.__c=l=new Y(x,v),l.constructor=b,l.render=Rn),h&&h.sub(l),l.props=x,l.state||(l.state={}),l.context=v,l.__n=i,_=l.__d=!0,l.__h=[]),l.__s==null&&(l.__s=l.state),b.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=z({},l.__s)),z(l.__s,b.getDerivedStateFromProps(x,l.__s))),m=l.props,f=l.state,_)b.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(b.getDerivedStateFromProps==null&&x!==m&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(x,v),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(x,l.__s,v)===!1||e.__v===n.__v){l.props=x,l.state=l.__s,e.__v!==n.__v&&(l.__d=!1),l.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(I){I&&(I.__=e)}),l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(x,l.__s,v),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(m,f,p)})}if(l.context=v,l.props=x,l.__v=e,l.__P=t,C=y.__r,A=0,"prototype"in b&&b.prototype.render)l.state=l.__s,l.__d=!1,C&&C(e),u=l.render(l.props,l.state,l.context);else do l.__d=!1,C&&C(e),u=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++A<25);l.state=l.__s,l.getChildContext!=null&&(i=z(z({},i),l.getChildContext())),_||l.getSnapshotBeforeUpdate==null||(p=l.getSnapshotBeforeUpdate(m,f)),E=u!=null&&u.type===k&&u.key==null?u.props.children:u,Ut(t,Array.isArray(E)?E:[E],e,n,i,r,o,a,c,d),l.base=e.__e,e.__h=null,l.__h.length&&a.push(l),P&&(l.__E=l.__=null),l.__e=!1}else o==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=In(n.__e,e,n,i,r,o,a,d);(u=y.diffed)&&u(e)}catch(I){e.__v=null,(d||o!=null)&&(e.__e=c,e.__h=!!d,o[o.indexOf(c)]=null),y.__e(I,e,n)}}function Ft(t,e){y.__c&&y.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(i){i.call(n)})}catch(i){y.__e(i,n.__v)}})}function In(t,e,n,i,r,o,a,c){var d,u,l,_=n.props,m=e.props,f=e.type,p=0;if(f==="svg"&&(r=!0),o!=null){for(;p<o.length;p++)if((d=o[p])&&"setAttribute"in d==!!f&&(f?d.localName===f:d.nodeType===3)){t=d,o[p]=null;break}}if(t==null){if(f===null)return document.createTextNode(m);t=r?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,m.is&&m),o=null,c=!1}if(f===null)_===m||c&&t.data===m||(t.data=m);else{if(o=o&&oe.call(t.childNodes),u=(_=n.props||pe).dangerouslySetInnerHTML,l=m.dangerouslySetInnerHTML,!c){if(o!=null)for(_={},p=0;p<t.attributes.length;p++)_[t.attributes[p].name]=t.attributes[p].value;(l||u)&&(l&&(u&&l.__html==u.__html||l.__html===t.innerHTML)||(t.innerHTML=l&&l.__html||""))}if(Cn(t,m,_,r,c),l)e.__k=[];else if(p=e.props.children,Ut(t,Array.isArray(p)?p:[p],e,n,i,r&&f!=="foreignObject",o,a,o?o[0]:n.__k&&Z(n,0),c),o!=null)for(p=o.length;p--;)o[p]!=null&&Mt(o[p]);c||("value"in m&&(p=m.value)!==void 0&&(p!==t.value||f==="progress"&&!p||f==="option"&&p!==_.value)&&ye(t,"value",p,_.value,!1),"checked"in m&&(p=m.checked)!==void 0&&p!==t.checked&&ye(t,"checked",p,_.checked,!1))}return t}function Ht(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(i){y.__e(i,n)}}function jt(t,e,n){var i,r;if(y.unmount&&y.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||Ht(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){y.__e(o,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&jt(i[r],e,typeof t.type!="function");n||t.__e==null||Mt(t.__e),t.__e=t.__d=void 0}function Rn(t,e,n){return this.constructor(t,n)}function zt(t,e,n){var i,r,o;y.__&&y.__(t,e),r=(i=typeof n=="function")?null:n&&n.__k||e.__k,o=[],Ae(e,t=(!i&&n||e).__k=s(k,null,[t]),r||pe,pe,e.ownerSVGElement!==void 0,!i&&n?[n]:r?null:e.firstChild?oe.call(e.childNodes):null,o,!i&&n?n:r?r.__e:e.firstChild,i),Ft(o,t)}function Pn(t,e,n){var i,r,o,a=z({},t.props);for(o in e)o=="key"?i=e[o]:o=="ref"?r=e[o]:a[o]=e[o];return arguments.length>2&&(a.children=arguments.length>3?oe.call(arguments,2):n),ne(t.type,a,i||t.key,r||t.ref,null)}function be(t,e){var n={__c:e="__cC"+$t++,__:t,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,o;return this.getChildContext||(r=[],(o={})[e]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&r.some(Ie)},this.sub=function(a){r.push(a);var c=a.componentWillUnmount;a.componentWillUnmount=function(){r.splice(r.indexOf(a),1),c&&c.call(a)}}),i.children}};return n.Provider.__=n.Consumer.contextType=n}oe=Ot.slice,y={__e:function(t,e,n,i){for(var r,o,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(t)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),a=r.__d),a)return r.__E=r}catch(c){t=c}throw t}},At=0,Y.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=z({},this.state),typeof t=="function"&&(t=t(z({},n),this.props)),t&&z(n,t),t!=null&&this.__v&&(e&&this.__h.push(e),Ie(this))},Y.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ie(this))},Y.prototype.render=k,te=[],Dt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ge.__r=0,$t=0;var X,O,Ne,et,ie=0,Yt=[],tt=y.__b,nt=y.__r,it=y.diffed,st=y.__c,ot=y.unmount;function re(t,e){y.__h&&y.__h(O,t,ie||e),ie=0;var n=O.__H||(O.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function w(t){return ie=1,Ln(Jt,t)}function Ln(t,e,n){var i=re(X++,2);return i.t=t,i.__c||(i.__=[n?n(e):Jt(void 0,e),function(r){var o=i.t(i.__[0],r);i.__[0]!==o&&(i.__=[o,i.__[1]],i.__c.setState({}))}],i.__c=O),i.__}function L(t,e){var n=re(X++,3);!y.__s&&$e(n.__H,e)&&(n.__=t,n.u=e,O.__H.__h.push(n))}function An(t,e){var n=re(X++,4);!y.__s&&$e(n.__H,e)&&(n.__=t,n.u=e,O.__h.push(n))}function se(t){return ie=5,De(function(){return{current:t}},[])}function De(t,e){var n=re(X++,7);return $e(n.__H,e)?(n.o=t(),n.u=e,n.__h=t,n.o):n.__}function Q(t,e){return ie=8,De(function(){return t},e)}function we(t){var e=O.context[t.__c],n=re(X++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(O)),e.props.value):t.__}function Dn(){for(var t;t=Yt.shift();)if(t.__P)try{t.__H.__h.forEach(_e),t.__H.__h.forEach(Re),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){O=null,tt&&tt(t)},y.__r=function(t){nt&&nt(t),X=0;var e=(O=t.__c).__H;e&&(Ne===O?(e.__h=[],O.__h=[],e.__.forEach(function(n){n.o=n.u=void 0})):(e.__.forEach(function(n){n.u&&(n.__H=n.u),n.o&&(n.__=n.o),n.o=n.u=void 0}),e.__h.forEach(_e),e.__h.forEach(Re),e.__h=[])),Ne=O},y.diffed=function(t){it&&it(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(Yt.push(e)!==1&&et===y.requestAnimationFrame||((et=y.requestAnimationFrame)||function(n){var i,r=function(){clearTimeout(o),rt&&cancelAnimationFrame(i),setTimeout(n)},o=setTimeout(r,100);rt&&(i=requestAnimationFrame(r))})(Dn)),O=null,Ne=null},y.__c=function(t,e){e.some(function(n){try{n.__H&&n.__H.__.forEach(function(i){i.u&&(i.__H=i.u),i.o&&(i.__=i.o),i.o=i.u=void 0}),n.__h.forEach(_e),n.__h=n.__h.filter(function(i){return!i.__||Re(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(i,n.__v)}}),st&&st(t,e)},y.unmount=function(t){ot&&ot(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{_e(i)}catch(r){e=r}}),e&&y.__e(e,n.__v))};var rt=typeof requestAnimationFrame=="function";function _e(t){var e=O,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),O=e}function Re(t){var e=O;t.__c=t.__(),O=e}function $e(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}function Jt(t,e){return typeof e=="function"?e(t):e}function $n(t,e){for(var n in e)t[n]=e[n];return t}function at(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var i in e)if(i!=="__source"&&t[i]!==e[i])return!0;return!1}function lt(t){this.props=t}(lt.prototype=new Y).isPureReactComponent=!0,lt.prototype.shouldComponentUpdate=function(t,e){return at(this.props,t)||at(this.state,e)};var ct=y.__b;y.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),ct&&ct(t)};var ut=function(t,e){return t==null?null:J(J(t).map(e))},On={map:ut,forEach:ut,count:function(t){return t?J(t).length:0},only:function(t){var e=J(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:J},Mn=y.__e;y.__e=function(t,e,n,i){if(t.then){for(var r,o=e;o=o.__;)if((r=o.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}Mn(t,e,n,i)};var dt=y.unmount;function Ee(){this.__u=0,this.t=null,this.__b=null}function Qt(t){var e=t.__.__c;return e&&e.__e&&e.__e(t)}function de(){this.u=null,this.o=null}y.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),dt&&dt(t)},(Ee.prototype=new Y).__c=function(t,e){var n=e.__c,i=this;i.t==null&&(i.t=[]),i.t.push(n);var r=Qt(i.__v),o=!1,a=function(){o||(o=!0,n.__R=null,r?r(c):c())};n.__R=a;var c=function(){if(!--i.__u){if(i.state.__e){var u=i.state.__e;i.__v.__k[0]=function _(m,f,p){return m&&(m.__v=null,m.__k=m.__k&&m.__k.map(function(P){return _(P,f,p)}),m.__c&&m.__c.__P===f&&(m.__e&&p.insertBefore(m.__e,m.__d),m.__c.__e=!0,m.__c.__P=p)),m}(u,u.__c.__P,u.__c.__O)}var l;for(i.setState({__e:i.__b=null});l=i.t.pop();)l.forceUpdate()}},d=e.__h===!0;i.__u++||d||i.setState({__e:i.__b=i.__v.__k[0]}),t.then(a,a)},Ee.prototype.componentWillUnmount=function(){this.t=[]},Ee.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=function o(a,c,d){return a&&(a.__c&&a.__c.__H&&(a.__c.__H.__.forEach(function(u){typeof u.__c=="function"&&u.__c()}),a.__c.__H=null),(a=$n({},a)).__c!=null&&(a.__c.__P===d&&(a.__c.__P=c),a.__c=null),a.__k=a.__k&&a.__k.map(function(u){return o(u,c,d)})),a}(this.__b,n,i.__O=i.__P)}this.__b=null}var r=e.__e&&s(k,null,t.fallback);return r&&(r.__h=null),[s(k,null,e.__e?null:t.children),r]};var ft=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};(de.prototype=new Y).__e=function(t){var e=this,n=Qt(e.__v),i=e.o.get(t);return i[0]++,function(r){var o=function(){e.props.revealOrder?(i.push(r),ft(e,t,i)):r()};n?n(o):o()}},de.prototype.render=function(t){this.u=null,this.o=new Map;var e=J(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},de.prototype.componentDidUpdate=de.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){ft(t,n,e)})};var Vt=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,Bn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Un=typeof document!="undefined",Gn=function(t){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};function Wn(t,e,n){return e.__k==null&&(e.textContent=""),zt(t,e),typeof n=="function"&&n(),t?t.__c:null}Y.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Y.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var _t=y.event;function Fn(){}function Hn(){return this.cancelBubble}function jn(){return this.defaultPrevented}y.event=function(t){return _t&&(t=_t(t)),t.persist=Fn,t.isPropagationStopped=Hn,t.isDefaultPrevented=jn,t.nativeEvent=t};var mt={configurable:!0,get:function(){return this.class}},ht=y.vnode;y.vnode=function(t){var e=t.type,n=t.props,i=n;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var o in i={},n){var a=n[o];Un&&o==="children"&&e==="noscript"||o==="value"&&"defaultValue"in n&&a==null||(o==="defaultValue"&&"value"in n&&n.value==null?o="value":o==="download"&&a===!0?a="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+e)&&!Gn(n.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():r&&Bn.test(o)?o=o.replace(/[A-Z0-9]/,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput/i.test(o)&&(o=o.toLowerCase(),i[o]&&(o="oninputCapture")),i[o]=a)}e=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=J(n.children).forEach(function(c){c.props.selected=i.value.indexOf(c.props.value)!=-1})),e=="select"&&i.defaultValue!=null&&(i.value=J(n.children).forEach(function(c){c.props.selected=i.multiple?i.defaultValue.indexOf(c.props.value)!=-1:i.defaultValue==c.props.value})),t.props=i,n.class!=n.className&&(mt.enumerable="className"in n,n.className!=null&&(i.class=n.className),Object.defineProperty(i,"className",mt))}t.$$typeof=Vt,ht&&ht(t)};var pt=y.__r;y.__r=function(t){pt&&pt(t),t.__c};function qt(t){return!!t&&t.$$typeof===Vt}function zn(t){return qt(t)?Pn.apply(null,arguments):t}function Yn(t){return!!t.__k&&(zt(null,t),!0)}function Jn(t){return{render(e){Wn(e,t)},unmount(){Yn(t)}}}let Kt="America/New_York";function Qn(t){Kt=t}function U(t){t=new Date(t||Date.now());const e={},n="2-digit";return Intl.DateTimeFormat("en-US",{timeZone:Kt,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n}).formatToParts(t).forEach(i=>e[i.type]=i.value),{date:`${e.year}-${e.month}-${e.day}`,time:`${e.hour}:${e.minute}:${e.second}`}}function j(t){const e=t.split(":").map(Number),n=e[0]>=12?"PM":"AM";return e[0]=e[0]%12||12,e.map(i=>String(i).padStart(2,"0")).join(":").replace(/(:\d+):00$/,"$1").replace(/^0/,"")+" "+n}function gt(t){const[e,n]=t.slice(0,19).split("T");return{date:e,time:n}}class Vn extends Error{constructor(e){super(`Auth data "${e}" missing or expired`),this.name="ReauthNeeded"}}class qn{constructor(e,n=localStorage){this.storageKey=e,this.storage=n}getData(){try{const e=this.storage.getItem(this.storageKey);if(e){const{swid:n,accessToken:i,expires:r}=JSON.parse(e),o=U(new Date(r)),a=U();if(o.date>a.date||o.date===a.date&&o.time>a.time&&o.time>="17")return{swid:n,accessToken:i}}}catch(e){console.error(e)}throw new Vn(this.storageKey)}setData(e){this.storage.setItem(this.storageKey,JSON.stringify(e))}deleteData(){this.storage.removeItem(this.storageKey)}}const Kn="modulepreload",yt={},Zn="/bg1/",vt=function(e,n){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=`${Zn}${i}`,i in yt)return;yt[i]=!0;const r=i.endsWith(".css"),o=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":Kn,r||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),r)return new Promise((c,d)=>{a.addEventListener("load",c),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())},Xn=8e3;async function ve(t,e={}){const u=e,{params:n,data:i,timeout:r=Xn}=u;e=G(u,["params","data","timeout"]),e.referrer||(e.referrer=""),e.credentials||(e.credentials="omit"),e.cache||(e.cache="no-store"),e.headers=S({"User-Agent":"Mozilla/5.0"},e.headers||{}),n&&Object.keys(n).length>0&&(t+="?"+Object.entries(n).filter(([,l])=>l!=="").map(l=>l.map(encodeURIComponent).join("=")).join("&")),i&&(e.method||(e.method="POST"),e.headers=$(S({},e.headers),{"Content-Type":"application/json"}),e.body=JSON.stringify(i));const a=new AbortController;e.signal=a.signal;const c=setTimeout(()=>a.abort(),r);let d;try{d=await fetch(t,e)}catch(l){return console.error(l),{status:0,data:null}}finally{clearTimeout(c)}return{status:d.status,data:(d.headers.get("Content-Type")||"").startsWith("application/json")?await d.json():{}}}const ei={48199:"Mr-Incredible",48200:"Mrs-Incredible",261227:"Nemo",339625:"Russell",339626:"Carl",364907:"Jack-Skellington",431014:"Princess-Tiana",431065:"Darth_Vader",15549505:"Rapunzel",15655408:"Default_SignedIn",15675686:"Crush",15831168:"Wall-E",16453979:"Merida",16726412:"Stormtrooper",16818199:"Violet",16869301:"Jack-Jack",17345357:"R2-D2",17345359:"C-3PO",17532220:"Bruce",17532224:"Green-Alien",17532227:"Kermit",17532228:"Sorcerer-Mickey",17577168:"Elsa",17577169:"Anna",17813977:"Olaf",17888784:"Yoda",18101167:"Captain-Mickey",18368743:"-Nick",18368747:"-Judy",18393706:"-Flash",18403761:"kion",18405224:"-Moana",18405236:"-Elena",19633995:"50th_Mickey",19633996:"50th_Minnie",90003819:"Alice",90003846:"Ariel",90003898:"Belle",90003967:"Buzz",90003976:"Captain-Hook",90004004:"Chesire-Cat",90004017:"Cinderella",90004068:"Daisy",90004076:"Dash",90004104:"Donald",90004228:"Goofy",90004260:"Hamm",90004328:"Princess-Jasmine",90004340:"Jiminy",90004395:"Lady",90004482:"Mickey-Mouse",90004486:"Minnie",90004537:"Mulan",90004605:"Peter-Pan",90004625:"Pluto",90004626:"Pocahontas",90004642:"Princess-Aurora",90004682:"Rex",90004772:"Snow-White",90004778:"Sparky",90004846:"TinkerBell",90004860:"Tramp",90004939:"Zero"},Oe="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/90/90/75/dam/",ti=Oe+"wdpro-assets/avatars/180x180/RetAvatar_180x180_",ni=Oe+"wdpro-assets/avatars/180x180/RetAvatar-180x180",ii=Oe+"disney-world/50th-anniversary/avatars/RetAvatar_180x180_",si={"-":ni,5:ii};function Se(t){const e=ei[t||""];if(!!e)return(si[e[0]]||ti)+e+".png"}function oi(t){switch(t){case"./data/dlr.ts":return vt(()=>import("./dlr.js"),[]);case"./data/wdw.ts":return vt(()=>import("./wdw.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const Pe={"https://disneyworld.disney.go.com":"WDW","https://disneyland.disney.go.com":"DLR"},ri={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"};function ai(t){return t in Pe}class Zt extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}const fe=t=>t.split(";")[0];class Me{constructor(e){this.maxPartySize=12,this.onUnauthorized=()=>{},this.guestCache=new Map,this.listeners={bookingChange:new Set},this._primaryGuestId="",this.convertGuest=n=>{const l=n,{id:i,firstName:r,lastName:o,characterId:a}=l,c=G(l,["id","firstName","lastName","characterId"]),d=`${r} ${o}`.trim();this.guestCache.has(i)||this.guestCache.set(i,{name:d,characterId:a});const u=Se(a);return $(S({},c),{id:i,name:d,avatarImageUrl:u})},this.origin=e.origin,this.authStore=e.authStore,this.data=e.data,this.bookingStack=new li}static async load(e){const n=Pe[e.origin].toLowerCase(),i=(await oi(`./data/${n}.ts`)).default;return new Me($(S({},e),{data:i}))}get resort(){return Pe[this.origin]}get parks(){return this.data.parks}async plusExperiences(e){const n=await this.request({path:`/tipboard-vas/api/v1/parks/${encodeURIComponent(e.id)}/experiences`,key:"availableExperiences"}),i=this.nextDropTime(e),r=(this.data.pdts[e.id]||[]).indexOf(i||""),o=1<<r;return n.filter(a=>!!a.flex&&a.id in this.data.experiences).map(a=>{const l=this.data.experiences[a.id],{pdtMask:c=0}=l,d=G(l,["pdtMask"]);return $(S(S({},a),d),{drop:!!(o&c)})})}async guests(e){e||(e={experience:{id:"0"},park:{id:"0"}});const n=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:e.experience.id,parkId:e.park.id}});this._primaryGuestId=n.primaryGuestId;const i=n.ineligibleGuests.map(this.convertGuest),r=n.guests.map(this.convertGuest).filter(o=>!("ineligibleReason"in o)||i.push(o)&&!1);return i.sort((o,a)=>{const c=+!o.primary-+!a.primary||o.name.localeCompare(a.name);return o.eligibleAfter||a.eligibleAfter?(o.eligibleAfter||"99").localeCompare(a.eligibleAfter||"99")||c:o.ineligibleReason===a.ineligibleReason?c:o.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?-1:a.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?1:c}),{eligible:r,ineligible:i}}async primaryGuestId(e){return this._primaryGuestId||await this.guests(e),this._primaryGuestId}async nextBookTime(){const{eligible:e,ineligible:n}=await this.guests();if(e.length>0)return U().time;if(n.length>0)return n[0].eligibleAfter}async offer({experience:e,park:n,guests:i}){const r=await this.request({path:"/ea-vas/api/v2/products/flex/offers",method:"POST",data:{guestIds:i.map(_=>_.id),ineligibleGuests:[],primaryGuestId:await this.primaryGuestId({experience:e,park:n}),parkId:n.id,experienceId:e.id,selectedTime:e.flex.nextAvailableTime},userId:!1}),{id:o,date:a,startTime:c,endTime:d,status:u,changeStatus:l}=r.offer;return{id:o,start:{date:a,time:c},end:{date:a,time:d},active:u==="ACTIVE",changed:l!=="NONE",guests:{eligible:(r.eligibleGuests||[]).map(this.convertGuest),ineligible:(r.ineligibleGuests||[]).map(this.convertGuest)}}}async cancelOffer(e){await this.request({path:`/ea-vas/api/v1/offers/${encodeURIComponent(e.id)}`,method:"DELETE",params:{productType:"FLEX"},userId:!1})}async book(e){const{singleExperienceDetails:{experienceId:n,parkId:i},entitlements:r,startDateTime:o,endDateTime:a}=await this.request({path:"/ea-vas/api/v1/products/flex/bookings",method:"POST",userId:!1,data:{offerId:e.id},key:"booking"});return this.bookings(),this.fireEvent("bookingChange"),{experience:{id:n,name:this.data.experiences[n].name},park:this.data.parks.find(c=>c.id===i),start:gt(o),end:gt(a),cancellable:!0,guests:r.map(c=>{const d=this.guestCache.get(c.guestId);return{id:c.guestId,name:(d==null?void 0:d.name)||"",avatarImageUrl:Se(d==null?void 0:d.characterId),entitlementId:c.id}})}}async cancelBooking(e){const i=e.map(r=>r.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${i}`,method:"DELETE",userId:!1}),this.fireEvent("bookingChange")}async bookings(){const{swid:e}=this.authStore.getData(),n=new Date(Date.now()),i=ri[this.resort],{items:r=[],assets:o={},profiles:a={}}=await this.request({path:`/plan/${i}/api/v1/itinerary-items/${e}`,params:{destination:this.resort,fields:"items,profiles,assets","item-types":"FASTPASS","guest-locators":e+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":U(n).date,"end-date":U(new Date(n.getTime()).setDate(n.getDate()+1)).date,"show-friends":"false"},userId:!1}),c=Object.fromEntries(this.parks.map(_=>[_.id,_])),d=U(new Date(n.getTime()).setMinutes(n.getMinutes()-15)),u=new Set(["FLEX","OTHER"]),l=r.filter(_=>_.type==="FASTPASS"&&u.has(_.kind)).filter(_=>(_.displayEndDate||"9999")>d.date||_.displayEndDate===d.date&&(_.displayEndTime||"24")>=d.time).map(_=>{const m=fe(_.facility),f=o[_.facility],{name:p}=this.data.experiences[m]||f,P=fe(f.location),x={experience:{id:m,name:p},park:c[P],start:{date:_.displayStartDate,time:_.displayStartTime},end:{date:_.displayEndDate,time:_.displayEndTime},cancellable:_.cancellable,guests:_.guests.map(h=>{const{name:v,avatarId:C}=a[h.id],A=fe(h.id);return S({id:A,entitlementId:h.entitlementId,name:`${v.firstName} ${v.lastName}`.trim(),avatarImageUrl:Se(C)},h.redemptionsRemaining!==void 0&&{redemptions:h.redemptionsRemaining})})};return _.multipleExperiences&&(x.experience={id:"",name:"Multiple Experiences"},x.choices=_.assets.filter(h=>!h.excluded&&!h.original).map(({content:h})=>{const v=fe(h),{name:C}=this.data.experiences[v]||o[h];return{id:v,name:C}}).sort((h,v)=>h.name.localeCompare(v.name))),x}).sort((_,m)=>((_.start.date||"0000-00-00")+(_.start.time||"")).localeCompare((m.start.date||"0000-00-00")+(m.start.time||"")));return this.bookingStack.update(l),l}isRebookable(e){return this.bookingStack.isRebookable(e)}nextDropTime(e){var i,r;const n=U().time.slice(0,5);return(r=(i=this.data.pdts)==null?void 0:i[e.id])==null?void 0:r.find(o=>o>=n)}logOut(){this.authStore.deleteData(),this.onUnauthorized()}addListener(e,n){this.listeners[e].add(n)}removeListener(e,n){this.listeners[e].delete(n)}fireEvent(e){setTimeout(()=>{for(const n of this.listeners[e])n()})}async request(e){var d;const{swid:n,accessToken:i}=this.authStore.getData(),r=this.origin+e.path,o=S({},e.params);((d=e.userId)==null||d)&&(o.userId=n);const{status:a,data:c}=await ve(r,{method:e.method||"GET",params:o,data:e.data,headers:{Authorization:`BEARER ${i}`,"x-user-id":n}});if(a===401)setTimeout(()=>this.logOut());else{const{key:u}=e;if(String(a)[0]==="2"&&(!u||c[u]))return u?c[u]:c}throw new Zt({status:a,data:c})}}const bt="bg1.genie.bookings";class li{constructor(e=!0){if(this.entitlementIds=[],this.mostRecent=new Map,!e)return;const{entitlementIds:n=[],mostRecent:i={}}=JSON.parse(localStorage.getItem(bt)||"{}");this.entitlementIds=n,this.mostRecent=new Map(Object.entries(i))}isRebookable(e){return e.guests.every(n=>this.mostRecent.get(n.id)===n.entitlementId)}update(e){const n=new Map,i=new Set(this.entitlementIds);this.entitlementIds=e.filter(({cancellable:r})=>r).map(r=>r.guests.map(({id:o,entitlementId:a})=>(this.entitlementIds.push(a),i.has(a)||n.set(o,n.has(o)?"":a),a))).flat(1),this.mostRecent=new Map([...this.mostRecent,...n]),n.size>0&&localStorage.setItem(bt,JSON.stringify({entitlementIds:this.entitlementIds,mostRecent:Object.fromEntries(this.mostRecent)}))}}const Xt={"https://vqguest-svc-wdw.wdprapps.disney.com":"WDW","https://vqguest-svc.wdprapps.disney.com":"DLR"};function ci(t){return t in Xt}const ui=t=>t.sort((e,n)=>+!e.isPrimaryGuest-+!n.isPrimaryGuest||+!e.isPreselected-+!n.isPreselected||e.name.localeCompare(n.name));class me extends Error{constructor(e,n="Request failed"){super(`${n}: ${JSON.stringify(e)}`),this.response=e,this.name="RequestError"}}class di{constructor(e){this.onUnauthorized=()=>{},this.origin=e.origin,this.authStore=e.authStore}get resort(){return Xt[this.origin]}url(e){return`${this.origin}/application/v1/guest/${e}`}async getQueues(){return(await ve(this.url("getQueues"))).data.queues.map(i=>{var r=i,{queueId:e}=r,n=G(r,["queueId"]);return $(S({},n),{id:e})})}async getQueue(e){const n=(await this.getQueues()).find(i=>i.id===e.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(e){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:e.id}});return ui(n.guests.map(c=>{var d=c,{guestId:i,firstName:r,lastName:o}=d,a=G(d,["guestId","firstName","lastName"]);return $(S({},a),{id:i,name:`${r} ${o}`.trim()})}))}async joinQueue(e,n){const i=n.map(a=>a.id),{status:r,data:o}=await this.post({resource:"joinQueue",data:{queueId:e.id,guestIds:i}});if(o.responseStatus==="OK"){const a=o.positions.find(c=>c.queueId===e.id&&c.guestIds.length>0&&i.some(d=>c.guestIds.includes(d)));if(!a)throw new me({status:r,data:o});return{boardingGroup:a.boardingGroup,conflicts:{},closed:!1}}else if(o.responseStatus==="INVALID_GUEST"||o.responseStatus==="CLOSED_QUEUE"){const a=o.responseStatus==="CLOSED_QUEUE",c=new Set,d={};for(const _ of o.conflicts)for(const m of _.guestIds){const f=n.find(p=>p.id===m);!f||(d[f.id]=_.conflictType,c.add(m))}const u=n.filter(_=>!c.has(_.id));if(a||u.length===0)return{boardingGroup:null,conflicts:d,closed:a};const l=await this.joinQueue(e,u);return l.conflicts=S(S({},d),l.conflicts),l}else throw new me({status:r,data:o})}logOut(){this.authStore.deleteData(),this.onUnauthorized()}async post(e){const{status:n,data:i}=await ve(this.url(e.resource),{method:"POST",headers:{Authorization:`BEARER ${this.authStore.getData().accessToken}`},data:e.data});if(n===401&&setTimeout(()=>this.logOut()),!n||n===401||n>=500)throw new me({status:n,data:i});return{status:n,data:i}}}const en=be({resort:"WDW",onUnauthorized:()=>{},logOut:()=>null}),fi=en.Provider,xe=()=>we(en),Be={bg:"bg-blue-500",text:"text-blue-500"},tn=be(Be),_i=tn.Provider,K=()=>we(tn),mi={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function M(t){const a=t,{type:e,className:n}=a,i=G(a,["type","className"]);let r=`${mi[e||"normal"]} ${n||""}`;const{bg:o}=K();return r.includes(" bg-")||(r+=` ${o} text-white`),s("button",S({className:`${r} inline-flex items-center justify-center min-w-[36px] rounded-lg px-2 font-semibold disabled:opacity-50`},i))}function F({onClick:t,disabled:e,href:n,children:i}){return s("div",{className:"mb-20"},s("div",{className:"fixed bottom-0 left-0 w-full bg-white bg-opacity-75 text-center"},s("a",{href:n,className:"block max-w-2xl mx-auto px-3 pb-5"},s(M,{type:"full",onClick:t,disabled:e},i))))}function hi({title:t,children:e}){const{bg:n,text:i}=K();function r(o){return qt(o)?o.type===k?On.map(o.props.children,r):zn(o,{className:`bg-[#ffffffe6] ${i} ${o.props.className||""}`}):o}return s("div",{className:`flex justify-end gap-x-2 gap-y-1 min-h-[52px] px-3 py-2 text-lg text-white ${n}`},s("h1",{className:"flex-1 self-center py-0.5 text-xl font-semibold overflow-hidden whitespace-nowrap"},t),r(e))}function ae(t){const o=t,{children:e,className:n}=o,i=G(o,["children","className"]),r=S({outer:"",inner:""},typeof n=="string"?{inner:n}:n);return r.outer.match(/\bz-/)||(r.outer+=" z-10"),s("div",S({className:`${r.outer} fixed inset-0`},i),s("div",{className:`${r.inner} max-w-2xl min-h-full mx-auto`},e))}function H(c){var d=c,{heading:t,buttons:e,className:n,theme:i,containerRef:r,children:o}=d,a=G(d,["heading","buttons","className","theme","containerRef","children"]);return s(_i,{value:i||Be},s(ae,S({className:{outer:`bg-white text-black text-base ${n||""}`,inner:"flex flex-col max-w-2xl h-full"}},a),s(hi,{title:t},e),s("div",{ref:r,className:"flex-1 overflow-auto px-3 pb-3"},o)))}const pi="bg1.disclaimer.accepted",gi={bg:"bg-red-600",text:"text-red-600"};function yi(){const t=localStorage,e=pi,[n,i]=w(!!t.getItem(e));return L(()=>{n&&t.setItem(e,"1")},[n,t,e]),n?null:s(vi,{onAccept:()=>i(!0)})}function vi({onAccept:t}){return s(H,{heading:"Warning!",theme:gi},s("p",null,'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'),s(F,{onClick:t},"Accept"))}const bi="17e2767256f";function wi(t){return"deferredUuid"in t&&t.deferredUuid!==void 0}class xi{constructor(e,n,i,r=!1){this.iframe=e,this.resort=i,this.logging=r,this.handlers={},this.handshakeAcked=!1,this.onMessage=o=>{if(o.source!==this.iframe.contentWindow||o.data==="inner.loaded")return;const a=JSON.parse(o.data);this.logging&&console.log("Message:",a);const c=a.type==="message"?a.eventName:a.type,d=this.handlers[c],u=d?d("data"in a?a.data:null):void 0;wi(a)&&this.send({type:"deferred",action:"resolve",deferredUuid:a.deferredUuid,data:u!=null?u:{}})},this.on("handshake",()=>{this.handshakeAcked||(this.handshakeAcked=!0,this.send({type:"handshakeAck"}),this.logging&&this.sendMessage("setLogLevel",{level:"log"}),this.sendMessage("workflow.execute",{name:"login"}))}),this.on("lightbox.hide",()=>this.open()),this.on("session.dateOfBirth.read",()=>this.open()),this.on("session.loggedin",({token:o})=>{n({swid:o.swid,accessToken:o.access_token,expires:new Date(o.exp)})})}open(){addEventListener("message",this.onMessage),this.iframe.src=this.authPageUrl,this.handshakeAcked=!1}close(){removeEventListener("message",this.onMessage)}on(e,n){this.handlers[e]=n}sendMessage(e,n){this.send({type:"message",eventName:e,data:n})}send(e){var n;(n=this.iframe.contentWindow)==null||n.postMessage(JSON.stringify($(S({},e),{name:"lightbox-client-window"})),this.authPageUrl)}get authPageUrl(){return`https://cdn.registerdisney.go.com/v2/TPR-${this.resort}-LBSDK.IOS-PROD/en-US?include=l10n,config,html,js&buildId=${bi}`}}function ki({resort:t,onLogin:e}){const n=se(null);return L(()=>{if(!n.current)return;const i=new xi(n.current,e,t);return i.open(),()=>i.close()},[t,e,n]),s("iframe",{title:"Disney Login Form",ref:n,className:"fixed top-0 left-0 w-full h-full border-0"})}function Ni({authStore:t,children:e}){const[n,i]=w("Blank"),r=yi(),o=xe();L(()=>{o.onUnauthorized=()=>i("LoginForm")},[o]),L(()=>{function c(){if(!(document.hidden||n==="LoginForm"))try{t.getData(),i("Client")}catch{return i("LoginForm")}}return c(),document.addEventListener("visibilitychange",c),()=>{document.removeEventListener("visibilitychange",c)}},[t,n]);const a={Blank:s("div",null),LoginForm:s(ki,{resort:o.resort,onLogin:c=>{t.setData(c),i("Client")}}),Client:e};return s(k,null,r||a[n])}const ee=xe,nn=be({current:null,begin:()=>null,end:()=>null}),Ei=nn.Provider,le=()=>we(nn);async function Si(t={}){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(i=>{e(i)},i=>{n(i)},t)})}const Ti={maximumAge:15e3,timeout:2e3};function Ci(t){const[e,n]=w(),i=Q(()=>{t(async()=>{try{const{coords:r}=await Si(Ti);n([r.latitude,r.longitude])}catch{n(void 0)}})},[t]);return[e,i]}const Ii=3e3,Ri={alert:"bg-yellow-200",error:"bg-red-200"};function ke(){const[,t]=w(0),[e,n]=w(""),[i,r]=w("alert"),o=Q((c,d)=>{n(c),r(d||"alert"),t(u=>(clearTimeout(u),c?self.setTimeout(()=>{n("")},Ii):u))},[]);return[s(Pi,{message:e,type:i}),o]}function Pi({message:t,type:e}){return t?s("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${Ri[e]} text-gray-800`},t):null}function ce({children:t,className:e,title:n}){return e||(e=""),e.match(/\bw-\S+\s*/)||(e+=" w-4"),e.match(/\bh-\S+\s*/)||(e+=" h-auto"),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:e,role:"img"},n&&s("title",null,n),t)}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ue({className:t}){return s(ce,{className:t},s("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"}))}async function sn(t){return new Promise(e=>{setTimeout(e,t)})}function Li(){const[t,e]=w(0),n=Q(async(r,o=500)=>{e(c=>c+1);const a=sn(o);try{await r()}finally{await a,e(c=>c-1)}},[]);return[t>0?s(Ai,null):null,n]}function Ai(){const{bg:t}=K();return s(ae,{className:"flex items-center bg-white bg-opacity-75"},s("div",{className:"w-[50px] mx-auto"},s("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${t}`},s(Ue,{className:"animate-spin w-full text-white"}))))}function Ge(){const[t,e]=Li(),n=!!t,[i,r]=ke();return{loadData:Q(async(c,d)=>{const u=S({error:"Unknown error occurred",request:"Network request failed"},d);r("");let l=()=>null;const _=new Promise(f=>{l=()=>f(null)});async function m(...f){await _,r(...f)}await e(async()=>{try{await c(m)}catch(f){if(f instanceof Zt){const{status:p}=f.response;m(p in u?u[p]:u.request,"error")}else console.error(f),m(u.error,"error")}}),l()},[e,r]),loaderElem:s(k,null,i,t),isLoading:n}}/**
 * Arrow down icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Di(t){return s(ce,S({},t),s("path",{d:"M8 15.5l7.5-7.5h-4.5v-8h-6v8h-4.5z"}))}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function on(t){return s(ce,S({},t),s("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"}))}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function $i(t){return s(ce,S({},t),s("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"}))}function rn(){const t=xe();return s(M,{type:"small",onClick:()=>t.logOut()},"Log Out")}function an({heading:t,onClose:e,children:n}){return s(ae,{className:{outer:"bg-black bg-opacity-75",inner:"p-2 flex items-center justify-center h-full"},onClick:e},s("div",{className:"flex flex-col max-h-[90%] rounded-lg px-3 py-4 bg-white",onClick:i=>i.stopPropagation()},s("h2",{className:"mt-0"},t),s("div",{className:"flex-1 overflow-auto"},n),s("div",{className:"pt-4"},s(M,{type:"full",onClick:e},"Close"))))}const Oi="_SELECT_RADIO_BUTTON_";function wt(t){const x=t,{options:e,value:n,onChange:i}=x,r=G(x,["options","value","onChange"]),[o,a]=w(!1),[c,d]=w(0),u=se(null),l=se(null);An(()=>{var E;if((E=e[0])!=null&&E.icon)return;const h=u.current,v=h==null?void 0:h.firstChild;if(!v)return;const C=v.nodeValue;if(!C)return;let A=0;for(const b of e)v.nodeValue=b.text,A=Math.max(h.offsetWidth,A);v.nodeValue=C,d(A)},[e]);const _=()=>{var h;return(h=l.current)==null?void 0:h.querySelector("input:checked")};L(()=>{var v;if(!o)return;(v=_())==null||v.focus();const h=C=>{var A;(A=l.current)!=null&&A.contains(C.target)||a(!1)};return addEventListener("focusin",h),()=>removeEventListener("focusin",h)},[o]);const m=()=>{const h=_();h&&i(h.value),a(!1)},{icon:f,text:p}=e.find(h=>h.value===n)||e[0];let P=!1;return s(k,null,s(M,$(S({},r),{onClick:()=>a(!0)}),f||s("span",{style:{minWidth:`${c}px`},ref:u},p),s(ce,{className:"w-2.5 ml-2"},s("path",{d:"m6.8273 12.401-5.6333-7.7812a1.0212 1.0212 117.05 0 1 0.82716-1.62l11.958-2e-7a1.0212 1.0212 62.952 0 1 0.82714 1.62l-1.6438 2.2705a79984 79984 125.9 0 0-2.3456 3.2401l-1.6437 2.2706a1.4479 1.4479 180 0 1-2.3456 4.4e-5z"}))),o&&s(ae,{className:{outer:"bg-black bg-opacity-75",inner:"flex items-center justify-center h-full"},onClick:h=>{var C;const v=h.target;if(!((C=l.current)!=null&&C.contains(v)))return a(!1);if(v.tagName==="INPUT"&&!P)return m();P=!1},onKeyDown:({key:h})=>{["Enter"," "].includes(h)?m():h.startsWith("Arrow")&&(P=!0)},"data-testid":"select-shade"},s("ul",{className:"overflow-auto min-w-[50%] max-h-[90%] rounded-lg bg-white text-black",ref:l},e.map(h=>s("li",{className:"border-t-2 first:border-0 border-gray-300",key:h.value},s("label",{className:"flex flex-row items-center px-4 py-3"},s("input",{type:"radio",name:Oi,defaultChecked:h.value===n,value:h.value,className:"w-4 h-4 mr-2.5"})," ",h.icon&&s("span",{"aria-hidden":"true",className:"mr-2.5"},h.icon)," ",h.text))))))}const ln=be({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),Mi=ln.Provider,We=()=>we(ln),Bi="https://bg1.joelface.com/ping",xt="bg1.ping.date";async function cn(){const{date:t}=U();if(localStorage.getItem(xt)===t)return;const{status:n}=await ve(Bi,{method:"POST"});n===204&&localStorage.setItem(xt,t)}function W({guests:t,selectable:e,conflicts:n}){return t.length===0?null:s("ul",{className:"mt-2"},t.map(i=>{var r;return s("li",{key:i.id,className:"px-3 py-1"},s("label",{className:"flex items-center"},e&&s("input",{type:"checkbox",checked:e.isSelected(i),onChange:()=>e.onToggle(i),className:"mr-3"}),s("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white"},i.avatarImageUrl?s("img",{src:i.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):s("span",{"aria-hidden":"true"},i.name[0])),s("span",{className:"leading-tight"},i.name,s("br",null),(n==null?void 0:n[i.id])&&s("span",{className:"text-xs font-semibold text-red-700 uppercase"},(r=n[i.id])==null?void 0:r.replace(/_/g," ")))))}))}function Fe({times:t}){return s("div",{className:"mt-4 text-lg"},"Arrive by:"," ",s("span",{className:"ml-0.5 font-semibold"},t.start.time?s("time",null,j(t.start.time)):"Park Open"," - ",t.end.time?s("time",null,j(t.end.time)):"Park Close"))}function Ui({booking:t,onClose:e}){const n=ee(),[i,r]=w(new Set),{loadData:o,loaderElem:a}=Ge(),{guests:c}=t,d=i.size===0,u=i.size===c.length;function l(){o(async()=>{d||await n.cancelBooking([...i]),e(c.filter(_=>!i.has(_)))})}return s(H,{heading:"Your Lightning Lane",theme:t.park.theme},s("h2",null,t.experience.name),s("div",null,t.park.name),s(Fe,{times:t}),s("div",{className:"ml-3"},s("label",{className:"flex items-center py-4"},s("input",{type:"checkbox",checked:u,onChange:()=>r(new Set(u?[]:c))}),s("span",{className:"ml-3"},"Select All"))),d?null:s("div",{className:"mb-4"},s("h3",null,"Cancel These Guests"),s(W,{guests:c.filter(_=>i.has(_)),selectable:{isSelected:()=>!0,onToggle:_=>{const m=new Set(i);m.delete(_),r(m)}}})),u?null:s("div",null,s("h3",null,"Select Guests to Cancel"),s(W,{guests:c.filter(_=>!i.has(_)),selectable:{isSelected:()=>!1,onToggle:_=>r(new Set(i).add(_))}})),s(F,{onClick:l},d?"Back":"Cancel "+(u?"Reservation":"Guests")),a)}function un({booking:t,onClose:e,isRebookable:n,isNew:i}){const r=le(),[o,a]=w(t.guests),[c,d]=w(!1);return c?s(Ui,{booking:$(S({},t),{guests:o}),onClose:u=>{d(!1),u.length>0?a(u):e(u)}}):s(H,{heading:"Your Lightning Lane",theme:t.park.theme,buttons:n&&s(M,{onClick:()=>r.begin(t)},"Rebook")},s("h2",null,t.experience.name),s("div",null,t.park.name),s(Fe,{times:t}),t.choices&&s(k,null,s("p",null,"An experience you booked was temporarily unavailable during your return time. You may redeem this Lightning Lane at one of these replacement experiences:"),s("ul",{className:"list-disc mt-2 pl-8"},t.choices.map(u=>s("li",{key:u.id},u.name)))),s("div",{className:"flex mt-4"},s("h3",{className:"inline mt-0"},"Your Party"),t.cancellable&&s(M,{type:"small",onClick:()=>d(!0),className:"ml-3"},"Cancel")),s(W,{guests:o,conflicts:Object.fromEntries(o.filter(u=>u.redemptions!==void 0).map(u=>[u.id,`Redemptions left: ${u.redemptions}`]))}),s(F,{onClick:()=>e(o)},i?"Done":"Back"))}function dn({children:t}){return s("p",{className:"border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100"},t)}function fn(){const{ineligible:t}=We();return s(W,{guests:t,conflicts:Object.fromEntries(t.map(e=>[e.id,e.eligibleAfter?`TOO EARLY (${j(e.eligibleAfter)})`:e.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function He({buttonText:t,onSubmit:e}){const{eligible:n,ineligible:i,selected:r,setSelected:o}=We(),[a,c]=w(),[d,u]=ke(),{maxPartySize:l}=ee();return a?s(k,null,s("h3",null,"Choose Your Party"),s(W,{guests:n,selectable:{isSelected:m=>a.has(m),onToggle:m=>c(f=>{u(""),f=new Set(f);const p=f.has(m)?"delete":"add";return p==="add"&&f.size>=l?u(`Maximum party size: ${l}`):f[p](m),f})}}),i.length>0&&s(k,null,s("h3",null,"Ineligible Guests"),s(fn,null)),s(F,{disabled:a.size===0,onClick:()=>{o([...a]),c(void 0)}},"Confirm Party"),d):s(k,null,n.length>l&&r.length===l&&s(dn,null,"Party size restricted"),s("div",{className:"mt-4"},s("h3",{className:"inline mt-0"},"Your Party"),s("span",null,s(M,{type:"small",onClick:()=>c(new Set(r)),className:"ml-3"},"Edit"))),s(W,{guests:r}),s(F,{onClick:e},t))}function Gi({offer:t,onBook:e}){const n=le();return s(k,null,n.current&&s(dn,null,"Rebooking resets the two hour timer"),s(Fe,{times:t}),t.changed&&s("div",{className:"text-sm"},s("strong",null,"Note:")," Return time has been changed"),s(He,{buttonText:`${n.current?"Rebook":"Book"} Lightning Lane`,onSubmit:e}))}const kt="https://widget.time.is/t.js";function Wi(){if([...document.scripts].some(e=>e.src===kt))return;const t=document.createElement("script");t.src=kt,t.onload=_n,document.head.appendChild(t)}const he={};function _n(){"time_is_widget"in self&&self.time_is_widget.init(he)}function Fi(t){Wi(),he[t]||(he[t]={}),_n()}function mn(t,e){const n=document.getElementById(t);if(!n||n.firstElementChild)return e();n.textContent=U().time,setTimeout(()=>mn(t,e),100)}function Hi({id:t,onSync:e}){return L(()=>{Fi(t),mn(t,e)},[t,e]),s("time",{id:t})}const ji={WDW:"Orlando_z161",DLR:"Anaheim_z14e"},zi=5e3;function hn({resort:t,time:e,label:n}){const i=ji[t],[r,o]=w(null);L(()=>{setTimeout(()=>o(c=>c||!1),zi)},[]);const a=Q(()=>o(!0),[]);return s("table",{className:"mt-4 mx-auto text-gray-500"},s("tbody",null,s(Nt,{heading:n,time:s("time",null,e||"--:--:--")}),s(Nt,{heading:s("a",{href:`https://time.is/${i.split("_")[0]}`,id:"time_is_link",target:"_blank",rel:"noreferrer"},"Current time"),time:s(k,null,s(Hi,{id:i,onSync:a}),r===!1&&s("span",{className:"text-sm font-sans font-semibold text-red-600"}," ","(unsynced)"))})))}function Nt({heading:t,time:e}){return s("tr",null,s("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase"},t,":"),s("td",{className:"text-xl font-mono leading-tight"},"\uFEFF",e))}function Yi({startTime:t,onRefresh:e}){return s(k,null,t&&s(hn,{resort:"WDW",time:t,label:"Booking start"}),s("h3",{className:"mt-4"},"Not Available Yet"),t?s("p",null,"At"," ",s("time",{dateTime:t,className:"font-semibold"},j(t)),", tap the ",s("span",{className:"font-semibold"},"Check Availability")," ","button below to start booking this Lightning Lane."):s("p",null,"Sorry, but you can't make a Lightning Lane reservation for this attraction yet."),s(He,{buttonText:"Check Availability",onSubmit:e}))}function Ji({onClose:t}){const{ineligible:e}=We(),{eligibleAfter:n}=e[0]||{},i=le();return s(k,null,n&&s("div",{className:"mt-4 border-2 border-green-600 rounded p-1 uppercase font-semibold text-center text-green-600 bg-green-100"},"Eligible at ",j(n)),i.current?s(k,null,s("h3",null,"Unable to Rebook"),s("p",null,"Your current reservation cannot be rebooked to this experience due to the following conflicts:")):s(k,null,s("h3",null,"No Eligible Guests"),s("p",null,"No one in your party is currently eligible for this Lightning Lane.")),s(fn,null),s(F,{onClick:t},"Back"))}function Qi({onRefresh:t}){return s(k,null,s("h3",null,"No Guests Found"),s("p",null,"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."),s(F,{onClick:t},"Try Again"))}function Vi({onClose:t}){return s(k,null,s("h3",null,"No Reservations Available"),s("p",null,"There aren't enough reservation slots available for your entire party. If only part of your group wishes to go on this attraction, edit your party to check again. Otherwise, go back to the tip board and select another attraction."),s(He,{buttonText:"Back",onSubmit:t}))}function pn({booking:t,button:e,badge:n}){return s("div",{className:"flex items-center gap-x-3"},n,s("div",{className:"flex-1 min-w-0"},s("div",{className:"text-gray-500 text-sm font-semibold uppercase"},t.start.time?s("time",null,j(t.start.time)):s("span",null,"open")," - ",t.end.time?s("time",null,j(t.end.time)):s("span",null,"close")),s("div",{className:"text-lg font-semibold leading-tight truncate"},t.experience.name)),e&&s("div",null,e))}function gn(){const t=le(),e=K();return t.current?s("div",{className:`sticky top-0 -mx-3 pb-1 ${e.bg}`},s("div",{className:"pb-3 bg-white"},s("div",{className:`pb-1 ${e.bg} text-white text-sm font-semibold uppercase text-center`},"Rebooking"),s("div",{className:"mt-2 px-3"},s(pn,{booking:t.current,button:s(M,{type:"small",onClick:()=>t.end(!0)},"Keep")})))):null}function qi({onClose:t}){const e=ee(),n=Be,[i,r]=w(),[o,a]=w(),[c,d]=w(!1);function u(_){!o||(r(m=>{if(!!m)return _.length>0?o.guests=_:m.splice(m.indexOf(o),1),m}),a(void 0))}L(()=>{d(!0),e.bookings().then(_=>r(_))},[e]);function l(){d(!1),setTimeout(t,300)}return o?s(un,{booking:o,onClose:u,isRebookable:e.isRebookable(o)}):s(k,null,s(ae,{onClick:l,"data-testid":"panel-shade",className:{inner:"bg-black bg-opacity-75"}}),s(H,{heading:"Your Lightning Lanes",buttons:s(M,{onClick:l},"Close"),className:`top-auto ${c?"h-[60%]":"h-0"} duration-200 ease-linear`},i&&i.length>0?s("ul",null,(i||[]).map(_=>{var m;return s("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",key:(m=_.guests[0])==null?void 0:m.entitlementId},s(pn,{booking:_,button:s(M,{type:"small",onClick:()=>a(_)},"More"),badge:e.isRebookable(_)&&s("div",{title:"Rebookable",className:`w-2.5 h-2.5 rounded-full ${n.bg}`})}))})):s("div",{className:"mt-4 text-sm font-semibold text-center uppercase  text-gray-500"},i&&"No current reservations")))}function yn(i){var r=i,{onOpen:t,onClose:e}=r,n=G(r,["onOpen","onClose"]);const[o,a]=w(),c=t||a,d=e||(()=>a(void 0));return s(k,null,s(M,$(S({},n),{onClick:()=>c(s(qi,{onClose:d})),title:"Your Lightning Lanes"}),s(on,null)),o)}function Ki({experience:t,park:e,onClose:n}){const i=ee(),r=le(),[o,a]=w(),[c,d]=w(!t.flex.available&&t.flex.enrollmentStartTime!==void 0),[u,l]=w(c?null:void 0),[_,m]=w(),{loadData:f,loaderElem:p}=Ge();async function P(){if(!u||!o)return;let E=null;await f(async()=>{const b=new Set(o.selected.map(R=>R.id));r.current&&await i.cancelBooking(r.current.guests.filter(R=>b.has(R.id)));try{E=await i.book(u)}finally{r.end()}const I=E.guests.filter(R=>!b.has(R.id));I.length>0&&(await i.cancelBooking(I),E.guests=E.guests.filter(R=>b.has(R.id))),cn()},{410:"Offer expired"}),E&&m(E)}function x(){f(async E=>{const I=(await i.plusExperiences(e)).find(R=>R.id===t.id);I!=null&&I.flex.available?(d(!1),l(void 0)):E("Reservations not open yet")})}function h(){u&&i.cancelOffer(u),n()}const v=Q(()=>{f(async()=>{try{let E=await i.guests({experience:t,park:e});const b=r.current;if(b){const I=new Set(b.guests.map(B=>B.id)),R=[...E.eligible,...E.ineligible].filter(B=>I.has(B.id)&&!(B.ineligibleReason==="TOO_EARLY"||B.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"&&t.id===b.experience.id));E=R.length>0?{eligible:[],ineligible:R}:{eligible:b.guests,ineligible:[]}}a($(S({},E),{selected:E.eligible.slice(0,i.maxPartySize),setSelected:I=>a(R=>{if(!R)return R;const B=new Set(R.selected);return l(N=>N===null||I.some(T=>!B.has(T))?void 0:N),$(S({},R),{selected:I})})}))}catch(E){throw a({eligible:[],ineligible:[],selected:[],setSelected:()=>null}),E}})},[i,t,e,r,f]);L(()=>{o||v()},[o,v]);const C=Q(E=>{!o||o.selected.length===0||f(async()=>{try{const b=await i.offer({experience:t,park:e,guests:o.selected}),{ineligible:I}=b.guests;if(I.length>0){const R=new Set(I.map(N=>N.id)),B=N=>!R.has(N.id);a($(S({},o),{eligible:o.eligible.filter(B),ineligible:[...I,...o.ineligible],selected:o.selected.filter(B)}))}b.active&&(u&&(b.changed=!1),l(b))}catch(b){throw E||l(null),b}},{410:u?"No reservations available":""})},[i,t,e,o,u,f]);if(L(()=>{u===void 0&&C()},[u,C]),_)return s(un,{booking:_,onClose:n,isNew:!0});const A=(o==null?void 0:o.eligible.length)===0&&(o==null?void 0:o.ineligible.length)===0;return s(H,{heading:"Lightning Lane",theme:e.theme,buttons:s(k,null,s(yn,null),o&&(c||u||A)&&s(M,{onClick:h},"Cancel"),!c&&u!==void 0&&s(M,{onClick:C,title:"Refresh Offer"},s(Ue,null)))},s(gn,null),s("h2",null,t.name),s("div",null,e.name),s(Mi,{value:o||{eligible:[],ineligible:[],selected:[],setSelected:()=>null}},(o==null?void 0:o.eligible.length)===0?A?s(Qi,{onRefresh:v}):s(Ji,{onClose:n}):!o||u===void 0?s("div",null):c?s(Yi,{startTime:t.flex.enrollmentStartTime,onRefresh:x}):u===null?s(Vi,{onClose:n}):s(Gi,{offer:u,onBook:P})),p)}function je({label:t,children:e}){return s("div",{className:"flex items-center flex-1 whitespace-nowrap"},s("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500"},t)," ",e)}function Zi({experience:t,onClick:e}){const{flex:n}=t;return s(je,{label:"Genie+"},s("span",null,s(M,{onClick:()=>e(t)},n.nextAvailableTime?j(n.nextAvailableTime):"none")))}function Xi({experience:{type:t,standby:e}}){return e.displayNextShowTime||t==="ENTERTAINMENT"&&!e.waitTime?s(ts,{standby:e}):s(es,{standby:e})}const es=({standby:t})=>s(je,{label:"Standby"},t.available?s(bn,{time:t.waitTime!==void 0?t.waitTime+" min":"now"}):s(wn,{text:"down"})),ts=({standby:t})=>s(je,{label:s(k,null,"Next ",s("span",{className:"hidden xs:inline"},"Show"))},t.displayNextShowTime?s(bn,{time:t.displayNextShowTime}):s(wn,{text:"none"})),vn="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",bn=({time:t})=>s("span",{className:`${vn} border-gray-500 text-gray-500 bg-gray-100`},t),wn=({text:t})=>s("span",{className:`${vn} border-red-600 text-red-600 bg-red-100`},t),ns=6e4;function is({startTime:t,dropTime:e,update:n}){const i=ee(),r=K(),[o,a]=w(),[,c]=w(0);return L(()=>{const d=()=>{c(Date.now()),i.nextBookTime().then(a)};return i.addListener("bookingChange",d),()=>i.removeListener("bookingChange",d)},[i]),L(()=>{if(t){a(t);return}!n||c(d=>{const u=Date.now();return u-d<ns?d:(i.nextBookTime().then(a),u)})},[i,t,n]),!o&&!e?null:s("div",{className:`flex justify-center gap-x-10 -mx-3 px-3 pb-1 ${r.bg} text-white text-sm font-semibold uppercase text-center`},s(Et,{label:"Book",time:o}),s(Et,{label:"Drop",time:e}))}function Et({label:t,time:e}){if(!e)return null;e=e.slice(0,5);const n=U().time.slice(0,5);return s("div",null,t,":"," ",s("time",{dateTime:e,className:"whitespace-nowrap"},e>n?j(e):"now"))}const ss=6e4,os=30,rs=60,St="bg1.genie.tipBoard.park",Tt="bg1.genie.tipBoard.starred",as=(t,e)=>+e.lp-+t.lp,ls=(t,e)=>(t.priority||1/0)-(e.priority||1/0),Te=(t,e)=>(e.standby.waitTime||-1)-(t.standby.waitTime||-1),Ce=(t,e)=>(t.flex.nextAvailableTime||"").localeCompare(e.flex.nextAvailableTime||""),cs=(t,e)=>t.name.toLowerCase().localeCompare(e.name.toLowerCase()),Ct=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)),us=(t,e,n)=>n?Ct(t.geo,n)-Ct(e.geo,n):0;function ds(t,e){const{n,s:i,e:r,w:o}=t.geo,[a,c]=e;return a<n&&a>i&&c<r&&c>o}function It(t){const[e,n]=t.split(":").map(Number);return e*60+n}const fs={priority:(t,e)=>as(t,e)||ls(t,e)||Te(t,e)||Ce(t,e),standby:(t,e)=>Te(t,e)||Ce(t,e),soonest:(t,e)=>Ce(t,e)||Te(t,e),nearby:(t,e,n)=>us(t,e,n),aToZ:()=>0},_s=[{value:"priority",text:"Priority"},{value:"nearby",text:"Nearby"},{value:"standby",text:"Standby"},{value:"soonest",text:"Soonest"},{value:"aToZ",text:"A to Z"}];function ms(){var T;const t=ee(),{parks:e}=t,[n,i]=w(()=>{const{id:g=e[0].id,date:D=""}=JSON.parse(sessionStorage.getItem(St)||"{}")||{};return D===U().date&&e.find(V=>V.id===g)||e[0]}),[r,o]=w([]),[a,c]=w(),d=()=>c(void 0),[u,l]=w("priority"),{loadData:_,loaderElem:m,isLoading:f}=Ge(),[,p]=w(0),[P,x]=w(()=>({current:null,begin:g=>{x($(S({},P),{current:g})),i(g.park),d()},end:(g=!1)=>{x(D=>D.current?$(S({},D),{current:null}):D),g&&d()}})),h=se(null),[v,C]=w(()=>{let g=[];try{g=JSON.parse(localStorage.getItem(Tt)||"[]")}catch(D){console.error(D)}return new Set(g)}),[A,E]=Ci(_);L(()=>{u==="nearby"&&E()},[u,E]);const b=Q((g=!0)=>{p(D=>!g&&Date.now()-D<ss?D:(_(async()=>{l(q=>(q==="nearby"&&E(),q));const V=await t.plusExperiences(n),xn=It(U().time);o(V.map(q=>{const ze=q.standby.waitTime||0,Ye=q.flex.nextAvailableTime;if(!Ye)return $(S({},q),{lp:!1});const kn=It(Ye)-xn;return $(S({},q),{lp:ze>=os&&kn<=Math.min(rs,(4-Math.trunc(q.priority||4))/3*ze)})}))}),Date.now()))},[t,n,_,E]);L(()=>{o([]),b()},[b]),L(()=>{if(f||a)return;const g=()=>{document.hidden||b(!1)};return document.addEventListener("visibilitychange",g),()=>{document.removeEventListener("visibilitychange",g)}},[a,b,f]),L(()=>{var g;(g=h.current)==null||g.scroll(0,0)},[n,u,P]),L(()=>{sessionStorage.setItem(St,JSON.stringify({id:n.id,date:U().date}))},[n]);function I(g){const V=g.currentTarget.getAttribute("data-id");!V||(v.has(V)?v.delete(V):v.add(V),localStorage.setItem(Tt,JSON.stringify([...v])),C(new Set([...v])))}const R=De(()=>e.map(g=>({value:g.id,icon:g.icon,text:g.name})),[e]),B=(T=r==null?void 0:r[0])==null?void 0:T.flex.enrollmentStartTime,N=t.nextDropTime(n);return s(Ei,{value:P},s(H,{heading:s(k,null,"G",s("span",{className:"hidden xs:inline"},"enie"),"+"),theme:n.theme,buttons:s(k,null,s(yn,{onOpen:c,onClose:d}),s(wt,{options:R,value:n.id,onChange:g=>i(e.find(D=>D.id===g)),title:"Park"}),s(wt,{options:_s,value:u,onChange:l,title:"Sort By"}),s(M,{onClick:b,title:"Refresh Tip Board"},s(Ue,null))),containerRef:h},s("div",{"aria-hidden":!!a},s(gn,null),s(is,{startTime:B,dropTime:N,update:f&&r.length>0}),s("ul",null,r.sort((g,D)=>+v.has(D.id)-+v.has(g.id)||+D.flex.available-+g.flex.available||fs[u==="nearby"&&!(A&&ds(n,A))?"priority":u](g,D,A)||cs(g,D)).map(g=>s("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",key:g.id+(v.has(g.id)?"*":"")},s("div",{className:"flex items-center gap-x-2 mt-2"},s(hs,{experience:g,starred:v,onClick:I}),s("h2",{className:"flex-1 mt-0 text-lg leading-tight truncate"},g.name),g.lp?s(Rt,{name:"Lightning Pick",icon:on,onClick:()=>c(s(ps,{onClose:d}))}):N&&g.drop?s(Rt,{name:"Upcoming Drop",icon:Di,onClick:()=>c(s(gs,{dropTime:N,onClose:d}))}):null),g.flex.preexistingPlan&&s("div",{className:"mt-2 border-2 border-green-600 rounded p-1 text-sm uppercase font-semibold text-center text-green-600 bg-green-100"},"Lightning Lane Booked"),s("div",{className:"flex flex-wrap gap-1.5 mt-2"},s(Xi,{experience:g}),s(Zi,{experience:g,onClick:D=>c(s(Ki,{experience:D,park:n,onClose:()=>{d(),b(!1)}}))}))))),!f&&s("div",{className:"mt-12 text-center"},s(rn,null)),m)),a)}function Rt({name:t,icon:e,onClick:n}){const i=K();return s("button",{title:`${t} (more info)`,className:`-mx-2 px-2 ${i.text}`,onClick:n},s(e,null))}function hs({experience:t,starred:e,onClick:n}){const i=K();return s("button",{"data-id":t.id,title:"Favorite",className:"-m-2 p-2",onClick:n},s($i,{className:e.has(t.id)?i.text:"text-gray-300"}))}function ps(t){return s(an,S({heading:"Lightning Pick"},t),s("p",null,"When an attraction with a long wait has a Lightning Lane return time in the near future, it's highlighted as a Lightning Pick. Book these quick before they're gone!"))}function gs({dropTime:t,onClose:e}){return s(an,{heading:"Upcoming Drop",onClose:e},s("p",null,"This attraction may be part of the"," ",s("time",{dateTime:t,className:"font-semibold"},j(t))," ","drop of additional Lightning Lane inventory with earlier return times than what's currently being offered. Availability varies but is always limited, so be sure you're ready to book when the drop time arrives!"))}const ys=xe,vs={success:5e3,failure:1e3};function bs({guests:t,result:e,onDone:n}){const{boardingGroup:i,conflicts:r}=e,o=t.filter(u=>!(u.id in r)),a=t.filter(u=>u.id in r),[c,d]=w(!0);return L(()=>{setTimeout(()=>d(!1),vs[i?"success":"failure"])},[i]),s(k,null,i?s(k,null,s("h2",{className:"mt-5 text-xl"},"Boarding Group: ",i),s(W,{guests:o}),Object.keys(r).length>0&&s(k,null,s("p",{className:"font-semibold"},"These guests could not join:"),s(W,{guests:a,conflicts:r})),s("p",null,"Refer to the My Disney Experience app for return time and other information.")):s(k,null,s("h2",{className:"mt-5 text-xl"},"Sorry!"),s("p",null,"A boarding group could not be obtained."),s(W,{guests:a,conflicts:r})),c?null:s(F,{onClick:n},"Done"))}function ws({guests:t,party:e,onToggle:n,onConfirm:i}){return s(k,null,s("div",{className:"mt-5"},s("h2",{className:"inline mr-3 text-xl"},"Choose Your Party"),s(rn,null)),t?t.length>0?s(W,{guests:t,selectable:{isSelected:r=>e.has(r),onToggle:n}}):s("p",null,"No guests available"):s("p",null,"Loading guests\u2026"),s(F,{disabled:e.size===0,onClick:i},"Confirm Party"))}function xs({queue:t}){return s(k,null,t.howToEnterMessage.split(`

`).map((e,n)=>s("p",{key:n},e)))}const ks=999;function Ns({guests:t,joinQueue:e,onEdit:n}){const[i,r]=w(!1),[o,a]=ke();async function c(){r(!0),a("");const d=sn(ks);try{await e()||a("Queue not open yet")}catch(u){a("Error: try again","error"),u instanceof me||console.error(u)}finally{await d,r(!1)}}return s(k,null,s("div",{className:"mt-4"},s("h2",{className:"inline mr-3 text-xl"},"Your Party"),s(M,{type:"small",onClick:n},"Edit")),s(W,{guests:t}),s(F,{disabled:i,onClick:c},"Join Boarding Group"),o)}function Es({queue:t,queues:e,onChange:n}){e||(e=[]);const{bg:i}=K(),r=`block w-full ${i} text-white text-xl font-semibold`;return s(k,null,e.length<=1?s("span",{className:`${r} px-1 truncate`},t.name):s("select",{className:`${r} pr-1`,value:t.id,onChange:o=>n?n(o.currentTarget.value):null},e.map(o=>s("option",{key:o.id,value:o.id,className:"text-base font-normal"},o.name))))}const Pt=t=>t.categoryContentId==="attraction";function Ss(){const t=ys(),[e,n]=w(),[i,r]=w(null),[o,a]=w(),[c,d]=w(new Set),[u,l]=w({boardingGroup:null,conflicts:{},closed:!0}),[_,m]=w(!1),[f,p]=w("ChooseParty"),[P,x]=ke(),h=se(null),v=Q(async()=>{x(""),m(!0);const N=(await t.getQueues()).filter(T=>T.isAcceptingJoins||T.isAcceptingPartyCreation).sort((T,g)=>+Pt(g)-+Pt(T)||T.name.localeCompare(g.name));m(!1),n(T=>(T&&N.length===0&&x("No queues available"),N))},[t,x]);L(()=>{v();const N=()=>{document.hidden||v()};return document.addEventListener("visibilitychange",N),()=>{document.removeEventListener("visibilitychange",N)}},[v]),L(()=>{r(N=>{const T=N&&(e==null?void 0:e.find(g=>g.id===N.id));return T||(a(void 0),e&&e.length>0?e[0]:null)})},[e]),L(()=>{if(o||!i)return;let N=!1;return(async()=>{const T=await t.getLinkedGuests(i);N||(a(T),d(new Set(T.filter(g=>g.isPreselected))))})(),()=>{N=!0}},[t,i,o]),L(()=>{var N;(N=h.current)==null||N.scroll(0,0)},[f]);function C(N){const T=new Set(c);T[T.has(N)?"delete":"add"](N);const g=Number(i==null?void 0:i.maxPartySize);g>0&&T.size>g?x(`Maximum party size: ${g}`):(d(T),x(""))}function A(N){const T=e==null?void 0:e.find(g=>g.id===N);T&&(r(T),a(void 0))}async function E(){if(!i||!(await t.getQueue(i)).isAcceptingJoins)return!1;const N=await t.joinQueue(i,[...c]);return l(N),p("BGResult"),N.boardingGroup!==null&&cn(),!0}if((e==null?void 0:e.length)===0)return s(H,{heading:"No Active Queues"},s("p",null,"You can't join any virtual queues just yet. Check back within an hour of the queue opening time, or tap the Refresh button to check again."),s(F,{disabled:_,onClick:v},"Refresh"),P);if(!i)return s("div",null);const b=(o||[]).filter(N=>c.has(N)),I=s(hn,{resort:t.resort,time:i.nextScheduledOpenTime,label:"Next queue opening"}),R=s(Es,{queue:i,queues:f==="ChooseParty"?e:[],onChange:A});return{ChooseParty:s(H,{heading:R,containerRef:h},s(xs,{queue:i}),I,s(ws,{guests:o,party:c,onToggle:C,onConfirm:()=>p("JoinQueue")}),P),JoinQueue:s(H,{heading:R},I,s(Ns,{guests:b,onEdit:()=>p("ChooseParty"),joinQueue:E})),BGResult:s(H,{heading:R},s(bs,{guests:b,result:u,onDone:()=>p("ChooseParty")}))}[f]}const Le=new qn("bg1.auth");ci(origin)?Lt(new di({origin,authStore:Le}),Ss):ai(origin)?Me.load({origin,authStore:Le}).then(t=>Lt(t,ms)):location.href="https://joelface.github.io/bg1/start.html";async function Lt(t,e){Qn({WDW:"America/New_York",DLR:"America/Los_Angeles"}[t.resort]),document.title="BG1",Cs(),Ts(),Is().render(s(fi,{value:t},s(Ni,{authStore:Le},s(e,null))))}function Ts(){document.body.addEventListener("click",()=>null)}function Cs(){const t=document.createElement("meta");t.name="viewport",t.content="width=device-width, initial-scale=1, maximum-scale=1",document.head.appendChild(t)}function Is(){const t=document.createElement("div");return t.id="app",document.body.appendChild(t),Jn(t)}
